ORIGIN 'aux'
---asgToNewRep:doPart---
do (rA[],false,isValueRep,true,size) -> gen.newRep
   (# genRange::
        (#
        do 3 -> (theRange -> mch.newCstOp).toPrimDest 
        #)
   #);
   aR.alloc; 
   aR -> rAelm.reg; size -> rAelm.size; rAelm.freezeReg;
   (rA[],aR[]) -> mch.ldVal;
   (if rA[] -> gen.useTmpReg then 
       rA.theReg -> RR; 
       (rA[],RR[]) -> mch.gLea;
       RR[] -> mch.push; true -> restore_rA;
       RR.deAlloc 
   if);
   (* Generate elements in INNER;
    * NextElmAdr gives address of next element
    *)
   INNER; 
   (if restore_rA then
       (# AA: @mch.RegAdr
       do AA.reg.alloc;
          AA.reg[] -> mch.pop;
          AA[] -> rA[]
       #)
   if);
   (aR[],rA[]) -> mch.stVal; (* someone might have manipulated the
                              * repetition during evaluation of INNER
                              *)
   false -> rAelm.frozenREg;
   aR.deAlloc;
