ORIGIN 'minienv';
REQUIRES B 'minienv'
---minienv_lib:attributes---
Queue: @
  (#
     Queue:
       (# element:< object;
          isEmpty: 
            (# value: @boolean
            do head[] = none -> value
            exit value
            #);
          insert:
            (# P: ^| element; E: ^elem
            enter P[]
            do P[] -> elem -> E[];
               (if last[] <> none then
                   E[] -> last.next[] ;
               if);
               E[] -> last[];
               (if head[] = none then last[] -> head[] if)
            #);
          next:
            (# P: ^| element
            do (if head[] <> none then 
                   head.P[] -> P[];
                   head.next[] -> head[];
               if)
            exit P[]
            #);
          scan:
            (# current: ^| element; E: ^elem
            do head[] -> E[];
               L: (if E[] <> none then
                      E.P[] -> current[];
                      inner;
                      E.next[] -> E[];
                      restart L
                  if)
            #);
          elem:
            (# P: ^| element;
               next: ^elem;
            enter P[]
            exit this(elem)[]
            #);
          head, last: ^elem
            
       #);     
  #)
