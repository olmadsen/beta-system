ORIGIN 'com';
LIB_ITEM 'betacompiler'
---comPrivate:descriptor--
(* Used keys:
 * 1: 
 * 2:
 * 3:
 * 4:
 * 5:
 *)
(# keys: [10] @integer;
   top: (#exit 6 #)
#)
--comCount:doPart--
do priv.keys[key] + 1 -> priv.keys[key]
--comPrint:descriptor---
(# extra,sum: @integer
do '\nThe following V-entries are generated:\n'->tracestream.puttext;
   (for i: priv.top repeat
        i-> tracestream.putint; ':'->tracestream.put;
        (if i
         // 1 then 'No V-entry      : ' -> tracestream.puttext;
            0 -> extra
         // 2 then 'Simple V-entry  : ' -> tracestream.puttext;
            4 -> extra
         // 3 then 'Dynamic V-entry : ' -> tracestream.puttext;
            3 -> extra
         // 4 then 'General V-entry : ' -> tracestream.puttext;
            3 -> extra
         // 5 then 'No. of statAlloc: ' -> tracestream.puttext;
            1 -> extra
         // 6 then 'No. of dynAlloc : ' -> tracestream.puttext;
            -2 -> extra
         else
            'Unknown: ' -> traceStream.puttext
        if);
        priv.keys[i] -> tracestream.putint; 
        '\t'->tracestream.put; extra -> tracestream.putint;
        '\t'->tracestream.put; extra * priv.keys[i] -> tracestream.putint;
        sum + extra * priv.keys[i] -> sum;
        tracestream.newline;
        (if i 
         // 4 then
            'Total             : '->tracestream.puttext;
            priv.keys[1] + priv.keys[2] + priv.keys[3] + priv.keys[4]  
              -> tracestream.putint; newline; newline;
            'The split of allocations are:\n'->tracestream.puttext;
         // 6 then
            'Total             : '->tracestream.puttext;
            priv.keys[5] + priv.keys[6] -> tracestream.putint; 
            newline; newline
            
        if)
   for);
   'Code difference: '->tracestream.puttext; sum -> tracestream.putint;
   ' (longs) ' -> tracestream.puttext;
   4*sum -> tracestream.putint; ' (bytes)\n' ->tracestream.puttext;
#)

   
