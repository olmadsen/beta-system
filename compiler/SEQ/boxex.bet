origin 'boxes'
--- program: descriptor ---
(# myG: @guienv
     (# aWindow: @window
          (# AddBox: @ NewBox;
             AddConn: @ NewConn;
             B1,B2,B3,B4,B5: ^BoxWithText;
             open:: 
               (# 
               do (100, 100)->position;
                  (600, 300)->size;
                  'Sequence diagram'->title;
                  AddBox.init;
                  AddConn.init;
               #);
             first:
               (#
               do 'Hello world' -> AddBox -> B1[];
                  'How are you' -> AddBox -> B2[];
                  'I am fine' -> AddBox -> B3[];
                  (B1[],B2[],'foo') -> AddConn;
                  (B2[],B3[],'bar') -> AddConn;

               #);
             second:
               (#
               do 'So am I' -> AddBox -> B4[];
                  'This is fun' -> AddBox -> B5[];
                  (B3[],B4[],'snorf') -> AddConn;
                  (B3[],B5[],'fisk') -> AddConn;
                  (B5[],B4[],'snif') -> AddConn;
                  B3[] -> AddConn.endCall;
                  B5[] -> AddConn.endCall;
                  (B2[],B4[],'hest') -> AddConn;
                  (B2[],B3[],'fugl') -> AddConn;
                  B2[] -> AddConn.endCall;
                  B1[] -> AddConn.endCall;

               #);
             eventhandler:: 
               (# onAboutToClose:: (# do terminate #); 
                  onMouseDown::
                    (#
                    do n+1 -> n;
                       (if n
                        // 1 then myG.aWindow.first;
                        // 2 then myG.aWindow.second
                       if)
                    #)
               #);
          #);
        n: @integer
     do aWindow.open;
     #);
do myG
   
#)
