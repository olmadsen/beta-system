ORIGIN '../elfread';
--PROGRAM: descriptor--
(# ef: @elfreader(# gs: @getString #);
   puthex: (* I do not trust the one in formatio (:-) *)
     (# i: @integer;
        printf: external
          (# fmt: [0]@char;
             val: @integer;
          enter (fmt,val)
          #);
     enter i
     do ('0x%08x\t', i) -> printf;
     #);
   name: ^text;
do (if NoOfArguments>1 then
       'Notice: arguments ignored!' -> putline;
   if);
   machine_type -> name[];
   '/scansymbols.o' -> name.append;
   name[] -> ef.name;
   ef.openread;
   'Symbols in ' -> screen.puttext; name[] -> screen.putline;
   ef.scanAllSyments
   (# 
   do current_inx -> putint; ascii.ht->put; 
      current.st_value -> puthex;
      (current_sec.sh_link, current.st_name)-> ef.gs -> putline
   #);
#)
