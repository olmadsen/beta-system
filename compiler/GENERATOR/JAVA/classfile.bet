ORIGIN '~beta/basiclib/binfile';
INCLUDE 'java_opcodes';
INCLUDE 'classfiledefs';
BODY 'classfilebody';

(* classfile.bet:
 *   Pattern for manipulating Java class files.
 * 
 *   See http://java.sun.com/docs/books/vmspec/2nd-edition/html/ClassFile.doc.html
 *
 *   $Id: classfile.bet,v 1.2 2002-06-12 14:00:25 datpete Exp $
 *)


--LIB: attributes--

classfile: binfile
  (# 
     <<SLOT ClassFileLib: attributes>>;
     
     putHeader:
       (* Put class header on file *)
       (# magic: @int32u;
          minor, major: @int16u;
       enter (magic, minor, major)
       <<SLOT ClassFilePutHeader: dopart>>
       #);
     
     constant_pool: @constant_pool_table;
     
     putAccessFlags:
       (* Put access_flags on file. Use %Bor between multiple flags *)
       (# access_flags: @int16u;
       enter access_flags
       <<SLOT ClassFilePutAccessFlags: dopart>>
       #);
     
     putThisClass:
       (* Put constant pool index of this class on file *)
       (# this_class: @int16u;
       enter this_class
       <<SLOT ClassFilePutThisClass: dopart>>
       #);
     
     putSuperClass:
       (* Put constant pool index of supper class on file *)
       (# super_class: @int16u;
       enter super_class
       <<SLOT ClassFilePutSuperClass: dopart>>
       #);
     
     interfaces: @interface_table;
     
     fields: @field_table;

     methods: @method_table;
     
     attributes: @Attribute_table;

     
  #);
