origin 'REALmachine';
---lib:attributes---
sPuthex: (* problems with the one in machine for 0xFFC00000*)
  (# n: @integer;
     emit: @
       (# v: @integer;
          put: @
            (# c: @integer 
            enter c 
            do (if c < 10 then '0'+c->screen.put else 'A'+c-10->screen.put if)
            #)
       enter v
       do v div 16 -> put;
          v mod 16 -> put          
       #);
     zero: @
       (#
       do '0'->screen.put; '0'->screen.put
       #);
     v: @integer
  enter n
  do '0x'->screen.putText;
     (if ((0->n.%getByte)->v) <> 0 then v-> Emit else zero if);    
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[0]'->v) <> 0 then v-> Emit else zero if); *)
     (if ((1->n.%getByte)->v) <> 0 then v-> Emit else zero if);    
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[1]'->v) <> 0 then v-> Emit else zero if); *)
     (if ((2->n.%getByte)->v) <> 0 then v-> Emit else zero if);
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[2]'->v) <> 0 then v-> Emit else zero if); *)
     (3->n.%getByte)->emit
     (* Above line tos_converted from: @@n->TOS'%adrGetByte[3]'->emit *)
  #);
---machineatt:attributes---
bcPuthex: (* problems with the one in machine for 0xFFC00000*)
  (# n: @integer;
     emit: @
       (# v: @integer;
          put: @
            (# c: @integer 
            enter c 
            do (if c < 10 then '0'+c->BC.putC else 'A'+c-10->BC.putC if)
            #)
       enter v
       do v div 16 -> put;
          v mod 16 -> put          
       #);
     zero: @
       (#
       do (if putLeadingZeros then '0'->BC.putC; '0'->BC.putC if)
       #);
     putLeadingZeros: @boolean; v: @integer
  enter(n,putLeadingZeros)
  do '0x'->BC.putT;
     (if ((0->n.%getByte)->v) <> 0 then v-> Emit else zero if);    
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[0]'->v) <> 0 then v-> Emit else zero if); *)
     (if ((1->n.%getByte)->v) <> 0 then v-> Emit else zero if);    
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[1]'->v) <> 0 then v-> Emit else zero if); *)
     (if ((2->n.%getByte)->v) <> 0 then v-> Emit else zero if);
     (* Above line tos_converted from: (if (@@n->TOS'%adrGetByte[2]'->v) <> 0 then v-> Emit else zero if); *)
     (3->n.%getByte)->emit
     (* Above line tos_converted from: @@n->TOS'%adrGetByte[3]'->emit *)
  #);
