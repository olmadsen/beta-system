ORIGIN 'tstenv';
BUILD dotnet 'googleapi/dotnet/GoogleSearchService.dll' 'googleapi/dotnet/GoogleSearchService.cs' 'csc -target:library -out:$0 $1';
MDBODY dotnet 'google_dotnetbody';

(* Do a search on the Google web service.
 * Requires that you go to http://www.google.com/apis/ and from here
 *   1. get yourself a license key and replace the one below with it (please!)
 *   2. download the API and 
 *   3. extract it to subdirectory 'googleapi'
 *)
---LIB:attributes---
BetaLicenseKey: 
  (* The Google API License key for beta@daimi.au.dk.
   * Used by default below.
   * PLEASE REPLACE with your own key, if you want to use this service.
   *)
  (# exit 'hweCKhQvbXY6kvKmOpDS2P3lTqQ5ggBu' #);

SearchGoogle:
  (# license: ^text;
     query: ^text;
     current: ^text;
  enter (license[], query[])
  <<SLOT DoSearchGoogle: dopart>> (* INNER called once for every result *)
  #);
     
---program:descriptor---
(# query: ^text;
   i: @integer;
do (if false then 
       'Search term for Google: ' -> puttext;
       getLine -> query[];
    else
       'Ole Lehrmann Madsen BETA.NET' -> query[];
   if);
   'Results for Google search: ' -> putText; query[] -> putLine;
   (BetaLicenseKey, query[]) 
     -> SearchGoogle(# 
                    do i -> putInt; '. ' -> putText;
                       current -> putText;
                       newline;
                       i+1 -> i;
                    #);
 
#)
   


