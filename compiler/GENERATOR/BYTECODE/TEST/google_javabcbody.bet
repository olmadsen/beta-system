ORIGIN 'google';
LIBFILE javabc 'googleapi/googleapi.jar';

--LIB: attributes--

String: ExternalClass
  (# 
  do 'java/lang/String' -> className;
  #);
GoogleSearch: ExternalClass
  (# setKey: proc 
       (# key: ^String;
       enter key[]
       #);
     setMaxResults: proc
       (# max: @integer
       enter max
       #);
     setQueryString: proc
       (# q: ^String;
       enter q[]
       #);
     doSearch: proc
       (# r: ^GoogleSearchResult
       exit r[]
       #);
  do 'com/google/soap/search/GoogleSearch' -> classname;
  #);

GoogleSearchResult: ExternalClass
  (# toString: proc
       (# s: ^String;
       exit s[]
       #);
  do 'com/google/soap/search/GoogleSearchResult' -> className;
  #);


--SearchGooglePrivate:descriptor--
(# google: ^GoogleSearch;
   result: ^GoogleSearchResult;
#)

--DoSearchGoogle: dopart--
do (if private.google[]=NONE then
       &GoogleSearch[] -> private.google[];
       BetaLicenseKey -> private.google.setKey;
       10 -> private.google.setMaxResults;
   if);
   query[] -> private.google.setQueryString;
   private.google.doSearch -> private.result[];
   'google result: ' -> putline;
   private.result.toString -> putline;
