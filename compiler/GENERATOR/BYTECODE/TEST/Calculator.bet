ORIGIN 'tstenv'
-- lib: Attributes --
Calculator: class
  (# val: @integer; 
     add: proc
       (# N: @integer
       enter N 
       do val + n -> val 
       #); 
     sub: proc
       (# N: @integer
       enter N  
       do val - n -> val  
       #); 
     mul: proc
       (# N: @integer
       enter N  
       do val * n -> val  
       #); 
     divv: proc
       (# N: @integer
       enter N  
       do val div n -> val  
       #);
     reg: proc (# do exit val #); 
     double5: proc
       (#
       do (if val = 5 then 10 -> val else 0 -> val if);
       #);
     dummy: proc
       (# a: @integer 
       do 0 -> a;
          11 -> val;
          a -> val;
          a *2 -> val
       #)
  #);   
-- program: Descriptor --  
(# X: ^Calculator;
   V: @integer 
do &Calculator[]->X[];      
   19 -> X.add;  
   10 -> X.sub;    
   4 -> X.mul;
   7 -> X.divv; 
   X.reg -> V;
   V -> putint;  
   newline;
   X.double5;
   X.reg -> V;
   V -> putint;
   newline
#)
  
 
  
