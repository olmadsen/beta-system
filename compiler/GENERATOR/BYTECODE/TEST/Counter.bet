ORIGIN 'tstenv'
-- lib: Attributes --
Counter: class
  (# val: @integer; 
     foo: proc(# n: @integer do val -> val #);
     inc: proc
       (# N: @integer
       enter N 
       do val + n -> val 
       #); 
     dec: proc
       (# N: @integer
       enter N  
       do val - n -> val  
       #); 
     get: proc(# N: @integer do val -> N exit N #);
     inc2: proc
       (# n1,n2: @integer 
       enter(n1,n2)  
       do val + n1 + n2 -> val
       #); 
     inc2get: proc 
      (# n1,n2: @integer 
       enter(n1,n2) 
      do val + n1 + n2 -> val; 
      exit val
      #)  
  #);   

-- program: Descriptor --  
(# X: ^Counter;   
   V: @integer 
do 'Counter example:'->putline;
   &Counter[]->X[];    
   19 -> X.inc;  
   10 -> X.dec;   
   (5,6)->X.inc2;
   X.get -> V; 
   V -> putint;  
   newline; 
   (11,12) -> X.inc2get -> V;
   V -> putint;  
   newline
#)
  
 
