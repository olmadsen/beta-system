ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/javalib/java/lang/String';
PACKAGE 'org.eclipse.ui.betaeditor.beta';

---LIB:attributes---

BetaAutoIndentStrategy: DefaultAutoIndentStrategy
  (# __init: 
       (# 
       do %setup 'betaenv'; 
       #);
     customizeDocumentCommand: proc
       (# d: ^IDocument; c: ^DocumentCommand; S: ^String;
       enter(d[],c[])
       do 'customizeDocumentCommand: BETA putline!' -> putline;
          c.text[] -> S[];
          (if false then
              (* Verification error *)
              (if true
               // ('\t' -> S.equals) then 'indent' -> putline;
               // ('\n' -> S.equals) then 'newLine' -> putline;
               else
                  'insert: ' -> puttext; S[] -> putline;
              if);
           else
              (if true
               // ('\t' -> S.compareTo_String)=0 then 'indent' -> putline;
               // ('\n' -> S.compareTo_String)=0 then 'newLine' -> putline;
               else
                  'insert: ' -> puttext; S[] -> putline;
              if);

          if);
       #);
     (* Do not specify class name: compiler will think this is an external class
      * and not generate anything.q
      * 
      * 
      * do 'org/eclipse/ui/betaeditor/beta/BetaAutoIndentStrategy' -> className
      *)
  #);

(* External classes used *)
IDocument: externalClass
  (#
     get: proc
       (# result: ^String;
       exit result[]
       #);
  do '|org/eclipse/jface/text/IDocument' -> className;
  #);
DocumentCommand: externalClass
  (# text: ^String
  do 'org/eclipse/jface/text/DocumentCommand' -> className;
  #);
DefaultAutoIndentStrategy: externalClass
  (# 
  do 'org/eclipse/jface/text/DefaultAutoIndentStrategy' -> className;
     INNER
  #);



