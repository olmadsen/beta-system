origin '~beta/basiclib/betaenv'; 
package 'org.eclipse.ui.betaeditor.beta';

---LIB:attributes---
String: externalClass
  (# equal: proc
       (# S: ^String; B: @boolean
       enter S[]
       exit B
       #)
  do 'java/lang/String' -> classname
  #);
IDocument: externalClass
  (#
  do 'org/eclipse/jface/text/IDocument' -> className;
  #);
DocumentCommand: externalClass
  (# text: proc
       (# t: ^String
       exit T[]
       #)
  do 'org/eclipse/jface/text/DocumentCommand' -> className;
  #);
DefaultAutoIndentStrategy: externalClass
  (# 
  do 'org/eclipse/jface/text/DefaultAutoIndentStrategy' -> className;
     INNER
  #);
BetaAutoIndentStrategy: DefaultAutoIndentStrategy
  (# __init: 
       (# 
       do %setup 'tstenv'; 
       #);
     writeLn: External   
       (# s: ^String;
       enter s[] 
       do 'java/io/PrintStream/println(Ljava/lang/String;)V' -> callC 
       #);
     customizeDocumentCommand: proc
       (# d: ^IDocument; c: ^DocumentCommand; S: ^String
       enter(d[],c[])
       do 'customizeDocumentCommand BETA'->writeln;
          'customizeDocumentCommand: putline!' -> putline;
          (if false then
              c.text -> S[];
              (if true
               // '\t' -> S.equal then 'indent' -> putline;
               // '\n' -> S.equal then 'newLine' -> putline;
               else
              if)
          if);
       #);
     (* Do not specify class name: compiler will think this is an external class
      * and not generate anything.
      * do 'org/eclipse/ui/betaeditor/beta/BetaAutoIndentStrategy' -> className
      *)
  #)


