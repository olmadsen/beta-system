ORIGIN '~beta/basiclib/betaenv'; 
(* Requires jstringuser.java with class file in jvm;
 * OBS! job file must be fixed and rerurn after
 * compilation: remove String from jar-directive
 *)
BUILD jvm 'jvm/jstringuser.class' 'jstringuser.java' 'javac jstringuser.java; mv jstringuser.class jvm';
INCLUDE '~beta/javalib/java/lang/String'
---lib:attributes---
jstringuser: externalclass
  (# show: static_proc
       (# S: ^String
       enter S[] 
       #);       
     display: proc
       (# S: ^String
       enter S[] 
       #);
     get: proc 
       (# S: ^String 
       exit S[]
       #);
  do
  #);
staticdisplay2: external (* static method in jstringuser *)
  (# S1, S2: ^String 
  enter (S1[], S2[]) 
  do 'static jstringuser/staticdisplay2(Ljava/lang/String;Ljava/lang/String;)V' 
       -> callC;
  #);
VeryFinal:(# exit 'Very final ' #);
Greetings: (# exit 'greetings ' #);
FromBETA: (# T: ^text do 'from BETA'->T[] exit T[] #)
---program:descriptor---  
(# X: ^jstringuser; 
   T: ^ text;  
do &jstringuser[] -> X[]; 
  'Greatings from BETA' -> X.display;
   'More greatings from BETA' -> T[];
   T[] -> X.display;
   X.get -> T[]; 
   T[] -> putline; 
   'Final greetings ' -> T[];
   (T[],'from BETA') -> staticdisplay2;
   VeryFinal-> X.display;
   (Greetings,fromBETA) -> staticdisplay2; 
   'Static greetings' -> jstringuser.show 
#) 


 



  
 
 
  
 
