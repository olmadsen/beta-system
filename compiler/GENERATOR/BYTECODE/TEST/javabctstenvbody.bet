LIB_ITEM 'tstenv'; 
origin 'tstenv'
--lib: attributes--
String: ExternalClass
  (# 
     indexOf: proc
       (# match: ^String;
          index: @integer;
       enter match[]
       exit index
       #);
     substring: proc
       (# start, end: @integer;
          sub: ^String;
       enter (start, end)
       exit sub[]
       #);
  do 'java/lang/String' -> className;
  #);

---put:doPart--
do (# write: External   
        (# ch: @char
        enter ch
        do 'java/io/PrintStream/print(C)V' -> callC 
        #);
   do ch -> write 
   #)   
---putint:doPart--
do (# write: External   
        (# ch: @char
        enter ch
        do 'java/io/PrintStream/print(I)V' -> callC 
        #);
   do n -> write 
   #)   
---newline:doPart---
do '\n' -> put
   
--getline:doPart--
do '(getLine not yet implemented for Java)' -> putline;
   &text[] ->T[];
   
   (* Java IO stuff from the net:
    * 
    * One version found on the net:
    * 
    * String currentLine;
    * BufferedReader reader; // from java.io
    * reader = new BufferedReader(new InputStreamReader(System.in));
    * try {
    *   while ((currentLine = reader.readLine()) != null) {
    *         // ... process current line
    *   }
    * } catch (IOException e) { /* ... */ }
    * 
    * Another version found on the net:
    * 
    * public static String readLn() {
    *         //set aside memory for the keyboard input
    *         byte [] byteArray = new byte[300];
    *         
    *         //things which could fail should be enclosed
    *         // in a try/catch statement
    *         try {
    *             // read stdin into the byte array.
    *             System.in.read(byteArray);
    *         } catch (Exception e) {
    *             // if there is a failure, print an error
    *             e.printStackTrace();
    *         }
    *         
    *         //make a String from the array of bytes
    *         String result = new String(byteArray);
    * 	
    *         //check for a return character, and only
    *         //keep the characters up to the return
    *         int newLineIndex = result.indexOf("\n");
    *         result = result.substring(0,newLineIndex);
    *         
    *         return result;
    *     }
    * 
    * Another version found on the net:
    * // This class takes care of the input just use read.GetString() 
    * // to take the input as string
    * as vice versa
    * 
    * import java.io.*;
    * 
    * public class read {
    *   static BufferedReader In = new BufferedReader( new     
    *                          InputStreamReader(System.in));
    *   
    *   
    *   // GetInt will ignore ANY input other than a valid integer
    *   public static int GetInt() throws java.io.IOException {
    *     while (true) {
    *       try {
    *     String s = (In.readLine()).trim();
    *     int y = (new Integer(s)).intValue();
    *     return y;
    *       }
    *       catch (java.lang.NumberFormatException e) {
    *       }
    *     }
    *   }
    *   
    *   // GetLong will ignore ANY input other than a valid long integer
    *   public static long GetLong() throws java.io.IOException {
    *     while (true) {
    *       try {
    *     String s = (In.readLine()).trim();
    *     long y = (new Long(s)).longValue();
    *     return y;
    *       }
    *       catch (java.lang.NumberFormatException e) {
    *       }
    *     }
    *   }
    *   
    *   // GetFloat will ignore ANY input other than a valid floating point number
    *   public static float GetFloat() throws java.io.IOException {
    *     while (true) {
    *       try {
    *     String s = (In.readLine()).trim();
    *     float y = (new Float(s)).floatValue();
    *     return y;
    *       }
    *       catch (java.lang.NumberFormatException e) {
    *       }
    *     }
    *   }
    *   
    *   // GetDouble will ignore ANY input other than a valid double-precision 
    *   //    floating point number
    *   public static double GetDouble() throws java.io.IOException {
    *     while (true) {
    *       try {
    *     String s = (In.readLine()).trim();
    *     double y = (new Double(s)).doubleValue();
    *     return y;
    *       }
    *       catch (java.lang.NumberFormatException e) {
    *       }
    *     }
    *   }
    *   
    *   public static char GetChar() throws java.io.IOException {
    *     char c = (char) In.read();
    *     return c;
    *   }
    *   
    *   public static String GetString() throws java.io.IOException {
    *     String s = (In.readLine()).trim();
    *     return s;
    *   }
    *   
    *   public static void FlushInput() throws java.io.IOException {
    *     String s = (In.readLine());
    *   }
    * }
    *)
