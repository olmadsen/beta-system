LIB_ITEM 'tstenv'; 
ORIGIN 'tstenv';
(*INCLUDE 'javastring';*)
--lib: attributes--

String: ExternalClass
  (# 
  do 'java/lang/String' -> className;
  #);
writeI: External   
  (# ch: @char
  enter ch
  do 'java/io/PrintStream/print(I)V' -> callC 
  #);
writeC: External   
  (# ch: @char
  enter ch
  do 'java/io/PrintStream/print(C)V' -> callC 
  #);
BufferedReader: ExternalClass
  (# readLine: proc
       (# result: ^String;
       exit result[]
       #);
  do 'java/io/BufferedReader' -> classname;
  #);
Reader: ExternalClass
  (# 
  do 'java/io/Reader' -> classname;
     INNER;
  #);
InputStreamReader: Reader
  (# 
  do 'java/io/InputStreamReader' -> classname;
  #);
System: ExternalClass
  (# in: ^InputStream;
  do 'java/lang/System' -> classname;
  #);
InputStream: ExternalClass
  (# 
  do 'java/io/InputStream' -> classname;
  #);
---put:doPart--
do ch -> writeC
---putint:doPart--
do n -> writeI 
---newline:doPart---
do '\n' -> put
   
--getline:doPart--
do (*'(getLine not yet implemented for Java)' -> putline;*)
   &text[] ->T[];
   
   (* Here is how to in java, but references static fields of System.
    * How do we load them i BETA?
    * Furthermore use constructors with arguments.
    * 
    * import java.io.*;
    * 
    * class readline {
    *   public static String ReadLine(){
    * 	  BufferedReader reader;
    * 	  reader = new BufferedReader(new InputStreamReader(System.in));
    * 	  try {
    * 	    return reader.readLine();
    * 	  } catch (IOException e) {
    *       return "";
    *     }
    * }
    * 
    * Bytecode:
    * 
    * Method name:"ReadLine" public static Signature: 27=()java.lang.String                    
    * Attribute "Code", length:71, max_stack:5, max_locals:2, code_length:27                   
    *   0: new #2=<Class java.io.BufferedReader>                                               
    *   3: dup                                                                                 
    *   4: new #3=<Class java.io.InputStreamReader>                                            
    *   7: dup                                                                                 
    *   8: getstatic #4=<Field java.lang.System.in java.io.InputStream>                        
    *  11: invokespecial #5=<Method java.io.InputStreamReader.<init> (java.io.InputStream)void>
    *  14: invokespecial #6=<Method java.io.BufferedReader.<init> (java.io.Reader)void>        
    *  17: astore_0                                                                            
    *  18: aload_0                                                                             
    *  19: invokevirtual #7=<Method java.io.BufferedReader.readLine ()java.lang.String>        
    *  22: areturn                                                                             
    *  23: astore_1                                                                            
    *  24: ldc #9=<String "">                                                                  
    *  26: areturn                                                                             
    *)
   















