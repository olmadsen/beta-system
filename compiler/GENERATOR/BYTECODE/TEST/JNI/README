Purpose:
========

Calling standard C function 

  extern void hello(const char *);

as specified in realhello.h and implemented in realhello.c
from the JAVA program helloworld.java and from the BETA program
helloworld.bet.

JNI roadmap
===========

To do the above the following files are involved to set up the JNU
glue required. First the user must write two files by hand:

  hellolib.java
     JNI Wrapper class declaring native function hello
  hellolib.c
     C file implementing JNI style C wrapper for actual hello()
     call (that is, the hello() in the actual external library
     realhello).

Actually hellolib.c is best written after the JNI wrapper class has
been used to produce a JNI wrapper header file, see below.

The process of building the entire JNI glue is as follows:

  +->file: hellolib.java (hand written)
  |
  |
  `->exec: javac -d jvm hellolib.java 
  |
  |
  `->file: jvm/beta/hellolib.class (JNI wrapper class with native method)
  |
  |
  `->exec: javah -jni -d jvm -classpath jvm beta.hellolib
  |
  |
  `->file: jvm/beta_hellolib.h (JNI wrapper C header)
  +->file: hellolib.c (hand written)
  |
  |
  `->exec: $(CC) -c -I . -I jvm $(JNI_INCLUDE) -o jvm/hellolib.o hellolib.c
  |
  |
  `->file: jvm/hellolib.o (normal platform dependent object file)
  +->file: jvm/realhello.o (real library to call into - could be .a file too)
  |
  |
  `->exec: $(LD) -o jvm/libhellolib.so jvm/hellolib.o jvm/realhello.o
  |
  |
  `->file: jvm/libhello.so (platform dependent shared library)

Now BETA/JAVE can make a normal instance call into hellolib.hello()
which will cause dynamic load of shared library (platform dependent
library path must be set: UNIX: LD_LIBRARY_PATH, Windows: LIB), which
will subsequently call the actual external function hello().

The above procedure is handled for JAVA using the GNUmakefile:
   gmake java
For BETA you just call
   jbeta helloworld.bet
which use the BUILD mechanism to do the above (for solaris only!).
For completeness you can call 
   gmake beta
which does the same and then executes the BETA generated program.

Platform dependencies:
=====================

Include paths must include the platform dependent subdirectory of you
JAVAHOME/include. I.e. on solaris you must include
JAVAHOME/include/solaris to get your JNI C wrapper compiled!!
Abstracted into JNI_INCLUDE above.

Platform dependent library path must be specified.

The GNUmakefile and BUILD assumes that you specify JAVAHOME, which
defines where your JDK installation is (type 'which java' and remove
the trailing 'bin/java' should get you a working path, if you are in
doubt).

References:
-----------

JNI tutorial:
 
http://java.sun.com/docs/books/tutorial/native1.1/stepbystep/
 
JNI reference:
 
http://java.sun.com/docs/books/jni/html/jniTOC.html

