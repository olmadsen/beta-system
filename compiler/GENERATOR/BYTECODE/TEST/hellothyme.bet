ORIGIN 'tstenv';
---LIB:attributes---

String: ExternalClass
  (# 
  do '[mscorlib]System.String' -> classname;
  #);
Form: ExternalClass
  (# set_Text: proc
       (* Property *)
       (# t: ^String;
       enter t[]
       #);
     onPaint:< proc
       (# e: ^PaintEventArgs;
       enter e[]
          do INNER;
       #);
  do '[System.Windows.Form]System.Windows.Form' -> classname;
  #);
PaintEventArgs: ExternalClass
  (# get_Graphics: proc
       (* Property *)
       (# g: ^Graphics
       exit g[]
       #);
  do '[System.Windows.Form]System.Windows.Form.PaintEventArgs' -> classname;
  #);
Graphics: ExternalClass
  (# DrawString: proc
       (# str: ^String;
          f: ^Font;
          b: ^Brush;
          x: @real;
          y: @real;
       enter (str[], f[], b[], x, y)
       #);
  do '[System.Drawing]System.Drawing.Graphics' -> classname;
  #);
Font: ExternalClass
  (# init: (* :< *)
       (* Really constructor Font(string,float) *)
     (# name: ^String;
        size: @real (* float32, not double (:-( *)
     enter (name[], size)
     #);
  do '[System.Drawing]System.Drawing.Font' -> classname;
  #);
Brush: ExternalClass
  (# 
  do '[System.Drawing]System.Drawing.Brush' -> classname;
  #);
SolidBrush: ExternalClass (* Really a sub of Brush *)
  (# 
  do '[System.Drawing]System.Drawing.SolidBrush' -> classname;
  #);
Run: External
  (# f: ^Form
  enter F[]
  do '[System.Windows.Forms]System.Windows.Forms.Application::Run' -> callC;
  #);

HelloWorld: Form
  (# init: (* :< *)
       (* Constructor *)
       (# 
       do 'Hello Århus' -> set_Text;
       #);
     onPaint::<
       (# g: ^Graphics;
          f: ^Font;
          b: ^SolidBrush;
       do e.get_Graphics -> g[];
          ('Times New Roman', 26) -> (&Font[]).init; (* Really constructor with args!!*)
          &SolidBrush[] -> b[]; 
       #);
  #);

---PROGRAM:descriptor---
(#  
do &HelloWorld[] -> Run;
#)
   





