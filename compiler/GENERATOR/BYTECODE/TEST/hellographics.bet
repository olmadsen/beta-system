ORIGIN 'tstenv';
---LIB:attributes---

String: ExternalClass
  (# 
  do '[mscorlib]System.String' -> classname;
  #);
Form: ExternalClass
  (# set_Text: proc (* Property *)
       (# t: ^String;
       enter t[]
       #); 
     onPaint:< proc
       (# e: ^PaintEventArgs;
       enter e[]
       do INNER;
       #); 
  do '[System.Windows.Forms]System.Windows.Forms.Form' -> classname;
  #);
PaintEventArgs: ExternalClass
  (# get_Graphics: proc (* Property *)
       (# g: ^Graphics
       exit g[]
       #);
  do '[System.Windows.Form]System.Windows.Form.PaintEventArgs' -> classname;
  #);
Graphics: ExternalClass
  (# DrawString: proc
       (# str: ^String;
          f: ^Font;
          b: ^Brush;
          x: @real;
          y: @real;
       enter (str[], f[], b[], x, y)
       #);
  do '[System.Drawing]System.Drawing.Graphics' -> classname;
  #);
Font: ExternalClass
  (# _init:
       (# name: ^String;
          size: @real32;
     enter (name[], size)
     #);
  do '[System.Drawing]System.Drawing.Font' -> classname;
  #);
Brush: ExternalClass
  (# 
  do '[System.Drawing]System.Drawing.Brush' -> classname;
     INNER;
  #);
SolidBrush: Brush
  (# 
  do '[System.Drawing]System.Drawing.SolidBrush' -> classname;
  #);
Run: External 
  (# f: ^Form
  enter F[]
  do 'void [System.Windows.Forms]System.Windows.Forms.Application::Run(class [System.Windows.Forms]System.Windows.Forms.Form)' -> callC;
  #);

HelloWorld: Form
  (# _init:
       (#
       do 'Hello Århus' -> set_Text; (* window title *)
       #);
     onPaint::< 
       (# g: ^Graphics;  
          f: ^Font;
          b: ^SolidBrush;
       do ('Times New Roman', 26) -> &Font[] -> f[];
          e.get_Graphics -> g[];
          &SolidBrush[] -> b[];
          ('Hej Jørgen!', f[], b[], 15, 15) ->  g.DrawString;
       #);
  #);

---PROGRAM:descriptor---  
(# 
do &HelloWorld[] -> Run; 
#)
   
