ORIGIN 'tstenv';
LIB_ITEM 'tstenv'; 

BUILD pre
      'pre/BetaComponent.prc'
      'BetaComponent.st'
      'pre-st -o $0 $1';

(*BUILD   jvm 
        'jvm/beta/Component.class' 
        '$(BETALIB)/basiclib/private/external/Component.java' 
        'javac -classpath jvm -d jvm $1';
OBJFILE jvm
        'jvm/beta/Component$Runner.class';*)
---put:doPart---  
do (# write: External  
        (# ch: @char
        enter ch 
        do '%primitive:put' -> callC 
        #);
      isString: external
        (# ch: @char; B: @boolean
        enter ch   
        do '%primitive:isString' -> callC 
        exit B 
        #); 
      writeText: external
        (# T: [0] @char 
        enter T       
        do '%primitive:put' -> callC 
        #);   
   do 
(if true then ch -> writetext else
(if (ch->isString) then
          ch -> write 
       else

	  (if ch
	   // '0' then '0' -> writeText
	   // '1' then '1' -> writeText
	   // '2' then '2' -> writeText
	   // '3' then '3' -> writeText
	   // '4' then '4' -> writeText
	   // '5' then '5' -> writeText
	   // '6' then '6' -> writeText
	   // '7' then '7' -> writeText
	   // '8' then '8' -> writeText
	   // '9' then '9' -> writeText
	   // '!' then '!' -> writetext;
	   // '?' then '?' -> writetext;
	   // '.' then '.' -> writetext;
	   // ',' then ',' -> writetext;
	   // ':' then ':' -> writetext;
	   // ' ' then ' ' -> writetext;
	   // '_' then '_' -> writetext;
	   // '\n' then '\n' -> writetext
	   // 'a' then 'a' -> writetext;
	   // 'b' then 'b' -> writetext;
	   // 'c' then 'c' -> writetext;
	   // 'd' then 'd' -> writetext;
	   // 'e' then 'e' -> writetext;
	   // 'f' then 'f' -> writetext;
	   // 'g' then 'g' -> writetext;
	   // 'h' then 'h' -> writetext;
	   // 'i' then 'i' -> writetext;
	   // 'j' then 'j' -> writetext;
	   // 'k' then 'k' -> writetext;
	   // 'l' then 'l' -> writetext;
	   // 'm' then 'm' -> writetext;
	   // 'n' then 'n' -> writetext;
	   // 'o' then 'o' -> writetext;
	   // 'p' then 'p' -> writetext;
	   // 'q' then 'q' -> writetext;
	   // 'r' then 'r' -> writetext;
	   // 's' then 's' -> writetext;
	   // 't' then 't' -> writetext;
	   // 'u' then 'u' -> writetext;
	   // 'v' then 'v' -> writetext;
	   // 'w' then 'w' -> writetext;
	   // 'x' then 'x' -> writetext;
	   // 'y' then 'y' -> writetext;
	   // 'z' then 'z' -> writetext;
   	   // 'H' then 'H' -> writetext
	  else 
	     '?' -> writetext;
	     ch -> writetext;
	     '?' -> writetext
       if)if)if)  
   #) 
    
---newline:doPart---
do (# writeText: external
        (# T: [0] @char 
        enter T       
        do '%primitive:put' -> callC 
        #);   
    do '\n' -> put
    #) 
    
---isPlatform:descriptor---
(# 
do 'pre' -> MT    
#)

 








