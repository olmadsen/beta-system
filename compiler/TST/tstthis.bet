ORIGIN 'tstenv'   ;
BODY 'tstthis2'
---lib:attributes---
TstThis:
(# P: (# a1: (# do exit this(p)[] #);
         a2: (# R: ^ P do (for 1 repeat this(p)[]->R[] for) exit R[] #);
	 a3: (# R: ^ P do L: A(#do this(p)[]->R[] #) exit R[] #);
         T: @ text; S: ^object 
      enter T
      do  T->putText;
          this(P)[]-> S[]
      exit S[]
      #);
   A: (# do INNER #);   
   T1: (#do'q'->put #);
   T2: object(#do 'r'->put;INNER #);
   R: ^ Object;
   X: @ P; S: ^P;

   B: (# x,y: @char; olsen:<Object;
         M: (# do this(B)->put; this(B).x->put; This(B).olsen #) 
      do 's'->y; 't'->x
      exit y 
      #);
   aB: @B(# olsen::<(#do 'u'->put #)#);       
   F: <<SLOT thisF:descriptor>>; aF:^F;
   F2: (# ch: @char do (#<<SLOT thisF2:dopart>> #)#); aF2: ^F2
do 'abcdef'->X.T; X->R[]; 
   'ghijk'->X.T; X.a1->S[]; S.T->puttext;
   'lmnop'->X.T; X.a2->S[]; S.T->puttext; 

   &T1[]->R[]; R;
   &T2[]->R[]; R; 
   aB.M;
   F; aF;
   F2; aF2;
   'xyz0123456789'->puttext
#)

