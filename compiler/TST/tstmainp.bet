ORIGIN 'tstenv';   
INCLUDE 'tstlib';
BODY 'tstmainpbody'
---lib:attributes---
TstMainPart:
  (# T:(# f0: 
            (# x,y,z,qw: @integer; 
               V:< (# q: @char enter q do q -> d #)
            enter(x,y)
            do INNER
            exit z
            #);
          f1: f0<<SLOT f1:mainPart>>; (* 5 *)
          Y: @ f1; 
          x: @ integer;
          withSub: @boolean
       enter withSub
       do (111,222)->f1->x; 
          (if x//333 then a->put (* e *) else '?'->put if);
	  INNER;  
          (if withSub//true then a+2->a else a+1->a if);
          a+1->b; b+1->c;
	  (10,100)->Y->x;
          (if x//110 then a->put else '?'->put  if);
       #);
     boo: @boolean;
     S: T <<SLOT S:mainPart>>; (* 6 *)
    
     bar: (* 7 *) 
       (# q,w: @char 
       enter q do q -> put; q + 2 -> w; INNER 
       #);  
     snorf: bar<<SLOT snorf: mainpart>>; (* 8 *)
     (*hest: <<SLOT hest:mainPart>>; tst this!*) 
     hest: <<SLOT hest:descriptor>>;     
     BB: @snorf;
     X: @ S;
     a,b,c,d: @char; 
     printer: (# do inner #);
     fisk:
       (# c: @char;
          display:< (# ch: @char enter ch do inner #);
          print:< printer;
          show:< (# ch: @char enter ch do ch -> put; inner #);
       enter c
       do
          inner
       #); 
     torsk: fisk<<SLOT torsk:mainPart>>;
     haj: <<SLOT haj:descriptor>>
  do 'a'->a; a+1->b; b+1->c;       
     T;   
     (if d <> 'j' then '?' -> put if);
     a+1->a; a+1->b; b+1->c; 
     true->S;
     'vwxyz'->puttext;
     '0'->a; a+1->b; b+1->c; 
     true->X;
     (if d <> '9' then '?' -> put if);   
     newL; 
     (# x: @char do     hest; #); (* 9 *)
     haj;
     'v'->fill
  #)




 
