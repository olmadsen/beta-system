ORIGIN 'tstenv'; (*'~beta/basiclib/v1.6/betaenv';*) 
BUILD default '$$/Caccount.o' 'Caccount.c' '\$CC -g -c -o $0 $1'     
      nti     '$$/Caccount.obj' 'Caccount.c' 'betacc $0 $1';     
---lib:attributes---
(* The following could be BETA patterns generated from MS-OLE-ODF descriptions *)
Account: COM
  (# init:<
       (# name: [1] @char; initialAmount,balance: @integer
       enter(name,initialAmount)
       exit balance
       #);
     deposit:< 
       (# amount,balance: @integer 
       enter amount
       exit balance
       #); 
     withdraw:<  
       (# amount,id,balance: @integer 
       enter amount
       exit balance
       #);
  #);     
GetAccount: external(# R: ^Account exit R[] #);

--program:descriptor---
(* This is a BETA program using a simulated MS-OLE-object *)
(# PutBalance:
     (# balance: @integer
     enter balance
     do 'New balance: '->puttext; balance->putint; newline
     #);
   B: @integer;
   R: ^Account;   
do 
   GetAccount -> R[];
   (if R[] = NONE then 'none' -> putline if);       
   ('Lennert Sloth',139) -> R.init -> B; B -> PutBalance;
   300 -> R.deposit -> PutBalance;
   140 -> R.deposit -> PutBalance;
   333 -> R.withdraw -> PutBalance;
#) 








