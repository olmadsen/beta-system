origin '../tstenv';
INCLUDE 'tstdumplib';
-- program: descriptor --
(# 
   a: @|(# pp: @p(# x:^object do suspend; x (* RefNoneErr: Reference is none *) #);
        do pp
        #);
   b: @|(# qq: @q(# do a; a #);
        do qq
        #);
do b
#)

(* stack layout at dump time:
 * 
 *   |    main            |
 *   |____________________|
 *   |                    |
 *   |    M1BETAENV       |
 *   |____________________|
 *   |                    |
 *   |    M1PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    Att             |
 *   |____________________|
 *   |                    |
 *   |    M5PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    M6PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    M7PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    Att             |
 *   |____________________|
 *   |                    |
 *   |    M2PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    M3PROGRAM       |
 *   |____________________|
 *   |                    |
 *   |    M4PROGRAM       |
 *   |____________________|
 * 
 * Correct dump (including INNER chain):
 * 
 *  item <pp#>p# in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *    -- a# in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *  item pp#<p#> in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdumplib
 *    -- BETAENV-~ in ~beta/betarun/v2.8/sgi/TST/tstenv
 *  comp <a#> in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *
 *  item <qq#>q# in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *    -- b# in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *  item qq#<q#> in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdumplib
 *    -- BETAENV-~ in ~beta/betarun/v2.8/sgi/TST/tstenv
 *  comp <b#> in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *
 *  item <PROGRAM-~> in ~beta/betarun/v2.8/sgi/TST/tstdump/tstdump01
 *    -- BETAENV-~ in ~beta/betarun/v2.8/sgi/TST/tstenv
 *  basic component in ~beta/betarun/v2.8/sgi/TST/tstenv
 *
 *)
