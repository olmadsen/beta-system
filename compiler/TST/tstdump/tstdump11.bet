ORIGIN '../tstenv';
BETARUN default '../betarun.debug';

--- program: descriptor ---
(# factorial: @|
     (# next:
          (# n, thisF: @integer;
          enter n
          do n*F -> F -> thisF; i+1->i;
             SUSPEND;
             (if i=n//true then n+1->&next if);
             (if true
              // i>n then thisF->F; (for j:i-n repeat factorial for);
                 (*                                   ^^^^^^^^^    *)
             if);
          #);
        F, i: @integer
     enter i
     do 1->F->&next
     exit F
     #);
   puti: (# i: @integer; enter i do i -> putint; newline; #);
do factorial->puti;
   6->factorial->puti;
#)
