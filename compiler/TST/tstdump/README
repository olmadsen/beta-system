These files test beta.dump in various situations.
They are also useful for testing valhalla.

See current status for the different platforms in the
section named "STATUS:" below.

NOTICE: The script run-all.sh allows automatic testing
	of all situations on UNIX and nti_gnu, provided that this TST
	is checked out in ~beta/betarun/<machine_type>/TST.
	If re-written to perl, it could be used on nti_ms and
	ppcmac too. Should however then take care of that
	error message does not go to stderr, but to a dialog.

OVERVIEW:
=========

tstdump01: RefNoneErr
tstdump02: RefNoneErr
tstdump03: RefNoneErr
tstdump04: RefNoneErr
tstdump05: RefNoneErr
tstdump06: RefNoneErr
tstdump07: StopCalledErr - uses betaenv
tstdump08: RepRangeErr
tstdump09: RepHighRangeErr
	   NOTE09: It is a RepHighRangeErr since the runtime check is:
		     if (low<LowBorder) then RepLowRangeErr
		     if (high>Highorder) then RepHighRangeErr
		   And low (2) is not less than LowBorder (1).
		   This semantics has been requested since people want to
		   be able to express an empty slice using low>high.
tstdump10: RefNoneErr with external activation record on stack.
tstdump11: RecursiveAttachErr
tstdump12: RecursiveAttachErr
tstdump13: RefNoneErr allocating a
tstdump14: RefNoneErr allocating b
tstdump15: RefNoneErr allocating y
tstdump16: CompTerminatedErr
tstdump17: StopCalledErr - uses betaenv
tstdump18: ZeroDivErr or ArithExceptErr
tstdump19: QuaErr - try both with and without BETART=QuaCont.
tstdump20: SegmentationErr - with callback frame on stack
tstdump21: RefNoneErr in --program--
tstdump22: StopCalledErr in dopartobject - uses betaenv
tstdump23: CTextPoolErr (uses betaenv) OBSOLETE
tstdump24: InterruptErr (UNIX betarun.debug only)
tstdump25: FpZeroDivErr
tstdump26: StackErr
tstdump27: RefNoneErr, ORIGIN is dopart object
tstdump28: LeaveBasicCompErr
	   NOTE28: SGI: Not even caught: ExO causes a bus error!
		        Check is missing in NEWRUN/ExitObjects.c!!!!!
tstdump29: RefNoneErr, INNER P chain
tstdump30: RepHighRangeErr for C parameter
tstdump31: RefNoneErr in inlined exit part
tstdump32: ArithExceptErr (integer overflow)
tstdump33: SegmentationErr outside beta - with callback frame on stack
tstdump34: SegmentationErr outside beta - with callback frame on stack
tstdump35: SegmentationErr outside beta - with callback frame on stack
tstdump36: SegmentationErr outside beta - with callback frame on stack
tstdump37: FpZeroDivErr outside BETA (sgi only)
tstdump38: Object.%break
tstdump39: RepHighRangeErr for C parameter combined with complex exit part
tstdump40: DumpStackErr

COVERAGE:
=========

Here is summarized how the programs cover the possible errors:

RefNoneErr:		several
CompTerminatedErr:	tstdump16
RepRangeErr:		tstdump08
ArithExceptErr:     	tstdump18, tstdump32
RepSubRangeErr:   	(obsolete)  	
RepLowRangeErr:     	
RepHighRangeErr:	tstdump09, tstdump30
StopCalledErr:      	tstdump07, tstdump17
LVRAfullErr:            (obsolete)
ZeroDivErr:         	tstdump18
CBFAfullErr:        	(obsolete)
PascalCallBackErr:  
CompCallBackErr:    
LeaveBasicCompErr:  	tstdump28
QuaErr:             	tstdump19
QuaOrigErr:         	(currently not implemented)
RecursiveAttErr:    	tstdump11, tstdump12
IOAFullErr:         
FpZeroDivErr:		tstdump25, tstdump37
FpExceptErr:
FpStackUflowErr:
FpStackOflowErr:
InterruptErr:       	tstdump24 (UNIX betarun_debug only)
DumpStackErr:		tstdump40
		   
EmulatorTrapErr:    
IllegalInstErr:     
BusErr:             
SegmentationErr:    	tstdump20
AOAtoIOAfullErr:	
AOAtoLVRAfullErr:	(obsolete)
CTextPoolErr:       	(obsolete)
AOAtoIOAallocErr:   
UnorderedFval      	(intel only)
UnknownSigErr:

REFERENCES:
===========

The file output/tstdumpXX.out shows correct output for tstdumpXX.

The file dumps/tstdumpXX.dump shows correct dump for tstdumpXX
with actual machine type replaced by "MACHINE_TYPE".

These files are used by run-all.sh

STATUS:
=======

Status for all dump programs except tstdump24 and
tstdump26, which are not tested by run-all.sh.

----------------------------------------------------------

all:   
  tstdump31 gives wrong dump (code gen error). Fatal error on sgi.
 
----------------------------------------------------------

Summary (sgi): Mon Nov  6 10:55:08 MET 2000
  tstdump10: difference in dump
  tstdump19: difference in dump
  tstdump20: difference in dump
  tstdump30: difference in dump
  tstdump31: difference in stderr
  tstdump31: no dump created
  tstdump33: difference in dump
  tstdump34: difference in dump
  tstdump35: difference in dump
  tstdump36: difference in dump
  tstdump37: difference in stderr
  tstdump37: difference in dump
  tstdump38: difference in stderr
  tstdump38: difference in dump
  tstdump39: difference in output
  tstdump39: difference in stderr

comments:
  tstdump19, 34, 35, 36: Minor difference: low level labels displayed wrongly
	     due to shared libraries.
  tstdump20: Two top lines swapped, when error outside beta
  tstdump31: fails (as noted above)       
  tstdump37: "Floating Point exception" instead of "Floating Point
	     division by zero". Dump correct

----------------------------------------------------------

Summary (sun4s): Wed Jan 10 16:25:01 2001
  tstdump31: difference in dump
  tstdump32: difference in output
  tstdump32: difference in stderr
  tstdump32: no dump created
  tstdump37: difference in stderr
  tstdump37: difference in dump
  tstdump39: difference in dump

comments:
  tstdump31: fails (as noted above)       
  tstdump32: fails: no dump created    
  tstdump37: "Floating Point exception" instead of "Floating Point
	     division by zero". 
	     Dump correct.
  tstdump40: No dump file created (and not supposed to (:-))
----------------------------------------------------------

Summary (linux): Thu Jun 21 13:59:42 2001
  tstdump29: difference in dump
  tstdump31: difference in dump
  tstdump32: difference in output
  tstdump32: difference in stderr
  tstdump32: no dump created
  tstdump36: difference in dump
  tstdump37: difference in stderr
  tstdump37: difference in dump
  tstdump39: difference in dump
  tstdump40: no dump created
comments:
  tstdump29: pp#<r#> is shown instead of <*>z# (INNER P)       
  tstdump31: fails (as noted above)       
  tstdump32: fails: no dump created    
  tstdump36: item pp#<p#> shown as item <boo#>
	     item <zoo#> shown as item <boo#>
  tstdump37: Only difference is that the wrong kind of exception is reported

----------------------------------------------------------

Summary (x86sol): Wed Feb 14 17:53:04 2001
  tstdump29: difference in dump
  tstdump31: difference in dump
  tstdump32: difference in output
  tstdump32: difference in stderr
  tstdump32: no dump created
  tstdump36: difference in dump
  tstdump37: difference in stderr
  tstdump37: difference in dump
  tstdump39: difference in dump
comments:
  tstdump29: pp#<r#> is shown instead of <*>z# (INNER P)       
  tstdump31: fails (as noted above)       
  tstdump32: fails: no dump created    
  tstdump36: item pp#<p#> shown as item <boo#>
	     item <zoo#> shown as item <boo#>
  tstdump37: Only difference is that the wrong kind of exception is reported

----------------------------------------------------------

Summary (hpux9pa): Mon Jan 15 16:53:38 MET 2001
  tstdump01: difference in dump
  tstdump02: difference in dump
  tstdump03: difference in dump
  tstdump04: difference in dump
  tstdump05: difference in dump
  tstdump07: difference in dump
  tstdump08: difference in dump
  tstdump09: difference in dump
  tstdump10: difference in dump
  tstdump13: difference in dump
  tstdump14: difference in dump
  tstdump15: difference in dump
  tstdump18: difference in dump
  tstdump19: difference in dump
  tstdump20: difference in stderr
  tstdump20: difference in dump
  tstdump22: difference in dump
  tstdump25: difference in dump
  tstdump28: difference in stderr
  tstdump28: difference in dump
  tstdump29: difference in dump
  tstdump30: difference in dump
  tstdump31: difference in dump
  tstdump32: difference in output
  tstdump32: difference in stderr
  tstdump32: no dump created
  tstdump33: difference in dump
  tstdump34: difference in stderr
  tstdump34: difference in dump
  tstdump35: difference in stderr
  tstdump35: difference in dump
  tstdump36: difference in stderr
  tstdump36: difference in dump
  tstdump37: difference in dump
  tstdump38: difference in dump
comments:
  MANY other small errors - basically problem with reference marking
  strategy used on hppa stack!
