ORIGIN 'tstenv';
--PROGRAM: descriptor--
(# attToProcessor: external
     (# comp: @integer;
        tid: @integer;
     enter comp
     exit tid
     #);
   t: @integer;
   a: @|(# t:@Integer;p: @put(# k: [20]@Integer;#); do L: (# do (for 1000000 repeat 1->t; for);'.'->put; restart L #)#);
   b: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'!'->put; restart L #)#);
   c: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'*'->put; restart L #)#);
   d: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'_'->put; restart L #)#);
do @@a -> attToProcessor -> t;
   @@b -> attToProcessor -> t;
   (* @@c -> attToProcessor -> t; *)
   (* FIXME: this does not get started before main thread ends
    * @@d -> attToProcessor -> t;
    *)
   @@d -> attToProcessor -> t;
#)
