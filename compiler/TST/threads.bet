ORIGIN 'tstenv';
--PROGRAM: descriptor--
(# attToProcessor: external
     (# comp: @integer;
        tid: @integer;
     enter comp
     exit tid
     #);
   t: @integer;
   a: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t; for);'.'->p; restart L #)#);
   b: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'!'->p; restart L #)#);
   c: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'*'->p; restart L #)#);
   d: @|(# t:@Integer;p: @put; do L: (# do (for 1000000 repeat 1->t;for);'_'->p; restart L #)#);
do @@a -> attToProcessor -> t;
   @@b -> attToProcessor -> t;
   (* @@c -> attToProcessor -> t; *)
   (* FIXME: this does not get started before main thread ends
    * @@d -> attToProcessor -> t;
    *)
   @@d -> attToProcessor -> t;
#)
