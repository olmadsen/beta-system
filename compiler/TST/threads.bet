ORIGIN 'tstenv';
--PROGRAM: descriptor--
(# attToProcessor: external
     (# comp: @integer;
        tid: @integer;
     enter comp
     exit tid
     #);
   ta,tb,tc,td: @integer;
   thread: (# t:@Integer; 
           do L: (# 
                 do (for 1000000 repeat 
                         1->t;
                    for);
                    INNER thread;
                    restart L
                 #)
           #);
   a: @|thread(# do 'a'->put #);
   b: @|thread(# do 'b'->put #);
   c: @|thread(# do 'c'->put #);
   d: @|thread(# do 'c'->put #);
   
do @@a -> attToProcessor -> ta;
   @@b -> attToProcessor -> tb;
   @@c -> attToProcessor -> tc;
   (* FIXME: Problems with destroy_TSD with more than three threads... *)
(*   @@d -> attToProcessor -> td;*)
#)
