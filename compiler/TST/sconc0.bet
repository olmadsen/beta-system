ORIGIN 'tstenv';
INCLUDE 'tstsystemenv'
(* identical to conc0 except that it uses tstsystemenv *)
---program:descriptor---
(#  eat:
     (# n: @integer
     enter n
     do (if N > 0 then n-1 -> eat if)
     #)
do
   systemenv
   (# S1: sysHead
        (# p: @put; 
        do (for i: 100 repeat '.'->p; 1000->eat for); 
           ')'->put; 
        #);
      S2: sysHead
        (# p:@put; 
        do (for i: 100 repeat ','->p; 1000->eat for);
           ']' -> put; 
        #); 
      main:: 
        (#
        do &|S1[] -> fork;
           &|S2[] -> fork;
           (* L: (#do  '*'->put; suspend; restart L #) *)
        #)
   #)
#)


