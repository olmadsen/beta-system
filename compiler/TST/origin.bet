origin 'tstenv' 
---program:descriptor---
(# A: (#  P: (# BB: B(# ch: @char
                     enter ch
                     do ('Hello fisk!:',ch)->this(BB).origin.fisk
                     #);
                fisk: (# T: ^text; ch: @char enter(T[],ch) 
                      do t[]->putText2; ch->put; newline
                      #)
             do this(P).origin[] -> R[];
		origin[] -> R2[];
	        'a'->origin.foo; 
                'b'->this(P).origin.foo;
		'c'->this(p).origin.origin.bar;
		'd' -> BB
	     #);
          R,R2: ^ object;
          S: ^A;
         foo: 
           (# ch: @char 
           enter ch 
           do 'Hello world:'->putText; ch->put;newline;
              (if first then origin## -> o##
               else NONE -> o##
              if)
           #)  
      do P; R[]->S[]; 'e'->S.foo; R2[]->S[]; 'f'->S.foo
      #);
    B: (#  do INNER #);
   xxx: ^struc;
   bar: (# ch: @char enter ch do 'Here is bar:'->puttext; ch->put; newline #);

   o: ##object;
   foo: (# <<SLOT foo:dopart>> #);
   snorf: (# <<SLOT snorf:doPart>> #);
   t1,t2: @text;
   c1,c2: @char;
   first: @boolean
do true -> first;
   A;
   'Hello '->t1;
   foo;
   'world:'->t2;
   'g'-> c2;
   snorf;
   false -> first;
   o
#)   
        
---foo:dopart---
do origin.t1 -> puttext;
   (for i: 2 repeat for); 
   'h' -> c1;
---snorf:dopart---
do origin.t2 -> puttext;
   origin.c2 -> put; newline
   
