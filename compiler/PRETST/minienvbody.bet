ORIGIN 'minienv';
MDBODY pre 'minienv_prebody'

---stream_newline:dopart---
do '\n' -> put 

---stream_puttext:dopart---
do (for i: (*T.T.range*) T.lgth repeat T.T[i]-> put for);  
   
---stream_putline:dopart---   
do (if T[] <> none then T[] -> puttext if);
   newline 
   
---stream_putint:dopart---   
do (if n < 0 then '-'->put; -n->n if); 
   0->i;
   L:    
     (if n = 0 then   
         (if i = 0 then 
             '0'->put
          else
             (for j:i repeat
                  W[i-j+1]+'0'->put
         for)if)  
      else 
         n mod 10 -> W[i+1->i];  
         n div 10 ->n;    
         restart L 
     if)
   
---text_clear:dopart---   
do 0 -> pos -> lgth
   
---text_put:dopart---   
do (if (pos+1->pos) <= T.range then
       ch -> T[pos];
       lgth+1->lgth;
   if)
   
---text_setT:doPart---
do T.range -> lgth -> pos 
