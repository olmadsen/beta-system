ORIGIN 'minienv'
--- program: descriptor ---
(* Display the lyrics to "99 Bottles of Beer"  *)
(# bottles: @integer;
   putBottles: 
     (# high, low: @integer;
        few:
          (# i: @integer;
          enter i
          do (if i
              // 1 then  'one' -> stdOut.puttext;
              // 2 then  'two' -> stdOut.puttext;
              // 3 then  'three' -> stdOut.puttext;
              // 4 then  'four' -> stdOut.puttext;
              // 5 then  'five' -> stdOut.puttext;
              // 6 then  'six' -> stdOut.puttext;
              // 7 then  'seven' -> stdOut.puttext;
              // 8 then  'eight' -> stdOut.puttext;
              // 9 then  'nine' -> stdOut.puttext;
              // 10 then 'ten' -> stdOut.puttext;
              // 11 then 'eleven' -> stdOut.puttext;
              // 12 then 'twelve' -> stdOut.puttext;
              // 13 then 'thirteen' -> stdOut.puttext;
              // 14 then 'fourteen' -> stdOut.puttext;
              // 15 then 'fifteen' -> stdOut.puttext;
              // 16 then 'sixteen' -> stdOut.puttext;
              // 17 then 'seventeen' -> stdOut.puttext;
              // 18 then 'eighteen' -> stdOut.puttext;
              // 19 then 'nineteen' -> stdOut.puttext;
             if);
          #);
     do bottles div 10 -> high;
        bottles mod 10 -> low;
        (if high
         // 0 then
            (if low=0 then 
                'no more' -> stdOut.puttext;
             else 
                bottles -> few;
            if);
         // 1 then bottles   -> few;
         // 2 then 'twenty'  -> stdOut.puttext; low -> few;
         // 3 then 'thirty'  -> stdOut.puttext; low -> few;
         // 4 then 'fourty'  -> stdOut.puttext; low -> few;
         // 5 then 'fifty'   -> stdOut.puttext; low -> few;
         // 6 then 'sixty'   -> stdOut.puttext; low -> few;
         // 7 then 'seventy' -> stdOut.puttext; low -> few;
         // 8 then 'eighty'  -> stdOut.puttext; low -> few;
         // 9 then 'ninety'  -> stdOut.puttext; low -> few;
        if);
        (if bottles=1 then
            ' bottle of beer' -> stdOut.puttext;
         else
            ' bottles of beer' -> stdOut.puttext;
        if);
     #);
do 99->bottles;
   drinking:
     (if bottles>0 then
         putBottles; ' on the wall, '->stdOut.puttext;
         putBottles; '.' -> stdOut.putline;
         'Take one down, pass it around, '->stdOut.puttext;
         bottles-1->bottles;
         putBottles;
         ' on the wall.\n'->stdOut.putline;
         restart drinking
     if);
#)
