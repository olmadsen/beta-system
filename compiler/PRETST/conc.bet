origin 'minienv';
include 'Queue'
---program:descriptor---
(# P1: @| BETA_system
     (# foo: (# n: @integer enter n do V+n -> V #);
        V: @integer
     do L:
          (#
          do (for i: 100 repeat i-> foo for);
             '/'->out.put;
             (if V < 500000 then restart L if)
     #)#);
   
   P2: @| BETA_system
     (# bar: (# n: @integer enter n do  V + n*n -> V #);
        V: @integer
     do L:
          (#
          do (for i: 100 repeat i -> bar for); 
             '+'->out.put;
             (if V < 500000 then restart L if)
     #)#);
   P3: @| BETA_system
     (# bar: (# n: @integer enter n do  V + n*2 -> V #);
        V: @integer
     do L: 
          (#
          do (for i: 100 repeat i -> bar for); 
             '*'->out.put;
             (if V < 500000 then restart L if) 
     #)#);

do 'P1' -> p1.id;
   'P2' -> p2.id; 
   'P3' -> p3.id; 
   'before'->out.puttext;
   P1[] -> fork;
   '\nbetween'->out.puttext;
   P2[] -> fork;
   P3[] -> fork;
   '\nend'->out.puttext
#)

             
 
