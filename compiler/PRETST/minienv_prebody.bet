ORIGIN 'minienv';

BUILD pre
      'pre/BetaComponent.prc'
      'BetaComponent.st'
      'pre-st -o $0 $1';

BUILD pre
      'pre/BetaStructure.prc'
      'BetaStructure.st'
      'pre-st -o $0 $1';

(*BUILD   jvm 
        'jvm/beta/Component.class' 
        '$(BETALIB)/basiclib/private/external/Component.java' 
        'javac -classpath jvm -d jvm $1';
OBJFILE jvm
        'jvm/beta/Component$Runner.class';*)
---put:doPart---  
do (# write: External  
        (# ch: @char
        enter ch 
        do '%primitive:put' -> callC 
        #);
      isString: external (* not used anymore *)
        (# ch: @char; B: @boolean
        enter ch   
        do '%primitive:isString' -> callC 
        exit B 
        #); 
      writeText: external
        (# T: [0] @char 
        enter T       
        do '%primitive:put' -> callC 
        #);   
   do ch -> writeText 
   #) 
   
---get:doPart---
do (# read: external
        (# ch: @char
        do '%primitive:get' -> callC 
        exit ch
        #) 
   do (if true then
          read -> ch
       else
          (if ii+1 -> ii
           // 1 then 'a' ->ch
           // 2 then '+' -> ch
           // 3 then 'b' -> ch
           else 
              '!' -> ch
          if)
      if)
   #)
   
---newline:doPart---
do '\n' -> put
    
---isPlatform:descriptor---
(# 
do 'pre' -> MT    
#)

 








