----------------------

------------------------------------------------------------------------------
OLM: 1/11/95:	Bug fix for short-circuit boolean expressions for
		Linux; In  (if (x <> y) and (z > x) then ... if),
		the float stack was NOT popped when evaluating expressions
		like (x <> y). The error was correted by adding an
		extra 'pop' parameter to mch.cmpAndJmpFloat, and fixing
		this slot in LINUXmachine.

>>>>>>>>>>>	The ERROR MUST also be corrected for NT and INTELB
		(INTELB fixed 2/11/95).
		(NTImachine fixed 8/2/96)

PA: 1/11/95:	Changed compilernumberioBody.bet:
		Removed use of short-circuit and simple ifs involving
		reals in toReal, since this cannot be correctly compiled 
		by beta5.0. This prevents simple bootstrap of beta5.1.
		When we start using basiclib/v1.5, compilernumberio should
		no longer be used.

PA: 2/11/95:	Changes in LINUXmachine and INTELBmachine:
		Improved Olm's solution in cmpAndJmpFloat (much less code).
		Changed popFstack to be a little faster.
		Changed negFloat to use fchs.
		Changed fBle and fBge to only use one jump.

>>>>>>>>>>>	These changes should be done in NTImachine too.
		(fixed 20/12/95)

PA: 2/11/95:	Changed version number to 5.1.1 in systembody.

OLM: 2/11/95:	New option 61 introduced to handle new primitive interface;
		used in itemevval to delay call of mch.initPrimCall.

OLM: 12/11/95:	Checked in version of MIPS*.bet which generates elf code for
		the Indy/mips. All test programs, some betaenv demo programs
		an all containers/v1.5/demo*.bet programs work. 
		Is based on simplied betarun.c in ~olm/beta/system/v5.1.1/TST.
		For documentation see 

			~olm/beta/system/v5.1.1/SGI.doc

PA: 13/11/95:	Added directory COFF containing coff.bet, coff_ms.bet, 
		cofffile.bet, cofffilebody.bet.
		To be used as a backend for binary generation on windows95/NT
		using microsoft PE/COFF object-file format.
		Checkout using:
		(assuming the compiler is already checked out in ~/beta/system/v5.1.1)
			cd ~/beta/system
			cvs get -d v5.1.1/COFF system/COFF  # check out the new directory
			cd v5.1.1/COFF
			cvs update			    # get the new files
		(I think :-)

OLM: 13/11/95:	Bug fix for missing float operations used with repetitions,e.g.
		FloatExp -> R.extend.
		New mch.float2int operation added.
>>>>>>>		Must be added to all other platforms; 
		only MIPS, sun4, sun4s, hpuxXmc have been fixed;
		missing: snake, mac, linux, nt.

		(fixed for NTI and LINUX in PA: 9/2/96).


OLM: 13/11/95:	Bug fix; evval1:simpleEvVal:pushCpar; use of integer variables
		as arguments to floating point externals gave ref. is none;
			FEJL/jlkfloat2int1.bet

OLM: 14/11/95:	beta5.1 checks for blanks in external entry-points and gives a
		warning for such blanks. Warnings are NO longer given if blanks
		appear in PascalTraps like: '{ $3FC, $00o4 }'->pascalTrap.
		This fix is only relevant for Macintosh.

OLM: 14/11/95	A number of unused machine slots have been removed:
>>>>>>		callPrimitive, copyText, bitfield, relativeAdr, ldLabAdr;
		op2 in gGetDataByte/word have been eliminated - was NOT used.

OLM: 30/11/95:	A case 3 has been introduced in mch.getPrimRes; may be
		used to return result of primOp in the return register
		of the platform instead of allocating a dataReg.
		Is only used, when the compiler immediatley move the result
		from the resultRegister. 
>>>>>		MUST be handled on ALL platforms!! Has been updated, but
		NOT tested on all platforms except MAC and NT.
		BUT, MUST BE CHECKED ON ALL PLATFORMS.

OLM:  1/12/95	99% of MIPS code generation finished. Only parts (know to be:-)
		missing are interface-related to garbage collector

OLM:  7/12/95:	A new machine slot SPtoPrimReg was added to handle special
		MIPS problem.

OLM: 11/12/95:	Bug fix: controller. If a .ast-file was removed while a
		recursive compiler was running, the .bet-feil was NOT parsed.
		See controller: (* from KJM: 10.12.95 *)

OLM: 11/12/95:	1st version of PPC compiler checked in. Files
		PPCbeta, PPCmachine, etc. Code is generated for almost
		all slots in PPCmachine. Nothing has been tested, since
		the PowerPC machine is not usable.

OLM: 11/12/95:  For XXasmlink on UNIX the following is emitted in the .job-file:
			CC=${CC-"gcc -O6"}
		except for MIPS where this is emitted:
			CC=${CC-"cc -O2 -non_shared"}

OLM: 10/12/95	New machine slot: ExternalMark. Called before calling 
		M-entry point of beta call-back routine. May currently be
		empty for all other platforms than SGI/MIPS and PPC

OLM: 10/12/95:	For SGI, for all makefiles: "foo", the file "foo_sgi" is
		used if it exists. If it does not exits "foo" is used.
		This is necessary since sgi-specific make files are needed
		in basiclib/v1.4. In basiclib/v1.5 all make files will be
		changed to work for all (unix?) platforms.

OLM: 16/12/95:  Moved MC68machine slot jsrReg to HPmachine since argument
		qualification has been made stronger.
		MUST also be made for MAC!

OLM: 16/12/95:	New machine slot Final2VirtJump; needed for handling
		Final to virtual binding s for MC68 and Ix86. Empty
		for all other platforms.
		Only made for MC68machine

OLM: 17/12/95:	Bug fix for HPMC and LINUX/NT; Problem with codegen for
		final2virtual bindings ( W::V; V:< ...).  The same problem
		must also exist for the Mac; but should be fixed since
		the fix was in MC68machine.
		LINUX has been updated; NTI/INTELB NOT updated.

OLM: 17/12/95:	LINUXbeta brought up-to-date. Can compile tst*.bet.
		HOWEVER: machine-slot float2int has NOT been filled out.

PA: 20/12/95:	Fixed the stuff in "PA: 2/11/95" for NTImachine.

OLM: 23/12/95:	Code is now generated fo all stand-alone expressions that
		may have side-effects; e.g. (e1,e2,e3), e1 or e2.
		TST/tstsingleeval

OLM: 23/12/95	Switch "--mute" now also sets "nowarn". If later e.g.
		"--verbose" is set, "warn" is NOT set automatically,
		since this will require that the state of warn is remembered
		from when "mute" was set. "warn" must thus be set explicitly.
		Note: to get warnings during a mute session, a setting in the
		order "--mute --warn" should work.

OLM: 23/12/95:	Bug fix in struc comparison in if-imp; FEJL/strucif.bet

OLM: 23/12/95	New machine slot CallRegInPrimReg2; see comment in machine.
		Category of slot CallRegBusy changed to doPart.

OLM: 25/12/95:	Bug fix for Qua check in  "S[] -> R[]", where "R: ^A.P" and
		"P" is a pattern.

OLM: 25/12/95:	Fix in controlbody as proposed by ESS: handle situation
		where other tools, e.g. Valhalla, may already have set origin.

OLM: 26/12/95:	Added various file exceptions to job-file and ..db-file (in
		binarystreambody.bet + machinebody.bet)
		In addition some apparently missing mps exceptions were added
		to AST.top.open in controlbody.

OLM: 27/12/95:	Bug fix refevval:refevval:toTmp; a ref.is.none was generated 
		in FEJL/refasg.bet FEJL/pagh.bet

OLM: 27/12/95:	Bug fix evbody:booleaxEval: floatregoverflow in complicated
		boolean expresions with real operands; FEJL/addbez.bet
		changed to work for all (unix?) platforms.

OLM: 29/12/95: 	Bug fix virtual.bet; to handle situation with x: ^V.W, 
		where V:< ...; FEJL/mads.bet

OLM: 29/12/95	Integer/boolean compatibility gave en error for
		   (if anInt < aBool ... if). Now only a warning is given.
		Note that the error only came if anInt<aBool was in if-imp.

OLM:  8/1/96	Started adding support for int8, int8u, etc.
		Is not completed. And  currently only for SPARC.

OLM:  12/1/95:	Changed MIPS codegeneration to Position-independent-code (PIC).

OLM:  17/1/95:	Added support for linking shared objects on MIPS.
		a: via splitting linking into several link directives, using
		   the feature already there for large link directives.
		b: using LIBRARY property of fragment system. A bug was
		   fixed here. In addition the option '--shared' must
		   be used.

OLM: 17/1/95:	Fixed the TraceXcall for MIPS and added TraceXres

OLM: 18/1/95:	Fixed C-interface bug (R[i] -> foo); after this X programs
		can be compiled and run!! Major milestone!!

OLM: 26/1/96:	A number of SGI related stuff.

OLM: 27/1/96:	Fixed (hopefully) last details about job-file and use
		of LD_LIBRARY_PATH. A BETA executable using shared libraries
		is organized as follows:

		Assume that the foo.bet is in  /users/kalle/mysys.
		The executable and shared object files for foo are then:

			/users/kalle/mysys/foo
			/users/kalle/mysys/sgi/foo1..gso
			/users/kalle/mysys/sgi/foo2..gso
			/users/kalle/mysys/sgi/foo3..gso

		3 is just an example. There may be from 0 to n shared files.
		(gso is for code with debug-info; so is used when no debug).

		When foo is executed from other directories than where it is
		compiled, LD_LIBRARY_PATH MUST include

			/users/kalle/mysys/sgi

OLM:  4/2/96:	Changes to creation of job-file name due to various problems:
		1. remote-exe always placed job-file in top-dir
		2. beta -o sun4s/tst tst gave wrong job-file
		...
		Previously the job-file was always based on objFile; now
		it is based on rootFragment, which is the source file
		being translated. So job-file is placed relatively
		to rootFragment.
		If remote-exe, then full path is used for objFile.

OLM:  4/2/96:	Moved all code that explicitly refers to targetDir, like
		'sun4s', 'sgi', ... to com.bet. I.e. when adding a new
		target, the changes adding the dir-name should be in com.bet

OLM:  5/2/96: 	Bug fix; Qua check error might appear when a descriptor-slot
		pattern was used as prefix; FEJL/ernst.bet

OLM:  5/2/96:	Infinite parsing happened if no BETA code in last form:
		FEJL/loop.bet

OLM:  5/2/96:	Fix of Qua-check parameters for SGI + code-gen for DoGC.

PA: 8/2/96:	Changed impl. of elf and elffile.
		Does not use pattern data anymore (old way could
		cause GC seg. fault - the well-known pattern data error).

PA: 8/2/96:	Fixed error-reporting from A_OUT/*.bet to go to
		the screen instead of the a.out file!

PA: 8/2/96:	Added fragments float2int, SPtoPrimReg and Final2VirtJump
		to INTELBmachine.

PA: 8/2/96:	Incorporated changes from v5.1 on Tuborg to
		NTIasmlink and NTImachine.

PA: 8/2/96:	Fixed qualification error bug in
		gdiv.op1ToEBX in NTImachine.

PA: 8/2/96:	Fixed test for pop in cmpAndJmpFloat in NTImachine.

OLM: 8/2/96:	Checked in files PPCMACbeta.bet, PPCOS2beta.bet, etc.
		Code can be generated, but no testing has been made.

OLM: 9/2/96:	Fragment float2int fixed for hpux9pa.

PA: 9/2/96:	Implemented slot float2int in LINUXmachine and NTImachine
		by using mstate.tmplab.
		Changed slot intReg2float in both files to use
		mstate.tmplab too.

PA: 9/2/96:	Changed to use of mps/v5.0.1 and sysutils/v1.4.2.

OLM: 11/2/96:	Mad an interface for generating 'beta-data'-files to be 
		used for persistence. To replace the old representation 
		using BETA_data1, BETA_dat2, etc. that relied on 
		data-segments being consecutive. 
		Based on the code for b2c in controlbody. 
>>> KIM >>>	The new interface is via machine. The b2c code should 
		be opgraded to use this interface also.

OLM: 11/2/96:	Eliminated the variables targetMach and targetMachId from
		machine. Instead common.targetMachine and 
		targetMachineId can be used. 
		Similar variables in system will be replaced
		in a similar way, i.e. use only the ones in common.

PA: 12/2/96:	Changes in NTImachine:
		Copied final2virtjump from LINUXmachine.
		Fixed addressSize bug in cmpAndJmpFloat.
		Added empry slot SPtoPrimReg.

OLM: 12/2/96:	Fix of hasProgramSlot and switch[6] in translate such
		that beta *.bet will only link fragments with program 
		slots

PA: 13/2/96:	Fix in NTIasmlink: added -q tofirst invocation of
		nmake.

-----------------------------------------------------------------

PA: 22/2/96:	Changed v5.1.1 into cvs branch with tag 
		v5_1_1_correction_branch.

OLM: 22/2/96:	Fixed show-stopper in v5.1.2 AND v5.1.1: checker error
		when using this as reported by lennert: FEJL/lesthis.
		Changes to:

			checklibbody.bet
			systembody.bet  v5.1.1(1) -> v5.1.1(2)
			TST/tstthis.bet
