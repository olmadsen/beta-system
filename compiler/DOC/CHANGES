CHANGES for compiler version 5.5

HML+PA:8-10/99: Fixed PPC specific errors:
rcm: 712	1. Error in ConvertInt2Float which cause uninitialized
		   floatRegOperand, which caused index error.
		2. Error in PrimResToX: Wrong stack offset calculation
		   for parameters pass the eigth.
		TST now runs (except tstcom, which crashes compiler).

OLM:25/10/99:	Fixed SEQ - generation of sequence diagrams to be able to
rcm: 713	compile the C code on all platforms. Has NOT been tested.

OLM: 28/10/99:	Change for Flemming&Anders: allocates a new register each
rcm: 714	time a static link is followed - THIS IS a general change.
		Allocates a new register for tstnone - only for switch 81.

OLM: 10/11/99:	Made OLM:28/10/99 dependent of switch 81, since there
rcm: 715	seems to be problems on Intel.

OLM: 22/10/99:	Bug fix for Intel save of float stack; cpn2000 could
rcm: 716	not execute.

OLM: 5/12/99:	Added some of the missing semantic checking for repetition
rcm: 717	assignments.
		Made first version of assigment of repetition objects
		(R1[] -> R2[] where R1,R2: [e] ...).
		Made first attempt to generate dynamic error messages.

OLM: 5/12/99:	Added some more dynamically generated error messages.
rcm: 718	Fixed missing error message for 'a[]->s[]' where
		'a: @integer, s: ^object'.

OLM: 11/12/99:	Added missing error message for use of recursive computed
rcm: 718+	remote.

OLM: 12/12/99:	Added more 'improved' error messages.
rcm: 719	Changed error reporting such that when an ast is printed to
		report a new message, previously reported messages are
		suppressed.
		Moved compiler 5.4  changes to CHANGES-v5.4.

OLM: 12/12/99:	Fixed error in catch of NoSpace-exception.
rcm: 720

OLM: 12/12/99:	Fixed missing catch of OtherError-execption for job-file.
rcm: 721	Fixed minor things in dynamic error messages.

OLM: 30/12/99:	Further work on switch 180/181 - this version may NOT be
rcm: 722	stable. It is checked in for backup. However, no problems
		are known.

PA: 6/1/00:	MIPSmachine:
rcm: 723	Wrapper for FailureExit (called by betaenv.stop) now
		generated in betaenv.o.
		Same problem as for Qua etc. solved previously.

OLM: 6/1/00:	More switch 180/181 work. Hopefully no side-effect-errors.
rcm: 724	

OLM: 11/1/00:	More switch 180/181 work. Fixed missing clear of %i3 for SPARC
rcm: 725	by eliminating address.goOrigin and replaced it by newGoOrigin.
		This is a general change that may influence all platforms.
		It can have side-effects.

PA: 13-01-2000	Fixed LIB_DEF/ITEM in GENERATOR/imageread. The old
rcm: 726	one lead to unlinkable mjolner tool on sgi.

OLM: 14/1/00:	Fixed code generation error in SPARC - betawc failed
rcm: 727	due to error in %o-register allocation.


OLM: 21/1/00:	Final version for dSa. All test booleans has been set to false
rcm: 728(r5_1a) 


OLM: 23/1/00:	Fixed NT problem with return of struct from COM-function.
rcm: 729+	Further work on switch 181.
		Test switches are again set to true; so don't use this version
		for dSa, etc.

PA+FG:24/01/00: Changes to collect jobfile stdout and stderr for logging.
rcm: 729	Affected: GENERATOR/runJobFile, GENERATOR/SUN4S/SUN4SBasmlink, 
		GENERATOR/LINUX/LINUXBasmlink, GENERATOR/SGI/SGIasmlink,
		GENERATOR/HPUX9PA/SNAKEasmlink.

FG:08/02/00:	Rettet DYN/UI/evaluator til virtuel editor kvalf. Denne 
rcm: 730	er ogsaa pakket paa r5_1a CD'erne!!.


OLM: 9/2/00:	Fix for part objects in cStruct - WebVise problem;
rcm: 731	check-in of 729+;
		lots of switch181 changes

MG:  16/2/00:	Fix for link problem on nti when using -o with a path.
rcm: 732


OLM: 18/2/00:	SPARC: improved codegen to use delay slots also for
732+		external- and primitive calls.
		(+ means that a check-in is not performed at the top level,
		but only at component level)

OLM: 24/2/00:	Bug fix for ref.none.fejl for virtual/final binding 
rcm: 732	(jlk:future eksempel).
		Also a number of switch 181 changes

OLM: 26/2/00:	Few Switch 181 changes. Switch clean-up.
rcm: 733

OLM: 29/2/00:	Replaced shortInt by int16u for COFF and ELF files.
rcm: 734	ELF has been tested - COFF has NOT!

OLM: 5/3/00:	Final version 5.1.1 for dSa - all test booleans have been 
rcm: 735	set to false.
     r5_1_1a	

OLM: 12/3/00:	Bug fix for webvise (final binding problem);
rcm: 736	final elimination of address.goOrigin;
		test switches set to false;
		tested with tst*.bet on sun4s, sgi, linux, hpux;
		nti_ms will be tested after check-in.

OLM: 26/3/00:	Reversed Bug fix for Webvise: 12/3/00. 
rcm: 737	Old Webvise error is thus NOT fixed.

OLM: 31/3/00:	Added object.%break which inserts a break/trap instruction
rcm: 738	in the code.

OLM: 4/4/00:	Fix for PascalTrap in genExternal for Mac.
rcm: 739

OLM: 12/4/00:	Added handling of mapping from AST-index to linenumbers.
rcm: 740	Using mps/utils/ast2asciiMap.bet.
		Fixed problem with slots in COM virtuals.

OLM: 20/4/00:	Added support for '[0]@wchar'-arguments for COM- and
rcm: 741	external routines. Corresponding run-time routines
		needs to be implemented.

OLM: 10/5/00:	Fixed problem with funny checker errors: illegal recursion in
rcm: 742	enter/exit list. Fixed error in anInt -> aCharRep.

OLM: 15/5/00:	Bug fix for COM call-by-value-struct in an enter list with
rcm: 743	more than one element.

HML: 26/5/00:	Added FailureExit generation to PPCmachine
rcm: 744	Implemented BYTESWAP

PA/FG: 26/05/00:Implemented ByteSwap for sparc, mips, hppa
rcm: 745

HML: 27/05/00:	Fixed bug in byteswap implementation on ppcmac
rcm: 746	lwbrx and lhbrx was declared as formatI, and
		should be formatR (offset is in register).

HML: 02/06/00:  Implemented generation of DoGC in PPCmachine.bet
rcm: 747

OLM: 05/06/00:	Eliminated allocation of origin-reference for the standard
rcm: 748	patterns COM, HOLDER, DISPATCH, and STATE.
		There may still be GC problems for COM patterns allocated 
		direcly in AOA if origin of a super is in IOA.

OLM: 06/06/00:	Clear of adr. register used for DATA call-by-value for
rcm: 749	COM virtual.

FG:  06/06/00:	Fixed byteswap on SGI.
rcm: 750

PA: 07/06/00:	Added clearing of GC registers in AllocObj before
rcm: 751	AlloI for INTEL. 
>>>>		Should be done for other platforms too.

OLM: 19/06/00:	Bug fix: COM: struct/data- reference parameter: clear of adr.
rcm: 752	for GC.
		Bug fix: list2rep: (obj,obj) -> rep; reg. overflow/negative.

OLM: 20/06/00:	Bug fix for main part slots: linker problem if no dopart in
rcm: 754	mainpart. Added missing check for use of mainpart slot as
		a superpattern.
		OBS. Someone has checked-in a compiler version without
		updating CHANGES. Some of the changes above thus belong
		to a higher rcm number.

OLM: 21/06/00	Bug fix for data reference: missing clear of adr register.
rcm: 755

##PA: 22/06/00: Intel: Clear of temporary memory cells after load back
##rcm: 756      to register.
### NO - INTEL REPOSITORY IS CORRUPTED. rcmcompilerverion is still 755

OLM: 25/05/00:  (log entry by datpete)
rcm: 756        Fix of bug in 755 change: Ref assignment of dynamic
	        data reference was treated wrong.

OLM: 28/06/00:	Fixed clear of adr register in S.c; S: ^myData.
rcm: 757

OLM: 05/07/00:	Fixed bug when using this(T)in mainpart form.
rcm: 758	Completed first version of list2refrep:
                (R1[],R2[],R3[]) -> R where R: [e] ^ T, R1,R2,R3: ^T.

OLM: 06/07/00:  Fix for lis2refrep: callReg is used by NewRR on Intel
rcm: 759

FGC: 07/07/00:	Fix for missing clear of adr.reg in getValAt.
rcm: 760

EHC: 14/07/00:  Remove shared libraries before linking on SGI so you can
rcm: 761        build compiler with itself without crashing (I hope)

OLM: 20/07/00:	Bug fix for data-object by-value-return for COM virtual
rcm: 762	on NTI when using dopart-slots in COM virtuls. 
		tstcom should now work also on NTI.
		Further work on idispatch support.
		INTEL repository should be OK now!

FGC: 24/07/00:	Added DumpStack to MIPSmachine.bet and PPCmachine.bet
rcm: 763	DumpStackErr to common

OLM: 23/07/00:	Upgrade of external return by-value of data-object for
rcm: 764	for linux RedHat 6.2 - we no longer support COM for 
		RedHat 5.x.
		Bug fix for SGI: tstcproc failed compilation; bug introduced
		when re-organizing code files.
		First simple prototype for COM iDispatch: arguments to the 
		called funtion are, however, currenly packed in a 
		non-standard format.
		Major reorganization of SYNTHESIZER files.

PA: 25/07/00:   Reapplied: 
rcm: 765	"PA: 22/06/00: Intel: Clear of temporary memory cells
		after load back to register."

OLM: 25/07/00:	Renamed aux.bet to auxlib.bet - On NT, the file-name 
rcm: 766	'aux' is reserved! 
rcm: 767	More work on COM iDispatch.

OLM: 26/07/00:	Clear of adr. register for assignment to data-obj attribute.
rcm: 768	Warning for data-object "X: @myData" in non-COM-objects have 
		been changed to a warning for "X[] -> ...". The warning
		comes if "X" is not declared in a COM-object.
		More work on iDispatch.

OLM: 26/07/00:  Fix for clear (OLM: 26/07/00) did not work for Intel 
rcm: 769	- should work now.
		More work on iDispatch.

OLM: 27/07/00:	Fix for more missing adr.reg. clears for data-objects.
rcm: 770

OLM: 30/07/00:	More work on iDispatch.
rcm: 771

OLM: 31/07/00:	More work on iDispatch.
rcm: 772

OLM: 01/08/00:	More work on iDispatch
rcm: 773

PA: 02/08/00:	SGIasmlink: Moved expansion of $LD_LIBRARY_PATH
rcm: 774	to a number of -L link directives from the end
		of the link directive to the beginning to
		allow finding of third-party .so files in non-standard
		locations specified using LINKOPT property to work 
		correct. Solved problem with linking cpn2000 on sgi.
		DOC/IntelBinary.html: Fixed typo.

PA: 02/08/00:	SGIasmlink: 
		Changed "/bin/rm xxx.so" to "/bin/rm -f xxx.so"
		to avoid complaints when xxx.so does not exist.

OLM: 02/08/00:	More work on iDispatch.
rcm: 775	

FGC: 03/08/00:  Fjernede -a archive fra hpux9pa/asmlink, kunne ikke 
		linke awenv demoer. (PA)

OLM: 07/08/00:	Work on iDispatch. Basic patterns may now be defined in
rcm: 777	other fragments than betaenv. A fragment with property
		'basic' wil be scanned for basic patterns. Used by
		COM automation to defined IDISPATCH and BSTR.

OLM: 08/08/00:	Fix of problem with ref-is-none when compiling comlib
rcm: 778	after rcm:777 change.

OLM: 09/08/00:	Fix of compilation problems for excelclient - 
rcm: 779	only relevant when using idispatch.

OLM: 10/08/00:	Change to idispatch such that S.getIdsOfNames where
rcm: 780	S: ^iIdispatch is called via vtable and not via invoke.
		This is needed to make the current version of excelclient
		work.

PA: 14/08/2000: Cosmetic change in INTELBmachine:
rcm:781		Use sub-instruction for negative offsets in SetTop.
		Improves readability of disassembly.

OLM: 14/08/00:	Setting debug-switches to false for upcoming freeze.
rcm: 782	No more changes planned before freeze.

OLM: 17/08/00:	Bug fix for idispatch.
rcm: 783

PA: 4/9/2000:	Added switch 88:  
		Use full speed betarun with symbolic debug info
		(betarun_sym)

HML: 16/09/00:  Added pushReg + popReg in callPrim in PPCmachine.bet
rcm: 785

OLM: 19/09/00:	Some reorganisation of source code to make the logic
rcm: 786	of the compiler more clear. More should be done.
		And some experiments with components/shared libraries.
		
OLM: 20/09/00:	Fix of lib-def in compiler.bet; wrong path
rcm: 787

OLM: 20/09/00:	Code re-organization; simplification of exception handling;
rcm: 788	several unused exception virtuals have been eliminated.

OLM: 21/09/00:	Code re-organiization.
rcm: 789

OLM: 02/10/00:	Code re-organization
rcm: 790-794

OLM: 06/10/00:	Code re-organization. Experiment with fixing leave/restart
rcm: 795	if object is exported out-of-scope. Use switch 89 to test:
		class ExOx instead of ExO.
     
OLM: 08/10/00:	Code re-organization. Fix of certain error messages.
rcm: 796	Fix of dStat-leak found by HML.

OLM: 12/10/00:	Code re-organization. Fix of some error messages.
rcm: 797	To use this version, betaast must be updated.

OLM: 12/10/00:	Code re-organisation; clean-up in betaast/index.bet.
rcm: 798	index.bet::getbinding has been moved to a new file
		mps/utils/getbinding; an unused  getbinding in 
		mps/astlevel.bet has been removed.
		Small fix in error message handling to avoid error
		marking on A in S.A if S is undeclared.
		You must 'cvs update' in mps and betaast.

HML: 13/10/00:  Changed PPCMachine.bet to handle runtime wrappers.
rcm: 799        Inserted a necessary ClearStackTop in 
                runtime wrappers. 
                Increments cnest in ConvertInt2Float
                Changed PPCMACasmlink.bet to generate job file
                that are indenpendent of environment in MPW.
MG/FGC:		Start of integration of Flemming+Anders optimizer.
		Don't even think abount trying to compile this yet.

OLM: 13/10/00:	Code re-organization; more simplicifcation of index.bet.
rcm: 800	

MG:  14/10/00:	Gone through ABSTRACT/INTERMEDIATEmachine and fixed
rcm: 801	trace printout, instruction pointers, etc.
		Next todo: Change use of essense into use of
		backendInstruction.
		Added GENERATOR/backend.bet
		Removed fake associated file in OPTIMIZER.
		Still no chance of compiling.

FGC: 16/10/00:	Finished general ABSTRACT/backend.bet
rcm: 802	Should be linked to sparcbackend.bet. 
		All dopart slots has new names :-)

PA: 17/10/00:	Simplified refnone test for intel.
rcm: 803	Avoids loading into temporary data reg.
		Tested on linux (TST, tstdump, mjolner).

OLM: 19/10/00:	Re-organization to experiment with new representation of
rcm: 804	ASTindex in betaast. See CHANGES for betaast.
		A number of minor errors found during that process 
		have been fixed.
		All test switches have been set to false - to be use
		in MAC-version of r5.2.

HML: 19/10/00:	Made minor changes to jobfilegeneration to echo the
rcm: 805	operations of the jobfile to the console.
                Does not use ConvertExportList anymore (obsolete).

FGC: 20/10/00:	Continued ABSTRACT/INTERMEDIATEmachine until byteswap,
rcm: 806	better chances for compilation :-)

OLM: 21/10/0:	Fixed semantic error (switch -> common.switch) in
rcm: 807	NTI/NITBmaschine.bet.

MG:  26/10/00:	More work on INTERMEDIATEmachine and sparcbackend.
For rcm 808	Last instr done is addMem in IM.

PA: 6/11/00:	Fixed LIB_DEF for GENERAROR/ELF/elfread, to make link
rcm: 807#	of mjolner tool possible on sgi.
(olm locked ~)

OLM: 14/11/00:	Minor changes: ExOx for MIPS fix; MPS experiments, ...
rcm: 808	Placed all non-compiling code in INTERMEDIATEmachine
		into comments. Fixed constants in IManalyser. They can
		now compile. But 102 erros in IMmachinebody:-)

PA: 15/11/00:	Minor change in GENERATOR/SUN4S/SUN4SBasmlink:
rcm: 808#	Fixed path to gcc gmon.o used for profiling with
		gprof.

OLM: 15/11/00:	Made InitDataSeg, newFragment, etc. virtual in machine.bet
rcm: 809	in order to handle these operations in INTERMEDIATEmachine.

HML: 17/11/00:  Made some switch 87 based changes to INTELBmachine: If switch
rcm: 810        87 is set, the variable ProfBetaStackTop is set to point to
                the stack where beta-code calls external code or runtime.
                Used by the sampling profiler.

OLM: 18/11/00:	Changes to new backend, which can now be compiled.
rcm: 811	The new backend and intermediate machine is now linked
		with the compiler. There is still some way to go before
		it can successfully compile a ful beta program.

OLM: 10/12/00:	Bug fix for "bad font error on SGI". It is necessary
rcm: 812	to test a whole system before this version is released.
		When properly tested on MIPS, the same corrections MUST
		be made on PPC. The changes are in MIPSmachine: 
		pushOregisters and popOregisters; callReg is NOT
		pushed/popped.
		Major changes to new backend/optimizer.
		Backend/optimizer is included in the compiler.
		DO NOT USE THIS VERSION FOR PUBLIC RELEASES.

OLM: 10/12/00:	Bug fix for crash after semantic error on virtual super ptn.
rcm: 813	DO NOT USE THIS VERSION FOR PUBLIC RELEASES.

MG: 18/12/00:	Fixed missing slots in dummybackend.
rcm: 814	Commented out INTERMEDIATEmachine. Will get back in
		right after this checkin.
		This version is intended for the codefreeze. For now.

PA: 28/12/00:   Fixed problem with bootbeta being unable to link stuff
rcm: 815	using SGI shared libraries in BETALIB because
		LD_LIBRARY_PATH was expanded into SGI link directive.
		Now LD_LIBRARY_PATH expansion is delayed until just
		before linking in LINKOPT stuff (for what it is needed).
		Moved LinkSharedLibFile from asmlinkbody to
		UNIXasmlink and added empty fragments for it on PPC
		and NTI.
		Touched files:
		asmlinkbody, UNIXasmlink, SGIasmlink, PPCMACasmlink, NTIBasmlink

OLM: 01/01/01:	Made addPrefix and adjustForm in index.bet subpatterns of
rcm: 816	protect to catch astOverflow.

		The interactive compiler (beta - not when used in e.g. Sif)
		now strips extensions '.ast' and '.astL'. Files with 
		extension '.lst' and '.a2s' are ignored and so is the file
		NAME '.bet'. The extension '.beta' is considered illegal.
		A warning message is given in these cases.

		Added catch of NoSuchFileError to jobfile in asmLinkBody
		to catch if someone has removed the job-file during
		compilation. Also added a test for the existence of the
		jobfile before deleting it (jobFileRunner).

		Added catch of OtherError to file BC in REALmachine.bet and 
		backend.bet to handle exceptions like Disk quota exceeded.

		Added catch of openFailed to save of debug information in
		REALmachinebody.

		Attempt to avoid crash in case of list2rep assignments,
		but have not been able to reproduce a crash situation. 
		Happens often when users make errors in assignments.

OLM: 06/01/01:	Transferred MIPSmachine fix for BAD FONT problem to PPC.
rcm: 816+	See OLM: 10/12/00: rcm: 812.
		IS NOT checked on PPC!

OLM: 09/01/01:	Prepared version for freeze to dSa.
rcm: 817	Removed include of INTERMEDIATEmachine and all test switches
		are set to false.

OLM: 10/01/01:	Bug fix in CODEmachine and INTERMEDIATEmachine for ExO
rcm: 817+	for HPUX9PA - This version should be checked in, and
		without INTERMEDIATEmachine and used for dSa freeze.
		MUST wait OK from Flemming.
		Check-in MUST be from root component to get an 818 version!

OLM: 12/01/01:	Please note that CHANGES was NOT updated when rcm:818
rcm: 818	was checked in. I.e. this note is missing for version
		818. That is: if you do a check-out of rcm:818, the last
		note in CHANGES will be rcm: 817+ above.

OLM: 12/01/01:	Included INTERMEDIATEmachine.
rcm: 818+

OLM: 28/01/01:	Fixed bad error message for "444->putline".
rcm: 818+	All tst-booleans are true.

OLM: 11/02/01:	Warnings for mixing booleans and integers in assignment
rcm: 819	and binary expressions have been converted to errors.
		This version has numerous chnages related to the new
		backend.
		This version is NOT for public release - test constants 
		are enabled.

PA: 12/02/01:	Changes for X86 Solaris port.
rcm: 820	New target 'x86sol'
		Modified (M) and added (A) files:

		M compiler/DYN/private/dynlibbody.bet
		A compiler/DYN/private/imagepair_x86solbody.bet
		M compiler/GENERATOR/CODEmachine.bet
		M compiler/GENERATOR/ELF/ELFimageread.bet
		M compiler/GENERATOR/ELF/elffilebody.bet
		M compiler/GENERATOR/ELF/elfreadbody.bet
		M compiler/GENERATOR/INTEL/INTELBmachine.bet
		M compiler/GENERATOR/INTEL/INTELmstate.bet
		M compiler/GENERATOR/REALmachine.bet
		A compiler/GENERATOR/X86SOL/X86SOLasmlink.bet
		A compiler/GENERATOR/X86SOL/X86SOLbeta.bet
		A compiler/GENERATOR/X86SOL/X86SOLelf.bet
		A compiler/GENERATOR/X86SOL/X86SOLimageread.bet
		M compiler/GENERATOR/imagereadbody.bet
		M compiler/GENERATOR/machinebody.bet
		M compiler/SYNTHESIZER/auxlib.bet
		M compiler/SYNTHESIZER/computedAdrVal.bet
		M compiler/SYNTHESIZER/gen1body.bet
		M compiler/SYNTHESIZER/genlib_com.bet
		M compiler/SYNTHESIZER/prototypebody.bet
		M compiler/SYNTHESIZER/simpleval.bet
		M compiler/SYNTHESIZER/storeReg.bet
		M compiler/compiler.bet

PA: 13/02/01:   Replaced two identical files
rcm: 821		compiler/DYN/private/imagepair_linuxbody.bet
		and
			compiler/DYN/private/imagepair_x86solbody.bet
		with
			compiler/DYN/private/imagepair_intelelfbody.bet

OLM: 18/02/01:  Introduced new files: compiler/bbeta.bet and
rcm: 822	GENERATOR/oldbackend.bet and COMPILER/newbackend.bet.
		Compiling beta.bet will include the old official backend.
		Compiling bbeta.bet will include the new experimental 
		backend.

HML: 22/02/01: I don't know what happend here. After a "gettip"
rcm: 823       the version was (822#) - I did a ci to get rid
               of the hash.

HML: 22/02/01: Fix for callbacks on mac. GPR11 is used instead
rcm: 824       of GPR24 to communicate the struc reference from
               the callback stub to the callback function. Depends
               on a similar fix in NEWRUN/Callback.c

OLM: 13/3/01:  Files with extension '.bet~' is now ignored by the compiler;
rcm: 825-826   a warning is given. Cf rcm: 816.

OLM: 22/03/01: Backend stuff - including changes to primReg handling, which
rcm: 828       may affect the old compiler as well.

OLM: 17/04/01: Bug fix for gPutbits:  (-12,  8,Y)->X.%PutBits
rcm: 829-832   And lots of backend stuff.

OLM: 23/04/01: Bug fix for type check of (for i<3 repeat ... for)
rcm: 833       Lots of backend stuff

OLM: 8/5/01:   Bug fix for BetaStack for external call: find_activation
rcm: 833+      used by new exception handling

OLM: 13/6/01:  Backend stuff.
rcm:834-835

OLM: 22/6/01:  Backend stuff.
rcm: 836

EC: 10/08/01:  Change to flag 33 (profiling version) so it works on Linux
rcm: 836+

OLM: 08/09/01: Included betarun version in compiler output
rcm: 837

OLM: 21/09/01: Moved CONTROL/asIsPretty to pretty/asIsPretty; 
rcm: 838       CONTROL/asIsPretty has not been removed yet.

OLM: 07/10/01: Changed shared library handling such that sharedlib
rcm: 839-841   is ONLY created for platforms that have sharelibraries.
	       I.e. lib/sgi is created, but no lib/sun4s, etc.

OLM: 07/10/01: Bug fix for 'WebVise-problem'. Instantiation of a final
rcm: 842       virtual, where ON=1 missed a pop of a register on non-sun4s
	       platforms. Has been fixed by deallocating a register
	       in goOrigin. A plain delalloc without testing if the register
	       is frozen may prevent pop of a pushed register from e.g.
	       a computed remote (xxx.get).(# ... #)

OLM: 27/10/01: Bytecode stuff
rcm: 843

OLM: 11/11/01: More bytecode stuff
rcm: 844
		  
PA: 26/11/01:  Progress in real handling on intel.
rcm: 845       Still problems with floats across external calls.

OLM: 1/12/01:  Bug fix for myConst(# exit (3.14,'foo') -> (n,r,s[]);
rcm: 846       myConst: (# exit 42 #); checker did not catch the error
	       in using a constant pattern as super. We should consider
	       to allow constant patterns to be used as super.

PA: 6/12/01:   Intel specific changes:
rcm: 847       Introduced use of stCstInx instead of hack in stCst.
	       Introduced use of cmpFloatmem and cmpFloatMemInx
	       instead of hack in cmpFloat.
	       Fixed remaining problems in tstreal.

PA: 7/12/01:   Bug fix for non-intel in INTERMEDIATEmachine.floatBinOp.
rcm: 848       Fix in intelbackend.backendStoreFloat2int for rounding problem.
	       tst now runs without errors until tstlist2rep on intel

PA: 11/12/01:  Fix in call of NewVRx: Should use callAlloPrim instead
rcm: 849       of CallPrim in gen1body in order to work with list2rep.
	       TST NOW RUNS ON INTEL WITH NO ERRORS IN SAFE MODE WITH
	       BETART=IOA#1000 (:-)
	       Fails, however, in case of GC.

OLM: 15/12/01: Reorganized MDBODY inclusion of machine-bodies for
rcm: 850       old and new backends. MDBODY of e.g. SPARCmachine
	       (old backend) and sparckbackend (new backend)
	       is now in GENERATOR/oldbackend and newbackend
	       respectively. Before MDBODY of SPARCmachine, etc.
	       was in compiler.bet.
	       All files like SUN4S/SUN4Sbeta.bet   do now have
	       counter parts  SUN4S/SUN4Starget.bet for the new
	       backend.

PA: 02/01/02:  Minor changes in ELF file attributes for linux in an
rcm: 851       attempt to fix problem with binutils-2.11 on linux, 
	       that causes BETA linked files to crash at load-time. 
	       Did not help, though (:-(

OLM: 02/01/02: Bug fix for (if none // text## then ... if);
rcm: 852       tstvarptn updated.

PA: 03/01/02:  (funny date! (:-))
rcm: 853       Changed GENERATOR/LINUX/LINUXelf to make .text section
	       non-writable and not to generate empty .rel.text and/or
	       .rel.data sections.
	       This fixed problem with beta failing with binutils
	       2.11.
	       LINUXelf changes must be copied to new backend too.
	         >>> Not needed - they now share same LINUXelf

-- rcm:854-857 are in the branch from 818

OLM: 06/01/02: Several changes to bytecode generation - sbeta.bet
rcm: 858       and related files.
	       For documentation of the bytecode compiler, see
	       DOC/ByteCode.html
      
-- rcm:859-860 are in the branch from 818

PA: 09/01/02:  Attempt to clean up asmlink mess for byte code
rcm:861	       generation:
	       New file GENERATOR/BYTECODE/BCasmlink.bet
		     - handles javabc and dotnet targets - may later
		       need to be split up into to different files.
               Removed (most) switch182 tests (for bytecode
	       generation) in GENERATOR/asmlinkbody.bet.
	       Removed explicit filenameextension .J from 
	       SYNTHESIZER/genlib_bytecode.bet.
	       Moved slot asmlinklib from asmlinkbody to asmlink.
	       Could not figure out how to access asmlink from 
	       GENERATOR/BYTECODE/BCmachine - preliminary hardcoded
	       explicit tests for target platform.

PA: 09/01/02:  Moved slot asmlink back into asmlinkbody (otherwise
rcm: 862       normal compilers did not compile. Introduced extra slot
	       translateasmlink:attributes in asmlink.bet instead.

PA: 09/01/02:  Ups forgot to add GENERATOR/BYTECODE/BCasmlink.bet.
rcm: 863       Now added.

PA: 16/01/01:  Initial .NET program (simple hello world) now runs.
rcm: 864       GENERATOR/BYTECODE/BCdotnetBody partly finished.
	       Had to fix explicit use of java/lang/object and
	       appending of 'V' to virtual method signatures in
	       SYNTHESIZER. 
	       Also need an end-class hook.

OLM: 30/01/02: Bytecode generation: introduced special patterns
rcm: 865       class and proc. Subpatterns of class and proc are interpreted
	       as classes or procedures respectively when generating code.
	       Other patterns are handled as general and more advanced
	       code is generated. Currently NOTHING is checked about
	       correct usage. And everything is still pretty incomplete.

OLM: 19/02/02  Fix of error introduced by a shaky hand during work with
rcm: 866       bytecode compiler

OLM: 21/02/02  Check-in of byteversion that works for all TEST programs;
rcm: 867       for visit by Microsoft.

OLM: 25/02/02  Bytecode stuff
rcm: 868

OLM: 27/02/02	Bytecode stuff: all known testprograms - in Java -
rcm: 869	works with tstenv, tstenv.main and program, and
		for java packed as .jar files.

PA: 04/03/02:  .NET bytecode stuff
rcm: 870-871

HML: 11/03/02:  macosx target added
rcm: 872

HML: 11/03/02:  MACOSX Generator added.
rcm: 873-875

HML: 13/03/02:  Newline handling fixed in MACHOmachine.
rcm: 876	Details with jobfilehandling fixed for macosx.

rcm: 877-879:   Fix of conflict created by rcm automatic brancing

------------------ CVS controled compiler ------------------
CVS note: Remember that the word "magicword" must appear in
cvs log message for compiler commit to succeed (to prevent 
accidential commit), e.g. 
		"cvs commit -m 'version: 880 (magicword)'"
Please change versionnumber manually in compilerrcmversion.bet
before commit (mbs_commit does not yet work for compiler).
------------------ CVS controled compiler ------------------

PA: 15/03/02:	Changed compiler to link with betarun in
cvs: 880		~beta/lib/objdir 
		instead of 
			~beta/betarun/objdir.
		Affected:
			CONTROL/systembody-betarunVersion
			DOC/CHANGES
			compilerrcmversion: 880

PA: 17/3/02:	Macosx MDBODY in oldbackend
cvs: 881	Affected:
			GENERATOR/oldbackend.bet
			DOC/CHANGES
			compilerrcmversion: 881

OLM: 18/3/02:	Bytecode changes
cvs: 882

PA: 19/3/02	.NET changes.
cvs: 883	Fixed new stuff so that .NET compilation (almost) work
		again.
		Now links with a betarun (written in C#) from
		~beta/betarun/CS with helper routines.
		Compiler rebuilds betarun if needed.
		Still a problem with call of program from tstenv.
		But probably closer a final solution.
		Modified:
		  M compilerrcmversion.bet
		  M DOC/CHANGES
		  M GENERATOR/asmlinkbody.bet
		  M GENERATOR/BYTECODE/BCasmlink.bet
		  M GENERATOR/BYTECODE/BCdotnetBody.bet
		  M SYNTHESIZER/signature.bet
