<HTML>

<HEAD>
<TITLE>ChkHeap Implementation</TITLE>
<LINK REV="made" HREF="mailto:olm@daimi.aau.dk">
</HEAD>

<BODY>
<H1>ChkHeap Implementation</H1>

<PRE>
Her er hvad slot ChkHeap skal g|re:

Sammenlign operanden med IOA og IOATop og
kald ChkRA hvis operanden IKKE peger ind
i dette interval:
          
          IOA                            IOATop (not inclusive)
    --------|------------------------------|---------
    ChkRA() |           Do nothing         |  ChkRA()

Motorola implementation:

    Vha Chk2 instruktion.

Linux implementation:

	(if op&lt;IOA goto fail if);
	(* op is bigger than IOA *)
	(if op&lt;IOATop goto done if)
	(* op is bigger than IOATop *)
	fail:
          (* op is less than IOA or bigger than IOATop *)
          call ChkRA(op)
	done: 
 
sparc implementation:

       Uses unsigned compares:

	(*R[] -&gt; S.X[]  offset til X 28 
	sub %i0, %g6, %g1       ! %g1 = %i0 - heapBot
	cmp %g1, %g7            ! %g7 - %g1
	bltu 1f                 ! jump if %g1 &lt; %g7,
	                          dvs %i0 in [heapBot, heapBot+%g7[
	st %o0, [%l0+56]        ! delay slot, udf|res f|r jump
	mov %o0, %g2            ! Begge argumenter skal vel overf|res til CheckRef..?
	call ChkRA
	add %l1, 56, %g1
	1:

</PRE>

</BODY>
</HTML>