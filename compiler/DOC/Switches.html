<HTML>

<HEAD>
<TITLE>Compiler numeric switches</TITLE>
<LINK REV="made" HREF="mailto:olm@daimi.aau.dk">
</HEAD>

<BODY>
<H1>Compiler numeric switches</H1>

<PRE>
The following is a list of switches to the compiler.

This version of the document is a comment that have been moved
away from CONTROL/systembody.bet. The list is NOT up-to-date. 

 *  1: interactive trace of all "trace" imperatives
 *  2: print the complete AST after each translate 
 *  3: print AST for each form after initterm in check 
 *  4: re-organize fragment after parsing for compact-open
 *  5: Suppress code generation; implies that 33 is set also and NO
 *     job-file is generated
 *  6: no linking is performed
 *  7: print AST node statistics 
 *  8: print node classifications
 *  9: Extended qua-check. Standard qua-check does not test for equality
 * 	of origins. Opt. 9 generates qua-check that checks 
 * 	for equality of origins.
 *  10: force parsing of all files
 *  11: force checking of all forms
 *  12: force codegeneration of all forms
 *  13: generate debug code - includes debug version version of betarun
 *	See also switch 69
 *  14: no check for NONE
 *  15: no index check
 *  16: used by incremental linker??????
 *  17: do static link 
 *  18: no remove of assembly- and job-files
 *  19: suppress warnings for missing QUA-checks
 *  20: print charPos/ErrNo on *.lst file
 *  21: continue after semantic errors
 *  22: generate calls to TraceXcall
 *  23: preserve job-file
 *  24: only generate ..db files!
 *  25: print heap size during fragment GC
 *  26: do fragment GC
 *  27: trace fragment GC
 *  28: generate comments for each imp in the asm-file
 *  29: Used internally for traceXcall hack for Linux
 *------------------- Execution profiles ------------------------------
 *  31: The following switch makes it possible to obtain 
 *  	an execution profile. For each entry-part G- or M17FOO,
 *  	a profile is made using gprof.
 *  	After program execution the logfile "gmon.out" will exist. 
 *	This file may be processed by the unix command "gprof(1)". 
 *      For details see 'man gprof'.
 *      ONLY for SUN4S
 *      Ex:
 *         beta -s 31 foo
 *         foo
 *         gprof foo gmon.out
 *	If you want profiling of BETARUN functions too,
 *      you should build a betarun with the environment
 *      variable PROF set to "-pg":
 *         cd BETALIB/betarun/sun4s
 *         setenv PROF "-pg"
 *         make all
 *      before linking "foo".
 *---------------------------------------------------------------------
 *  32: do not pretty print if semantic errors
 *  33: do not execute .job file
 *  34: assemble .s-files for sun4s-&gt;elf compiler (SUN4SBbeta)
 *      This will overwrite the directly generated elf-files.
 *  35: print FullName of fragment-files
 *  36: Dump stack when compiler fatal error
 *  37: Generate job file with "purify" invocation (solaris only)
 *  38: 
 *  39: produce .s-file for sun4s-&gt;elf compiler (SUN4SBbeta)
 *  40: 
 *  41: Use runtime system with valhalla support (betarun_v) and do
        not strip executable for debug symbols.
 *  42: no generation of run-time qualification check
 *  43: execute objects via inner and not via M-entrypoint
 *  44: no doPart/mainPart warnings
 *  45: trace information in assembly code (only for some architectures)
 *  46: For each fragment being checked print visible LIB-slot bindings
 *  47: emit endian information also for big-endian machines.
 *  48: No error for general repetitions, etc. Used for experimenting with
 *      implementation of general repetitions, etc.
 *  50: test of modtime for form files
 *  51: enable trace in codegenerator
 *  52: use alternative BETA grammar. To be specified on standard input
 *  53: HP/MC680x0 position indepdendent code .
 *  54: use editorMode for pretty print
 *  55: Obsolete: (was: use .go extension for debugger object files)
 *  56: strip path from  job-file names
 *  57: Component size includes SPx and SPy; should be made permanent SOON!
 *  58: temporary use! Generate link directive for MPW 3.3
 *  59: inline local virtuals in dispatchtable
 *  60: trace qua-check in code-gen.
 *  61: New primitive interface! Used for mips, and later also other platforms.
 *      Part of switch 61 has been separated out : see switch 79
 *  62: Generate position-dependent-code (PIC) - only relevant for MIPS.
 *  63: Use shared libraries via the LIBRARY prop
 *  64: Multi tasking; implies 68, but with non-simple V-entry points
 *  65: New version of 64
 *  66: Generating COM objects
 *  67: Consistency check of fragment forms
 *  68: Generate simple V-entry points that just call AlloI. This is for
 *      experimenting with shared libraries, since current calling seq.
 *	with T-entry points will not work for shared libraries. As of now
 *     	unclear whether V-entry points will always be generated or just when
 *	calling patterns in shared modules.
 *  69: Use personal edition version of betarun
 *		Basically the run-time system is named 'betarun'.
 *		The following switches can be used to select other versions
 *			of betarun:
 *		Switch 	69:	'_pe'		personal edition
 *			13	'_debug'	debug version
 *			41	'_v'		valhalla version
 *
 *		Only one of the above can be applied at the same time;
 *		if several are used, they take precedence in the above
 *		order, i.e. if 69 is set the other are ignored. 41 is true
 *		by default (can be disabled by -d or --noDebug).
 *
 *		Independently the following can be used
 *
 *		Switch	64:	'_mt'		multi-tasking version
 *
 *		If e.g. switch 41 and 64 is set then 'betarun_v_mt' is used
 *		On most platforms a file extension like '.o' is appended to
 *		the final betarun file name.
 *  70:  Use CodeWarrior linker instead of MPW linker for PPCMAC compiler
 *       (native PowerMac).
 *  71	 Link without Console. Currently only on nti_ms & nti_gnu.
 *  72:  Used when dynamic compiler
 *  73:  On SGI, all object files are made into shared object files.
 *       The purpose is to be able to test shared object files for small
 *       examples like tst*.bet.
 *  74:  Select HP UX 10 assembler 
 *  75:  Do not generate job-file
 *  76:  Assume pre-COM prototype format: the prototype ref from an object
 *       points to the static part of the ProtoType. 
 *       24 must be added to get the start dispatch table. 
 *  77:  Experiments with new persistence, isNone test, etc
 *  78:  FORCE compiler to crash with reference is none; to be able to
 *       test error handler script
 *  79:  To be used in combinaton with switch 61; for SGI wrappers are
 *       generated for Qua, CopySVRx, etc to push Sp and this; switch
 *       61 does no longer push SP/this for these primitives; to push
 *       switch 79 must be used. 
 *  80:  Betrun with garbage collection for each object allocation;
 *       only for debug purposes
 *  81:  
 *  82:  Ditto - new interface  for returning external results;
 *       see genexternal.bet; to replace getXres
 *  83:  Experiment with sequence diagrams
 *  84:  Experiments with generating n32 object file format for SGI (gcc compliant)
 *  85:	 Experiment with fixing float stack on Intel
 *  86:  
 *  87:  Used by Henry Michael for profiling
 *  88:  Use full speed betarun with symbolic debug info (betarun_sym)
 *  89:  Use ExOz instead of ExO
 ***************************************************************************
 *  90-99: compiler warnings on/off.
 *         
 **************** New backend & optimizer **********************************
 *  120: Use new backend & optimizer (Flemming & Anders's Thesis) (old 81)
 *  121: Backend/optimizer: old 86
 *  122: Backend/optimizer: old 89
 *  123: Backend/optimizer: trace backend code generation (old 351)
 *  124: Backend/optimizer: low level trace of INTERMEDIATEmachine (old 352)
 *  125: Generate simple code for object allocation
 *  126 - 128: reserved for backend use
 *  129: Byte code generation
 ************************** initialization of AST (initterm) ****************
 *  131: print namDcl bin. tree 
 *  132: initTerm trace 
 *  133: initSemi trace 
 *  134: trace Find elim 
 *********************************** checker ********************************
 *  191, 192, 193 are set by --tracecheck
 *  161: getName
 *  162: getSort
 *  163: getSpecOfSort
 *  164: getDesc
 *  165: setUp 
 *  166: evCheck trace      
 *  167: qua trace 
 *  168: actual desc 
 *  169: SemiSearch
 *  170: print virtual descriptor with added prefix 
 *  171: trace lib search 
 *  172: trace getPreDesc 
 *  173: trace chkVB 
 *  178: print enter/exit offsets for descriptors with enter/exit code
 *  179: detailed trace for 178
 *  180: Generate N/X-entry points
 *  181: Alternative experiment to 180: allocate tmp space for objects
 *       with complicated N/X part
 *  182: Generation of byte code 
 *       - ongoing project: byte code for .NET and Java
 *       - use 313 to trace byte code generation
 *  183: Generation of byte code
 *       - 182 must be set
 *       - with 182 alone, a pattern is considered either a class 
 *	   or procedure see the documentation;
 *         with 183, a pattern may be both a class and procedure
 *  184: Code for all classes are in the same file - bytecode only
 *  185: Generation of test comments (1st char ='!') in bytecode
 *       if false such comments are skipped
 *  191: desc trace 
 *  192: dcl trace
 *  193: imp trace 
 *  194: cst desc val
 *  195: desc after check, elim.
 *  196: dump att storage allocation 
 *  198: detailed checker trace
 *  199: print qualification information for reference assignments
 *       that requires Qua Check
 ****************************************************************************
 *  201-209: for trace in XXXmachine
 ***************************** Optimization control **************************
 *  210-220: Used to control experiments with various optimizations; 
 *           Note: the optimizations do NOT yet work completely; they are
 *           currently being developed and tested.
 *  211:     inlineNX; inline simple enter and exit lists.
 *  212:     inlineDo; inline do-part of (simple?) patterns.
 *  213:     hasOnlyNX; Inline patterns that ONLY has enter and/or exit list; 
 *           i.e. NO attributes or do-part; does NOT seem to work.
 *  214:     hasAcode; do not call G-parts with no code.
 *  215:     hasOnlyInner; do NOT generate code for or call M-parts that have
 *           only an inner
 *  216:     attempt to use delay slot in (sparc) code generation
 ****************************** Trace of code generator ***********************
 * The switch --tracecode sets 308 and 311
 * 301: synthesizer, low level tracing
 * 302:	synthesizer, low level tracing
 * 303: translate_libsbody: low level tracing
 * 304:	synthesizer, trace hashtables for forms and descs
 * 305: synthesizer, print hashtable statistics
 * 307: gdbody: print descriptor before translation
 * 308: genlib, synthlibbody: print declaration before translation
 * 311: dobody, synthlibbody: print imp before translation
 * 313: trace generation of byte code - .NET and Java
 * 315: trace that callReg is not pushed/popped when external call with
 *      object-evaluation is happening in the arguments. Only relevant
 *      for MIPS and PPC. This switch may be eliminated when the fix
 *      has been tested.
 **************************************************************************
 * 371:     Fragment asmlink
 ****************************** Dependency Analysis, etc.**********************
 * The following switches are for tracing dependency analysis; these switches
 * are transfered to the dependency modules in 
 *		~beta/dependency/dependency.bet
 * Switch[380+i] is transferred to dependency:switch[i]
 * 381: trace groupList
 * 382: use groupList when re-doing same translation.
 * 383: trace bodylist complete
 * 384: trace grouplist scan when re-translating
 * 385: trace doneExamine
 * 386: print correspondance between BETA_DATA-id's and group-file names
 * 387: trace read properties
 * 388: dump groupList
 * 389: make modtime test
 * 390: Trace check slots
 * 392: trace local switches 
 * 393: make slow file modtime check 
 * 394: trace LIBRARY handling - use 303 for detailed tracing
 * 395: DO not translate, just build graph
 * 396: trace real/compact open
 * 397: Trace Buildgraph
 * 398: Trace translate 
 * 399: Force Make (used with new makefile handling)
 * 400: Trace BUILD property

 ************************************** MPS **********************************
 * All switches with a value greater than 400 are transferred to MPS; 
 * 400 is subtracted before the value is transferred to mps; i.e. if
 * 402 is given to the compiler, switch 2 in mps is set. The following
 * 441: experiments with saving byte positions in the ast instead of
 *      comment pointer. First step in development of format-preserving
 *      prettyprinter
 * trace-object is copied from astlevel.bet and shows the available 
 * mps-switches:
     trace: @
     (* different tracing possibilities. I.e. to trace open of
      * fragments use
      *      (trace.fragmentOpen,true) -&gt; trace.set;
      * To activate tracing through the BETA compiler,
      * set compileroption=number given here+400
      * (e.g. "beta -s 490 ..." to activate trace of slot bindings).
      * The trace will be delivered on the stream trace.str.  This may be
      * set by e.g.:
      *      traceFile[] -&gt; trace.output;
      * By default, trace is delivered on screen.
      *)
       (#
          fragmentOpen: (#  exit 1 #);
          onParse: (#  exit 2 #);
          topOpen: (#  exit 3 #);
          fragmentClose: (#  exit 4 #);
          topClose: (#  exit 4 #);
          compactOpen: (#  exit 10 #);
          grammars: (#  exit 20 #);
          parsingComments: (#  exit 30 #);
          getnextComment: (#  exit 31 #);
          editingComments: (#  exit 32 #);
          parser: (#  exit 50 #);
          getBinding: (#  exit 90 #);
          getBindingMark: (#  exit 91 #);
          set: (* call this to trace something in the astInterface *)
            (# no: @integer; on: @boolean;  enter (no,on) do on-&gt;d[no] #);
          output: (#  enter str[] #);
          str: (* Private *) ^stream;
          d: (* Private *) [100] @boolean;
          
       #);

</PRE>

</BODY>
</HTML>
