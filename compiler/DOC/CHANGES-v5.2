CHANGES for compiler version 5.2

------------------------------------------------------------------------------

OLM: 27/6/96:	Constructed version 5.2 based on v5.1.3; upgrade to
		basiclib/v1.5

--------
The following changes are also made in version 5.1.3

OLM: 27/6/96:	Eliminated use of general repetition in searchbody, since
		wrong code apparently is generated. 

PA: 27/6/96:	Changed NTImachine: 
		SaveSP replaced by (beginLabel+EndLabel).
		Added LocalLabAsText and IsObjectreg.
		Fixed uses of Trace: All operations prefixed by 'x'.

OLM: 28/6/96:	Reverted the decision to include endian-info in prototypes
		on big-endian machines (v5.1.3 change: OLM: 27/6/96).
		It is (once again) ONLY generated for little-endian
		machines.
		Removed switch 66 warning.

SP/OLM: 1/7/96:	Changes made to NTImachine, NTIasmlink and asmlink to fix
		link problems on NTI. See CVS log-file.

OLM: 1/7/96:	PPCMAC: added code generation of FlushCodeCache, which
		is a routine generated in betaenv/tstenv. It MUST be
		called from CopyCPP, etc.

OLM: 4/7/96:	Bug fix genexternal; missing protectCallReg for Cinit;
		a possible problem for ppcmac and sgi.

OLM: 16/7/96:	Bug fix; dobody; inter fragment labels referred in the
		fragment defining the label ddi NOT work; some fragment
		in process/v1.6.eernst/private made use of that.
>>>		The compiler now explicitly generates an import of an inter
		fragment label. This import was previously made in
		e.g. NTImachine:LocalLabPut; SO THE IMPORT SHOULD NOT BE
		MADE. Other machine forms should be checked for this, e.g.
		SNAKEmachine:localLabLoadAdr.

OLM: 22/7/96:	Bug fix; translate.bet; verboseLevel was NOT transferred to
		dependency.

OLM: 26/7/96:	Updated PPCmachine to generate code (doAtt) for copying
		stack objects to the stack.

-------

PA: 8/8/96:	Replaced '\' with '\\' in Cmachine in order to make it compile
		using beta5.2
		Also had to do it in LINUXBasmlink, LINUXmachine, LINUXasmlink,
                NTIBasmlink, SUN3machine, SUN3asmlink, SUN4Sasmlink
		and Casmlink.

OLM: 10/8/96:	Replaced '\' with '\\' in yet another bunch of files.
		There are, however, other files (win32lib/v1.2/ntinterface.bet)
		that also includes '\'.

OLM: 10/8/96:	With option --nocode and 'normal' verbose level, the compiler
		did not output 'Bind fragments in ...'. This was an error
		introduced when trying to avoid this message when --nocode
		is used where it came evene when there was no checking.
		The result was a number of messages 'Checking!Checking!...'.
		This bug should have been fixed now.

OLM: 11/8/96:	Bug fix for the codegen error that left non-object refs. in
		GC-registers. This is the error that may have given fatal
		errors in the hypermedia. Changes in machine and machinebody.
		The pattern toTmp has been changed.

PA: 2/9/96:	Fixed inconvenience in INTELBmachine and INTELmstate:
		Fixed TstNone, ChkHeap and emitCmpImmReg so that
		the shortest opcodes are used, and so that each
		test does not include both a testl and a cmpl
		instruction (as it did until now).

------------------------------------------------------------------------------

CHANGES for compiler version 5.2 after branching into CORRECTION BRANCH
CVS branch tag: v5_2_correction_branch.

------------------------------------------------------------------------------

PA: 17/10/96:	Fixed "real" error in SNAKEmachine: The .CALL directive
		did not immediately precede the corresponding BL instruction
		generated by CallCproc.
		Fixed SNAKEasmlink to use dynamic link for -lm -lc too.
		This fix was copied from the v5.3 (main) branch.

------------------------------------------------------------------------------

CHANGES made in version v5.2.1

OLM: 21/10/96:	Incorporated PPCMAC changes for itemevval.bet and 
		PPCmachine.bet from files in v5.1.3PPCMAC

OLM: 26/10/96:	Fixed code gen for AlloVRi to fix sgi compiler bug!
		Note! This fix should not be necessary in beta5.3 since
		the calling sequence for AlloVRi has been changed.

ESS: 6/11/96:	Further binding of AST.CompactOpen in checkslots.bet:
		Added BadFormat handling.

OLM: 10/11/96:	Added semantic error (114) for '!' operator

ESS: 20/11/96:  Changed grammar initialization code in systembody to use
                betagrammarinit in mps/grammarinit.
                Previously the compiler and sif each had each own version of 
                the grammar on treelevel and cfl level resp.

OLM: 21/11/96:	Included ppcmac related changes from v5.1.3PPCMAC;
		Mainly for Pascal CallBack.

-------------------------------------------------------------------------------

Changes from here on are for MBS release 4.0.1

OLM: 26/12/96:	Changed stop in interactive on illegal command line options
		from failure to normal

OLM: 27/12/96:	Fixed error message for transAccesError. A 'perfect'
		error message can only be made by improving the exception
		interface from mps, since transAccessErr in 
		dependency/controlbody should does not know which file
		that causes the problem. The parameter 'm' has this encoded,
		but is not directly usable.

OLM: 27/12/96:	Fixed bug when using 'origin.x' in dopart slots

OLM: 28/12/96:	Bug fix in chklst; crashed for certain types of semantic
		list errors; FEJL/sand.bet

OLM: 28/12/96:	Bug fix for dataReg negative for SGI.

OLM: 28/12/96:	Fixed sun4s link to always include lsocket and lnsl

OLM: 4/1/97:	Fixed bug in sun4s with respect to missing save of busy
		floating point registers for external calls;
		FEJL/real*.bet.

OLM: 5/1/97:	Further fix of 4/1/97 since arguments to nested external
		calls must be stacked. Added test case to tstreal; this
		test case DOES NOT WORK FOR SGI and HPUX9PA; a similar
		test case in ~olm/beta/system/v5.2/TST/FEJL/real2.bet	
		gives seg. fault when terminating on linux!

OLM: 7/1/97:	Bug fix for intel: INTELBmachine, LINUXmachine.
		Float register push do NOT work:
		(1) float registers cannot be pushed, 
		(2) rep.fMax does NOT work for recursive calls of pushDataReg/popDataReg.
		Code calling push/pop for float registers have been commented out.

>>>>>>		It is still NOT known whether stack overflow on float register
		stack is a problem or not, and how to handle a possible problem!

>>>>>>		The use of rep.fMax in case of nested push/pop may also be 
		a problem on other platforms! On platforms where float registers 
		are pushed, rep.fMax MUST be a parameter like max.

PA: 8/1/97:	Added the above change (in PushDataReg and PopDataReg) in NTImachine
		too.

PA: 8/1/97:	Fixed bug in swap-case in cmpAndJmpFloat in INTELBmachine, LINUXmachine,
		NTImachine. (solution taken from v5.3).

OLM: 9/1/97:	Yet another rep.fMax fix for INTELB, LINUX, NTImachine.

OLM: 18/1/97:	Added ad-hoc check for checking suspicious combinations
		of @@ and object evaluations in arguments to external
		calls.

OLM: 21/1/97:	Bug in error message for non-accessible file 
		(/users/beta/sun4s/foo.bet)

OLM: 22/1/97:	Bug fix compiler crash when binding virtual in descriptor with no
		super pattern; FEJL/noSuper.bet


PA+MG: 23/1/97:	Lots of changes for binary NTI codegen.
		The changes are taken from the corresponding
		files in v5.3. See v5.3/CHANGES for details
		on the individual files.
		Changed files:
		      INTELBmachine.bet
		      INTELmstate.bet
		      LINUXBasmlink.bet
		      LINUXBbeta.bet
		      Machinearray.bet (due to binfile change)
		      NTIBasmlink.bet
		      NTIBbeta.bet
		      binfile.bet
		      COFF/WIN32coff.bet
		      COFF/cofffile.bet
		      COFF/cofffile_ntbody.bet
		      ELF/LINUXelf.bet
		      ELF/elffile.bet       

