<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<title>Java/.NET to BETA converters</title>
<link rev="made" href="mailto:beta@daimi.au.dk">
<LINK REL="stylesheet" HREF="http://www.daimi.au.dk/~beta/doc/style/miadoc.css" TYPE="text/css">
</HEAD>

<BODY>

<H1>Java/.NET to BETA converters</H1>
In order to interface Java class libraries and .NET framework
libraries from BETA, currently one needs to declare the
classes/types/interfaces etc. of these libraries in BETA, using
e.g. the <CODE>ExternalClass</CODE> mechanism described in ...
<P>
In order to releave the BETA programmer of this tedious work, two
command line tools have been created, thart does this for Java and
.NET respectively.

<H2>java2beta</H2>

For the Java platform, a command line tool called
<CODE>java2beta</CODE> is provided.
Basic usage is e.g.
<PRE class=beta>
java2beta java.lang.String
</PRE>
which will open the <CODE>java/lang/String</CODE> class and produce
the file <CODE>&lt;BETALIB&gt;/javalib/java/lang/String.bet</CODE>
(where <CODE>&lt;BETALIB&gt;</CODE> denotes the placement of your BETA installation
as set in the <CODE>BETALIB</CODE> environment variable, see
<A HREF="../README.html#installation">Installation of BETA.Net and
BETA.Java</A>.
<P>
A few options are available as will be revealed by invoking
<CODE>java2beta -h</CODE>:

<PRE class=beta>
Usage:

Script: java2beta [-h][-v][-l][-f|-F|-] &lt;java class name&gt;
 e.g.   java2beta java.lang.String

Output files will be placed in $BETALIB/javalib in a directory
structure corresponding to the package of the class.
 e.g.   $BETALIB/javalib/java/lang/String.bet

Options:
   -h  Display this help
   -v  Verbose output
   -l  Generate to local directory instead of to $BETALIB/javalib
   -f  Force overwrite of existing output file
   -F  Force overwrite of existing output file
       AND files for refered classes
   -   Output to terminal instead of file
</PRE>

<H3>Converting custom classes</H3>
If you are generating BETA interfaces for a class, that is not part of
the standard Java installation, you may need to set the environment
variable <CODE>CLASSPATH</CODE> before calling <CODE>java2beta</CODE>:
<P>
If you are converting the class 
<PRE class=beta>
org.myplace.myclass
</PRE> 
and the class is placed in a directory named
<PRE class=beta>
/users/smith/java/classes/org/myplace
</PRE> 
you should set <CODE>CLASSPATH</CODE> to 
<PRE class=beta>
/users/smith/java/classes
</PRE>
You should also include paths to any non-standard refered classes in
your <CODE>CLASSPATH</CODE>. So if a method in
<CODE>org.myplace.myclass</CODE> has a parameter of type
<PRE class=beta>
org.otherplace.otherclass
</PRE>
and this class is found in directory
<PRE class=beta>
/users/jones/java/classes/org/otherplace
</PRE>
you should set <CODE>CLASSPATH</CODE> to
<PRE class=beta>
/users/smith/java/classes:/users/jones/java/classes
</PRE>
(on windows the <CODE>CLASSPATH</CODE> separator is semicolon instead
of colon).
<P>
Finally, if your custom classes are packed into JAR files, each JAR
file should be listed in the <CODE>CLASSPATH</CODE>. So in the
example, of the two involved packages where placed in two JAR files,
in the previously named directories, and these JAR files were named in
the conventional way, you should set <CODE>CLASSPATH</CODE> to
<PRE class=beta>
/users/smith/java/classes/org.myplace.jar:/users/jones/java/classes/org.otherplace.jar
</PRE>

<H2>dotnet2beta</H2>

For the .NET platform, a command line tool called
<CODE>dotnet2beta</CODE> is provided.
Basic usage is e.g.
<PRE class=beta>
dotnet2beta System.String
</PRE>
which will open the <CODE>System.String</CODE> class and produce
the file <CODE>&lt;BETALIB&gt;/dotnetlib/System/String.bet</CODE>
(where <CODE>&lt;BETALIB&gt;</CODE> denotes the placement of your BETA installation
as set in the <CODE>BETALIB</CODE> environment variable, see
<A HREF="../README.html#installation">Installation of BETA.Net and
BETA.Java</A>.
<P>
A few options are available as will be revealed by invoking
<CODE>dotnet2beta -h</CODE>:

<PRE class=beta>
Usage:

dotnet2beta [-h][-v][-w][-f][-F][-][-tt][-tf][-tr] &lt;dotnet class name&gt;
 e.g.   dotnet2beta System.String

Output files will be placed in BETALIB/dotnetlib in a directory
structure corresponding to the namespace of the class.
 e.g.   c:/beta/r5.3/dotnetlib/System/String.bet

Options:
   -h  Display this help
   -v  Verbose output
   -w  Suppress warnings (ignored if -v)
   -f  Force overwrite of existing output file
   -F  Force overwrite of existing output file AND files for refered classes
   -   Output to terminal instead of file
   -tt Debug: type related verbose output
   -tf Debug: file related verbose output
   -tr Debug: runtime related verbose output
</PRE>

<H3>dotnet2beta configuration: conversion-rules.txt</H3>
A little configuration of how <CODE>dotnet2beta</CODE> operates can
be configured by editing the file 
<CODE>&lt;BETALIB&gt;/dotnetlib/conversion-rules.txt</CODE>.
<P>
...

<H2>Implementation of converters</H2>

The implementation of the two tools is outlined in
<A HREF="implementation.html">implementation.html</A>.


</BODY>
</HTML>
