<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<title>BETA.Net README</title>
<link rev="made" href="mailto:beta@daimi.au.dk">
<LINK REL="stylesheet" HREF="http://www.daimi.au.dk/~beta/doc/style/miadoc.css" TYPE="text/css">
<script language="JavaScript">
function checkDotNetInstalled(){
  var ua = window.navigator.userAgent;
  if (ua.indexOf(".NET CLR") > 0){
    alert("You have .NET CLR installed");
  } else {
    alert("You do NOT have .NET CLR installed");
  }
}
</script>
</HEAD>

<body>

<H1>BETA.Net/BETA.Java README</H1>

Notes for the preliminary .NET and Java VM versions of the BETA language compiler.
<P>

<TABLE border=2 align=center>
<TR>
<TD>
<SPAN style="color:red; font-weight:bold; font-style:italic;">PLEASE READ SECTIONS A, B, C, D BEFORE USING ANY OF THIS!</SPAN>
</TD>
</TABLE>


<H2>DISCLAIMER</H2>

This is a <B>VERY PRELIMINARY</B> release. The compiler and the generated
programs may fail fatally in various situations. 
<B>USE AT YOUR OWN RISK</B>!


<H2>A. Prerequisites</H2>

<H3>A1. Microsoft .NET Framework</H3>

The current implementation has been tested with version 1.0 and 1.1 of the
Microsoft .NET Framework. 
<OL>
<LI>
   The Microsoft .NET Framework Final version must be installed before
using the .NET version of the BETA compiler.

<UL>
<LI>Click <A HREF="javascript:checkDotNetInstalled()">here</A> to have your browser check whether you have the .NET
framework installed.
<LI>
   Download page:<BR>
   <A HREF="http://msdn.microsoft.com/netframework/downloads/howtoget.asp">http://msdn.microsoft.com/netframework/downloads/howtoget.asp</A>
</OL>

<H3>A2. Java JDK</H3>
<OL>
<LI>
   The Java JDK version 1.4.2 or later must be installed before
using the Java VM version of the BETA compiler.

<UL>
<LI>
   Download page for J2SE SDK version 1.4.2:<BR>
   <A HREF="http://java.sun.com/j2se/1.4.2/download.html">http://java.sun.com/j2se/1.4.2/download.html</A> 
</UL>
</OL>

<H2><A NAME="installation">B. Installation of BETA.Net and BETA.Java</A></H2>

<OL>
<LI>Unpack distributed file.<BR>
   This distribution contains binary executables for BETA.Net and
   BETA.java for windows only.<BR>
   There is no installer.<BR>
   Simply unzip <CODE>BETA_OOLI-&lt;date&gt;.zip</CODE>. This will create a directory named
   <CODE>BETA_OOLI</CODE>.<BR>
   The compilers nbeta.exe and jbeta.exe resides in the bin subdirectory.
   Make sure you have the BETA_Net/bin directory in your search PATH, if
   you want to invoke the compiler from other directories.

<LI>
   Set environment variables.<BR>
   You must set the environment variable <CODE>BETALIB</CODE> to the location of
   your <CODE>BETA_OOLI</CODE> directory before using the compiler.<BR>
   For Java, you must also set the following environment variables:
   <UL>
   <LI><CODE>JAVAHOME</CODE><BR>
       should be set to point to the root of your Java 2 installation
   <LI><CODE>JNIDIR</CODE><BR>
       should be set to the name of your platform specific JNI include 
       directory (e.g. "solaris", "linux", or "win32")
   <LI><CODE>DYNEXTENSION</CODE><BR>
       should be set to the file-extension of dynamic libraries on
       your platform (e.g. "so" or "dll")
   </UL>

   You can set up these environment variables manually in
<PRE>
     Start->Settings->Control Panels->System->Advanced->Environment Variables
</PRE>
<LI>
   If you prefer, you can set up these environment variables by using scripts 
   placed in the top directory of the unpacked directory:<BR>
   If you are using Windows <CODE>cmd.exe</CODE> as shell issue the
   command
<PRE>
     cmd_setup.bat
</PRE>
   and if you are using Cygwin <CODE>bash</CODE>, issue the command
<PRE>
     . cygwin_bash_setup.sh
</PRE>

   
<LI>
   Example programs reside in the <CODE>examples</CODE>
   subdirectory. Some of the programs are more of the test kind than
   actual demos. To mention a few of them:

<BLOCKQUOTE>
   <DL>
   <DT><CODE>hello.bet</CODE>
   <DD>The traditional "Hello World" program in BETA
   <DT><CODE>LL1.bet</CODE>
   <DD>A simple LL1 parser for a small expression language.
   <DT><CODE>stack.bet</CODE>, <CODE>stackBody.bet</CODE>,<CODE>stackuser.bet</CODE>
   <DD>A small example showing separation of declaration and
       implementation using the BETA fragment system.<BR>
       The file <CODE>stack.bet</CODE> declared the pattern <CODE>Stack</CODE>
       with SLOTs as its implementation. This is pretty much like
       an interface in Java/.NET.<BR>
       The file <CODE>stackBody.bet</CODE> is a trivial implementation
       of the Stack. It could be replaced by another implementation.<BR>
       Finally, the file <CODE>stackuser.bet</CODE> instantiates and
       use such a stack. It suffices to compile this file - the
       compiler will detect dependency on the other files and compile
       them as well.
   <DT><CODE>NumList.bet</CODE>
   <DD>An example showing parameterized classes in BETA using virtual
       inner patterns: A pattern <CODE>List</CODE> is declared with a
       virtual element-type of just <CODE>object</CODE>. The pattern
       <CODE>NumList</CODE> inherits from <CODE>List</CODE> but furtherbinds
       the <CODE>element</CODE> type to be <CODE>number</CODE>, which
       make the compiler aware that element types in this list now has
       <CODE>number</CODE> type. Thus there is no need for any
       generics mechanism in BETA - it's all done by general handling
       of scoping and virtuality!
   <DT><CODE>beer.bet</CODE>
   <DD>Cheers! Just an implementation generation of the lyrics for 
       the traditional song <EM>99 Bottles of Beer on the Wall</EM>
       using various standard BETA facilities.
   <DT><CODE>Bclass.bet</CODE>, <CODE>BclassUser.java</CODE>, <CODE>BclassUser.cs</CODE>
   <DD>A simple BETA class with a few methods. <BR>
       The .java and .cs files show how to inherit from this BETA 
       class from Java and C#, respectively (see comments in beginning
       of these files for instructions).<BR>
       See also <A HREF="#cross-language">Cross language support</A> below.
   <DT><CODE>google.bet</CODE>
   <DD>A BETA program that use the Google web service to make a search
       from the command line.<BR>
       See also <A HREF="#cross-language">Cross language support</A> below.
   </DL>
</BLOCKQUOTE>

   Some .NET specific examples include:

<BLOCKQUOTE>
   <DL>
   <DT><CODE>hellographics.bet</CODE>
   <DD>A "Hello World" program using Windows Forms and other graphics.<BR>
       An example of inheriting from an external .NET class
       (System.Windows.Forms.Form) in BETA.<BR>
       See also <A HREF="#cross-language">Cross language support</A> below.
   <DT><CODE>hellobox.bet</CODE>
   <DD>A simple program showing a Windows MessageBox.<BR>
       (Jørgen Thyme is the person at Microsoft Denmark who sponsored the
        initial work on the BETA.Net project).
   </DL>
</BLOCKQUOTE>


   Some JAVA specific examples include:

<BLOCKQUOTE>
   <DL>
   <DT><CODE>helloapplet.bet</CODE>
   <DD>A "Hello World" applet written in BETA.<BR>
       An example of inheriting from an external JAVA class
       (java.applet.Applet) in BETA.<BR>
       See instructions in comment in top of heloapplet.bet.<BR>
       See also <A HREF="#cross-language">Cross language support</A> below.
   <DT><CODE>bpackage.bet</CODE>
   <DD>Example showing how to make the class files generated by the <CODE>jbeta</CODE>
       compile end up in another Java package than the default <CODE>beta</CODE>.
   </dl>
</blockquote>

Notice also the file <CODE>SEE_ALSO.txt</CODE> which lists various
other demonstration programs.
<P>

<li>
   Very preliminary background documentation (mostly working notes) reside in the
   <a href="index.html"><code>documentation</code></a> subdirectory.
</ol>
   

<h2>C. using the compiler</h2>

<ol>
<li>
   The compiler generating .net executables is named
<code>nbeta.exe</code>, and the compiler generating java class files
is named <code>jbeta.exe</code>.

<li>
   The compiler is invoked from the commandline in a shell, e.g. from
   <code>cmd.exe</code>.
   also known to work with cygwin bash <a href="http://www.cygwin.com/setup.exe">[http://www.cygwin.com/setup.exe]</a>

<li>
   The compiler is invoked by typing

<pre class=beta>
nbeta foo[.bet]
</pre>

   where <code>foo.bet</code> is a beta source file containing the definition of
   the <code>program</code> fragment. as indicated, the
   <code>.bet</code> extension need not be given at the command line.
   <br>likewise for <code>jbeta</code>.
<li>
   On the .net platform, the dlls and exes produced by the beta compiler should in general
   be verifiable (using <code>peverify.exe</code>).<br>
   as a convenience the compiler can automatically verify each dll/exe
   just after it is produced. to do this invoke the compiler with
   switch 37, i.e.:
<pre class=beta>
nbeta -s 37 foo.bet
</pre>
various options are available for the compiler; to get a list type,
e.g. 
<PRE>
nbeta --help
</PRE>

<LI>
    Notice, that the libraries in this package is distributed in
    source form, which means that the first compilation(s) of will 
    result in compilation af many files. Please be patient with this,
    it only occurs for the first few files you compile. You may want 
    to use the <CODE>--noWarn</CODE> (or simply <CODE>-w</CODE>) 
    option for these first compilations to reduce output.

</OL>


<H2>D. Known preliminary issues</H2>

<OL>
<LI>
   A few constructs in the BETA language is still not implemented.

<LI>
   The full set of the standard BETA libraries are NOT yet part
   of this preliminary distribution, since bindings for Java and .NET
   class libraries has not yet been created for the entire BETA library.
   The libraries included are only partially implemented.

<LI>
   (Not really a limitation, more an addition to BETA)<BR>
   BETA patterns used only as classes can be prefixed with the
   keyword <CODE>class</CODE> and BETA patterns used only as methods can likewise be
   prefixed with keyword <CODE>proc</CODE>. This will reduce the number of
   generated .NET classes.
</OL>


<H2>E. Using the CLR debugger(s)</H2>

<OL>
<LI>
   For a description of debugging using DbgCLR, see
   <A HREF="Debugging.html#dbgclr">documentation/Debugging.html#dbgclr</A>

<LI>
   For a description of debugging using CorDbg, see
   <A HREF="Debugging.html#cordbg">documentation/Debugging.html#cordbg</A>

<LI>
   Possibly we will later generate a <CODE>foo.dln</CODE> file for <CODE>DbgCLR.exe</CODE>
</OL>


<H2>F. Using Visual Studio .NET</H2>
<OL>
<LI>
   For a description of debugging using Visual Studio .NET, see
   <A HREF="Debugging.html#vsnet">documentation/Debugging.html#vsnet</A>

<LI>
   Possibly we will later generate a <CODE>foo.sln</CODE> file for
   Visual Studio.NET

<LI>
   We are planning a Visual Studio Integration under the VSIP program
   (<A HREF="http://msdn.microsoft.com/vstudio/vsip/">http://msdn.microsoft.com/vstudio/vsip/</A>).

</OL>

<H2>G. Using jdb</H2>
<OL>
<LI>
   For a description of debugging using the Java debugger <CODE>jdb</CODE>, see
   <A HREF="Debugging.html#jdb">documentation/Debugging.html#jdb</A>

</OL>



<H2><A NAME="cross-language">H. Cross language support</A></H2>

<OL>
<LI>
   You may use libraries written in BETA in other languages.
   You just compile the BETA library, using <CODE>nbeta</CODE>, 
   and then reference it from the other language.
   A simple example is in <CODE>Bclass.bet</CODE> and 
   <CODE>BclassUser.cs</CODE>/<CODE>BclassUser.java</CODE>. 
   Compilation statements are given in the start of the C# and Java files.
   <BR>
   NOTICE: The DLLs and class files generated for BETA files
   reside in the <CODE>clr</CODE> and <CODE>jvm</CODE> sub
   directories (to avoid cluttering the source directory).
<P>
   As described in the compilation directives you must therefore tell
   <CODE>csc</CODE>/<CODE>javac</CODE> where to find the DLL's and class files.<BR>
   Also at run-time you must tell the .NET Framework/JVM where to find
   these DLL's / class files. For .NET this is most easily done by
   making a config file like <CODE>BclassUser.exe.config</CODE>. 
   <BR>
   For JVM you specify this using the <CODE>-classpath</CODE> option
   for the Java VM.
<BR>
   The .NET/Java classes generated from the BETA patterns are not yet
   fully documented. Preliminary documentation (working notes) reside 
   in the <A HREF="index.html"><CODE>documentation</CODE></A> subdirectory.

<LI>
   BETA code can call code and use types from other languages.<BR>
   Currently, before using a class/method in an external non-BETA 
   assembly, it must be declared using the predefined patterns
   <CODE>External</CODE> and <CODE>ExternalClass</CODE>. 
   See <CODE>examples/hellobox.bet</CODE>, and
   <CODE>examples/hellographics.bet</CODE> for .NET examples.<BR>
   See <CODE>examples/helloapplet.bet</CODE> for a Java-only example.
   <BR>
   You might also want to study <CODE>examples/google.bet</CODE>
   which use different external classes for .NET and Java using the
   <CODE>MDBODY</CODE> fragment mechanism in the BETA compiler,
   see
   <CODE>examples/google_clrbody.bet</CODE> and 
   <CODE>examples/google_jvmbody.bet</CODE>.

<LI>
   The cross language support is expected to be significantly improved
   in a later version. E.g. we expect to make the compiler lookup the
   declarations in external non-BETA assemblies/classes, thus avoiding the
   need for declaring these manually.
</OL>


<H2>I. Further information</H2>

If you have any questions, problems, comments etc. regarding BETA.Net
or BETA.Java,
please contact <A HREF="mailto:beta@daimi.au.dk">[mailto:beta@daimi.au.dk]</A>.
<P>
The latest version of this page is always available at
<A HREF="http://www.daimi.au.dk/~beta/ooli">
Object-Oriented Language Interoperability
</A>

</body>
</html>
