<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<title>BETA.Net README</title>
<link rev="made" href="mailto:beta@daimi.au.dk">
<LINK REL="stylesheet" HREF="http://www.daimi.au.dk/~beta/doc/style/miadoc.css" TYPE="text/css">
</HEAD>

<body>

<H1>BETA.Net README</H1>

Notes for the preliminary .NET version of the BETA language compiler.
<P>

<TABLE border=2 align=center>
<TR>
<TD>
<SPAN style="color:red; font-weight:bold; font-style:italic;">PLEASE READ SECTIONS A, B, C, D BEFORE USING ANY OF THIS!</SPAN>
</TD>
</TABLE>


<H2>DISCLAIMER</H2>

This is a <B>VERY PRELIMINARY</B> release. The compiler and the generated
programs may fail fatally in many situations. 
<B>USE AT YOUR OWN RISK</B>!


<H2>A. Prerequisites</H2>

<OL>
<LI>
   The Microsoft .NET Framework Final version must be installed.

<UL>
<LI>
   Download page:<BR>
   <A HREF="http://msdn.microsoft.com/downloads/default.asp?url=/downloads/sample.asp?url=/msdn-files/027/000/976/msdncompositedoc.xml">http://msdn.microsoft.com/downloads/default.asp?url=/downloads/sample.asp?url=/msdn-files/027/000/976/msdncompositedoc.xml</A>
<LI>
   Direct link:<BR>
   <A HREF="http://download.microsoft.com/download/.netframesdk/SDK/1.0/W98NT42KMeXP/EN-US/setup.exe">http://download.microsoft.com/download/.netframesdk/SDK/1.0/W98NT42KMeXP/EN-US/setup.exe</A>
</UL>

</OL>



<H2>B. Installation of BETA_Net</H2>

<OL>
<LI>
   There is no installer.<BR>
   Simply unzip <CODE>BETA_Net-&lt;date&gt;.zip</CODE>. This will create a directory named
   <CODE>BETA_Net</CODE>.<BR>
   The compiler nbeta.exe resides in the bin subdirectory.
   Make sure you have the BETA_Net/bin directory in your search path, if
   you want to invoke the compiler from other directories.

<LI>
   Set <CODE>BETALIB</CODE>.<BR>
   You must set the environment variable <CODE>BETALIB</CODE> to the location of
   your <CODE>BETA_net</CODE> directory before using the compiler.
   Do this in 
<BLOCKQUOTE>
     <CODE>Start->Settings->Control Panels->System->Advanced->Environment Variables</CODE>
</BLOCKQUOTE>

<LI>
   Example programs reside in the <CODE>examples</CODE> subdirectory.

<LI>
   Very preliminary background documentation (mostly working notes) reside in the
   <A HREF="index.html"><CODE>documentation</CODE></A> subdirectory.
</OL>
   

<H2>C. Using the compiler</H2>

<OL>
<LI>
   The compiler is named <CODE>nbeta.exe</CODE>.

<LI>
   The compiler is invoked from the commandline in a shell, e.g. from
   <CODE>cmd.exe</CODE>.
   Also known to work with cygwin bash <A HREF="http://www.cygwin.com/setup.exe">[http://www.cygwin.com/setup.exe]</A>

<LI>
   The compiler is invoked by typing

<PRE class=beta>
&gt; nbeta foo
</PRE>

   where <CODE>foo.bet</CODE> is a BETA source file containing the definition of
   the <CODE>PROGRAM</CODE> fragment.

<LI>
   The DLLs and EXEs produced by the BETA compiler should in general
   be verifiable (using <CODE>peverify.exe</CODE>).<BR>
   As a convenience the compiler can automatically verify each DLL/EXE
   just after it is produced. To do this invoke the compiler with
   switch 37, i.e.:
<PRE class=beta>
&gt; nbeta -s 37 foo.bet
</PRE>

</OL>


<H2>D. Known preliminary issues</H2>

<OL>
<LI>
   Currently only a subset of BETA is implemented.

<LI>
   All source files constituting an executable must currently reside
   in the same directory.<BR>
   We intent to generate strong assemblies and config files and/or use
   the Global Assembly Cache for solving this later.

<LI>
   Because of (1) and (2) the standard BETA libraries are NOT part
   of this preliminary distribution. Instead a minimal environment is
   present in <CODE>examples/tstenv.bet</CODE>.

<LI>
   At most one compiled program can reside in a given directory without
   recompilation. That is: If a program <CODE>foo.bet</CODE> is compiled into
   <CODE>foo.exe</CODE> in a directory and subsequently another program <CODE>bar.bet</CODE> 
   is compiled into <CODE>bar.exe</CODE> in that same directory then <CODE>foo.exe</CODE> will
   no longer function correctly.
   To recompile foo into a functional state do this:
<PRE class=beta>
&gt; del dotnet\program.dll foo.astL
&gt; nbeta foo
</PRE>
   Alternatively you can force regeneration of alle files involved in
   <CODE>foo</CODE> by
<PRE class=beta>
&gt; nbeta -s 12 foo
</PRE>

<LI>
   BETA patterns used only as classes can be prefixed with the
   keyword <CODE>class</CODE> and BETA patterns used only as methods can likewise be
   prefixed with keyword <CODE>proc</CODE>. This will reduce the number of
   generated .NET classes.
</OL>


<H2>E. Using the CLR debugger(s)</H2>

<OL>
<LI>
   For a description of debugging using DbgCLR, see
   <A HREF="Debugging.html#dbgclr">documentation/Debugging.html#dbgclr</A>

<LI>
   For a description of debugging using CorDbg, see
   <A HREF="Debugging.html#cordbg">documentation/Debugging.html#cordbg</A>

<LI>
   Possibly we will later generate a <CODE>foo.dln</CODE> file for <CODE>DbgCLR.exe</CODE>
</OL>


<H2>F. Using Visual Studio .NET</H2>
<OL>
<LI>
   For a description of debugging using Visual Studio .NET, see
   <A HREF="Debugging.html#vsnet">documentation/Debugging.html#vsnet</A>

<LI>
   Possibly we will later generate a <CODE>foo.sln</CODE> file for Visual Studio.NET

<LI>
   We intend to investigate the many possibilities that Visual Studio
   offers, by letting it "know" the BETA language, e.g. having syntax
   coloring, allowing it to call the compiler as part of a build etc.
</OL>



<H2>G. Cross language support</H2>

<OL>
<LI>
   You may use libraries written in BETA in other languages.
   You just compile the BETA library, using <CODE>nbeta -x</CODE> (no linking), 
   and then reference it from
   the other language.
   An example is in <CODE>Bclass.bet</CODE> and <CODE>BclassUser.cs</CODE>. Compilation
   statements are:

<PRE class=beta>
&gt; nbeta -x Bclass.bet
&gt; csc /r:System.dll /r:dotnet/tstenv.dll /r:dotnet/Bclass.dll BclassUser.cs
</PRE>

   NOTICE: The DLLs generated for BETA files currently reside in the
   <CODE>dotnet</CODE> sub directory (to avoid cluttering the source directory).<BR>
   As described in the compilation directive you must therefore tell
   csc to find the DLL's in the <CODE>dotnet</CODE> subdirectory.<BR>
   Also at run-time you must tell the .NET Framework where to find
   these DLLs. This is most easily done by making a config file like
   <CODE>BclassUser.exe.config</CODE>. The content is currently always the same as
   this file (i.e. independent of the actual executable).
<P>
   The .NET classes generated from the BETA patterns are not yet
   fully documented. Preliminary documentation (working notes) reside 
   in the <A HREF="index.html"><CODE>documentation</CODE></A> subdirectory.

<LI>
   BETA code can call code and use types from other languages.<BR>
   There are problems with handling assembly references for this,
   though.<BR>
   It is safe to use any class or method from assembly <CODE>[mscorlib]</CODE> and 
   <CODE>[System.Windows.Forms]</CODE> - the compiler simply generates external
   assembly declarations for these in all generated IL files.<BR>
   Currently, before using a class/method in an external non-BETA 
   assembly, it must be declared using the predefined patterns
   <CODE>External</CODE> and <CODE>ExternalClass</CODE>. 
   See <CODE>examples/dotnettstenvbody.bet</CODE> 
   and <CODE>examples/hellobox.bet</CODE>
   for examples.

<LI>
   The cross language support is expected to be significantly improved
   in a later version. E.g. we expect to make the compiler lookup the
   declarations in external non-BETA assemblies, thus avoiding the
   need for declaring these manually.
</OL>


<H2>H. Further information</H2>

If you have any questions, problems, comments etc. regarding BETA.Net,
please contact <A HREF="mailto:beta@daimi.au.dk">[mailto:beta@daimi.au.dk]</A>.
<P>
We intend to set up a web page with project description, academic
articles etc. at a later time.

</body>
</html>
