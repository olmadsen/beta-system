
\section{Conclusion}

\subsection{Evaluation}

\subsection{Contributions} 

\subsection{Lessons Learned}

\subsection{Platform issues}
\begin{itemize}
\item
No static link on stack frames
\item
Nested procedures/methods cannot be implemented using the stack
\item
Very rigid typing of class-fields 
\item
And method-locals on .NET
\item
Constructor initialization 
\item
Impossible to make setups before calling super constructor
\item
General exit out of nested method calls
\item
No support for covariant arguments
\item
No support for covariant return types
\item
Active objects
\item

.NET class references must be fully qualified, including location of binding
\item
Problems with separate compilation
\item
Large number of classes generated due to the generality of BETA patterns
\item
Java class files can only contain one (non-static) class per file 

\item
Lots of class files are generated
\item
.NET assemblies can contain any number of classes 
\item
No swap and dup\_x1/x2 on .NET
\item
Requirements for fully typed local variables in .NET. 
\item
Means that swap cannot be implemented in backend using local variables unless type of two top-of-stack objects are known.
\item
Type of field: super/this class

\end{itemize}

\subsection{Platform advantages}
Well-defined run-time format

More than just a calling convention for procedures

Memory management

Storage allocation

Object format \& method activation format

Garbage collection

Efficient code generation

We will have BETA for all Java- and .NET platforms

Can this be utilized efficiently?

If simple and direct mapping - yes

If complex mapping - no?

Inlining may help

Can rely on generating methods that the JIT inlines

\subsection{Language interoperability}
\note{Elaborate}

Java/\CS\  class inherited from BETA

Straight forward

Since name \& type-based,
just specify the methods you will use

Simpler than for COM --
COM uses offsets

All preceding methods must be declared

BETA pattern inherited from Java/\CS\  class --
Also straight forward

Issues with default constructor 

BETA object requires surrounding object (origin)

Issues --
Libraries and frameworks in Java/\CS\  -- 
Java-string, \CS-String, BETA-text

Automatic coercion implemented

Overloading

Constructors

External class interface

Interface syntax needed -- currently clumsy

External name \& location

Automatic include of interface files

.NET assemblies

Java class-files


\note{A summary of the experiences with language interoperability on
  JVM/CLR}
