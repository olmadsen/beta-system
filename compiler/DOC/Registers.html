<HTML>

<HEAD>
<TITLE>Register Mappings</TITLE>
<LINK REV="made" HREF="mailto:olm@daimi.aau.dk">
</HEAD>

<BODY>
<H1>Register Mappings</H1>

<PRE>
This, Call, Origin
==================

"This" (or "th") holds the current object.
"Call" (or "ca") holds the object about to be called.
"Origin" holds the origin of object to be allocated.

Platform        sparc   hppa       <A HREF="IntelBinary.html#registers">intel</A>  motorola  mips    ppc
-----------------------------------------------------------------
This/th/a0	 %i0    %r3        %edx       a0    s8/$30  r31
Call/ca/a1       %i1    %r4        %edi       a1    a1/$5   r4/a1
Origin		 %o0    %r26/arg0  pReg1      d7    a0/$4   r3/a0


Address Registers
=================

The address registers are used to hold object references.
Temporarily they may hold data-references or point into the middle
of an object, but if so they are cleared/overwritten before 
calling anything, that may cause GC.
They are  used as roots and updated during GC.

Platform        sparc   hppa       <A HREF="IntelBinary.html#registers">intel</A>  motorola  mips    ppc
-----------------------------------------------------------------
a2		 %i2	 %r5	   share:     a2    s0/$16  r28
a3		 %i3	 %r6        %ebp      a3    s1/$17  r29
a4	         %i4	 %r7	    %esi      a4    s2/$18  r30


Data Registers
==============

The data registers are used to hold values and temporary 
calculations results during expressions. They may temporarily
hold references to objects, but they are not used for roots and
are not updated during GC.

Platform        sparc   hppa       <A HREF="IntelBinary.html#registers">intel</A>  motorola  mips    ppc
-----------------------------------------------------------------
d0               %l0     %r9       share:     d0    t0/$8   r24
d1		 %l1 	 %r10	    %eax      d1    t1/$9   r25
d2		 %l2 	 %r11	    %ebx      d2    t2/$10  r26
d3		 %l3 	 %r12	    %ecx      d3    t3/$11  r27


Primitive Registers
===================

The primitive registers are used for calling runtime routines.

Platform        sparc   hppa       intel  motorola  mips    ppc
-----------------------------------------------------------------
PrimReg1         %o0    %r26/arg0  pReg1      d7    a0/$4   a0/r3
PrimReg2         %o1    %r25/arg1  pReg2      d6    a1/$5   a1/r4
PrimReg3         %o2    %r24/arg2  pReg3      d5    a2/$6   a2/r5
PrimReg4         %o3    %r23/arg3  pReg4      d4    a3/$7   a3/r6
PrimReg5         %o4    %r22       pReg5      d3    a4/$8   a4/r7


IOA, IOATopOff (non-MT)
======================

The IOA heap is pointed out by registers on sparc.

Platform        sparc   hppa       intel  motorola  mips    ppc
-----------------------------------------------------------------
IOA              %g5
IOATopOff        %g6


Multithreaded (MT) and V-entry related registers.
==================================================

Currently only relevant on sparc.

Platform        sparc   hppa       intel  motorola  mips    ppc
-----------------------------------------------------------------
RefTopOff        %g2
DataTopOff       %g3
TSD              %g4
IOATop           %g5 --currently in TSD (experimental)

</PRE>

</BODY>
</HTML>