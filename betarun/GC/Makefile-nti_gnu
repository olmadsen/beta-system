#
# OPTIONS
#  RTINFO:   Allow the runtime system to write out information during pe.
#  RTDEBUG:  Allow consistency check during pe.
#
CPP  = gcc -E
CC = gcc

betarun_pe.lib: xmakefile
	$(MAKE) -f xmakefile \
	'C_FLAGS=-I../C -I../P -Dnti -Dnti_gnu -DRTVALHALLA' \
	'C_OPTA=-O2' \
	'C_OPTB=-O2' \
	'MAIN     = dummy.obj'

betarun.lib: xmakefile
	$(MAKE) -f xmakefile \
	'C_FLAGS=-I../C -I../P -Dnti -Dnti_gnu' \
	'C_OPTA=-O2' \
	'C_OPTB=-O2' \
	'MAIN     = dummy.obj'


betarun_v.lib: xmakefile
	$(MAKE) -f xmakefile \
	'C_FLAGS=-I../C -I../P -Dnti -Dnti_gnu -DRTVALHALLA' \
	'C_OPTA=-O2' \
	'C_OPTB=-O2' \
	'MAIN     = dummy.obj'

betarun_debug.lib: xmakefile
	$(MAKE) -f xmakefile \
	'C_FLAGS=-I../C -I../P -Dnti -Dnti_gnu -DRTDEBUG' \
	'C_OPTA=-O2 -g' \
	'C_OPTB=-O2 -g' \
	'MAIN     = dummy.obj'

xmakefile: ymakefile-GC
	rm -f xmakefile
	cp ymakefile-GC ymakefile.c
	$(CPP) -Dnti -Dnti_gnu ymakefile.c |\
	sed -e 's/^#.*//' -e 's/^[ \f\t][ \f\t]*$$//' -e 's/^ //' |\
	sed -n -e '/^..*$$/p' > xmakefile
	rm ymakefile.c

clean:
	-rm -f xmakefile *.o *.obj
