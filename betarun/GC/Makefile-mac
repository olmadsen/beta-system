#
# OPTIONS
#  RTINFO:   Allow the runtime system to write out information during pe.
#  RTDEBUG:  Allow consistency check during pe.
#  AO_Area:  Allow Adult Object Area
#  LVR_Area: Allow Large Value Repetition Area
#

CPP  =  /lib/cpp -P -Dmacintosh
MAKE = /bin/make

srcs: xmakefile
	$(MAKE) -f xmakefile \
	"C_FLAGS= -D LVR_Area -D AO_Area -D RTINFO" \
	"CPP_FLAGS= -DLVR_Area -DAO_Area -DRTINFO" \
	"C_OPT  = -m -mc68020 " \
	"MAIN = debug.o" \
	srclist;

srclst:
	@make srcs | perl -ne 'if ( /(\w+)\.c/){ print "\t\:GC\:$$1.c.o \266\n";}' 

xmakefile: ymakefile-GC
	rm -f xmakefile
	$(CPP) ymakefile-GC |\
	sed -e 's/^#.*//' -e 's/^[ \f\t][ \f\t]*$$//' -e 's/^ //' |\
	sed -n -e '/^..*$$/p' > xmakefile

clean:
	-rm -f xmakefile *.o
	-rm -f \#* *~
