#
# OPTIONS
#  RTINFO:   Allow the runtime system to write out information during pe.
#  RTDEBUG:  Allow consistency check during pe.
#

CPP  = gcc -E
CC = gcc

debug:	clean betarun_debug.lib
valhalla:	clean betarun_v.lib

betarun_pe.lib: xmakefile
	$(MAKE) -f xmakefile \
	"C_FLAGS=-I../C -Dnti -Dnti_gnu -DRTVALHALLA -DWIN32 -DPE" \
	"C_OPT=-O2" \
	"MAIN = dummy.obj"

betarun.lib: xmakefile
	$(MAKE) -f xmakefile \
	"C_FLAGS=-I../C -Dnti -Dnti_gnu -DWIN32" \
	"C_OPT=-O2" \
	"MAIN = dummy.obj"

betarun_v.lib: xmakefile
	$(MAKE) -f xmakefile \
	"C_FLAGS=-I../C -Dnti -Dnti_gnu -DRTVALHALLA -DWIN32" \
	"C_OPT=-O2" \
	"MAIN = dummy.obj"

betarun_debug.lib: xmakefile
	$(MAKE) -f xmakefile \
	"C_FLAGS=-I../C -Dnti -Dnti_gnu -DRTDEBUG -DWIN32" \
	"C_OPT=-O2 -g" \
	"MAIN = dummy.obj"

xmakefile: ymakefile-P
	rm -f xmakefile
	cp ymakefile-P ymakefile.c
	$(CPP) -I../C -Dnti -Dnti_gnu ymakefile.c | \
	sed -e 's/^#.*//' -e 's/^[ \f\t][ \f\t]*$$//' -e 's/^ //' | \
	sed -n -e '/^..*$$/p' > xmakefile
	rm ymakefile.c

clean:
	-rm -f *.o *.obj *.debug *.valhalla data.h data.c tmpdata.c scramble
	-rm -f xmakefile

ymakefile-P:
