betarun: mac.a
	rm -f betarun.make
	cd GC; make clean;
	cd C; make clean; make
	tar -cvf betarun.tar mac.a betarun.make C GC

debug: mac.a
	rm -f debug.make
	cd GC; make clean;
	cd C; make clean; make debug
	tar -cvf debug.tar mac.a debug.make C GC

mac.a:
	make asm

asm:
	- ../GEN/mac/gen -o mac.asm mac
	- sed -e s/_TextProto/TextProto/gp < mac.asm > mac.a

gen:
	cd ../GEN/mac; make

clean: ALWAYS
	cd C; make clean
	cd GC; make clean
	- rm -f *~ \#* *.group *.lst build mac.tar mac.asm mac.a beta.dump betarun.make debug.make

ALWAYS:
