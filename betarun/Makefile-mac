RUNDEPS= \
RUN/AllocateComponent.run \
RUN/AllocateItem.run \
RUN/AllocateDopartObject.run \
RUN/AllocateRefRep.run \
RUN/AllocateStackObject.run \
RUN/AllocateValRep.run \
RUN/AllocateObjectRep.run \
RUN/Attach.run \
RUN/AttachBasicComponent.run \
RUN/Basics.run \
RUN/CInterface.run \
RUN/CheckReferenceAssignment.run \
RUN/ComponentStack.run \
RUN/CopyCText.run \
RUN/CopyRefRep.run \
RUN/CopySliceRefRep.run \
RUN/CopySliceValRep.run \
RUN/CopyText.run \
RUN/CopyValRep.run \
RUN/DataRegs.run \
RUN/Declaration.run \
RUN/ExitObjects.run \
RUN/ExtendRefRep.run \
RUN/ExtendValRep.run \
RUN/MakeTextObj.run \
RUN/Misc.run \
RUN/NewRefRep.run \
RUN/NewValRep.run \
RUN/PerformGC.run \
RUN/Structure.run \
RUN/Qua.run \
RUN/Suspend.run

all: 
	rm -f *.make
	cd GC; make clean;
	cd C; make clean; 
	make mac.a; cd C; make
	make mac-debug.a; cd C; make debug.make
	tar -cvf betarun.tar mac.a mac-debug.a *.make C/*.c C/*.h GC/*.c RUN/*.run TST

mac.a: $(RUNDEPS) RUN/mac.run RUN/macadditions.run
	- ../GEN/mac/gen -o mac.a RUN/mac

mac-debug.a: $(RUNDEPS) RUN/mac.run RUN/macadditions.run
	- ../GEN/mac/gen -debug -o mac-debug.a RUN/mac

asm:
	make mac.a
asm-debug:
	make mac-debug.a

gen:
	cd ../GEN/mac; make

clean: ALWAYS
	cd C; make clean
	cd GC; make clean
	- rm -f *~ \#* *.group *.lst build mac.asm mac.a beta.dump betarun.make debug.make *.tar
	- rm -f RUN/*.group RUN/*~


commit:
	cvscom

com:
	cvscom

tags:
	etags C/*.c C/*.h GC/*.c RUN/*.run

ALWAYS:
