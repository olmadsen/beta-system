RUNDEPS= \
RUN/AllocateComponent.run \
RUN/AllocateItem.run \
RUN/AllocateRefRep.run \
RUN/AllocateStackObject.run \
RUN/AllocateValRep.run \
RUN/Attach.run \
RUN/AttachBasicComponent.run \
RUN/Basics.run \
RUN/CInterface.run \
RUN/CheckReferenceAssignment.run \
RUN/ComponentStack.run \
RUN/CopyCText.run \
RUN/CopyRefRep.run \
RUN/CopySliceRefRep.run \
RUN/CopySliceValRep.run \
RUN/CopyText.run \
RUN/CopyValRep.run \
RUN/DataRegs.run \
RUN/Declaration.run \
RUN/ExitObjects.run \
RUN/ExtendRefRep.run \
RUN/ExtendValRep.run \
RUN/MakeTextObj.run \
RUN/Misc.run \
RUN/NewRefRep.run \
RUN/NewValRep.run \
RUN/PerformGC.run \
RUN/Structure.run \
RUN/Qua.run \
RUN/Suspend.run

betarun: mac.a
	rm -f betarun.make
	cd GC; make clean;
	cd C; make clean; make
	tar -cvf betarun.tar mac.a betarun.make C/*.c C/*.h GC/*.c GC/*.h RUN/*.run 

debug: mac.a
	rm -f debug.make
	cd GC; make clean;
	cd C; make clean; make debug
	tar -cvf debug.tar mac.a debug.make C/*.c C/*.h GC/*.c GC/*.h RUN/*.run 


demo: mac.a
	rm -f betarun.make
	cd GC; make clean;
	DEMO="-DDEMO"; export DEMO; cd C; make clean; make demo
	tar -cvf demo.tar mac.a demo.make C/*.c C/*.h GC/*.c GC/*.h RUN/*.run 

mac.a: $(RUNDEPS) RUN/mac.run RUN/macadditions.run
	make asm

asm:
	- ../GEN/mac/gen -o mac.asm RUN/mac
	- sed -e s/_TextProto/TextProto/gp < mac.asm > mac.a

gen:
	cd ../GEN/mac; make

clean: ALWAYS
	@echo Do \'cvs update\' on a SUN
	cd C; make clean
	cd GC; make clean
	- rm -f *~ \#* *.group *.lst build *.tar mac.asm mac.a beta.dump *.make

commit:
	@echo Do \'cvs commit\' on a SUN

com:
	@echo Do \'/users/beta/bin/scripts/cvscom\' on a SUN

tags:
	etags C/*.c C/*.h GC/*.c GC/*.h RUN/*.run

ALWAYS:
