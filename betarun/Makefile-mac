RUNDEPS= \
RUN/AllocateComponent.run \
RUN/AllocateItem.run \
RUN/AllocateRefRep.run \
RUN/AllocateStackObject.run \
RUN/AllocateValRep.run \
RUN/Attach.run \
RUN/AttachBasicComponent.run \
RUN/Basics.run \
RUN/CInterface.run \
RUN/CheckReferenceAssignment.run \
RUN/ComponentStack.run \
RUN/CopyCText.run \
RUN/CopyRefRep.run \
RUN/CopySliceRefRep.run \
RUN/CopySliceValRep.run \
RUN/CopyText.run \
RUN/CopyValRep.run \
RUN/DataRegs.run \
RUN/Declaration.run \
RUN/ExitObjects.run \
RUN/ExtendRefRep.run \
RUN/ExtendValRep.run \
RUN/MakeTextObj.run \
RUN/Misc.run \
RUN/NewRefRep.run \
RUN/NewValRep.run \
RUN/PerformGC.run \
RUN/Structure.run \
RUN/Qua.run \
RUN/Suspend.run

all: mac.a
	rm -f *.make
	cd GC; make clean;
	cd C; make clean; make
	cd C; make debug.make
	DEMO="-DDEMO"; export DEMO; cd C; make demo.make
	tar -cvf betarun.tar mac.a *.make C/*.c C/*.h GC/*.c RUN/*.run 

mac.a: $(RUNDEPS) RUN/mac.run RUN/macadditions.run
	make asm

asm:
	- ../GEN/mac/gen -o mac.a RUN/mac

gen:
	cd ../GEN/mac; make

clean: ALWAYS
	@echo Do \'cvs update\' on a SUN
	cd C; make clean
	cd GC; make clean
	- rm -f *~ \#* *.group *.lst build mac.asm mac.a beta.dump *.make
	- rm -f RUN/*.group RUN/*~


commit:
	@echo Do \'cvs commit\' on a SUN

com:
	@echo Do \'/users/beta/bin/scripts/cvscom\' on a SUN

tags:
	etags C/*.c C/*.h GC/*.c GC/*.h RUN/*.run

ALWAYS:
