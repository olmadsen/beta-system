RUNDEPS= \
RUN/AllocateComponent.run \
RUN/AllocateItem.run \
RUN/AllocateRefRep.run \
RUN/AllocateStackObject.run \
RUN/AllocateValRep.run \
RUN/Attach.run \
RUN/AttachBasicComponent.run \
RUN/Basics.run \
RUN/CInterface.run \
RUN/CheckReferenceAssignment.run \
RUN/ComponentStack.run \
RUN/CopyCText.run \
RUN/CopyRefRep.run \
RUN/CopySliceRefRep.run \
RUN/CopySliceValRep.run \
RUN/CopyText.run \
RUN/CopyValRep.run \
RUN/DataRegs.run \
RUN/Declaration.run \
RUN/ExitObjects.run \
RUN/ExtendRefRep.run \
RUN/ExtendValRep.run \
RUN/MakeTextObj.run \
RUN/Misc.run \
RUN/NewRefRep.run \
RUN/NewValRep.run \
RUN/PerformGC.run \
RUN/Structure.run \
RUN/Suspend.run


betarun.o: hp.o C/c.common.o GC/c.gc.o 
	ld -x -r -o betarun.o C/c.common.o GC/c.gc.o hp.o

try: betarun.try

betarun.try: hp.o C/c.common.o GC/c.gc.o 
	ld -x -r -o betarun.try C/c.common.o GC/c.gc.o hp.o

hp.s: $(RUNDEPS) hpadditions.run hp.run
	- ../GEN/hp/gen -o hp.s hp

asm: hp.s

gen:
	cd ../GEN/hp; make

C/c.common.o: ALWAYS
	cd C; make

GC/c.gc.o: ALWAYS
	cd GC; make


debug: betarun.debug

betarun.debug: hp.o C/c.common.debug GC/c.gc.debug 
	ld -r -o betarun.debug C/c.common.debug GC/c.gc.debug hp.o

C/c.common.debug: ALWAYS
	cd C; make debug

GC/c.gc.debug: ALWAYS
	cd GC; make debug


tags:
	etags *.run RUN/*.run GC/*.[hc] CRUN/*.[hc] C/*.[hc] C/data.gen

clean: ALWAYS
	-cvs update
	cd C; make clean
	cd GC; make clean
	- rm -f *~
	- rm -f hp.o hp.s


commit:
	-cvs commit

com:
	-/users/beta/bin/scripts/hpcvscom

ALWAYS:

