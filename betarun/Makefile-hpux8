RUNDEPSBASIC= \
RUN/AllocateComponent.run \
RUN/AllocateItem.run \
RUN/AllocateRefRep.run \
RUN/AllocateStackObject.run \
RUN/AllocateValRep.run \
RUN/Attach.run \
RUN/AttachBasicComponent.run \
RUN/Basics.run \
RUN/CInterface.run \
RUN/ComponentStack.run \
RUN/CopyCText.run \
RUN/CopyRefRep.run \
RUN/CopySliceRefRep.run \
RUN/CopySliceValRep.run \
RUN/CopyText.run \
RUN/CopyValRep.run \
RUN/DataRegs.run \
RUN/Declaration.run \
RUN/ExitObjects.run \
RUN/ExtendRefRep.run \
RUN/ExtendValRep.run \
RUN/MakeTextObj.run \
RUN/Misc.run \
RUN/NewRefRep.run \
RUN/NewValRep.run \
RUN/PerformGC.run \
RUN/Structure.run \
RUN/Suspend.run

RUNDEPS = $(RUNDEPSBASIC) RUN/Qua.run RUN/CheckReferenceAssignment.run 

LAZYRUNDEPS = $(RUNDEPSBASIC) RUN/lazyQua.run RUN/lazyCheckReferenceAssignment.run RUN/lazyPerformGC.run

betarun.o: hpux8.o C/c.common.o GC/c.gc.o 
	ld -x -r -o betarun.o C/c.common.o GC/c.gc.o hpux8.o

hpux8.s: $(RUNDEPS) RUN/hpux8additions.run RUN/hpux8.run
	- ../GEN/hpux8/gen -o hpux8.s RUN/hpux8

asm: hpux8.s lazyhpux8.s

gen:
	cd ../GEN/hpux8; make

C/c.common.o: ALWAYS
	cd C; make

GC/c.gc.o: ALWAYS
	cd GC; make


debug: betarun.debug

betarun.demo: C/c.common.o GC/c.gc.o hpux8.o
	ld -x -r -o betarun.demo C/c.common.o GC/c.gc.o hpux8.o

demo:
	rm -f C/c.common.o C/initialize.o
	DEMO="-DDEMO"; export DEMO; make betarun.demo
	rm -f C/c.common.o C/initialize.o

betarun.debug: C/c.common.debug GC/c.gc.debug hpux8.o
	ld -r -o betarun.debug C/c.common.debug GC/c.gc.debug hpux8.o

C/c.common.debug: ALWAYS
	cd C; make debug

GC/c.gc.debug: ALWAYS
	cd GC; make debug


lazy: betarun.lazy

betarun.lazy: C/c.common.lazy GC/c.gc.lazy lazyhpux8.o 
	ld -x -r -o betarun.lazy C/c.common.lazy GC/c.gc.lazy lazyhpux8.o

C/c.common.lazy: ALWAYS
	cd C; make lazy

GC/c.gc.lazy: ALWAYS
	cd GC; make lazy


lazydebug: betarun.lazydebug

lazyhpux8.s: $(LAZYRUNDEPS) RUN/hpux8additions.run RUN/lazyhpux8.run 
	- ../GEN/hpux8/gen -o lazyhpux8.s RUN/lazyhpux8

betarun.lazydebug: lazyhpux8.o C/c.common.lazydebug GC/c.gc.lazydebug
	ld -x -r -o betarun.lazydebug C/c.common.lazydebug GC/c.gc.lazydebug lazyhpux8.o

C/c.common.lazydebug: ALWAYS
	cd C; make lazydebug

GC/c.gc.lazydebug: ALWAYS
	cd GC; make lazydebug



clean: ALWAYS
	@echo Do \'cvs update\' on a SUN
	cd C; make clean
	cd GC; make clean
	- rm -f *~
	- rm -f hpux8.o hpux8.s lazyhpux8.o lazyhpux8.s
	- rm -f RUN/*.group RUN/*~

commit:
	echo Do \'cvs commit\' on a SUN

com:
	echo Do \'/users/beta/bin/scripts/cvscom\' on a SUN

tags:
	etags GC/*.[hc] C/*.[hc] C/data.gen RUN/*.run Makefile-* C/Makefile-* GC/Makefile-* CRUN/*.[hc]

ALWAYS:

