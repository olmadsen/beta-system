CPP  =  /lib/cpp -Uhpux -Dapollo
MAKE = make

all: betarun debug



betarun: xmakefile
	echo cd C >> ../build
	$(MAKE) -f xmakefile -n \
        "C_FLAGS= -DLVR_Area -DAO_Area -DRTINFO $(DEMO)" \
        "C_OPT  = -O" \
	MAIN=c.common.o >> ../build
	echo cd .. >> ../build

debug: xmakefile
	echo cd C >> ../build.debug
	$(MAKE) -f xmakefile -n \
        "C_FLAGS= -DLVR_Area -DAO_Area -DRTINFO -DRTDEBUG" \
        "C_OPT  = -g" \
	MAIN=c.common.debug >> ../build.debug
	echo cd .. >> ../build.debug

xmakefile: ymakefile-C
	rm -f xmakefile
	$(CPP) ymakefile-C |\
	sed -e 's/^#.*//' -e 's/^[ \f\t][ \f\t]*$$//' -e 's/^ //' |\
	sed -n -e '/^..*$$/p' > xmakefile

clean:
	-rm -f xmakefile
	-rm -f \#* *~ data.h data.c

