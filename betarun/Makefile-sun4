betarun.o: C/c.common.o CRUN/c.run.o GC/c.gc.o
	ld -x -r -o betarun.try C/c.common.o CRUN/c.run.o GC/c.gc.o


C/c.common.o: ALWAYS
	cd C;  make PROF=$(PROF)

CRUN/c.run.o: ALWAYS
	cd CRUN; make PROF=$(PROF)

GC/c.gc.o: ALWAYS
	cd GC; make PROF=$(PROF)


debug: betarun.debug

betarun.debug: C/c.common.debug CRUN/c.run.debug GC/c.gc.debug
	ld -r -o betarun.debug C/c.common.debug CRUN/c.run.debug GC/c.gc.debug

C/c.common.debug: ALWAYS
	cd C; make debug PROF=$(PROF)

CRUN/c.run.debug: ALWAYS
	cd CRUN; make debug PROF=$(PROF)

GC/c.gc.debug: ALWAYS
	cd GC; make debug PROF=$(PROF)

tags:
	etags GC/*.[hc] CRUN/*.[hc] C/*.[hc] RUN/*.run C/data.gen

clean: ALWAYS
	cvs update
	cd C; make clean
	cd CRUN; make clean
	cd GC; make clean

commit:
	cvs commit

com:
	/users/beta/bin/scripts/cvscom

ALWAYS:
