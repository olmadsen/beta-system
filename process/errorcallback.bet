ORIGIN '~beta/basiclib/v1.6/betaenv';

(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics 1995
 *       All rights reserved.
 *)

BODY 'private/errorcallbackbody';

--- lib:attributes ---

errCB_initialValue: (# exit -1 #);
errCB_abortProgram: (# exit 0 #);
errCB_abortOperation: (# exit 1 #);
errCB_continueOperation: (# exit 2 #);

errCB: IntegerValue
  (# abort: (# <<SLOT errCBAbort:dopart>> #);
     continue: (# <<SLOT errCBContinue:dopart>> #);
     fatal: (# <<SLOT errCBFatal:dopart>> #);
     addMsg: (# t: ^text enter t[] <<SLOT errCBAddMsg:dopart>> #);
     exceptionType:< exception;
     cleanup: ^object;
     private: @<<SLOT errCBPrivate:descriptor>>;
  enter cleanup[]
  <<SLOT errCB:dopart>>
 #);

hiErrCB: IntegerObject
  (# abort: (# <<SLOT hiErrCBAbort:dopart>> #);
     continue: (# <<SLOT hiErrCBContinue:dopart>> #);
     fatal: (# <<SLOT hiErrCBFatal:dopart>> #);
     cleanup: ^object;
  enter cleanup[]
  do INNER
  #);

