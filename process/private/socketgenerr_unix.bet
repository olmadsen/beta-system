ORIGIN 'socketgenbody';

(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1995
 *       All rights reserved.
 *)

INCLUDE '~beta/unixlib/v1.6/unixerrno';

--- SocketGeneratorBindEC:dopart ---
do
   (if err
       
    // cdef_EMFILE                      (* From socket() *)
    // cdef_ENFILE
    // cdef_ENOBUFS then
       &resourceError[]->chosen[];
       
    // cdef_EPROTONOSUPPORT
    // cdef_EPROTOTYPE then
       &internalError[]->chosen[];
       
    // cdef_EACCES then                 (* From socket() or bind() *)
       &accessError[]->chosen[];
       
    // cdef_EADDRINUSE                  (* From bind() *)
    // cdef_EADDRNOTAVAIL then
       &addressError[]->chosen[];
       
    // cdef_EINVAL then
       &internalError[]->chosen[];
       
    // cdef_EBADF                       (* From bind() or getsockname() *)
    // cdef_EFAULT
    // cdef_ENOTSOCK then
       &internalError[]->chosen[];
       
    // cdef_ENOBUFS then                (* From getsockname() *)
       &resourceError[]->chosen[];
       
    // 0 then                           (* From inetAddrOfThisHost() *)
       &internalError[]->chosen[];
       
    else
       &unknownError[]->chosen[];
   if);
   

--- SockGenGetNewConnEC:dopart ---
do
   (if err
       
    // cdef_EBADF then                  (* From waitForIO() *)
       &theIdle.connBrokenError[]->chosen[];
       
    // cdef_EFAULT
    // cdef_EINTR
    // cdef_EINVAL 
    // cdef_ENOTSOCK
    // cdef_EOPNOTSUPP then
       &theIdle.internalError[]->chosen[];
       
    // cdef_EMFILE then                 (* From accept() *)
       &theIdle.resourceError[]->chosen[];
       
    // cdef_EACCES then                 (* From fcntl() *)
       &theIdle.accessError[]->chosen[];
       
    else
       &theIdle.unknownError[]->chosen[];
   if);
