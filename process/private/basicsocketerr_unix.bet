ORIGIN 'basicsocketbody';

INCLUDE '~beta/unixlib/v1.6/unixerrno';

--- BasicSocketEndOfDataEC:dopart ---
do 
   (if err
    // cdef_EBADF then                  (* From ioctl() *)
       &connBrokenError[]->chosen[];
       
    // cdef_EFAULT
    // cdef_EINVAL
    // cdef_ENOTTY then 
       &internalError[]->chosen[];
       
    else
       &unknownError[]->chosen[];
   if);
   
--- BasicSocketSendMemEC:dopart ---
do
   (if err 
    // cdef_EBADF                       (* From write() *)
       (* probably end-of-client *)
    // cdef_ENXIO 
       (* hangup, probably end-of-client *)
    // cdef_EPIPE then 
       &theIdle.connBrokenError[]->chosen[];
       
    // cdef_EFAULT
    // cdef_EINVAL then 
       &theIdle.internalError[]->chosen[];
       
    // cdef_ERANGE then 
       &theIdle.resourceError[]->chosen[];
       
    else
       &theIdle.unknownError[]->chosen[];
   if);


--- BasicSocketRecvMemEC:dopart ---
do
   (if err
    // cdef_EBADF                  (* From waitForIO() *)
    // cdef_ENXIO 
       (* hangup, probably end-of-client *)
    // cdef_EPIPE 
    // cdef_ENOTCONN then               
       (* peer closed down *)
       &theIdle.connBrokenError[]->chosen[];
       
    // cdef_EFAULT
    // cdef_EINVAL then 
       &theIdle.internalError[]->chosen[];
       
    // cdef_EBADMSG then 
       &theIdle.badMsgError[]->chosen[];
       
    // cdef_EISDIR then 
       &theIdle.internalError[]->chosen[];
       
    // cdef_ERANGE then 
       &theIdle.resourceError[]->chosen[];
       
    else
       &theIdle.unknownError[]->chosen[];
   if);

--- BasicSocketConnectEC:dopart ---
do
   (if err
    // cdef_EACCES then                 (* From socket() *)
       &accessError[]->chosen[];
       
    // cdef_EMFILE
    // cdef_ENFILE
    // cdef_ENOBUFS then
       &resourceError[]->chosen[];
       
    // cdef_EPROTONOSUPPORT
    // cdef_EPROTOTYPE then
       &internalError[]->chosen[];
       
    // cdef_EADDRINUSE                  (* From connect() *)
    // cdef_EADDRNOTAVAIL then
       &addressError[]->chosen[];
       
    // cdef_EAFNOSUPPORT
    // cdef_EALREADY
    // cdef_EBADF then 
       &internalError[]->chosen[];
       
    // cdef_ECONNREFUSED then 
       &refusedError[]->chosen[];
       
    // cdef_EFAULT
    // cdef_EINPROGRESS then 
       &internalError[]->chosen[];
       
    // cdef_EINTR then 
       &intrError[]->chosen[];
       
    // cdef_EINVAL
    // cdef_EISCONN then 
       &internalError[]->chosen[];
       
    // cdef_ENETUNREACH then 
       &addressError[]->chosen[];
       
    // cdef_ENOTSOCK then 
       &internalError[]->chosen[];
       
    // cdef_ETIMEDOUT then
       &refusedError[]->chosen[];
       
    else
       &unknownError[]->chosen[];
   if);


