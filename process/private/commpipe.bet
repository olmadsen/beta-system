ORIGIN '~beta/basiclib/v1.5/basicsystemenv';

(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics 1995
 *       All rights reserved.
 *)

MDBODY default  'commpipe_unix'
       nti      'commpipe_nt';

INCLUDE 'sysFdStream';

--- systemlib:attributes ---

propagateException: (# msg: ^Text enter msg[] do INNER #);

pipe:
  (#
     (* <<SLOT pipelib:attributes>>; *)

     
     (* OPERATIONS *)
     

     init:<
       (# error:< propagateException(# do INNER; msg -> pipeError #);
       <<SLOT PipeInit:dopart>>
       #);

     pipeException: Exception
       (#
       enter msg
       do (if msg.empty//false then msg.newline if);
          INNER;
       #);
     
     pipeError:< PipeException;

     
     (* ATTRIBUTES *)
     
     readEnd: ^fdStream;
     writeEnd: ^fdStream;

     
     (* PRIVATE *)
     
     private: @<<SLOT PipePrivate:descriptor>>;
  

#);
