ORIGIN '../streamgenerator';
LIB_ITEM 'processstreamgen';

INCLUDE 'socketgenbody';
(*
 * COPYRIGHT
 *       Copyright (C) Aarhus University
 *       All rights reserved.
 *)


---  SocketGeneratorGetStream:dopart ---
do &sockType[] -> sock[];
   (timeout, this(withIdleAndPE)[])
     -> private.getNewConnection 
     -> (sock.theSocket.private.index, sock.theSocket.inetAddr);
   (if sock.theSocket.private.index<>-1 then
       sock.thesocket.private.init;
       port->sock.theSocket.port; 
    else
       NONE->sock[];
   if)
        
        
        
