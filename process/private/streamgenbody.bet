ORIGIN '../streamgenerator';
INCLUDE 'socketgenbody';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1995-96
 *       All rights reserved.
 *)


---  SocketGeneratorGetStream:dopart ---
do &sockType[] -> sock[];
   (timeout, this(withIdleAndPE)[])
     -> private.getNewConnection 
     -> (sock.theSocket.private.index, sock.theSocket.inetAddr);
   (if sock.theSocket.private.index<>-1 then
       sock.init;
       port->sock.theSocket.port; (* Should get port from peer-connection! *)
    else
       NONE->sock[];
   if)
        
        
        
