ORIGIN '~beta/basiclib/systemenv';
INCLUDE '~beta/process/protocols/nntpstream';
INCLUDE '~beta/basiclib/formatio';
--- program: descriptor ---
systemenv
(# nntp: @nntpstream; no,first,last: @integer;
do '-----SERVER result:'->screen.putline;
   'news.daimi.au.dk'->nntp.server;
   
   '-----NEWGROUPS result:'->screen.putline;
   ('980101','000000', true, '')
     ->nntp.newgroups(# do newgroup[]->screen.putline #);
   
   '-----LIST result:'->screen.putline;
   nntp.list(#
            do group[]->screen.puttext; ' '->screen.put;
               firstArticleNo->screen.putint; ' '->screen.put;
               lastArticleNo->screen.putint; screen.newline;
            #);
   
   '-----GROUP result:'->screen.putline;
   'daimi.dprog2'->nntp.group->(no,first,last);
   'daimi.dprog2 has %i messages (first is %i, last is %i)\n'
      ->screen.putformat(# do no->i; first->i; last->i #);
   
   '-----HEAD result:'->screen.putline;
   nntp.head->screen.puttext;
   
   '-----ARTICLE result:'->screen.putline;
   nntp.article->screen.puttext;
   
   '-----NEXT:'->screen.putline;
   nntp.next;
   
   '-----ARTICLE result:'->screen.putline;
   nntp.article->screen.puttext;
   
   '-----QUIT:'->screen.putline;
   nntp.quit;
#)
