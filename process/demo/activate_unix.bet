ORIGIN '~beta/process/activate';

(* Like the generic 'activatedemo', but issues UNIX specific process calls *)

--- program:descriptor ---
systemEnv
(# first, other: ^Text;
do 'output of "/bin/ls -l":'->screen.putLine;
   ('/bin/ls','-l') -> execReadText -> first[];
   first[]->screen.putText;
   
   'Repeating command 100 times...' ->screen.putLine;
   (for manytimes:100 repeat
        manytimes->screen.putInt; 
        ('/bin/ls','-l') -> execReadText -> other[];
        (if (first.length<>other.length) or (not (other[]->first.equal)) then
            screen.newLine;
            'first and other are different during run '->screen.putText;
            manytimes->screen.putInt;'.  Other:'->screen.putLine;
            other[]->screen.putLine;
        if);
        ascii.CR->screen.put;
   for);
  
   'output of "./slowwriter -s":'->screen.putLine;
   ('./slowwriter','-s') -> execReadText -> first[];
   first[]->screen.putText;

   (*
    * 'Sending a mail through sendmail'->screen.putLine;
    * ('/usr/lib/sendmail', '-t') -> execWrite
    * (# 
    * do 'To: corry@mjolner.dk' -> input.putLine;
    *    'Subject: activate.bet sent mail.' -> input.putLine;
    *    input.newLine;
    *    'Hi,' -> input.putLine;
    *    'This is a mail sent from the activate.bet testprogram' -> input.putLine;
    * #);
    *)
   
   'Writing this output to cat, NOT reading the output:'->screen.putLine;
   ('/bin/cat', NONE) -> execWrite
   (# 
   do first[]->input.putText;
   #);
   
   'Writing this output to wc, NOT reading the output:'->screen.putLine;
   ('/usr/bin/wc', NONE) -> execWrite
   (# 
   do first[]->input.putText;
   #);
   
   'Writing this output to wc, reading the output:'->screen.putLine;
   ('/usr/bin/wc','-l', first[])->execReadWriteText->screen.putLine;
   'done.'->screen.putLine;
   
   screen.newLine;
#)
