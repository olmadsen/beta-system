ORIGIN '~beta/basiclib/systemenv';
INCLUDE '~beta/process/processmanager';

--- program:descriptor ---
systemEnv
(#
   producer: @process;
   consumer: @process;
do 
   'producer' -> producer.init;
   'consumer' -> consumer.init;
   (*producer | consumer *)
   producer[] -> consumer.connectInPipe; 
   'items' -> producer.argument.putarg;
   producer.start;
   consumer.start;
   
   (* Do not stop THIS process until the consumer has consumed it all *)
   consumer.awaitStopped;
#)
