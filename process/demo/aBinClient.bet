ORIGIN '~beta/process/v1.4.1/processmanager';
[[
--- program:descriptor ---
(#
   outSocket: @activeBinarySocket;
   i: @integer;
   no: @integer;
do
   (* Initialize and establish connection *)
   5000 -> outSocket.port;
   'localhost' -> outSocket.host;
   doConnect: outSocket.connect
     (# error::<
          (#
          do no+1->no; '.' -> screen.put;
             (if no>10//false then restart doConnect if);
          #);
     #);

   (* Communicate *)
   (@@i,4) -> outSocket.readData;
   'client, received from server: ' -> screen.putText;
   i -> screen.putInt; screen.newline;
   2*i -> i;
   (@@i,4) -> outSocket.writeData;

   (* Close down *)
   outSocket.close;
#)
---]]
