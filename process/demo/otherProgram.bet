ORIGIN '~beta/basiclib/v1.5/systemenv';
INCLUDE '~beta/process/v1.6/processmanager';
INCLUDE '~beta/process/v1.6/streamsocket';

--- program:descriptor ---
systemEnv(#	
   outSocket: @StreamSocket;
   aText: ^Text;
   no: @Integer;
do 	
   5000 -> outSocket.port;
   'localhost' -> outSocket.host;
   doConnect: outSocket.connect
     (# error::< 
          (#
          do no+1->no; '.' -> screen.put;
             (if no>10//false then restart doConnect if);
          #);
     #);
   (* connection established *)
   outSocket.GetLine->aText[]; (* get a text via the socket *)
   'otherProgram received: ' -> screen.puttext;
   aText[] -> screen.putline;
   outSocket.close;	(* close down the socket *)
#)
