ORIGIN '~beta/basiclib/systemenv';
INCLUDE '~beta/process/binarygenerator';
-- program: Descriptor --
systemEnv
  (#
     counter: IntegerObject (#  do value+1->value #);
     port: (#  exit 7899 #);
     binaryGen: @SocketGenerator;
     clientSock: ^BinarySocket;
     aCounter: @counter;
     
  do
     port->binaryGen.bind;
     (* The port chosen for this service. *)
     cycle
       (# 
       do
          waitForever->binaryGen.getBinaryConnection->clientSock[];
          (waitForever,aCounter)->clientSock.putInt;
          clientSock.close;
          
       #);
     binaryGen.close;
     
  #)  

