ORIGIN '~beta/guienv/v1.6/guienv';
INCLUDE 'drawing' 'behaviour';

-- windowLib: attributes --

expanderButton: windowItem
  (# onExpand:<
       (#
       do inner;
       #);
     onCollapse:<
       (#
       do INNER;
       #);
     expanded: @boolean;
	  toggle:
	    (#
		 do not expanded -> expanded;
		 	 (if expanded then
			 	onExpand;
			 else
			 	onCollapse;
			 if);
			 update;
		 #);
     eventHandler::<
       (# onRefresh::
            (#
            do graphics
                 (#
                 do (if expanded then
					  			(0, 0, expanderEnabledDown) -> drawExpander;
							else
								(0, 0, expanderEnabledRight) -> drawExpander;
							if);
                 #);
            #);
			  onMouseDown::
			    (#  box: @rectangle;
				 do ((0, 0), size) -> box;
				 	 buttonBehavior
				 		(# drawPressed::
								(#
								do graphics
										(#
										do (if expanded then
												(0, 0, expanderPressedDown) -> drawExpander;
											else
												(0, 0, expanderPressedRight) -> drawExpander;
											if);
										#);
								#);
							drawNormal::
								(#
								do graphics
									  (#
									  do (if expanded then
												(0, 0, expanderEnabledDown) -> drawExpander;
											else
												(0, 0, expanderEnabledRight) -> drawExpander;
											if);
									  #);
								#);
							action::
								(#
								do graphics
										(#
										do box -> eraseRectangle;
											(0, 0, expanderIntermediateRight) -> drawExpander;
											5 -> guienvWait;
											box -> eraseRectangle;
											(if expanded then
												(0, 0, expanderPressedRight) -> drawExpander;
											else
												(0, 0, expanderPressedDown) -> drawExpander;
											if);
											5 -> guienvWait;
											toggle;
										#);
								#);
						#); 
				 #);
       #);
  #);
