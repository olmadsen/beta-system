ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/graphics';

BODY 'private/tableviewbody';

-- windowLib: attributes --

tableView: canvas
	(# <<SLOT tableViewLib: attributes>>;
		
		column: interfaceObject
			(# <<SLOT columnLib: attributes>>;
				title:
					(# value: ^text;
					enter (# enter value[] <<SLOT columnSetTitle: doPart>> #)
					exit (# <<SLOT columnGetTitle: doPart>> exit value[] #)
					#);
				width:
					(# value: @integer;
					enter (# enter value <<SLOT columnSetWidth: doPart>> #)
					exit (# <<SLOT columnGetWidth: doPart>> exit value #)
					#);
				open::<
					(# <<SLOT columnOpen: doPart>> #);
				close::<
					(# <<SLOT columnClose: doPart>> #);
				eventHandler::<
					(# drawEvent: event
							(# g: ^graphics;
								bounds: ^rectangle;
								selected: @boolean;
							enter (g[], bounds[], selected)
							do INNER;
							#);
						drawTitleEvent: drawEvent
							(#
							do INNER;
							#);
						onDrawTitle:< drawTitleEvent;
						drawDataEvent: drawEvent
							(# data: ^text;
							enter data[]
							do INNER;
							#);
						onDrawData:< drawDataEvent;
					#);
				private: @<<SLOT columnPrivate: descriptor>>;
			#);
		appendColumn:
			(# theColumn: ^column;
			enter theColumn[]
			<<SLOT tableViewAppendColumn: doPart>>
			#);
		insertColumn:
			(# theColumn: ^column;
				after: ^column;
			enter (theColumn[], after[])
			<<SLOT tableViewInsertColumn: doPart>>
			#);
		deleteColumn:
			(# theColumn: ^column;
			enter theColumn[]
			<<SLOT tableViewDeleteColumn: doPart>>
			#);
			
		mainColumnType:< column
			(# eventHandler::<
					(# onDrawTitle::<
							(# <<SLOT mainColumnTypeOnDrawTitle: doPart>> #);
						onDrawData::<
							(# <<SLOT mainColumnTypeOnDrawData: doPart>> #);
					#);
			#);
		mainColumn: @mainColumnType;
		
		alignLeft: (# exit 1 #);
		alignRight: (# exit 2 #);
		
		simpleColumn: column
			(# <<SLOT simpleColumnnLib: attributes>>;
				alignment:
					(# value: @integer;
					enter (# enter value <<SLOT simpleColumnSetAlignment: doPart>> #)
					exit (# <<SLOT simpleColumnGetAlignment: doPart>> exit value #)
					#);
				open::<
					(# <<SLOT simpleColumnOpen: doPart>> #);
				close::<
					(# <<SLOT simpleColumnClose: doPart>> #);
				eventHandler::<
					(# onDrawTitle::<
							(# <<SLOT simpleColumnOnDrawTitle: doPart>> #);
						onDrawData::<
							(# <<SLOT simpleColumnOnDrawData: doPart>> #);
					#);
				private: @<<SLOT simpleColumnPrivate: descriptor>>;
			#);
			
		tableItem: interfaceObject
			(# <<SLOT tableItemLib: attributes>>;
				mainText:
					(# value: ^text;
					enter (# enter value[] <<SLOT tableItemSetMainText: doPart>> #)
					exit (# <<SLOT tableItemGetMainText: doPart>> exit value[] #)
					#);
				setColumnText:
					(# theColumn: ^column;
						value: ^text;
					enter (theColumn[], value[])
					<<SLOT tableItemSetColumnText: doPart>>
					#);
				getColumnText:
					(# theColumn: ^column;
						value: ^text;
					enter theColumn[]
					<<SLOT tableItemGetColumnText: doPart>>
					exit value[]
					#);
				selected: booleanValue
					(# <<SLOT tableItemSelected: doPart>> #);
				eventHandler::<
					(# selectEvent: event
							(# do INNER; #);
						onSelect:< selectEvent;
						deSelectEvent: event
							(# do INNER #);
						onDeSelect:< deSelectEvent;
					#);
				open::<
					(# <<SLOT tableItemOpen: doPart>> #);
				close::<
					(# <<SLOT tableItemClose: doPart>> #);
				private: @<<SLOT tableItemPrivate: descriptor>>;
			#);
			
		append:
			(# theTableItem: ^tableItem;
			enter theTableItem[]
			<<SLOT tableViewAppend: doPart>>
			#);
		prepend:
			(# theTableItem: ^tableItem;
			enter theTableItem[]
			<<SLOT tableViewPrepend: doPart>>
			#);
		insert:
			(# theTableItem: ^tableItem;
				after: ^tableItem;
			enter (theTableItem[], after[])
			<<SLOT tableViewInsert: doPart>>
			#);
			
		scan:
			(# current: ^tableItem;
			<<SLOT tableViewScan: doPart>>
			#);
			
		selection: @
			(# set:
					(# theTableItem: ^tableItem;
					enter theTableItem[]
					<<SLOT tableViewSelectionSet: doPart>>
					#);
				add:
					(# theTableItem: ^tableItem;
					enter theTableItem[]
					<<SLOT tableViewSelectionAdd: doPart>>
					#);
				remove:
					(# theTableItem: ^tableItem;
					enter theTableItem[]
					<<SLOT tableViewSelectionRemove: doPart>>
					#);
				clear:
					(# <<SLOT tableViewSelectionClear: doPart>> #);
				scan:
					(# current: ^tableItem;
					<<SLOT tableViewSelectionScan: doPart>>
					#);
			#);
		
		
		theScroll:
			(# x, y: @integer;
			enter (# enter (x, y) <<SLOT tableViewSetTheScroll: doPart>> #)
			exit (# <<SLOT tableViewGetTheScroll: doPart>> exit (x, y) #)
			#);
		scroll:
			(# dX, dY: @integer;
			enter (dX, dY)
			<<SLOT tableViewScroll: doPart>>
			#);
		maxScroll:
			(# maxX, maxY: @integer;
			<<SLOT tableViewMaxScroll: doPart>>
			exit (maxX, maxY)
			#);
			
		open::<
			(# <<SLOT tableViewOpen: doPart>> #);
		close::<
			(# <<SLOT tableViewClose: doPart>> #);
		eventHandler::<
			(# onFrameChanged::<
					(# <<SLOT tableViewOnFrameChanged: doPart>> #);
			#);
		private: @<<SLOT tableViewPrivate: descriptor>>;
	#);
	
	