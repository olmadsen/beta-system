ORIGIN '~beta/guienv/v1.2/guienv';
INCLUDE '~beta/mps/v4.9.1/astlevel';
INCLUDE '~beta/betaast/v4.9.1/betacfl';
INCLUDE 'prettyprinter';
INCLUDE '~beta/sysutils/v1.4/pathhandler';
BODY 'private/editorenvbody';
-- lib: attributes --

editorEnv: GUIenv
  (# <<SLOT editorEnvLib: attributes>>;
     MPS: ^astInterface;
     betaGram: ^MPS.beta;
     pretty: ^MPS.prettyPrinter;
     thePathHandler: @pathHandler
       (# <<SLOT thePathHandlerLib: attributes>>;
          init::<
            (# <<SLOT editorEnvThePathHandlerInit: doPart>> #);
          workingDirectory:
            (# path: ^text;
            <<SLOT editorEnvthePathHandlerworkingDirectory: doPart>>
               exit path[]
            #);
          localize:
            (* If possible the path will be expressed local to the
             *  workingDirectory - otherwise it will be a full path.
             *)
            (# path: ^text;
               local: ^text;
               failure:< object;
            enter path[]
            <<SLOT editorEnvthePathHandlerlocalize: doPart>>
            exit local[]
            #);
          private: @<<SLOT editorEnvthePathHandlerprivate: descriptor>>;
       #);
     private: @<<SLOT IBeditorEnvPrivate: descriptor>>;
     astController:
       (# <<SLOT astControllerLib: attributes>>;
          theAst: ^MPS.AST;
          prepareChange:
            (# 
            <<SLOT EEastControllerPrepareChange: doPart>>
            #);
          change:
            (# newAst: ^MPS.AST;
            enter newAst[]
            <<SLOT EEastControllerChange: doPart>>
            #);
          replaced:<
            (# 
            enter theAst[]
            do inner;
            #);
          changed:<
            (# 
            do inner;
            #);
          deleted:<
            (# 
            do inner;
            #);
          init:<
            (# 
            enter theAST[]
            <<SLOT EDastControllerInit: doPart>>
            #);
          release:<
            (# <<SLOT EDastControllerRelease: doPart>> #);
          private: @<<SLOT astControllerPrivate: descriptor>>;
       exit theAst[]
       #);
     init:<
       (* Init is called in the doPart of this(editorEnv), if it is
        * not already called.
        *)
       (# <<SLOT IBeditorEnvInit: doPart>> #);
     showParseErrors:
       (# errors: ^text;
       enter errors[]
       <<SLOT EditorEnvShowParseErrors: doPart>>
       #);
  <<SLOT IBeditorEnvDoPart: doPart>>
  #);
