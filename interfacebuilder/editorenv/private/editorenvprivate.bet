ORIGIN '../editorenv';
INCLUDE '~beta/containers/current/hashTable';

-- editorEnvLib: attributes --

addAstController:
  (# astControl: ^astController;
  enter astControl[]
  <<SLOT EDaddAstController: doPart>>
  #);
removeAstController:
  (# astControl: ^astController;
  enter astControl[]
  <<SLOT EDRemoveAstController: doPart>>
  #);
scanMatchingAstcontrollers:
  (# doChild:<
       (# 
       enter current[]
       do inner;
       #);
     doAncestor:<
       (# 
       enter current[]
       do inner;
       #);
     doSame:<
       (# 
       enter current[]
       do inner;
       #);
     current: ^astController;
     theAst: ^MPS.AST;
  enter theAst[]
  <<SLOT EDscanMatchingAstcontrollers: doPart>>
  #);


-- IBeditorEnvPrivate: descriptor --
(# initialized: @boolean;
   astControllers: @list
     (# element::< astController;
     #);
   
   classInfo: @hashTable
     (# 
        element::
          (# name: ^text;
             methods: @list
               (# element::
                    (# name: ^text;
                       event: @boolean;
                    #);
               #);
          #);
        textHash: integerValue
          (# t: ^text;
          enter t[]
          <<SLOT EditorEnvClassInfoTextHash: doPart>>
          #);
        hashFunction::
          (# 
          do e.name[] -> textHash -> value;
          #);
        add:
          (# class: ^element;
             name: ^text;
             addMethod:
               (# name: ^text;
                  event: @boolean;
                  method: ^class.methods.element;
               enter (name[], event)
               <<SLOT EditorEnvClassInfoAddMethod: doPart>>
               #);
             superClass: ^element;
          enter (name[], superClass[])
          <<SLOT EditorEnvClassInfoAdd: doPart>>
          exit class[]
          #);
        lookup:
          (# name: ^text;
             class: ^element;
          enter name[]
          <<SLOT EditorEnvClassInfoLookup: doPart>>
          exit class[]
          #);
     #);
   
#)
