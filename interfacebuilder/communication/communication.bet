ORIGIN '~beta/basiclib/v1.6/basicsystemenv';
INCLUDE '~beta/process/v1.6/streamgenerator';
-- systemLib: Attributes --
communicationEnv:
  (#
     port:< integerValue (#  do 6769->value; INNER #);
     generator: @socketGenerator;
     processCommand:< (# cmd: ^text;  enter cmd[] do INNER #);
     processCommands: system
       (# connection: ^streamSocket
       do
          cycle
            (# 
            do
               waitForEver->generator.getStreamConnection->connection[];
               connection.getLine->processCommand;
               
            #)
       #);
     init:<
       (#  do port->generator.bind; &| processCommands[]->fork; INNER #)
  do INNER
  #)  

