ORIGIN 'friggapplication';
INCLUDE '~beta/guienv/guienvsystemenv'
        '~beta/compiler/DYN/dynlib'
        'seticon';
BODY '~beta/editor/private/compiler';
BODY '~beta/editor/private/nouser';
-- program: Descriptor --
systemenv
  (#
     setWindowEnv::  (#  do frigg[]->theWindowEnv[] #);
     DC: ^astInterface.dynamicCompiler;
     myCompiler: frigg.MPS.AST.dynamicCompiler
       (#
          initDyn::< 
            (# thisExecutable: ^text; 
            do
               screen[]->info[];
               (if msg[] = none then &stream[]->msg[] if);
               'Dynamic Mjolner Environment ...'->info.puttext;
               (1->Arguments->thisExecutable[],false)->NT.init;
               '...'->info.puttext;
               (* On nti, calling dynenv.exe is normal and the compiler
                * cannot handle any extension but .bet *)
               exeFileExtension->thisExecutable.stripExtension;
               (thisExecutable[],none )
                 ->ActivateCompiler
                   (#
                      addedFragment::
                        (#  do fullFn[]->frigg.ymerBrowser.writeInfoView #);
                      addedTranslate::
                        (#  do 'Translate: '->putText; fullFn[]->putLine #);
                      checkedFragment::
                        (#  do 'Checked: '->putText; fullFn[]->putLine #);
                      codegenFragment::
                        (# 
                        do 'Code generated: '->putText; fullFn[]->putLine
                        #)
                   #);
               (* to initialize 
                * dependency graph *)
               info.newline;
               
            #)
       #);
     frigg: @friggApplication
       (#
          ymerBrowserWindow::< 
            (# open::<  (#  do setFriggIcon;  #);  #);
          init:: 
            (# 
            do 'Hello, World'->putLine; &myCompiler[]->DC[]; DC.initDyn; 
            #);
          
       #);
     
  do &expandWildcardsArgumentHandler[]->argumentHandler[]; 
  #)  

