ORIGIN '~beta/basiclib/v1.5/betaenv';
INCLUDE '../atom/atom';
INCLUDE 'types';
BODY 'private/parametersbody';

-- lib: attributes --

parameters:
  (# <<SLOT parametersLib: attributes>>;
     data: ^tableAtom;
     
     type:
       (# value: @integer;
       <<SLOT parametersType: doPart>>
       exit value
       #);
     getBool:
       (# key: ^text;
          value: @boolean;
       enter key[]
       <<SLOT parametersGetBool: doPart>>
       exit value
       #);
     setBool:
       (# key: ^text;
          value: @boolean;
       enter (key[], value)
       <<SLOT parametersSetBool: doPart>>
       #);
     getInt:
       (# key: ^text;
          value: @integer;
       enter key[]
       <<SLOT parametersGetInt: doPart>>
       exit value
       #);
     setInt:
       (# key: ^text;
          value: @integer;
       enter (key[], value)
       <<SLOT parametersSetInt: doPart>>
       #);
     getText:
       (# key: ^text;
          value: ^text;
       enter key[]
       <<SLOT parametersGetText: doPart>>
       exit value[]
       #);
     setText:
       (# key: ^text;
          value: ^text;
       enter (key[], value[])
       <<SLOT parametersSetText: doPart>>
       #);
     copy:
       (# theCopy: ^parameters;
       <<SLOT parametersCopy: doPart>>
       exit theCopy[]
       #);
     set:
       (# theCopy: ^parameters;
       enter theCopy[]
       <<SLOT parametersSet: doPart>>
       #);
  #);

parameterStore:
  (# <<SLOT parameterStoreLib: attributes>>;
     shortName:
       (# value: ^text;
       <<SLOT parameterStoreShortName: doPart>>
       exit value[]
       #);
     load:
       (# fileName: ^text;
          error:<
            (# msg: ^text;
            enter msg[]
            do inner;
            #);
       enter fileName[]
       <<SLOT parameterStoreLoad: doPart>>
       #);
     create:
       (# fileName: ^text;
       enter fileName[]
       <<SLOT parameterStoreCreate: doPart>>
       #);
     save:
       (# <<SLOT parameterStoreSave: doPart>> #);
     autoSave:
       (# <<SLOT paramterStoreAutoSave: doPart>> #);
     deleteAutoSave:
       (# <<SLOT parameterStoreDeleteAutoSave: doPart>> #);
     get:
       (# ID: @integer;
          params: ^parameters;
       enter ID
       <<SLOT parameterStoreGet: doPart>>
       exit params[]
       #);
     new:
       (# type: @integer;
          params: ^parameters;
       enter type
       <<SLOT parameterStoreNew: doPart>>
       exit params[]
       #);
     private: @<<SLOT parameterStorePrivate: descriptor>>
  #);

