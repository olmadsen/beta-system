ORIGIN '~beta/basiclib/betaenv';
INCLUDE '../atom/atom'
        'types';
BODY 'private/parametersbody';
-- lib: Attributes --
parameters:
  (#
     <<SLOT parametersLib:Attributes>>;
     data: ^tableAtom;
     init:
       (# 
       <<SLOT parametersInit:DoPart>>
       #);
     type:
       (#
          value:
            @integer;
          
       enter (#  enter value <<SLOT parametersEnterType:DoPart>> #)
       exit
         (# 
         <<SLOT parametersExitType:DoPart>>
         exit value
         #)
       #);
     getBool:
       (# key: ^text; value: @boolean; 
       enter key[]
       <<SLOT parametersGetBool:DoPart>>
       exit value
       #);
     setBool:
       (# key: ^text; value: @boolean; 
       enter (key[],value)
       <<SLOT parametersSetBool:DoPart>>
       #);
     getInt:
       (# key: ^text; value: @integer; 
       enter key[]
       <<SLOT parametersGetInt:DoPart>>
       exit value
       #);
     setInt:
       (# key: ^text; value: @integer; 
       enter (key[],value)
       <<SLOT parametersSetInt:DoPart>>
       #);
     getText:
       (# key: ^text; value: ^text; 
       enter key[]
       <<SLOT parametersGetText:DoPart>>
       exit value[]
       #);
     setText:
       (# key: ^text; value: ^text; 
       enter (key[],value[])
       <<SLOT parametersSetText:DoPart>>
       #);
     copy:
       (# theCopy: ^parameters; 
       <<SLOT parametersCopy:DoPart>>
       exit theCopy[]
       #);
     set:
       (# theCopy: ^parameters; 
       enter theCopy[]
       <<SLOT parametersSet:DoPart>>
       #);
     find:
       (# key: ^text; value: ^atom
       enter key[]
       do key[]->data.lookup->value[]
       exit value[]
       #);
     
  #);
parameterStore:
  (#
     <<SLOT parameterStoreLib:Attributes>>;
     shortName:
       (# value: ^text; 
       <<SLOT parameterStoreShortName:DoPart>>
       exit value[]
       #);
     load:
       (#
          fileName: ^text;
          error:< (# msg: ^text;  enter msg[] do INNER ;  #);
          
       enter fileName[]
       <<SLOT parameterStoreLoad:DoPart>>
       #);
     create:
       (# fileName: ^text; 
       enter fileName[]
       <<SLOT parameterStoreCreate:DoPart>>
       #);
     save: (#  <<SLOT parameterStoreSave:DoPart>> #);
     autoSave:
       (# 
       <<SLOT paramterStoreAutoSave:DoPart>>
       #);
     deleteAutoSave: (#  <<SLOT parameterStoreDeleteAutoSave:DoPart>> #);
     get:
       (#
          ID: @integer;
          params: ^parameters;
          
       enter ID
       <<SLOT parameterStoreGet:DoPart>>
       exit params[]
       #);
     new:
       (# type: @integer; params: ^parameters; 
       enter type
       <<SLOT parameterStoreNew:DoPart>>
       exit params[]
       #);
     private:
       @<<SLOT parameterStorePrivate:Descriptor>>
  #);
  

