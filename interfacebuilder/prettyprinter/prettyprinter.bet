ORIGIN '~beta/mps/v5.1/astlevel';
INCLUDE '~beta/pretty/v5.1/astviewer';
INCLUDE '~beta/betaast/v5.1/betacfl';
BODY 'private/prettyprinterbody';
[[

-- AstInterfaceLib: Attributes --


getPretty: objectPool.get
  (# type:: prettyPrinter;
     init::
       (# 
       do obj.init;
       #);
  #);

prettyPrinter: astViewer
  (# <<SLOT prettyPrinterLib: Attributes>>;
     
     betaGram: ^BETA;
     
     printNode:
       (* Prettyprints the ast on the stream *)
       (# theNode: ^AST;
          theStream: ^stream;
       enter (theNode[],theStream[])
       <<SLOT prettyPrinterPrintNode: doPart>>
       #);
     printNodeDepth:
       (* Prettyprints the ast on the stream, but only at a certain 
        * depth 
        *)
       (# theNode: ^AST;
          depth: @integer;
          theStream: ^stream;
       enter (theNode[], depth, theStream[])
       <<SLOT prettyPrinterPrintNodeDepth: doPart>>
       #);
     printFragment:
       (* Prettyprints the fragment on the stream *)
       (# ff: ^FragmentForm;
          theStream: ^stream;
       enter (ff[],theStream[])
       <<SLOT prettyPrinterPrintFragment: doPart>>
       #);
     printProperties:
       (* Prettyprints the propertylist on the stream *)
       (# prop: ^propertyList;
          theStream: ^stream;
       enter (prop[],theStream[])
       <<SLOT prettyPrinterPrintProperties: doPart>>
       #);
     printGroup:
       (# fg: ^fragmentGroup;
          theStream: ^stream;
       enter (fg[],theStream[])
       <<SLOT prettyPrinterPrintGroup: doPart>>
       #);
     init: 
       (# 
       enter betaGram[]
       <<SLOT prettyPrinterInit: doPart>>  
       #);
     private: @<<SLOT prettyPrinterPrivate: descriptor>>;
  #);

--]]
