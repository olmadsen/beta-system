ORIGIN '~beta/guienv/guienv';
INCLUDE '../component/component';
INCLUDE '~beta/guienv/preliminary/treeView/treeView';

-- windowLib: attributes --

aggregationView: treeView
  (# rootComponent: ^betaPattern;
     compItem: treeItem
       (# theComponent: ^betaPattern;
          comp:
            (# theName: ^text;
            enter theComponent[]
            do theComponent.name -> theName[];
               (if theName[] <> NONE then
                   theName[] -> name;
                else
                   'NONE' -> name;
               if);
               theComponent.scan
               (# sub: ^betaPattern;
                  subItem: ^compItem;
               do &betaPattern[] -> sub[];
                  current[] -> sub.node[];
                  &compItem[] -> subItem[];
                  subItem[] -> append;
                  sub[] -> subItem.comp;
               #);
            #);
       #);
     open::<
       (# rootItem: ^compItem;
       enter rootComponent[]
       do &compItem[] -> rootItem[];
          rootItem[] -> append;
          rootComponent[] -> rootItem.comp;
          inner;
       #);
  #)
