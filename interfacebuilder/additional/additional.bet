ORIGIN '../graphicaleditor/graphicaleditor';
INCLUDE '../graphicaleditor/standardeditors'
'../support/groupbox'
'../support/column'
'../support/row'
'../support/auxcontrols'
'../support/panorama'
'../support/extracontrols'
'../graphicaleditor/icons';

INCLUDE '../graphicaleditor/private/graphicaleditorprivate';


-- graphicalEditorEnvLib: attributes --

insertAdditionalSuite:
  (#
  do ('caption',&instantiator
     (# editorType:: theGraphicalEditor.captionEditor #)[],
     '~beta/interfacebuilder/support/auxcontrols','AUX',
     'caption', captionIcon, 40, 16)
       ->insertCustom;
     ('dialogField',&instantiator
     (# editorType:: theGraphicalEditor.dialogFieldEditor #)[],
     '~beta/interfacebuilder/support/auxcontrols','AUX',
     'dialogfield', dialogfieldIcon, 100, 21)
       ->insertCustom;
     ('downArrow',&instantiator
     (# editorType:: theGraphicalEditor.downArrowEditor #)[],
     '~beta/interfacebuilder/support/auxcontrols','AUX', 
     'downarrow', downarrowIcon, 32, 32)
       ->insertCustom;
     ('groupRadioButton',&instantiator
     (# editorType:: theGraphicalEditor.groupRadioButtonEditor #)[],
     '~beta/interfacebuilder/support/auxcontrols','AUX', 'groupradiobutton', 
     groupRadioButtonIcon, 60, 16)
       ->insertCustom;
     ('groupbox',&instantiator
     (# editorType:: theGraphicalEditor.groupBoxEditor #)[],
     '~beta/interfacebuilder/support/groupbox','AUX', 'groupbox', groupboxIcon, 150, 100)
       ->insertCustom;
     ('column',&instantiator
     (# editorType:: theGraphicalEditor.columnEditor #)[],
     '~beta/interfacebuilder/support/column','AUX', 'column', columnIcon, 100, 150)
       ->insertCustom;
     ('row',&instantiator
     (# editorType:: theGraphicalEditor.rowEditor #)[],
     '~beta/interfacebuilder/support/row','AUX', 'row', rowIcon, 150, 30)
       ->insertCustom;
     
     ('panorama',&instantiator
     (# editorType:: theGraphicalEditor.panoramaEditor #)[],
     '~beta/interfacebuilder/support/panorama','EXTRA', 'canvas', canvasIcon, 150, 150)
       ->insertCustom;
     ('panoramaScrollbar-vertical',&instantiator
     (# editorType:: theGraphicalEditor.verScrollbarEditor #)[],
     '~beta/interfacebuilder/support/panorama','EXTRA', 'scrollbarv', scrollbarvIcon, 16, 150)
       ->insertCustom;
     ('panoramaScrollbar',&instantiator
     (# editorType:: theGraphicalEditor.scrollbarEditor #)[],
     '~beta/interfacebuilder/support/panorama','EXTRA', 'scrollbarh', scrollbarhIcon, 16, 150)
       ->insertCustom;
     ('verticalScroller',&instantiator
     (# editorType:: theGraphicalEditor.verticalScrollerEditor #)[],
     '~beta/interfacebuilder/support/panorama','EXTRA', 'scrolllist', scrollListIcon, 150, 150)
       ->insertCustom;
     ('expanderButton',&instantiator
     (# editorType:: theGraphicalEditor.expanderButtonEditor #)[],
     '~beta/interfacebuilder/support/extracontrols','EXTRA', 'canvas', canvasIcon, 12, 12)
       ->insertCustom;
     ('bevelButton',&instantiator
     (# editorType:: theGraphicalEditor.bevelButtonEditor #)[],
     '~beta/interfacebuilder/support/extracontrols','EXTRA', 'canvas', canvasIcon, 12, 12)
       ->insertCustom;
     
  #);

-- graphicalEditorLib: Attributes --
groupBoxEditor: canvasEditor
  (#
     windowitemType:: groupBox;
     newData::<  (#  do ('caption','Caption:')->data.setText #);
     applyObjectData::< 
       (#  do 'caption'->data.getText->theWindowItem.caption #);
     outline:: (# do false -> value #);
  #);
dialogFieldEditor: textFieldEditor
  (#
     windowitemType:: dialogField;
     newData::< 
       (# 
       do
          ('allowReturn',false)->data.setBool;
          ('editable',true)->data.setBool;
          ('textContents','')->data.setText
       #);
     applyObjectData::< 
       (# 
       do
          'allowReturn'->data.getBool->theWindowItem.allowReturn;
          'editable'->data.getBool->theWindowItem.editable;
          'textContents'->data.getText->theWindowItem.textContents
       #);
     
  #);
captionEditor: staticTextEditor (# windowitemType:: caption;  #);
                                   (* editLabelEditor: captionEditor (#  #); *)
groupRadioButtonEditor: radioButtonEditor
  (# windowitemType:: groupRadioButton;  #);
downArrowEditor: windowItemEditor
  (# outline:: (# do false -> value #);
     windowitemType:: downArrow;
     newData::<  (#  do ('arrowHeight',5)->data.setInt #);
     applyObjectData::< 
       (#  do 'arrowHeight'->data.getInt->theWindowItem.arrowHeight #);
     
  #);
managerEditor: canvasEditor
  (#
     windowitemType::< manager;
     newData::< 
       (# 
       do
          ('vertical.alignment',alignTop)->data.setInt;
          ('horizontal.alignment',alignLeft)->data.setInt;
          ('horizontal.wrap',false)->data.setBool;
          ('vertical.wrap',false)->data.setBool;
          ('margin.left',5)->data.setInt;
          ('margin.top',5)->data.setInt;
          ('margin.right',5)->data.setInt;
          ('margin.bottom',5)->data.setInt;
          ('distance',5)->data.setInt
       #);
     applyObjectData::< 
       (# 
       do
          'vertical.alignment'->data.getInt->theWindowItem.vertical.alignment;
          'horizontal.alignment'->data.getInt
            ->theWindowItem.horizontal.alignment;
          'horizontal.wrap'->data.getBool->theWindowItem.horizontal.wrap;
          'vertical.wrap'->data.getBool->theWindowItem.vertical.wrap;
          'margin.left'->data.getInt->theWindowItem.margin.left;
          'margin.top'->data.getInt->theWindowItem.margin.top;
          'margin.right'->data.getInt->theWindowItem.margin.right;
          'margin.bottom'->data.getInt->theWindowItem.margin.bottom;
          'distance'->data.getInt->theWindowItem.distance
       #);
     
  #);
columnEditor: managerEditor (# windowitemType::< column;  #);
rowEditor: managerEditor (# windowitemType::< row;  #);


expanderButtonEditor: windowItemEditor
  (# windowItemType::< expanderButton;
  #);
bevelButtonEditor: windowItemEditor
  (# windowItemType::< bevelButton;
     newData::
       (#
       do ('label', 'ABC') -> data.setText;
          ('alignment', alignmentCenter) -> data.setInt;
          ('fontName', 'Times') -> data.setText;
          ('fontSize', 12) -> data.setInt;
          ('fontFace', 0) -> data.setInt;
          ('kind', medium) -> data.setInt;
          ('behavior', pushbuttonBehavior) -> data.setInt;
          ('state', FALSE) -> data.setBool;
       #);
     applyObjectData::
       (#
       do 'label' -> data.getText -> theWindowItem.label;
          'alignment' -> data.getInt -> theWindowItem.alignment;
          'fontName' -> data.getText -> theWindowItem.fontName;
          'fontSize' -> data.getInt -> theWindowItem.fontSize;
          'fontFace' -> data.getInt -> theWindowItem.fontFace;
          'kind' -> data.getInt -> theWindowItem.kind;
          'behavior' -> data.getInt -> theWindowItem.kind;
          'state' -> data.getBool -> theWindowItem.state;
       #);
  #);
panoramaEditor: canvasEditor
  (#
  #);
panoramaScrollbarEditor: verScrollbarEditor
  (#
  #);

verticalScrollerEditor: canvasEditor
  (# windowitemType::< verticalScroller;
     new::<
       (# theAttributes: ^astInterface.beta.attributes;
          contentsNode: ^astInterface.beta.attributeDecl;
          
       do  node[]->betaGram.getAttributes->theAttributes[];
          (node.frag[],'contentsType',none )->betaGram.newVirtualBinding
            ->contentsNode[]->theAttributes.smartAppend;
          contentsNode[]->addOpen;
       #);
     getMainAttributes::<
       (#theNode: ^astInterface.beta.attributeDecl; 
       do
          (node[],'contentsType')->betaGram.findAttribute->theNode[];
          (if theNode[] = none then (* Failure!!! *)
              
           else
              theNode[]->betaGram.getAttributes->theAttributes[]; 
          if);
       #);
     getMainNode::<
       (#
       do (theNode[],'contentsType')->betaGram.findAttribute->theNode[]; INNER ;   
       #);
     getMainCanvas::<
       (#
       do theWindowItem.contents[] -> theCanvas[];
       #);
     outline::<  (#  do false->value; INNER #);
  #);
