ORIGIN '../getpreferencefilebody';
INCLUDE '~beta/sysutils/v1.5/envstring';

-- lib: attributes --

getAppName:
  (# appName: ^text;
     slashPos: @integer;
  do 1 -> arguments -> appName[];
     appName.reset;
     '/' -> appName.findAll
      (# 
      do inx -> slashPos;
      #);
     (if (slashPos > 0) and (slashPos < appName.length) then
         (slashPos + 1, appName.length) -> appName.sub -> appName[];
     if);
  exit appName[]
  #);
getHome:
  (# home: ^text;
  do '$(HOME)' -> expandEnvVar -> home[];
  exit home[]
  #);

-- getPreferenceFileDoPart: doPart --
do getHome -> fileName[];
   '/.' -> fileName.append;
   getAppName -> fileName.append;
   'rc' -> fileName.append;
