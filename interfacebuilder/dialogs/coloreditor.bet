ORIGIN '~beta/guienv/v1.6/guienv';
INCLUDE '~beta/guienv/v1.6/controls';
INCLUDE 'center';

-- guienvLib: Attributes --
colorEditor: window
  (#
     onChangeColor:< (#  do INNER #);
     onCancel:< (#  do INNER #);
     type::  (#  do windowTypes.dialog->value #);
     theColor: @color;
     scaleDown:
       (# value: @integer
       enter value
       do (if value <> 0 then (value+1) div 2-1->value if)
       exit value
       #);
     scaleUp:
       (# value: @integer
       enter value
       do (if value <> 0 then (value+1)*2-1->value if)
       exit value
       #);
     open::< 
       (# initialColor: @color
       enter initialColor
       do
          (291,230)->size;
          colorPane.open;
          redControl.open;
          greenControl.open;
          blueControl.open;
          initialColor.red->scaleDown->redControl.value;
          initialColor.green->scaleDown->greenControl.value;
          initialColor.blue->scaleDown->blueControl.value;
          statictext1.open;
          statictext2.open;
          statictext3.open;
          separator1.open;
          okBtn.open;
          pushbutton1.open;
          center;
          INNER
       #);
     colorPane: @windowitem
       (# open::<  (#  do (152,150)->size; (7,8)->position;  #) #);
     redControl: @scrollbar
       (#
          eventHandler:: 
            (#
               onValueChanged:: 
                 (# 
                 do
                    value->scaleUp->theColor.red;
                    theColor->colorPane.backgroundColor
                 #)
            #);
          open::< 
            (# 
            do
               32767->maxValue;
               500->scrollAmount;
               5000->pageScrollAmount;
               0->value;
               (16,150)->size;
               (183,8)->position;
               
            #);
          vertical::  (#  do true->value #)
       #);
     blueControl: @scrollbar
       (#
          eventHandler:: 
            (#
               onValueChanged:: 
                 (# 
                 do
                    value->scaleUp->theColor.blue;
                    theColor->colorPane.backgroundColor
                 #)
            #);
          open::< 
            (# 
            do
               32767->maxValue;
               500->scrollAmount;
               5000->pageScrollAmount;
               0->value;
               (16,150)->size;
               (255,8)->position;
               
            #);
          vertical::  (#  do true->value #)
       #);
     greenControl: @scrollbar
       (#
          eventHandler:: 
            (#
               onValueChanged:: 
                 (# 
                 do
                    value->scaleUp->theColor.green;
                    theColor->colorPane.backgroundColor
                 #)
            #);
          open::< 
            (# 
            do
               32767->maxValue;
               500->scrollAmount;
               5000->pageScrollAmount;
               0->value;
               (16,150)->size;
               (219,8)->position;
               
            #);
          vertical::  (#  do true->value #)
       #);
     statictext1: @statictext
       (#
          open::< 
            (#  do 'Red'->label; (22,17)->size; (180,164)->position;  #)
       #);
     statictext2: @statictext
       (#
          open::< 
            (#  do 'Green'->label; (34,17)->size; (210,164)->position;  #)
       #);
     statictext3: @statictext
       (#
          open::< 
            (#  do 'Blue'->label; (28,17)->size; (249,164)->position;  #)
       #);
     separator1: @separator
       (# open::<  (#  do 5->style; (278,7)->size; (6,191)->position;  #)
       #);
     okBtn: @pushbutton
       (#
          open::< 
            (#  do 'OK'->label; (60,20)->size; (217,202)->position;  #);
          eventHandler::<  (# onMouseUp::<  (#  do onChangeColor #) #)
       #);
     pushbutton1: @pushbutton
       (#
          open::< 
            (#  do 'Cancel'->label; (60,20)->size; (142,202)->position;  #);
          eventHandler::<  (# onMouseUp::<  (#  do onCancel #) #)
       #)
  #)  

