ORIGIN '~beta/guienv/v1.6/guienv';
INCLUDE '~beta/guienv/v1.6/controls'
        'textlist';
-- guienvLib: Attributes --
createDialog: window
  (#
     type:: windowTypes.dialog;
     run:
       (# defaultName: ^text; classes: ^textList; groups: ^textList; 
       enter (defaultName[],classes[],groups[])
       do
          open;
          defaultName[]->nameFld.contents;
          nameFld[]->target;
          classes[]->ancestorName.strings;
          1->ancestorName.currentItem;
          groups[]->fileOption.strings;
          1->fileOption.currentItem;
          showModal;
          
       #);
     onCancel:< (#  do INNER #);
     onOK:<
       (# groupName: ^text; name: ^text; superName: ^text; 
       do
          nameFld.contents->name[];
          ancestorName.currentString->superName[];
          fileOption.currentString->groupName[];
          INNER
       #);
     open::< 
       (# 
       do
          hide;
          'Create'->title;
          (318,294)->size;
          nameLab.open;
          nameFld.open;
          ancestorName.open;
          separator2.open;
          okBtn.open;
          cancelBtn.open;
          fileOption.open;
          separator1.open;
          hideImplToggle.open;
          bodyOption.open;
          bodyOption.disable;
          INNER
       #);
     choiseButton: optionButton
       (#
          strings:
            (# theStrings: ^textList; theMenu: ^menu; 
            enter theStrings[]
            do
               &menu[]->theMenu[];
               theMenu.open;
               theStrings.scan
                 (# anItem: ^menu.menuItem; 
                 do
                    &theMenu.menuItem[]->anItem[];
                    anItem.open;
                    current[]->anItem.name;
                    anItem[]->theMenu.append;
                    
                 #);
               theMenu[]->popupMenu;
               
            #);
          currentString:
            (# string: ^text; theItem: ^menu.menuItem; 
            do
               currentItem->(popupMenu).getMenuItemByNumber->theItem[];
               theItem.name->string[];
               
            exit string[]
            #);
          
       #);
     nameLab: @staticText
       (#
          open::< 
            (# 
            do
               (13,13)->position;
               (70,17)->size;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom;
               'Class Name:'->label
            #)
       #);
     nameFld: @editText
       (#
          open::< 
            (# 
            do
               (89,12)->position;
               (214,22)->size;
               true->bindLeft;
               true->bindTop;
               false->bindBottom;
               
            #)
       #);
     ancestorName: @choiseButton
       (#
          open::< 
            (# 
            do
               (13,53)->position;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom;
               'Ancestor Name:'->label;
               (122,35)->size;
               
            #)
       #);
     separator2: @separator
       (#
          open::< 
            (# 
            do
               (6,241)->position;
               (301,7)->size;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom
            #)
       #);
     okBtn: @pushButton
       (#
          eventHandler::  (# onMouseUp::  (#  do onOk;  #);  #);
          open::< 
            (# 
            do
               (242,260)->position;
               (60,20)->size;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom;
               'OK'->label;
               
            #)
       #);
     cancelBtn: @pushButton
       (#
          eventHandler::  (# onMouseUp::  (#  do onCancel;  #);  #);
          open::< 
            (# 
            do
               (172,260)->position;
               (60,20)->size;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom;
               'Cancel'->label
            #)
       #);
     fileOption: @choiseButton
       (#
          open::< 
            (# 
            do
               5->border.style;
               false->border.visible;
               'File:'->label;
               (122,35)->size;
               (13,120)->position;
               
            #)
       #);
     separator1: @separator
       (#
          open::< 
            (# 
            do
               (9,100)->position;
               (301,7)->size;
               true->bindLeft;
               false->bindRight;
               true->bindTop;
               false->bindBottom
            #)
       #);
     hideImplToggle: @checkBox
       (# eventHandler::
            (# onStateChanged::
                 (# 
                 do (if state = TRUE then
                        bodyOption.enable;
                     else
                        bodyOption.disable;
                    if);
                 #);
            #);
          open::<
            (# 
            do
               (135,17)->size;
               (13,168)->position;
               5->border.style;
               false->border.visible;
               'Hide Implementation'->label;               
            #)
       #);
     bodyOption: @optionButton
       (#
          open::<
            (# 
            do
               5->border.style;
               false->border.visible;
               'Body:'->label;
               (158,35)->size;
               (54,191)->position;
               
            #)
       #)
  #)  

