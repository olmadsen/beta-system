ORIGIN '~beta/guienv/v1.3.1/guienv';
BODY 'private/asteditorbody';
INCLUDE '~beta/interfacebuilder/v1.1/astcommunication/astcommunication';
INCLUDE '../editorenv/prettyprinter';

-- guienvLib: attributes --

astEditorEnv:
  (# <<SLOT astEditorEnvLib: attributes>>;
     
     showParseErrors:<
       (# msg: ^text;
       enter msg[]
       do inner;
       #);
     
     pretty: ^astInterface.prettyPrinter;
     MPS: ^astInterface;
     
     init:<
       (# <<SLOT astEditorEnvInit: doPart>> #);
     
     find:
       (# node: ^astInterface.AST;
          editor: ^astEditor;
       enter node[]
       <<SLOT astEditorEnvFind: doPart>>
       exit editor[]
       #);

     astEditor: window
       (* An editor allowing the user to 
        * edit an ast.
        *)
       (# <<SLOT astEditorLib: attributes>>;
          astControl: @astController
            (# 
               onChanged::<
                 (# <<SLOT AstEditorAstControlChanged: doPart>> #);
               onReplaced::<
                 (# <<SLOT AstEditorAstControlReplaced: doPart>> #);
               onDeleted::<
                 (# <<SLOT AstEditorAstControlDeleted: doPart>>  #);
               onAncestorReplaced::<
                 (# <<SLOT AstEditorAstControlAncestorReplaced: doPart>> #);
            #);
          readOnly: @boolean;
          obsolete:
            (# <<SLOT AstEditorObsolete: doPart>> #);
          dirty:
            (# value: @boolean;
            enter (# enter value <<SLOT EditorEnvAstEditorEnterDirty: doPart>> #)
            exit (# <<SLOT EditorEnvAstEditorExitDirty: doPart>> exit value #)
            #);
          parse:
            (# OK: @boolean;
            <<SLOT EditorEnvAstEditorParse: doPart>> 
            exit OK
            #);
          init:<
            (# node: ^astInterface.AST;
            enter node[]
            <<SLOT IBastEditorInit: doPart>>
            #);
          open::<
            (# 
            <<SLOT IBastEditorOpen: doPart>>
            #);
          eventHandler::<
            (# onAboutToClose::<
                 (# <<SLOT AstEditorEventHandlerOnBoutToClose: doPart>> #);
            #);
          close::<
            (# <<SLOT EditorEnvAstEditorClose: doPart>> #);
          private: @<<SLOT IBastEditorPrivate: descriptor>>;
       #); (* End of astEditor *)
     
     private: @<<SLOT astEditorEnvPrivate: descriptor>>;
  #);
