ORIGIN '~beta/interfacebuilder/v1.0/editorenv/editorenv';
BODY 'private/asteditorbody';
INCLUDE '~beta/interfacebuilder/v1.0/astcommunication/astcommunication'
-- editorenvLib: attributes --

astEditorServer:
  (# <<SLOT astEditorServerLib: attributes>>;
     init:
       (# <<SLOT astEditorServerInit: doPart>> #);
     insert:
       (# editor: ^astEditor;
       enter editor[]
       <<SLOT astEditorServerInsert: doPart>>
       #);
     delete:
       (# editor: ^astEditor;
       enter editor[]
       <<SLOT astEditorServerDelete: doPart>>
       #);
     find:
       (# node: ^astInterface.AST;
          editor: ^astEditor;
       enter node[]
       <<SLOT astEditorServerFind: doPart>>
       exit editor[]
       #);
     private: @<<SLOT astEditorServerPrivate: descriptor>>;
  #);

getastEditorServer: objectPool.get
  (# type:: astEditorServer;
     exact:: (# do true -> value #);
     init:: (# do obj.init #);
  #);

astEditor: window
  (* An editor allowing the user to 
   * edit an ast.
   *)
  (# <<SLOT astEditorLib: attributes>>;
     astControl: @astController
       (# 
          changed::<
            (# <<SLOT AstEditorAstControlChanged: doPart>> #);
          replaced::<
            (# <<SLOT AstEditorAstControlReplaced: doPart>> #);
          deleted::<
            (# <<SLOT AstEditorAstControlDeleted: doPart>>  #);
          ancestorReplaced::<
            (# <<SLOT AstEditorAstControlAncestorReplaced: doPart>> #);
       #);
     readOnly: @boolean;
     obsolete:
       (# <<SLOT AstEditorObsolete: doPart>> #);
     dirty:
       (# value: @boolean;
       enter (# enter value <<SLOT EditorEnvAstEditorEnterDirty: doPart>> #)
       exit (# <<SLOT EditorEnvAstEditorExitDirty: doPart>> exit value #)
       #);
     parse:
       (# OK: @boolean;
       <<SLOT EditorEnvAstEditorParse: doPart>> 
       exit OK
       #);
     init:<
       (# node: ^MPS.AST;
       enter node[]
       <<SLOT IBastEditorInit: doPart>>
       #);
     open::<
       (# 
       <<SLOT IBastEditorOpen: doPart>>
       #);
     eventHandler::<
       (# onAboutToClose::<
            (# <<SLOT AstEditorEventHandlerOnBoutToClose: doPart>> #);
       #);
     close::<
       (# <<SLOT EditorEnvAstEditorClose: doPart>> #);
     private: @<<SLOT IBastEditorPrivate: descriptor>>;
  #); (* End of astEditor *)
