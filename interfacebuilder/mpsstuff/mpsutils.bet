ORIGIN '~beta/mps/v5.2/astlevel';
BODY 'private/mpsutilsbody';

-- listLib: attributes --

iterate:
  (# doSlot:<
       (#  theSlot: ^slotDesc;
       enter theSlot[] 
       do inner;
       #);
     doOptional:<
       (# theOptional: ^optional;
       enter theOptional[]
       do inner;
       #);
     current: ^sonCat;
  <<SLOT MPSlistIterate: doPart>>
  #);

removeEmptySons:
  (# <<SLOT MPSlistRemoveEmptySons: doPart>> #);
prepend:
  (# son: ^sonCat;
  enter son[]
  <<SLOT MPSlistPrepend: doPart>>
  #);
smartAppend:
  (# son: ^sonCat;
  enter son[]
  <<SLOT MPSListSmartAppend: doPart>>
  #);

-- astLib: attributes --

hasGUIcomment: booleanValue
  (# 
  <<SLOT MPSAsthasGUIcomment: doPart>>
  #);
guiInfo:
  (# value: @integer;
  enter (# enter value <<SLOT MPSAstEnterGUIinfo: doPart>> #)
  exit (# <<SLOT MPSASTExitGUIinfo: doPart>> exit value #)
  #);

iterateComments:
  (# current: ^text;
  <<SLOT MPSAstIterateComments: doPart>>
  #);
myInsertSubComment:
  (# theComment: ^text;
     inx: @integer;
  enter (theComment[], inx)
  <<SLOT MPSAstInsertSubComments: doPart>>
  #);

-- astInterfaceLib: attributes --

interactiveErrorReporter: errorReporter
  (# 
     beforeFirstError::<
       (# <<SLOT MPSinteractiveErrorReporterbeforeFirstError: doPart>> #);
     afterLastError::<
       (# <<SLOT MPSinteractiveErrorReporterafterLastError: doPart>> #);
     forEachError::<
       (# <<SLOT MPSinteractiveErrorReporterforEachError: doPart>> #);
  #);

-- fragmentGroupLib: attributes --
localPath:
  (# fullPath: ^text;
     localizedPath: ^text;
  enter fullPath[]
  <<SLOT MPSfragmentGroupLocalPath: doPart>>
  exit localizedPath[]
  #);
fullPath:
  (# localPath: ^text;
     expandedPath: ^text;
  enter localPath[]
  <<SLOT MPSfragmentGroupFullPath: doPart>>
  exit expandedPath[]
  #);
shortName:
  (# name: ^text;
  <<SLOT MPSfragmentGroupShortName: doPart>>
  exit name[]
  #);

scanBodyGroups:
  (* Primitive version: doesnt include MDBODY *)
  (# currentLocalPath, currentFullPath: ^text;
  <<SLOT fragmentGroupScanBodyGroups: doPart>>
  #);
