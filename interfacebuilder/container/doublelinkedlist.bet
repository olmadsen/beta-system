ORIGIN 'abstractcontainer';
BODY 'private/doublelinkedlistbody';

-- lib: attributes --

doubleLinkedList: container
  (# <<SLOT listLib: attributes>>;
     
     position:<
       (# next, prev: ^position;
          elm: ^element;
       #);
     
     (*
      * Stack and queue interface
      *)
     
     append:<
       (# elm: ^element;
          pos: ^position;
       enter elm[]
       <<SLOT listAppend: doPart>> 
       exit pos[]
       #);
     prepend:<
       (# elm: ^element;
          pos: ^position;
       enter elm[]
       <<SLOT listPrepend: doPart>> 
       exit pos[]
       #);
     deleteLast:<
       (# elm: ^element;
       <<SLOT listDeleteLast: doPart>> 
       exit elm[]
       #);
     deleteFirst:<
       (# elm: ^element;
       <<SLOT listDeleteFirst: doPart>> 
       exit elm[]
       #);
     last:<
       (# elm: ^element;
       <<SLOT listLast: doPart>> 
       exit elm[]
       #);
     first:<
       (# elm: ^element;
       <<SLOT listFirst: doPart>> 
       exit elm[]
       #);
     
     (*
      * Position interface
      *)
     
     
     deletePosition:<
       (# pos: ^position;
       enter pos[]
       <<SLOT listDeletePosition: doPart>>
       #);
     at:
       (# elm: ^element;
          pos: ^position;
       enter elm[]
       <<SLOT listAt: doPart>>
       exit pos[]
       #);
     firstPosition:
       (# pos: ^position;
       <<SLOT listFirstPosition: doPart>>
       exit pos[]
       #);
     lastPosition:
       (# pos: ^position;
       <<SLOT listLastPosition: doPart>>
       exit pos[]
       #);
     
     (*
      * Set interface
      *)
     
     delete:<
       (# elm: ^element;
       enter elm[]
       <<SLOT listDelete: doPart>>
       #);
     insert:<
       (# elm: ^element;
          before: ^position;
          pos: ^position;
       enter (elm[], before[])
       <<SLOT listInsert: doPart>>
       exit pos[]
       #);
     
     (*
      * Scanning
      *)
     
     scan:
       (# current: ^element;
          currentPos: ^position;
       enter currentPos[]
       <<SLOT listScan: doPart>>
       #);
     scanReverse:
       (# current: ^element;
          currentPos: ^position;
       enter currentPos[]
       <<SLOT listScanReverse: doPart>>
       #);
     
     (* 
      * Further bindings 
      *)
     
     clear::<
       (# <<SLOT listClear: doPart>> #);
     init::<
       (# <<SLOT listInit: doPart>> #);
     
     (*
      * Final bindings
      *)
     
     empty::
       (# <<SLOT listEmpty: doPart>> #);
     size::
       (# <<SLOT listSize: doPart>> #);
     has::
       (# <<SLOT listHas: doPart>> #);
     
     firstPos, lastPos: (* private *)^position;
     sz: (* private *) @integer;
  #);
