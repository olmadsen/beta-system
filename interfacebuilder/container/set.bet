ORIGIN 'abstractcontainer';
BODY 'private/setbody';

-- lib: attributes --

abstractSet: container
  (# <<SLOT abstractSetLib: attributes>>;
     
     insert:<
       (# elm: ^element;
       enter elm[]
       do inner;
       #);
     delete:<
       (# elm: ^element;
       enter elm[]
       do inner;
       #);
     
     (*
      * Scanning
      *)
     
     scan:
       (# current: ^element;
       <<SLOT abstractSetScan: doPart>> 
       #);
     deleteSome:
       (# current: ^element;
          deleteCurrent:
            (# <<SLOT abstractSetDeleteSomeDeleteCurrent: doPart>> #);
          doDeleteSome: (* private *) @<<SLOT abstractSetDeleteSome: descriptor>>;
       do doDeleteSome
       #);
     
     (*
      * Further bindings
      *)
     
     init::<
       (# <<SLOT abstractSetInit: doPart>> #);
     clear::<
       (# <<SLOT abstractSetClear: doPart>> #);
     
     (*
      * Final bindings
      *)
     
     empty::
       (# <<SLOT abstractSetEmpty: doPart>> #);
     size::
       (# <<SLOT abstractSetSize: doPart>>  #);
     
     top: (* private *) @integer;
     data: (* private *) [1] ^element;
  #);

set: abstractSet
  (# <<SLOT setLib: attributes>>;
     
     (*
      * Further bindings
      *)
     
     insert::<
       (# <<SLOT setInsert: doPart>> #);
     delete::<
       (# <<SLOT setDelete: doPart>> #);
     
     (*
      * Final bindings
      *)
     
     has::
       (# <<SLOT setHas: doPart>> #);
  #);

valueSet: abstractSet
  (# <<SLOT valueSetLib: attributes>>;
     equal:< booleanValue
       (# left, right: ^element;
       enter (left[], right[])
       do inner;
       #);
     
     (*
      * Further bindings
      *)
     
     insert::<
       (#
       <<SLOT valueSetInsert: doPart>>
       #);
     delete::<
       (#
       <<SLOT valueSetDelete: doPart>>
       #);
     
     (*
      * Final bindings
      *)
     
     has::
       (# <<SLOT valueSetHas: doPart>> #);
  #);
