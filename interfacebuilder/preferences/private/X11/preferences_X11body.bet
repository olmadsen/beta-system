ORIGIN '../preferencesbody';
INCLUDE '~beta/sysutils/v1.4/envstring';

-- lib: attributes --

getAppName:
  (# appName: ^text;
     slashPos: @integer;
  do 1 -> arguments -> appName[];
     appName.reset;
     '/' -> appName.findCh
      (# 
      do inx -> slashPos;
      #);
     (if (slashPos > 0) and (slashPos < appName.length) then
         (slashPos + 1, appName.length) -> appName.sub -> appName[];
     if);
  exit appName[]
  #);
getHome:
  (# home: ^text;
  do '$(HOME)' -> expandEnvVar -> home[];
  exit home[]
  #);

-- getPreferencesFileName: doPart --
do getHome -> fileName[];
   '/.' -> fileName.append;
   (if baseName[] = none then
       getAppName -> baseName[];
   if);
   baseName[] -> fileName.append;
   'rc' -> fileName.append;

