ORIGIN '~beta/editor/v5.2/ymersiflib';
INCLUDE '~beta/sysutils/v1.6/pathhandler';

-- systemlib: attributes --
sifApplication: fragmentBrowser
  (# ymerBrowserWindow::<
       (# menubarType::<
            (# open::<
                 (# 
                 do
                    
                    INNER
                 #)
            #);
          open::<  
            (#  
            do initCompiler;
               INNER;
            #)
       #);
     isBETAsif:: (# do true->value #);
     useExternalTextEditor:: 
       (# do true (*enable always useExtTextEd*) ->value #);
     init::<
       (# 
       do
          ('Sif: Known Bugs and Inconveniences',
          '~beta/editor/v5.1/doc/sif-faq.html')->helpDocument;
          INNER;
       #);
     ark,fgname,ffname: ^text;
     f: @file;
     
  do INNER;
     (if noOfarguments > 1 then
         scanArguments:
           (for i: noOfArguments-1 repeat
                i+1->arguments->ark[];
                (if true
                 // '-test'->ark.equal then
                    true->doTest
                 // '-mpsTrace'->ark.equal then
                    ymerbrowser.appendDone; leave scanArguments
                 else
                    ark[]->analyzeArg->(fgname[],ffname[]);
                    (if fgname.length > 0 then
                        (if ffname.length > 0 then
                            fgname[]->f.name;
                            (if f.entry.exists then
                                (if ffname.length > 0 then
                                    fgname[]->ymerBrowser.appendProject;
                                    (fgname[],ffname[])
                                      ->ymerBrowser.browser.selectFragmentform
                                 else
                                    fgname[]->ymerbrowser.appendProject
                                if)
                            if)
                         else
                            fgname[]->ymerbrowser.appendProject
                        if)
                    if)
                if)
           for);
         (if noOfArguments-1 > 0 then ymerbrowser.appendDone if);
         
     if);
     (if doTest then
         (ymerbrowser.theMenubar).test.open;
         'Test'->(ymerbrowser.theMenubar).test.name;
         (ymerbrowser.theMenubar).test[]->(ymerbrowser.theMenubar).append
     if)
  #)
