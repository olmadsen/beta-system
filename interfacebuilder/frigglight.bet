ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/sourcebrowser/ymer';
INCLUDE 'friggapplication';
INCLUDE '~beta/guienv/guienvsystemenv';
BODY '~beta/editor/private/nouser';
-- program: descriptor --
(#
   theSystemEnv:@|systemenv
     (# setWindowEnv::  (#  do gui[]->theWindowEnv[] #);
     do gui[]->ymer.init;
        ymer.IReturnInterface->frigg.init;
        Setup;
        setupMenus;
        'newBrowser'->screen.putline;
        ymer.newbrowser
     #);
   frigg:@friggapplication(# #);
   gui: @guienv(# do 'guienv'->screen.putline #);
   ymer: @ymerEnv
     (#
        editMode:: WriteMode;
     #);
   myCallBack:@gui.BrowserCallBack (* should be browserint[]->frigg.new *)
     (# 
     do
        &frigg.friggBrowserWindowExt[]->lastFriggExt[];
        BrowserInt[]->lastFriggExt.init;
     #);
   lastFriggExt:^frigg.friggBrowserWindowExt;
   Setup:
     (# 
     do myCallBack[]->ymer.newBrowserCallBack[]
     #);
   SetUpMenus: 
     (#  (* different ways to setup menu *)
     do 
        (* Fragmentbrowser, appends to list *)
        (* fg.setupMenus; 
        
        &gui.MenubarAppendMenuAction
         (# 
         do lastWEXT.setupMenus;
         #)[]->ymer.menuActionList.append; 
         *)
        
        frigg.setupMenus;
     #);
do 
   'Mjolner Source Browser - version '->puttext;
   ymer.ymerVersion->putline;
   thesystemenv;
#)  

