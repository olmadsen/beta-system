ORIGIN '~beta/basiclib/v1.5/betaenv';

INCLUDE '~beta/mps/v5.1/astlevel';

BODY 'private/matchbody';


-- lib: attributes --


match:
  (# tree: ^astInterface.AST;
     exp: ^astInterface.AST;
     result: @boolean;
     mps: ^astInterface;
  enter (mps[], tree[],  exp[])
  <<SLOT matchDoPart: doPart>>
  exit result
  #);

listSearch:
  (# theList: ^astInterface.list;
     exp: ^astInterface.AST;
     result: ^astInterface.AST;
     mps: ^astInterface;
  enter (mps[], theList[], exp[])
  <<SLOT listSearchDoPart: doPart>>
  exit result[]
  #);

inxGet:
  (# category: @integer;
     inx: @integer;
     tree: ^astInterface.expanded;
     subTree: ^astInterface.AST;
  enter (tree[], category, inx)
  <<SLOT matchResultInxGet: doPart>>
  exit subTree[]
  #);
inxPut:
  (# category: @integer;
     inx: @integer;
     subTree: ^astInterface.AST;
     tree: ^astInterface.expanded;
  enter (tree[], category, inx, subTree[])
  <<SLOT matchResultInxPut: doPart>>
  #);


parseText:
  (# frag: ^astInterface.fragmentForm;
     txt: ^text;
     category: @integer;
     node: ^astInterface.AST;
  enter (frag[], txt[], category)
  <<SLOT parseTextDoPart: doPart>>
  exit node[]
  #);

