ORIGIN '../classinfo';
INCLUDE '../../datastructures/dictionary';
INCLUDE '../../resourcesupport/types';

-- ClassInfoLookup: doPart --
do name.makeLC;
   name[] -> private.table.lookup -> theClass[];
   (* (if theClass[] = none then
    *        'windowitem' -> private.table.lookup -> theClass[];
    *    if);
    *)
   inner;
   
-- ClassInfoInit: doPart --
do private.table.init;
   ('interfaceObject', none, interfaceObjectType, true) -> private.table.add
   (# 
   do ('onMouseUp', true) -> addMethod;
      ('onMouseDown', true) -> addMethod;
      ('onKeyDown', true) -> addMethod;
      ('onRefresh', true) -> addMethod;
      ('onActivate', true) -> addMethod;
      ('onDeactivate', true) -> addMethod;
      
      ('open', false) -> addMethod;
      ('close', false) -> addMethod;
      
      ('windowitem', theClass[], windowItemType, true) -> private.table.add 
      (# 
      do ('onVisibleChanged', true) -> addMethod;
         ('onFrameChanged', true) -> addMethod;
         ('onFatherFrameChanged', true) -> addMethod;
         ('onEnableChanged', true) -> addMethod;
         ('onEnableTarget', true) -> addMethod;
         ('onDisableTarget', true) -> addMethod;
         ('onBorderStyleChanged', true) -> addMethod;
         ('onBorderVisibleChanged', true) -> addMethod;
         ('onTheCursorChanged', true) -> addMethod;
         ('onHiliteChanged', true) -> addMethod;
         
         ('separator', theClass[], separatorType, true) -> private.table.add;
         ('canvas', theClass[], canvasType, true) -> private.table.add
         (# 
         do ('onChildFrameChanged', true) -> addMethod;
            ('abstractScroller', theClass[], abstractScrollerType, true) -> private.table.add
            (# 
            do
               ('scroller', theClass[], scrollerType, true) -> private.table.add;
               ('textEditor', theClass[], textEditorType, true) -> private.table.add;
            #);
         #);
         ('control', theClass[], controlType, true) -> private.table.add
         (# 
         do ('button', theClass[], buttonType, true) -> private.table.add
            (# 
            do ('onLabelChanged', true) -> addMethod;
               ('onStyleChanged', true) -> addMethod;
               
               ('pushButton', theClass[], pushButtonType, true) -> private.table.add;
               ('iconButton', theClass[], iconButtonType, true) -> private.table.add
               (# 
               do ('onShowLabelChanged', true) -> addMethod;
                  ('onIconChanged', true) -> addMethod;
               #);
               ('optionButton', theClass[], optionButtonType, true) -> private.table.add
               (# 
               do ('onCurrentItemChanged', true) -> addMethod;
                  ('onPopupMenuChanged', true) -> addMethod;
               #);
               ('staticText', theClass[], staticTextType, true) -> private.table.add;
               ('toggleButton', theClass[], toggleButtonType, true) -> private.table.add
               (# 
               do ('onStateChanged', true) -> addMethod;
                  ('radioButton', theClass[], radioButtonType, true) -> private.table.add;
                  ('checkBox', theClass[], checkBoxType, true) -> private.table.add;
               #);
            #);
            ('scrollbar', theClass[], scrollbarType, true) -> private.table.add
            (# 
            do ('onThumbMoved', true) -> addMethod;
               ('onPageDown', true) -> addMethod;
               ('onPageUp', true) -> addMethod;
               ('onButtonDown', true) -> addMethod;
               ('onButtonUp', true) -> addMethod;
               ('onPageScrollAmountChanged', true) -> addMethod;
               ('onScrollAmountChanged', true) -> addMethod;
               ('onMaxValueChanged', true) -> addMethod;
               ('onValueChanged', true) -> addMethod;
            #);
            ('editText', theClass[], editTextType, true) -> private.table.add;
         #);
         ('textField', theClass[], textFieldType, true) -> private.table.add
         (# 
         do ('onTextChanged', true) -> addMethod;
            ('onBeforeChange', true) -> addMethod;
         #);
         ('scrollList', theClass[], scrollListType, true) -> private.table.add
         (# 
         do ('textScrollList', theClass[], textScrollListType, true) -> private.table.add;
         #);
         ('rect', theClass[], rectType, true) -> private.table.add;
      #);
      ('window', theClass[], windowType, true) -> private.table.add
      (# 
      do ('onAboutToClose', true) -> addMethod;
      #);
      ('menu', theClass[], menuType, false) -> private.table.add;
      ('menubar', theClass[], menuBarType, false) -> private.table.add;
      ('menuitem', theClass[], menuItemType, false) -> private.table.add
      (# 
       do ('dynamicMenuitem', theClass[], dynamicMenuItemType, true) -> private.table.add;
      #);
   #);
   
-- ClassInfoPrivate: descriptor --
(# table: @textDictionary
     (# element:: class;
        
        add:
          (# theClass: ^element;
             name: ^text;
             addMethod:
               (# name: ^text;
                  event: @boolean;
                  method: ^element.methods.element;
               enter (name[], event)
               do &theClass.methods.element[] -> method[];
                  name[] -> method.name[];
                  event -> method.event;
                  method[] -> theClass.methods.append;
               #);
             superClass: ^element;
             type: @integer;
             supported: @boolean;
          enter (name[], superClass[], type, supported)
          do name.makeLC;
             &element[] -> theClass[];
             name[] -> theClass.name[];
             type -> theClass.type;
             supported -> theClass.supported;
             theClass.methods.init;
             (if superClass[] <> None then
                 superClass.methods.iterate
                 (# 
                 do current.elm[] -> theClass.methods.append;
                 #);
             if);
             inner;
             (theClass.name[], theClass[]) -> insert;
          exit theClass[]
          #);
     #);
#)

