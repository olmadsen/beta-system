ORIGIN '~beta/guienv/v1.4/guienvall';
BODY 'private/graphicaleditorprivate';

BODY 'private/documentbody';


INCLUDE '../resourcesupport/parameters';
INCLUDE '~beta/mps/v5.1/astlevel';
INCLUDE '~beta/betaast/v5.1/betacfl';
INCLUDE '../asteditor/asteditor';
INCLUDE '../fragmenthandler/fragmenthandler';
INCLUDE '../datastructures/doublelinkedlist';
INCLUDE '../datastructures/set';
INCLUDE 'classinfo';

-- lib: attributes --

entryExists: booleanValue
  (# name: ^text;
  enter name[]
  <<SLOT entryExistsBody: doPart>>
  #);
entryReadable: booleanValue
  (# name: ^text;
  enter name[]
  <<SLOT entryReadableBody: doPart>>
  #);
entryWriteable: booleanValue
  (# name: ^text;
  enter name[]
  <<SLOT entryWriteAbleBody: doPart>>
  #);


-- guienvLib: attributes --

displayMessage:
  (# msg: ^text;
  enter msg[]
  do (none, msg[], 'Alert') -> noteUser;
  #);

graphicalEditorEnv:
  (# <<SLOT graphicalEditorEnvLib: attributes>>;
     
     platform: integerValue
       (#
       <<SLOT graphicalEditorPlatform: doPart>>
       #);
     winnt: (# exit 1 #);
     mac: (# exit 2 #);
     X11: (# exit 3 #);
     
     attributeList: doubleLinkedList
       (# element:: betaGram.attributeDecl;
       #);
     imperativeList: doubleLinkedList
       (# element:: betaGram.imp;
       #);
     
     checkIdentifier: booleanValue
       (# name: ^text;
          frag: ^astInterface.fragmentForm;
          nameDecl: ^astInterface.beta.nameDcl;
       enter name[]
       <<SLOT checkIdentifierDoPart: doPart>>
       #);

     MPS: ^astInterface;
     betaGram: ^astInterface.beta;
     pretty: ^astInterface.prettyPrinter;
     
     astFileExists: booleanValue
       (# name: ^text;
       enter name[]
       <<SLOT astFileExistsBody: doPart>>
       #);
     astFileReadable: booleanValue
       (# name: ^text;
       enter name[]
       <<SLOT astFileReadAbleBody: doPart>>
       #);
     astFileWriteAble: booleanValue
       (# name: ^text;
       enter name[]
       <<SLOT astFileWriteAbleBody: doPart>>
       #);
     
     showParseErrors:<
       (# msg: ^text;
       enter msg[]
       do inner;
       #);
     save:<
       object;
     autoSaveGroup:<
       (# fg: ^astInterface.fragmentGroup;
       enter fg[]
       do inner;
       #);
     
     theAstEditorEnv: @astEditorEnv
       (# showParseErrors::<
            (# 
            do msg[] -> this(graphicalEditorEnv).showParseErrors;
            #);
       #);
 
     openAstEditorMethod:
       (# node: ^astInterface.AST;
          title: ^text;
       enter (node[], title[])
       do inner;
       #);
     openSeparateAstEditorMethod: openAstEditorMethod
       (# 
       <<SLOT graphicalEditorEnvOpenSeparateAstEditorMethod: doPart>>
       #);
     openAstEditor:< openAstEditorMethod;
     
     onGroupOpen:<
       (# fg: ^astInterface.fragmentGroup;
       enter fg[]
       do inner;
       #);
     onGroupChanged:<
       (# fg: ^astInterface.fragmentGroup;
       enter fg[]
       do inner;
       #);
     onGroupSaved:<
       (# fg: ^astInterface.fragmentGroup;
       enter fg[]
       do inner;
       #);
     saveFragmentGroup:<
       (# fg: ^astInterface.fragmentGroup;
       enter fg[]
       do inner;
       #);
     theFragServer: ^fragmentServer;
     
     init:<
       (# 
       enter (theFragServer[], MPS[], betaGram[], pretty[])
       <<SLOT graphicalEditorEnvInit: doPart>> 
       #);
     
     find:
       (# node: ^astInterface.beta.attributeDecl;
          editor: ^graphicalEditor;
       enter node[]
       <<SLOT graphicalEditorEnvFind: doPart>>
       exit editor[]
       #);
     
     (*
      * Document interface
      *)
     
     
     document:
       (# <<SLOT documentLib: attributes>>;
          readOnly: @boolean;
          touched: @boolean;
          interfaceGroup: ^astInterface.fragmentGroup;
          bodyGroups: @set
            (# element:: MPS.fragmentGroup;
            #);
          defaultBodyGroup:
            (# group: ^astInterface.fragmentGroup;
            <<SLOT documentDefaultBodyGroup: doPart>>
            exit group[]
            #);
          theParameterStore: ^parameterStore;
          name: ^text;
          open:
            (# error:<
                 (# msg: ^text;
                 enter msg[]
                 do inner;
                 #);
            enter name[]
            <<SLOT documentOpen: doPart>>
            #);
          close:
            (# 
            <<SLOT documentClose: doPart>>
            #);
          new:
            (# error:<
                 (# msg: ^text;
                 enter msg[]
                 do inner;
                 #);
               fragName: ^text;
            enter (name[], fragName[])
            <<SLOT documentNew: doPart>>
            #);
          save:
            (# 
            <<SLOT documentSave: doPart>>
            #);
          autoSave:
            (# 
            <<SLOT documentAutoSave: doPart>>
            #);
          deleteAutosaveFiles:
            (# 
            <<SLOT documentDeleteAutoSaveFiles: doPart>>
            #);
       #);
     findResourceData:
       (# fg: ^astInterface.fragmentGroup;
          resourceData: ^atom;
       enter fg[]
       <<SLOT graphicalEditorEnvFindResourceData: doPart>>
       exit resourceData[]
       #);
     findDocument:
       (# fg: ^astInterface.fragmentGroup;
          theDocument: ^document;
       enter fg[]
       <<SLOT graphicalEditorEnvFindDocument: doPart>>
       exit theDocument[]
       #);
     findRelatedDocument:
       (# fg: ^astInterface.fragmentGroup;
          theDocument: ^document;
       enter fg[]
       <<SLOT graphicalEditorFindRelatedDocument: doPart>>
       exit theDocument[]
       #);
     scanDocuments:
       (# current: ^document;
       <<SLOT graphicalEditorEnvScanDocuments: doPart>>
       #);
     
     closeGraphicalEditors:
       (# theDocument: ^document;
       enter theDocument[]
       <<SLOT graphicalEditorEnvCloseGraphicalEditors: doPart>>
       #);
     (*
      * END of document interface
      *)
     
     classData:
       (# theClass: ^classInfo.class;
          theAttributes: ^attributeList;
          theImperatives: ^imperativeList;
          node: ^astInterface.beta.attributeDecl;
          superClassData: ^classData;
          vertical: @boolean;
          init:
            (# 
               group: ^astInterface.fragmentGroup;
            enter (theClass[], node[], group[])
            <<SLOT classDataInit: doPart>>
            #);
       #);
     
     getClassData:
       (# node: ^astInterface.beta.attributeDecl;
          theClassData: ^classData;
          group: ^astInterface.fragmentGroup;
       enter (node[], group[])
       <<SLOT getClassDataDoPart: doPart>>
       exit theClassData[]
       #);
     
     graphicalEditor: window
       (# <<SLOT graphicalEditorLib: attributes>>;
          
          readOnly: @boolean;
          menubarType::<
            (# open::<
                 (# <<SLOT InterfaceBuilderGraphicalEditorWindowMenubarOpen: doPart>> #);
            #);
          
          theDocument: ^document;
          
          node: ^astInterface.beta.attributeDecl;
          
          privateAttributes:
            (# value: @boolean
            enter (# enter value <<SLOT GraphicalEditorEnterPrivateAttributes: doPart>> #)
            exit (# <<SLOT GraphicalEditorExitPrivateAttributes: doPart>> exit value #)
            #);
          privateDoParts:
            (# value: @boolean
            enter (# enter value <<SLOT GraphicalEditorEnterPrivateDoParts: doPart>> #)
            exit (# <<SLOT GraphicalEditorExitPrivateDoPart: doPart>> exit value #)
            #);
          
          (* astControl: @astController
           *             (# 
           *                onReplaced::<
           *                  (# <<SLOT GraphicalEditorAstControlReplaced: doPart>> #);
           *             #);
           *)
          
          windowItemEditorList: doubleLinkedList
            (# element:: windowItemEditor;
               position:: (#  #);
               copy:
                 (# theCopy: ^windowItemEditorList;
                 <<SLOT windowItemEditorListCopy: doPart>>
                 exit theCopy[]
                 #);
               set:
                 (# theOther: ^windowItemEditorList;
                 enter theOther[]
                 <<SLOT windowItemEditorListSet: doPart>>
                 #);
            #);
          
          windowitemEditor: 
            (# <<SLOT windowitemEditorLib: attributes>>;
               
               node: ^astInterface.beta.attributeDecl;
               owner: ^canvasEditor;
               windowitemType:< windowitem;
               theWindowitem: ^windowitemType;
               defaultData, data: ^parameters;
               theClassData: ^classData;
               privateFrag: ^astInterface.fragmentForm;
               
               showInfoDialog:
                 (# <<SLOT GraphicalEditorWindowItemEditorShowInfoDialog: doPart>> #);
               
               editAttributes:
                 (#  <<SLOT GraphicalEditorWindowItemEditorEditAttributes: doPart>> #);
               editVirtual:
                 (# name: ^text;
                 enter name[]
                 <<SLOT GraphicalEditorWindowItemEditorEditVirutal: doPart>>
                 #);
               
               init:<
                 (# type: @integer;
                    inherited: @boolean;
                    initialize:<
                      (# done: @boolean;
                      <<SLOT windowItemEditorInitialize: doPart>>
                      #);
                 enter (owner[], node[], data[], type, inherited, theClassData[], privateFrag[])
                 <<SLOT GraphicalEditorWindowItemEditorInit: doPart>>
                 #);
               newData:<
                 (# type: @integer;
                    data: ^parameters;
                 enter type
                 <<SLOT GraphicalEditorWindowItemEditorNewData: doPart>> 
                 exit data[]
                 #);
               createInitImps:<
                 (# frag: ^astInterface.fragmentForm;
                    initImps: ^astInterface.beta.imperatives;
                    override:< booleanValue;
                 enter frag[]
                 <<SLOT GraphicalEditorWindowItemEditorCreateInitImps: doPart>>
                 exit initImps[]
                 #);
               createOpen:<
                 (# newImps: ^astInterface.beta.imperatives;
                 <<SLOT windowItemEditorCreateOpen: doPart>>
                 #);
               new:< 
                 (# type: @integer;
                    
                    newNode:<
                      (# <<SLOT windowItemEditorNewNode: doPart>> #);
                 enter (owner[], type, theClassData[])
                 <<SLOT windowitemEditornew: doPart>> 
                 #);
               close:<
                 (# <<SLOT GraphicalEditorWindowItemEditorClose: doPart>> #);
               mousedown:<
                 (# done: @boolean;
                    theEvent: ^windowItem.eventHandler.mouseDown;
                    pt: @point;
                 enter (theEvent[], pt)
                 <<SLOT windowitemEditorMousedown: doPart>>
                 #);
               select:
                 (# <<SLOT windowItemEditorSelect: doPart>> #);
               deSelect:
                 (# <<SLOT windowItemEditorDeSelect: doPart>> #);
               applyObjectData:<
                 (# 
                 <<SLOT IBwindowitemEditorapplyObjectData: doPart>>
                 #);
               findEditor:<
                 (# pt: @point;
                    ignoreEditor: ^windowItemEditor;
                    theEditor: ^windowItemEditor;
                 enter (pt, ignoreEditor[])
                 <<SLOT graphicalEditorWindowItemEditorFindEditor: doPart>>
                 exit theEditor[]
                 #);
               getPublicAttributes:<
                 (# theAttributes: ^astInterface.beta.attributes;
                 <<SLOT windowItemEditorGetPublicAttributes: doPart>>
                 exit theAttributes[]
                 #);
               getPrivateAttributes:<
                 (# theAttributes: ^astInterface.beta.attributes;
                 <<SLOT windowItemEditorGetPrivateAttributes: doPart>>
                 exit theAttributes[]
                 #);
               getMainAttributes:<
                 (# theAttributes: ^astInterface.beta.attributes;
                 <<SLOT windowItemEditorGetMainAttributes: doPart>>
                 exit theAttributes[]
                 #);
               getMainNode:<
                 (# theNode: ^astInterface.beta.attributeDecl;
                 do node[] -> theNode[];
                    inner;
                 exit theNode[]
                 #);
               createTheWindowItem:<
                 (# initial: @boolean;
                 enter initial
                 <<SLOT GraphicalEdioterWindowItemEditorCreateWindowItem: doPart>> 
                 #);
               private: @<<SLOT windowitemEditorPrivate: descriptor>>;
            #);
          canvasEditor: windowitemEditor
            (# <<SLOT canvasEditorLib: attributes>>;
               children: @windowItemEditorList;
               newEditor:
                 (# type: @integer;
                    theEditor: ^windowitemEditor;
                    theClassData: ^classData;
                 enter (type, theClassData[])
                 <<SLOT graphicalEditorNewEditor: doPart>>
                 exit theEditor[]
                 #);
               windowitemType::< canvas;
               getMainCanvas:<
                 (# theCanvas: ^canvas;
                 do theWindowItem[] -> theCanvas[];
                    inner;
                 exit theCanvas[]
                 #);
               newData::< (# <<SLOT GraphicalEditorCanvasEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT canvasEditornew: doPart>> 
                 #);
               init::< 
                 (# initialize::<
                      (# <<SLOT canvasEditorInitialize: doPart>> #);
                 <<SLOT canvasEditorInit: doPart>> 
                 #);
               close::<
                 (# <<SLOT GraphicalEditorCanvasEditorClose: doPart>> #);
               mousedown::< (# <<SLOT canvasEditorMousedown: doPart>> #);
               applyObjectData::<
                 (# 
                 <<SLOT IBcanvasEditorapplyObjectData: doPart>>
                 #);
               findEditor:: (# <<SLOT graphicalEditorCanvasEditorFindEditor: doPart>> #);
               private: @<<SLOT canvasEditorPrivate: descriptor>>;
               createTheWindowItem::<
                 (# <<SLOT GraphicalEditorCanvasEditorCreateTheWindowItem: doPart>> #);
               createOpen::<
                 (# <<SLOT CanvasEditorCreateOpen: doPart>> #)
            #);
          windowEditor: canvasEditor
            (# newData::<
                 (# <<SLOT windowEditorNewData: doPart>> #);
               
            #);
          abstractScrollerEditor: canvasEditor
            (# newData::< (# <<SLOT GraphicalEditorAbstractScrollerEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT abstractScrollerEditornew: doPart>> 
                 #);
            #);
          scrollerEditor: abstractScrollerEditor
            (# <<SLOT scrollerEditorLib: attributes>>;
               windowitemType::< scroller;
               newData::< (# <<SLOT GraphicalEditorScrollerEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT scrollerEditornew: doPart>> 
                 #);
               getMainAttributes::<
                 (# <<SLOT scrollerEditorGetMainAttributes: doPart>> #);
               getMainNode::<
                 (# <<SLOT ScrollerEditorGetMainNode: doPart>> #);
               getMainCanvas::<
                 (# <<SLOT ScrollerEditorGetMainCanvas: doPart>> #);
               createTheWindowItem::<
                 (# <<SLOT GraphicalEditorScrollerEditorCreateTheWindowItem: doPart>> #);
            #);
          textEditorEditor: abstractScrollerEditor
            (# 
               windowitemType::< textEditorPict;
               init::<
                 (# <<SLOT GraphicalEditorTextEditorEditorInit: doPart>> #);
               newData::< (# <<SLOT GraphicalEditorTextEditorEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT textEditorEditornew: doPart>> 
                 #);
               createTheWindowItem::<
                 (# <<SLOT GraphicalEditorTextEditorEditorCreateTheWindowItem: doPart>> #);
            #);
          separatorEditor: windowItemEditor
            (# windowitemType::< separator;
               newData::< (# <<SLOT GraphicalEditorSeparatorEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT SeparatorEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBSeparatorApplyObjectData: doPart>>
                 #);
               createInitImps::<
                 (# <<SLOT separatorEditorCreateInitImps: doPart>> #);
            #);
          verSeparatorEditor: separatorEditor
            (# windowitemType::< verSeparator;
               newData::< (# <<SLOT GraphicalEditorVerSeparatorEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT VerSeparatorEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBVerSeparatorApplyObjectData: doPart>>
                 #);
            #);
          controlEditor: windowitemEditor
            (# 
               windowitemType::< control;
               newData::< (# <<SLOT GraphicalEditorControlEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT controlEditornew: doPart>>
                 #);
            #);
          buttonEditor: controlEditor
            (# windowitemType::< button;
               newData::< (# <<SLOT GraphicalEditorButtonEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT buttonEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBbuttonApplyObjectData: doPart>>
                 #);
               createInitImps::<
                 (# <<SLOT buttonEditorCreateInitImps: doPart>> #);
            #);
          pushButtonEditor: buttonEditor
            (# 
               windowitemType::< pushButton;
               newData::< (# <<SLOT GraphicalEditorPushButtonEditorNewData: doPart>> #); 
               new::< 
                 (#  
                 <<SLOT pushButtonEditornew: doPart>> 
                 #);
            #);
          iconButtonEditor: buttonEditor
            (# 
               windowitemType::< iconButton;
               newData::< (# <<SLOT GraphicalEditorIconButtonEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT iconButtonEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBiconButtonapplyObjectData: doPart>>
                 #);
            #);
          optionButtonEditor: buttonEditor
            (# 
               windowitemType::< optionButton;
               newData::< (# <<SLOT GraphicalEditorOptionButtonEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT optionButtonEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBoptionButtonapplyObjectData: doPart>>
                 #);
               createInitImps::<
                 (# 
                 <<SLOT optionButtonCreateInitImps: doPart>>
                 #);
               createTheWindowItem::<
                 (# 
                 <<SLOT optionButtonCreateTheWindowItem: doPart>>
                 #);
            #);
          staticTextEditor: buttonEditor
            (# 
               windowitemType::< staticText;
               newData::< (# <<SLOT GraphicalEditorStaticTextEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT staticTextEditornew: doPart>> 
                 #);
            #);
          toggleButtonEditor: buttonEditor
            (# 
               windowitemType::< toggleButton;
               newData::< (# <<SLOT GraphicalEditorToggleButtonEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT toggleButtonEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBtoggleButtonapplyObjectData: doPart>>
                 #);
               createInitImps::<
                 (# <<SLOT toggleButtonEditorCreateInitImps: doPart>> #);
            #);
          radioButtonEditor: toggleButtonEditor
            (# 
               windowitemType::< radioButton;
               newData::< (# <<SLOT GraphicalEditorRadioButtonEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT radioButtonEditornew: doPart>> 
                 #);
            #);
          checkBoxEditor: toggleButtonEditor
            (# 
               windowitemType::< checkBox;
               newData::< (# <<SLOT GraphicalEditorCheckBoxEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT checkBoxEditornew: doPart>> 
                 #);
            #);
          scrollbarEditor: controlEditor
            (# 
               windowitemType::< scrollbar;
               newData::< (# <<SLOT GraphicalEditorScrollBarEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT scrollbarEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBscrollBarapplyObjectData: doPart>>
                 #);
               createInitImps::<
                 (# 
                 <<SLOT scrollbarEditorCreateInitImps: doPart>>
                 #);
            #);
          verScrollbarEditor: scrollbarEditor
            (# 
               windowitemType::< verScrollbar;
               newData::< (# <<SLOT GraphicalEditorVerScrollBarEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT verScrollbarEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBverScrollBarapplyObjectData: doPart>>
                 #);
            #);
          editTextEditor: controlEditor
            (# 
               windowitemType::< editText;
               newData::< (# <<SLOT GraphicalEditorEditTextEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT editTextEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBeditTextapplyObjectData: doPart>>
                 #);
            #);
          textFieldEditor: windowitemEditor
            (# 
               windowitemType::< textField;
               newData::< (# <<SLOT GraphicalEditorTextFieldEditorNewData: doPart>> #);
               new::< 
                 (# 
                 <<SLOT textFieldEditornew: doPart>> 
                 #);
            #);
          scrollListEditor: windowitemEditor
            (# 
               windowitemType::< textEditorPict;
               newData::< (# <<SLOT GraphicalEditorScrollListEditorNewData: doPart>> #);
               new::< 
                 (#
                 <<SLOT scrollListEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (#
                 <<SLOT IBscrollListapplyObjectData: doPart>>
                 #);
            #);
          textScrollListEditor: windowitemEditor
            (# 
               windowitemType::< textEditorPict;
               newData::< (# <<SLOT GraphicalEditorTextScrollListEditorNewData: doPart>> #);
               new::< 
                 (#  
                 <<SLOT textScrollListEditornew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT IBtextScrollListapplyObjectData: doPart>>
                 #);
            #);
          rectangleEditor: windowItemEditor
            (# windowitemType::< rect;
               newData::< (# <<SLOT rectangleEditorNewData: doPart>> #); 
               new::< 
                 (# 
                 <<SLOT rectangleEditorNew: doPart>> 
                 #);
               applyObjectData::<
                 (# 
                 <<SLOT rectangleEditorApplyObjectData: doPart>>
                 #);
            #);
          (* 
           * Mode
           *)
          
          selectMode: (# exit 1 #);
          hierarkiMode: (# exit 2 #);
          resizeMode: (# exit 3 #);
          
          mode:
            (# value: @integer;
            enter (# enter value <<SLOT graphicalEditorEnterMode: doPart>> #)
            exit (# <<SLOT graphicalEditorExitMode: doPart>>  exit value #)
            #);
          (*
           * Init
           *)
          
          init:<
            (# privateFrag: ^astInterface.fragmentForm;
            enter (node[], privateFrag[])
            <<SLOT GraphicalEditorInit: doPart>>
            #);
          new:<
            (# 
            enter node[]
            <<SLOT GraphicalEditorNew: doPart>>
            #);
          
          (*
           * Selection
           *)
          
          
          canUndo: booleanValue
            (# <<SLOT graphicalEditorCanUndo: doPart>> #);
          undo:
            (# 
            <<SLOT graphicalEditorUndo: doPart>>
            #);
          undoText:
            (# value: ^text;
            <<SLOT graphicalEditorUndoText: doPart>>
            exit value[]
            #);
          canRedo: booleanValue
            (# <<SLOT graphicalEditorCanRedo: doPart>> #);
          redo:
            (# 
            <<SLOT graphicalEditorRedo: doPart>>
            #);
          redoText:
            (# value: ^text;
            <<SLOT graphicalEditorRedoText: doPart>>
            exit value[]
            #);
          canPaste: booleanValue
            (# 
            <<SLOT graphicalEditorCanPaste: doPart>>
            #);
          paste:
            (# 
            <<SLOT graphicalEditorPaste: doPart>>
            #);
          selection: @windowItemEditorList
            (# <<SLOT selectionLib: attributes>>;
               append::
                 (#
                 <<SLOT selectionAppend: doPart>>
                 #);
               prepend::
                 (# 
                 <<SLOT selectionPrepend: doPart>>
                 #);
               delete::
                 (#
                 <<SLOT selectionDelete: doPart>>
                 #);
               clear::
                 (# 
                 <<SLOT selectionClear: doPart>>
                 #);
               
               (* Actions *)
               deleteAll:
                 (# <<SLOT GraphicalEditorSelectionDelete: doPart>> #);
	       showInfo:
                 (# <<SLOT GraphicalEditorSelectionShowInfo: doPart>> #);
               fitToContents:
                 (# <<SLOT GraphicalEditorSelectionFitToContents: doPart>> #);
               alignLeft:
                 (# <<SLOT GraphicalEditorSelectionAlignLeft: doPart>> #);
               alignRight:
                 (# <<SLOT GraphicalEditorSelectionAlignRight: doPart>> #);
               alignTop:
                 (# <<SLOT GraphicalEditorSelectionAlignTop: doPart>> #);
               alignBottom:
                 (# <<SLOT GraphicalEditorSelectionAlignBottom: doPart>> #);
               alignHorCenter:
                 (# <<SLOT GraphicalEditorSelectionAlignHorCenter: doPart>> #);
               alignVerCenter:
                 (# <<SLOT GraphicalEditorSelectionAlignVerCenter: doPart>> #);
               showSpacingDialog:
                 (# <<SLOT GraphicalEditorSelectionShowSpacingDialog: doPart>> #);
               doCopy:
                 (# <<SLOT graphicalEditorSelectionDoCopy: doPart>> #);
               doCut:
                 (# <<SLOT graphicalEditorSelectionDoCut: doPart>> #);
            #);

          open::<
            (# width, height: @integer;
            enter (width, height)
            <<SLOT graphicalEditorOpen: doPart>> 
            #);
          close::<
            (# <<SLOT graphicalEditorClose: doPart>> #);
          eventHandler::<
            (# onMouseDown::<
                 (# <<SLOT graphicalEditorOnMouseDown: doPart>> #);
               onAboutToClose::<
                 (# <<SLOT graphicalEditorOnAboutToClose: doPart>> #);
               onActivate::<
                 (# 
                 <<SLOT graphicalEditorOnActivate: doPart>>
                 #);
               onDeactivate::<
                 (#
                 <<SLOT graphicalEditorOnDeactivate: doPart>>
                 #)
               
            #);
          private: @<<SLOT graphicalEditorPrivateAttributes: descriptor>>;
       #);
     
     private: @<<SLOT graphicalEditorEnvPrivate: descriptor>>;
  #);



-- graphicalEditorLib: attributes --


textEditorPict: canvas
  (# <<SLOT textEditorPictLib: attributes>>;
     open::<
       (# <<SLOT textEditorPictOpen: doPart>> #);
     private: @<<SLOT textEditorPictPrivate: descriptor>>;
  #);
verScrollbar: scrollbar
  (# vertical:: (# do true -> value #);
  #);
verSeparator: separator
  (# vertical:: (# do true -> value #);
  #);

