ORIGIN 'preferences';
BODY 'private/preferencesDBbody.bet'

--- preferencesLib: attributes ---
dump: 
  (* prints the contents of this(preferences) onto the stream s
   * in human readable format.  If all=true, all preferences will
   * be dumped, otherwise only those read from a preferences
   * file, and those changed will be dumped
   *)
  (# s: ^stream; all: @boolean;
  enter (s[], all)
  <<SLOT preferencesDump: dopart>>
  #);
load:
  (* loads the preferences, defined in the file, into
   * this(preferences)
   *)
  (# fileName, sectionName: ^text;
     fileError:< exception
       (* invoked in the case of some file errors,
        * e.g. non-existing file
        *)
       (#
       do 'preferencesDB.load:'->msg.putline;
          '\tFile: '->msg.puttext; fileName[]->msg.putline;
          '\tdoes not exist or is not readable'->msg.puttext;
          INNER
       #);
  enter (fileName[], sectionName[])
  <<SLOT preferencesLoad: dopart>>
  #);
save:
  (* saves all changed preferences, defined in this(preferences)
   * onto the file in textual format
   *)
  (# fileName, sectionName: ^text;
     fileError:< exception
       (* invoked in the case of some file errors,
        * e.g. non-existing file or not-writeable file
        *)
       (#
       do 'preferencesDB.save:'->msg.putline;
          '\tFile: '->msg.puttext; fileName[]->msg.putline;
          '\tdoes not exist or is not writeable'->msg.puttext;
          INNER
       #);
  enter (fileName[], sectionName[])
  <<SLOT preferencesSave: dopart>>
  #)
