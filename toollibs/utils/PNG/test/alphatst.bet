ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/toollibs/utils/PNG/pngalpha';


-- program: descriptor --
GUIenv
(#
   pm: @pixmap;
   filename: ^Text;
   
   
   main: @window
     (# content: @canvas
          (# eventHandler::
               (# onRefresh::
                    (#
                    do graphics
                       (#
                       do (pm[], 13, 13) -> drawRasterAlpha;
                       #);
                    #);
               #);
             open::
               (#
               do (0xFFFF, 0xFFFF, 0xFFFF) -> backgroundColor;
                  (800, 600) -> size;
               #);
          #);
        open::
          (#
          do 'Main' -> title;
             (800, 600) -> size;
             content.open;
             
          #);
     #);
   width, height: @integer;
   hbmp: @integer;
   result: @integer;
do (if NoOfArguments = 2 then
       2 -> arguments -> filename[];
    else
       'logo.png' -> filename[];
   if);
   filename[] -> pm.readAlpha;
   main.open;
#)
