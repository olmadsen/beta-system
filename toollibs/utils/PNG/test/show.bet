ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/graphics';

-- program: descriptor --
GUIenv
(#
   pm: @pixmap;
   filename: ^Text;
   
   main: @window
     (# content: @canvas
          (# eventHandler::
               (# onRefresh::
                    (#
                    do graphics
                       (#
                       do (pm[], (0, 0), (13, 13), pm.width, pm.height) -> drawRaster;
                       #);
                    #);
               #);
             open::
               (#
               do (0xFFFF, 0xFFFF, 0xFFFF) -> backgroundColor;
                  (800, 600) -> size;
               #);
          #);
        open::
          (#
          do 'Main' -> title;
             (800, 600) -> size;
             content.open;
             
          #);
     #);
do (if NoOfArguments = 2 then
       2 -> arguments -> filename[];
       filename[] -> pm.read;
	   (0, 0, 0) -> pm.transparentColor;
       main.open;
   else
       'toucan'  -> pm.read;
       main.open;
   if);
#)
