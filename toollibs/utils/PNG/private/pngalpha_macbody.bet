ORIGIN 'pngalphabody';
INCLUDE 'macpnginterface';

INCLUDE '~beta/guienv/private/macintosh/pixmapbody';

-- lib: attributes --


readPNGAlphaImage: external
  (# name: [1] @char;
     gworld: @integer;
     result: @integer;
  enter (name, gworld)
  exit result
  #);
  
readPNGrgbImage: external
  (# name: [1] @char;
     gworld: @integer;
     result: @integer;
  enter (name, gworld)
  exit result
  #);


-- pixmapReadAlpha: doPart --
do l: name[] -> read
     (# error:: (# do what[] -> THIS(ReadAlpha).error;  leave l #);
     #);
     
-- pixmapReadRGB: doPart --
do (# result: @integer;
      w, h: @longInt;
   do (name, @@private.gworld) -> readPNGrgbImage -> result;
      (if result = 0 then
         (private.gworld, w[], h[]) -> GetGWorldSize;
	 w -> private.width;
         h -> private.height;
       else
          'unknown error' -> error;
       if);
   #);
   
-- pixmapReadAlphaImage: doPart --
do (# result: @integer;
      w, h: @longInt;
   do (name, @@private.gworld) -> readPNGAlphaImage -> result;
      (if result = 0 then
         (private.gworld, w[], h[]) -> GetGWorldSize;
	 w -> private.width;
         h -> private.height;
       else
          'unknown error' -> error;
       if);
   #);
   
-- graphicsDrawRasterAlpha: doPart --
do (pm[], (0, 0), (x, y), pm.width, pm.height) -> drawRaster;
