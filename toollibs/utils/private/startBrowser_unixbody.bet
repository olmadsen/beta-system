ORIGIN 'startBrowserBody';
LIB_ITEM 'toollibsstartbrowser';
INCLUDE '~beta/sysutils/envstring'
        '~beta/basiclib/formatio';
-- startBrowserdopart: DoPart --
do
     (#
        system: external
          (# cmd: [0] @char; result: @integer enter cmd exit result #);
        result: @integer;
        browser: ^text;
        command: @text;
        
     do
        1->result;
        l:
        (if result <> 0 then
            '$(MJOLNER_BROWSER_REMOTE)'->expandEnvVar->browser[];
            (if browser.length = 0 then leave l if);
            browser[]->command.putformat (#  do url[]->s #);
            command->system->result;
            command.clear;
            
        if);
        (* if unsuccesfull then try new browser *)
        l:
        (if result <> 0 then
            '$(MJOLNER_BROWSER)'->expandEnvVar->browser[];
            (if browser.length = 0 then leave l if);
            browser[]->command.putformat (#  do url[]->s #);
            command->system->result
        if);
        command.clear;
        (if result <> 0 then
            '/bin/sh -c "$BETALIB/bin_unix/run_netscape_unix %s" 2>&1 >/dev/null &'
              ->command.putformat (#  do url[]->s #);
            command[]->screen.putline;
            command->system->result
        if);
        command.clear;
        (if result <> 0 then
            'netscape %s'->command.putformat (#  do url[]->s #);
            command->system->result
        if);
        
     #)  

