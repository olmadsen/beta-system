Origin '~beta/basiclib/betaenv';
Include '../betaIndenter';

--program: descriptor--
(# ProgramText: ^text;
   theIndenter: ^betaIndenter;
   
   white: 
     (# w: ^text;
        i: @integer;
     enter i
     do &text[] -> w[];
        (for j:i repeat
             ' '->w.append;
        for)
     exit w[]
     #);
   
do
   
 'ORIGIN \'~beta/basiclib/betaenv\';\n' 
 '--PROGRAM: descriptor--\n' 
 '(# \n' 
 'do \n' 
 'patternname::<\n'
 '(#\n'
 'i: @integer;\n' 
 'do\n' 
 '\'hello\'->putline;\n'
 '(if ch\n'
 '// 4 then\n'
 '// 6 then\n'
 '\'hello2\'->putline;\n'
 'else\n'
 '\'asdf\'->putline;\n'
 'if);\n'
 '#);\n'
 ' \n'
 'p_name2: john (#\n'
 't: ^text;\n'
 'enter t[]\n'
 'do\n'
 'sjkdf\n'
 '(if true then\n'
 'p_name3::\n'
 '(# \n'
 'do\n'
 'fsdjao\n'
 'asdf \n'
 'exit 42 \n'
 '#)\n'
 'else\n'
 'sdfjk\n'
 'if);\n'
 '#)\n'
 '\'Hello World!\'->putline;\n'
 '#)\n'
 'trace: \n'
 '(# exit false #)\n\n'
     -> ProgramText[];
   
   
   &betaIndenter[] -> theIndenter[];
   theIndenter.init; 
   ProgramText[] -> theIndenter.setContents;
   (for i: theIndenter.top-1 repeat
        (i,0) -> theIndenter.indentLine;
        i -> theIndenter.getIndent -> white -> puttext;
        theIndenter.contents[i] -> putline;
   for);
#)

