ORIGIN '~beta/basiclib/v1.4/basicsystemenv';

INCLUDE '~beta/guienv/v1.3.1/guienvsystemenv';

INCLUDE 'ymer';

INCLUDE 'toolsMenu';

INCLUDE 'private/ymerBody';

--- program: descriptor ---
systemenv
(# fragmentBrowser: @ymerApplication
     (# ymerBrowserWindow::
          (# eventhandler::
               (# #);
             open::
               (# #);
             menubarType::
               (# open::
                    (# m: ^menu do &toolsMenu[]->m[]; m.open; m[]->append #)
               #)
          #);
        init::
          (# #);
     #);
   
   setWindowEnv:: (# do fragmentBrowser[]->theWindowEnv[] #);
   
   newProj: ^fragmentbrowser.ymerBrowser.browser.projects.project;
     
do fragmentBrowser.init;
   (for i: noOfArguments-1 repeat
        &fragmentbrowser.ymerbrowser.browser.projects.project[]->newProj[];
        i+1
          ->arguments
          ->fragmentbrowser.mps.AST.expandToFullPath
          ->newProj.location.puttext;
        newProj[]->fragmentbrowser.ymerbrowser.browser.projects.setupProject;
        newProj[]
          ->fragmentbrowser.ymerbrowser.browser.projects.theProjects.append;
   for);
   (if newProj[]<>NONE then
       fragmentbrowser.ymerbrowser.browser.projectsChanged;
       newProj[]->fragmentbrowser.ymerbrowser.browser.setProject;
   if)
#)
