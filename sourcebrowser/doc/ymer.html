<H1>Short description of the Mjølner BETA System Browser</H1>
----------------------------------------------------

This short description describes the browser which is part of the
Mjølner BETA System.  This browser is used in a number of tools of the
system.  This description only describes the browser functionalities,
and not the application specific functionalities (such as the Sif
Structure Editor functionalities).

-------------------------------------------------------------------------------

<H2>Invocation:</H2>
        ymer <file/directory>*

For the other variants, e.g. Sif, the invocation is done by:

	sif+ <file/directory>*

-------------------------------------------------------------------------------

<H2>User Interface:</H2>

When Ymer is visible on the screen, you will see an interface like:


                +--------------------------------------------+
                | File | Project | Tools | History | Windows | (menubar)
                +--------------------------------------------+
                |               |           |                |
                |               |           |                |
                |               |           |                |
                |    (1)        |    (2)    |     (3)        |
                |               |           |                |
                |               |           |                |
                |               |           |                |
                |               |           |                |
                +---------------+-----------+----------------+
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                     (4)                    |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                +--------------------------------------------+
                | (5)                                        |
                | (6)                                        |
                +--------------------------------------------+

where
        (1) is a list of 'projects'
        (2) is a list of fragments in the 'project' that is
            selected in (1)
        (3) is a list of properties and fragment forms in the
            fragment that is selected in (2)
        (4) displays the BETA code of the fragment for that is,
            selected in (3)
        (5) Displays the full path of the selected in (2) - or
            in (1), if nothing is selected in (2)
        (6) Displays information, such as no fragments in the
            selected 'project'

<H2>Project definition:</H2>

A project is either:

        A. Defined in a 'project-file' (more later)
        B. A directory
        C. A fragment group

A project may contain subprojects.  These are defined differently for
the three project types:

        A. A project may have defined subprojects in the project-file.
        B. The sub-directories are considered subprojects.
        C. Two subprojects are defined: [domain] and [extent].  These
           subprojects contain the fragment forms in the
           dependency-graph of the fragment group.  [domain] contains
           all those in the domain (that is excluding BODY fragments),
           and [extent] contains all those in the extent (that is
           including BODY fragments). These two subprojects have in
           turn defined subprojects, namely the fragment groups in the
           domain (resp. the extent), sorted out into the libraries
           they are part of (e.g. basiclib, process, etc).

<H2>Standard projects</H2>

Assuming that you have not used ymer before, the project-list (1) will
display three projects at start-up: "Std. Libraries", "HOME" and
"CURRENT", where HOME is your user name, and CURRENT is the name of
the current directory.

"Std. Libraries" is a predefined project (defined in a project-file
located in ~beta/configuration/r3.0/ymer.pjt), containing all the
libraries in the standard MBS system (basiclib, containers, etc.)

"~USER" is a directory project, referring to your home directory.
"CURRENT" is a directory project, referring to the current directory
(i.e. the directory, where you invoked ymer from).

If you have invoked ymer with command line arguments, these will be
shown in the projects list as well.

When a project/directory is selected in (1), (2) will display all
fragment files in that project.  Ymer remembers the last selection in
(2) and (3), such that it will reestablish these selections next time
you enters the same project or group.

When a group is selected for the first time, the first fragment form
will automatically be selected.

<H2>Fold/unfold projects</H2>

To see the subprojects/subdirectories of a project, double-click on
the project (called unfold the project), then you will see the
subprojects, properly indented, e.g.:

        Std. Libraries
          basiclib
          containers
          bifrost
          (etc.)

Double-clicking again on the "Std. Libraries" will 'fold' the
subprojects, only showing the "Std. Libraries" project, and not the
subprojects.

<H2>Making a fragment group into a project</H2>

You can make a fragment group into a project by double-clicking on it
in (2).  It will then appear in (1) as a fragment group project.
Double-clicking on it in (1) will calculate the dependency graph, and
show the [domain] and [extent] subprojects.

<H3>Domain and Extent projects</H3>

When selecting the [domain] or [extent] subprojects, ymer will try to
find possible conflicts in versions of libraries used, and report such
conflicts in a pop-up window.  The conflict analysis is based on the
assumption, that versions are identified by subdirectory names of the
form "vn.m", where 'n' i the major version number, and 'm' is the
minor version number.

<H2>Menues</H2>

Let me describe the individual menus:

<H3>File menu</H3>
        File
	  Help
          Save settings
          Reload settings
          Close
	  Quit

'Help' displaces a window, containing this text.

'Save settings' enables you to save the current contents of (1) on a
project-file $USER/.ymer.pjt.  This project is then automatically
loaded next time you invoke ymer - in this way you can save your
configuration.  It also saves/creates another file, $USER/.ymer.rc
containing information on the locations of the BETA compiler, and
other tools in the TOOLS menu.

'Reload settings' enables you to clear (1) and reset it to the last
settings (or the default settings, if no $USER/.ymer.[pjt|rc] files
are found.

'Close' closes the window (and terminates ymer, if this is the last
browser window).

'Quit' closes all browser windows, and terminates ymer.  In both
'Close' and 'Quit', ymer will examine if any files have been changed,
and prompt for whether these files should be saved before
closing/quitting.

<H3>Project menu</H3>
        Project
          New ...
          Open ...
          Save
          Save As ...
          Rename ...
          Close

'New ...' is not implemented (that is, there is some dialog, but it's
currently 'garbage' :-)

'Open ... opens a standard file dialog, and you can now select (a) a
project-file (must have extension .pjt), (b) a directory, and (c) a
.bet/.ast/.astL file.  You will then in (1) find a project of the
corresponding type A, B, or C.  All other selections will be ignored
(I hope :-).

'Save' is yet another unimplemented menu-item.  Is intended to
enable the saving of changes to a project-file project.

'Save As ...' is yet another unimplemented menu-item.  Is intended to
enable saving an existing project under a new name (and location).

'Rename ...' displays a dialog in which you can type a new name for
the selected project.

'Close' closes the selected project, and removes it from (1).

<H3>Tools menu</H3>
        Tools
          Compiler
          Repeating Compiler
          Execute
          Debug
          Edit: Sif
          Edit: Freja
          Edit: Text editor
          Edit: InterfaceBuilder
          Analyse: Betawc

All entries should be rather self-explanatory.  They all invoke the
tools as separate programs on the currently selected group in (2).
They all display a separate window (Lidskjalv window) to contain the
std. input and output for the tool.

This menu is _not_ in the Ymer/sif variant.  Instead, all Sif related
menus are inserted in this place.

<H3>History menu</H3>
        History
	  Back
	  Forward
          (variable contents)

'Back' and 'Forward' moves you along the path you have previously
examined.

Furthermore, this menu contains one entry for each fragment form, you
have displayed in (4).  This is used for speedy access to previously
visited fragment forms.

The last menu is:

<H3>Windows menu</H3>
        Windows
          Open Workspace
          Open Separate Browser
          Open Separate Code Viewer
	  Open Semantic Editor
          (variable contents)

'Open workspace' opens a workspace window (see later more on this).

'Open Separate Browser' opens a fully new browser window, identical to
this one.  This window is controlled by the same ymer instance.  Makes
it possible to browse two different 'places' at once.

'Open Separate Code Viewer' opens a separate window just like (4),
displaying the currently selected fragment form in (3).  It enables
focussing on one fragment form, while browsing other fragment forms.

'Open Semantic Editor' will open a semantic errors editor on the
selected group, if there are any semantic errors in that group.  See
later for more information on the semantic errors editor.

The rest of the menu contains one entry for each window opened by
ymer.  Selecting one of these items will bring the window to the front
(and wriggle it :-)

That's all on menus.  I hope it is sufficient.

                                --O-- 

<H2>Opening separate windows etc.</H2>

In (1), (2) and (3), you can open a separate window by pressing
<shift> down while double-clicking on an element in one of the lists.
In (1), you will get a separate browser, with the subprojects of this
project as toplevel projects.
In (2), you will get a separate browser with the [domain] and [extent]
projects as toplevel projects.
In (3), you will get a separate code viewer on the selected fragment
form.  Currently, <shift>doubleclick does not do anything on
properties shown in (3).  This will be added soon.

In (4), shift double-click will also open a separate window, with a
contents depending on the selection.

                                --O-- 

<H2>Search facilities</H2>

There is a search facility in (1)-(3).  If you are having keyboard
focus in (1)-(3) - usually by just clicking inside (1)-(3), you can
start search by pressing <ctrl>i (^i for short - "i" is for
"interactve search").  You can now type a string, and ymer will
immediately select the first item in the list with the typed string
somewhere in the name.

You can get the next fragment form, matching the string, by again
pressing ^i.  Repeated ^i will repeatedly find the next match,
starting from the top of the list again, if no more matches are found.

You can stop the search by pressing <cr>.

If you start the string by a "^" (caret), the string _must_ be a
prefix string, i.e. the name _must_ start with the string.

Search facilities are also available in (4).  Please refer to the sif
manual for details.

                                --O--

<H2>Double-click in (3)</H2>
A few words on the facilities of (3).

As already mentioned, you can display a fragment form in (4) by
selecting it in (3).  But that's not all you can do in (3).

If you double-click on an ORIGIN, INCLUDE, BODY or MDBODY property,
the fragment group referred to in the property will be included in (2)
and selected there.

If you double-click on a MAKE property, a new window appear with a
Lidskjalv text editor for editing the MAKE file.

                                --O--

<H2>Semantic links</H2>
A few words on the facilities of (4).

In the code viewer window (4), you have the semantic links facility,
such that double-clicking a name, brings you to the declaration, etc.
In all, you have the functionality from Sif (more on this from Elmer,
I hope :-)

                                --O--

<H2>Changing the size of the different inner panes</H2>

A final note on the interface: If you position the cursor between any
of the panes (1-6), and cross-cursor appears.  You can now press the
mouse button, and you can then move the separation between the panes,
making more space for the one (and naturally then less for the other).

                                --O--

<H2>Workspace:</H2>

A workspace (you can create as many as you want) is a window in which
you can add fragment forms from different fragment groups (or the same
fragment group) to view them together (and edit them together).  The
window looks like:

        +-------------------------+
        | Import | Scroll | Close | (menubar)
        +--------+--------+-------+
        |                         |
        |            (7)          |
        |                         |
        +-------------------------+

(7) is an outer scroller, which initially is empty.

'Import' will always contain at least one entry.  The first entry is
the name of the name of the selected fragment group in (2).  If
selected, all fragment forms in the fragment group will be displayed
in the workspace.  Following this entry, a variable number of entries
are shown.  Each entry corresponds to one fragment form in the selected
fragment group in (2).  If you select one of these entries, the
corresponding fragment form will be displayed in the workspace.

When a fragment form is imported to the workspace, it will be made
visible in a view identical to (4).  The workspace may contain as many
such views as you wish. The outer scroller (7) enables you to scroll
among the fragment forms in the workspace (try it - it is difficult to
describe short).

'Scroll' will contain one item for each fragment form in the
workspace.  If selected, the scroller will scroll such that the
fragment form view is visible.

'Close' will contain one item for each fragment form in the workspace.
If selected, the chosen fragment form view is removed from the
workspace.

As in the browser window, you can place the cursor between two views,
and thereby make the one smaller and the other bigger.  But in the
workspace you can even more.  If you press down <shift> while pressing
the mouse button, you will _only_ resize the view _above_ the cursor -
this is handy for making one view bigger without affecting the other
views.
                                --O--

<H2>Parse Errors Editor:</H2>

If you select a fragment group that haven't been parsed (i.e. no
.ast[L] file exist, or it's outdated), a prompt will ask you if this
should be done.  If you say yes, the source file will be parsed.

Now, this source file may contain parse errors.  In such case, a parse
errors editor is displayed.  It looks the following:

        +-------------+
        | File | Edit |
        +------+------+
        |             |
        |     (8)     |
        |             |
        +-------------+
        |             |
        |     (9)     |
        |             |
        |             |
        +-------------+

(8) will display the list of parse errors, with the first one
selected.

(9) will contain the source file, with the line with the first parse
error selected.

If you press <cr> in (8), the next parse error is selected in (8), and
the corresponding line displayed in (9).

The 'File' menu includes 'Save', 'Revert' and 'Close' items, with the
obvious meanings, and the 'Edit' menu contains the 'Cut', 'Copy' and
'Paste' items with the likewise obvious meanings (working on the
contents of (9)).

As always, you can move the line between (8) and (9).

The parse errors editor will also be invoked by the compiler in the
sif+ version of ymer.

			--0--

<H2>Semantic Errors Editor:</H2>

There is a similar editor for semantic errors.  Just is (9) there a
code editor (i.e. a Sif editor).  This editor is invoked from the Sif
menus - see Elmer's description).

A simplified version of the semantic errors editor, only containing
the two upper panes are invoked from the compiler in the sif+ version.

				--0--

That's all for now.  Ask, if there is anything not described here
(this is the first attempt towards a user's manual, so it's important
to know what's not described :-)

				--0--

<H1>Comments and Error Reports</H1>

Comments and error reports are welcome.  Please send these to:

	sif@mjolner.dk
