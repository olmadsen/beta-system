
<H1>Short description of the Mjølner BETA System Browser: Ymer</H1>

This short description describes the browser which is part of the
Mjølner BETA System.  This browser is used in a number of tools of the
system (Sif, Freja, Tyr, Valhalla).  This description only describes
the browser functionalities, and not the application specific
functionalities (such as the Sif Structure Editor functionalities).

<HR>

<H2>1. User Interface:</H2>

We will here present the most important user interface components from
Ymer.  Tools integrated with Ymer will share these user interface
components.  These components are therefore described here, such that
the other tools need not describe these components.
<P>
We will describe the windows, menus and other interaction
possibilities in the following sections.
<P>
The Ymer interface consists of a number of different window types:
<UL>
<LI>        - browser window
<LI>        - workspace window
<LI>        - separate code editor window
<LI>        - subeditor window
<LI>        - parse editor window
<LI>        - two types of semantic errors windows
<LI>        - help editor window
</UL>
where the browser window is the main window, giving access to the main
browsing facilities and to the other windows.  These windows will be
described in the following.

<H3>1.1 Browser Window</H3>

The browser window appears like:
<pre>
       +-------------------------------------------------+
       | File | Project | View |     | History | Windows | (menu bar)
       +-------------------------------------------------+
       |                 |                |              |
       |                 |                |              |
       |                 |                |              |
       |       (1)       |       (2)      |      (3)     |
       |                 |                |              |
       |                 |                |              |
       |                 |                |              |
       |                 |                |              |
       +-----------------+----------------+--------------+
       |                                                 |
       |                                                 |
       |                                                 |
       |                                                 |
       |                     (4)                         |
       |                                                 |
       |                                                 |
       |                                                 |
       |                                                 |
       +-------------------------------------------------+
       | (5)                                             |
       | (6)                                             |
       +-------------------------------------------------+
</pre>
where
<UL>
<LI>        (1) is a list of 'projects'
<LI>        (2) is a list of fragments in the 'project' that is
            selected in (1)
<LI>        (3) is a list of properties and fragment forms in the
            fragment that is selected in (2)
<LI>        (4) displays the BETA code of the fragment for that is,
            selected in (3)
<LI>        (5) Displays the full path of the selected in (2) - or
            in (1), if nothing is selected in (2)
<LI>        (6) Displays information, such as no fragments in the
            selected 'project' or what Ymer currently is doing,
            in the case of a long operation.
</UL>
(4) is the primary source code viewer/code editor (depending on the
specific tool).  This source code viewer will be seen in many
different Ymer windows and the functionalities of the viewer is
described later.  
<P>
A lot more functionality, relative to (4) is described in the Sif
manual, since (4) is a Sif source code viewer/editor.

<H4>1.1.1 Menus</H4>

The following sections describe the browser window menus offered by
Ymer. The different tools that are integrated with Ymer might supply
additional menus.  Please refer to the individual tool manuals for
information on which menus they supply for the browser window.

<H4>1.1.2 File menu</H4>
<pre>
        File
          Help
          Save settings
          Reset settings
          Close		Ctrl-w
          Quit		Ctrl-q
</pre>
'Help' displaces a window, containing a series of manuals.  The
different manuals can be selected in the 'Manuals' menu of this window.
<P>
'Save settings' enables you to save the current contents of (1) on a
project-file $USER/.ymer.pjt.  This project is then automatically
loaded next time you invoke ymer - in this way you can save your
configuration.  It also saves/creates another file, $USER/.ymer.rc
containing information on the locations of the BETA compiler, and
other tools in the TOOLS menu.
<P>
'Reset settings' enables you to clear (1) and reset it to the last
settings (or the default settings, if no $USER/.ymer.[pjt|rc] files
are found.
<P>
'Close' closes the window (and terminates ymer, if this is the last
browser window).
<P>
'Quit' closes all browser windows, and terminates ymer.  In both
'Close' and 'Quit', ymer will examine if any files have been changed,
and prompt for whether these files should be saved before
closing/quitting.

<H4>1.1.3 Project menu</H4>
<pre>
        Project
          New ...
          Open ...
          Reload
          Save
          Save As ...
          Rename ...
          Close
</pre>
'New ...' is an unimplemented menu-item (that is, it is
always disabled - will be implemented in a later version)
<P>
'Open ... opens a standard file dialog, and you can now select (a) a
project-file (must have extension .pjt), (b) a directory, and (c) a
.bet/.ast/.astL file.  You will then in (1) find a project of the
corresponding type A, B, or C.  All other selections will be ignored.
<P>
'Reload' is used to reload the contents of this project (e.g. if this
project represents a directory, and the contents of this directory
have changed).
<P>
'Save' is yet another unimplemented menu-item (that is, it is
always disabled - will be implemented in a later version).  Is intended to
enable the saving of changes to a project-file project.
<P>
'Save As ...' is yet another unimplemented menu-item (that is, it is
always disabled - will be implemented in a later version).  Is intended to
enable saving an existing project under a new name (and location).
<P>
'Rename ...' displays a dialog in which you can type a new name for
the selected project.
<P>
'Close' closes the selected project, and removes it from (1).

<H4>1.1.4 View menu</H4>
<pre>
        View
          Abstract (Dbl-Clk)	
          Abstract Recursively
          Overview			Ctrl-o
          Detail (Dbl-Clk)		Ctrl-d
          Detail Recursively
          Search			Ctrl-s
          Replace			Ctrl-r
	  Follow Semantic Link (Dbl-Clk)
	  Follow Link to Fragment (Dbl-Clk)
	  Follow Link to SLOT
          Zoom in			Ctrl-1
          Zoom out			Ctrl-2
          Zoom to Full Editor		Ctrl-3
          Reprettyprint			Ctrl-p
</pre>          
Not described here - should be described here :-)
          
<H4>1.1.5 History menu</H4>
<pre>
        History
          Back		Ctrl-b
          Forward	Ctrl-f
          (variable contents)
</pre>
'Back' and 'Forward' moves you along the path you have previously
examined.
<P>
Furthermore, this menu contains one entry for each fragment form, you
have displayed in (4).  This is used for speedy access to previously
visited fragment forms.

<H4>1.1.6 Windows menu</H4>
<pre>
        Windows
          Open Workspace
          Open Separate Browser
          Open Separate Code Viewer
          Open Semantic Errors Viewer
          Open Semantic Errors Editor
          (variable contents)
</pre>
'Open workspace' opens a workspace window (see later more on this).
<P>
'Open Separate Browser' opens a fully new browser window, identical to
this one.  This window is controlled by the same ymer instance.  Makes
it possible to browse two different 'places' at once.
<P>
'Open Separate Code Viewer' opens a separate window just like (4),
displaying the currently selected fragment form in (3).  It enables
focussing on one fragment form, while browsing other fragment forms.
<P>
'Open Semantic Errors Viewer' will open a semantic errors viewer on the
selected group, if there are any semantic errors in that group.  See
later for more information on the semantic errors editor.
<P>
'Open Semantic Errors Editor' will open a semantic errors editor on the
selected group, if there are any semantic errors in that group.  See
later for more information on the semantic errors editor.
<P>
The rest of the menu contains one entry for each window opened by
ymer.  Selecting one of these items will bring the window to the front
(and wriggle it)

<H4>1.1.7 Changing the size of the different inner panes</H4>

If you position the cursor between any of the panes (1)-(4), a
cross-cursor appears.  By pressing the mouse button you can move the
separation between the panes, making more space for the one (and
naturally consequently less for the other).

<H4>1.1.8 Opening Separate Windows etc.</H4>

In (1), (2) and (3), you can open a separate window by pressing
<shift> down while double-clicking on an element in one of the lists.
<P>
In (1), you will get a new separate browser window, with the
subprojects of this project as top-level projects.
<P>
In (2), you will get a new separate browser window with the [domain]
and [extent] projects as top-level projects.
<P>
In (3), you will get a separate code viewer on the selected fragment
form.  If the currently selected element in (3) is not a fragment form
(i.e. it is a property), the effect is different.  If the selected is
an ORIGIN, INCLUDE or BODY property, a new separate browser window
with the specified fragment group as top-level project.  If the
selected is a MAKE property, a text editor is opened, enabling textual
editing of the Make file specified.  All other properties are ignored.
<P>
In (4), shift double-click will open a subeditor window with the
current selection as its contents.

<H4>1.1.9 Search Facilities in (1)-(3)</H4>

There is a search facility in (1)-(3).  If you are having keyboard
focus in (1)-(3) - usually by just clicking inside (1)-(3), you can
start search by pressing <Ctrl>i (^i for short - "i" is for
"interactive search").  You can now type a string, and ymer will
immediately select the first item in the list with the typed string
somewhere in the name.
<P>
You can get the next fragment form, matching the string, by again
pressing ^i.  Repeated ^i will repeatedly find the next match,
starting from the top of the list again, if no more matches are found.
<P>
You can stop the search by pressing <cr>.
<P>
If you start the string by a "^" (caret), the string _must_ be a
prefix string, i.e. the name _must_ start with the string.

<H4>1.1.10 Double-click in (3)</H4>

As already mentioned, you can display a fragment form in (4) by
selecting it in (3).  But that's not all you can do in (3).
<P>
If you double-click on an ORIGIN, INCLUDE, BODY or MDBODY property,
the fragment group referred to in the property will be included in (2)
and selected there.
<P>
If you double-click on a MAKE property, a new window appear with a
Lidskjalv text editor for editing the MAKE file.

<H4>1.1.11 Semantic links</H4>
A few words on the facilities of (4).
<P>
In the source code viewer (4), you have the semantic links facility,
such that double-clicking on a name brings you to the declaration.

<HR>

<H3>1.2 Workspace Window</H3>

A workspace window (you can create as many as you want) is a window in
which you can view (and possibly edit) fragment forms from different
fragment groups (or the same fragment group) together.
The workspace window looks like:
<pre>
        +---------------------------------------+
        | File | View | Import | Scroll | Close | (menu bar)
        +---------------------------------------+
        |                                       |
        |            (7)                        |
        |                                       |
        +---------------------------------------+
</pre>
(7) is an outer scroller, which initially is empty.
<P>
When a fragment form have been imported to the workspace through the
'Import' menu, it will be made visible in a view identical to (4) in
browser window.  The workspace may contain as many such views as you
wish. The outer scroller (7) enables you to scroll among the fragment
forms in the workspace (try it - it is difficult to describe short).
<P>
As in the browser window, you can place the cursor between two views
in (7), and thereby make the one smaller and the other bigger.  But in
the workspace you can even more.  If you press down <shift> while
pressing the mouse button, you will _only_ resize the view _above_ the
cursor - this is handy for making one view bigger without affecting
the other views.

<H4>1.2.1 Menus</H4>

The above menus are those supplied by Ymer by default in a workspace
window.  Integrated tools may define additional workspace window
menus - please refer to those manuals for details.

<H4>1.2.2 File Menu</H4>

The 'File' menu just contains a 'Close Ctrl-w' entry to enable closing the
workspace.

<H4>1.2.3 View Menu</H4>

The 'View' menu is identical to the 'View' menu in the browser window.

<H4>1.2.4 Import Menu</H4>

The 'Import' menu will always contain at least one entry.  This entry is the
name of the name of the currently selected fragment group in (2) in
the browser window.  If selected, all fragment forms in that fragment
group will be displayed in the workspace.  Following this permanent
entry, a variable number of entries are shown.  Each entry corresponds
to one fragment form in the currently selected fragment group in (2)
in the browser window.  If you select one of these entries, the
corresponding fragment form will be displayed in the workspace.

<H4>1.2.5 Scroll Menu</H4>

The 'Scroll' menu will contain one item for each fragment form in the
workspace.  If selected, the scroller will scroll such that the
fragment form view is visible.

<H4>1.2.6 Close Menu</H4>

The 'Close' menu will contain one item for each fragment form in the workspace.
If selected, the chosen fragment form view is removed from the
workspace.

<HR>

<H3>1.3 Separate Code Editor Window</H3>

The separate code editor window offers facilities for viewing (and
possibly editing) a given fragment form, independently of any browser
window.  The separate code editor window looks like:
<pre>
        +-----------------------+
        | File | View | Buffers | (menu bar)
        +-----------------------+
        |                       |
        |          (4)          |
        |                       |
        +-----------------------+
</pre>
(4) is functionally identical to (4) in browser window.

<H4>1.3.1 Menus</H4>

The above menus are those supplied by Ymer by default in a separate
code editor window.  Integrated tools may define additional separate
code editor window menus - please refer to those manuals for details.

<H4>1.3.2 File Menu</H4>

The 'File' menu just contains a 'Close Ctrl-w' entry to enable closing
the separate code editor window.

<H4>1.3.3 View Menu</H4>

The 'View' menu is identical to the 'View' menu in the browser window.

<H4>1.3.4 Buffers Menu</H4>

The 'Buffers' menu is similar to the variable part of the 'History'
menu in the browser window.  It contains one entry for each fragment
forms, that have been shown in this separate code editor window.

<HR>

<H3>1.4 Subeditor Window</H3>

The subeditor window offers facilities for viewing (and possibly
editing) a given fragment form, independently of any other code editor
window.  The subeditor window looks like:
<pre>
        +-----------------------+
        | File | View           | (menu bar)
        +-----------------------+
        |                       |
        |          (4)          |
        |                       |
        +-----------------------+
</pre>
(4) is functionally identical to (4) in browser window.

<H4>1.4.1 Menus</H4>

The above menus are those supplied by Ymer by default in a subeditor
window.  Integrated tools may define additional subeditor window
menus - please refer to those manuals for details.

<H4>1.4.2 File Menu</H4>

The 'File' menu just contains a 'Close Ctrl-w' entry to enable closing
the subeditor window.

<H4>1.4.3 View Menu</H4>

The 'View' menu is identical to the 'View' menu in the browser window.

<HR>

<H3>1.5 Parse Editor Window</H3>

If you select a fragment group that haven't been parsed (i.e. no
.ast[L] file exist, or it's outdated), a prompt will ask you if this
should be done.  If you say yes, the source file will be parsed.
<P>
If the source file may contain parse errors, a parse errors editor
window is automatically displayed.  It looks the following:
<pre>
        +-------------+
        | File | Edit |
        +------+------+
        |             |
        |     (8)     |
        |             |
        +-------------+
        |             |
        |     (9)     |
        |             |
        |             |
        +-------------+
</pre>
(8) will display the list of parse errors, with the first one
selected.
<P>
(9) will contain the source file, with the line with the first parse
error selected.
<P>
If you press <cr> in (8), the next parse error is selected in (8), and
the corresponding line displayed in (9).
<P>
As in the browser window, you can place the cursor between the two
panes (8) and (9), and thereby make the one smaller and the other
bigger.

<H4>1.5.1 Menus</H4>

The above menus are those supplied by Ymer by default in a parse editor
window.  Integrated tools may define additional parse editor window
menus - please refer to those manuals for details.

<H4>1.5.2 File Menu</H4>
<pre>
        File
          Save
          Revert
          Close		Ctrl-w
</pre>
'Save' saves the edited file.
<P>
'Revert' reads in the original file again, thereby removing the
changes that might have been made to the file.
<P>
'Close Ctrl-w' closes the parse editor window.  If changes have been
made to the file, and not saved, a prompt will be displayed asking
whether or not to save the changes.

<H4>1.5.3 Edit Menu</H4>
<pre>
        Edit
          Cut	Ctrl-x
          Copy	Ctrl-c
          Paste	Ctrl-v
</pre>
'Edit' contains the 'Cut Ctrl-x', 'Copy Ctrl-c' and 'Paste Ctrl-v'
items with the obvious meanings (working on the contents of (9)).

<HR>

<H3>1.6 Semantic Errors Viewer Window</H3>

The semantic errors viewer window is opened through the 'Windows' menu
in the browser window, or in those tools integrated with the BETA
compiler, when a file is compiled and the compiler reports semantic
errors.  It appear like the following:
<pre>
        +------------------------+
        | File | Warnings | Mark |
        +------+----------+------+
        |                        |
        |          (10)          |
        |                        |
        +------------------------+
        |                        |
        |          (11)          |
        |                        |
        |                        |
        +------------------------+
</pre>
Pane (10) is a list of fragment forms containing semantic errors.
<P>
If you press <cr> in (10), the next fragment form is selected in (10).
If you press <cr> in (11), the next semantic error is selected in
(11).
<P>
When a fragment form is selected in (1), all semantic errors in that
fragment form is listed in (11).
<P>
When a semantic error is selected in (11), the corresponding place in
the source code is selected in (4) in the browser window.
<P>
As in the browser window, you can place the cursor between the two
panes (10) and (11), and thereby make the one smaller and the other
bigger.

<H4>1.6.1 Menus</H4>

The above menus are those supplied by Ymer by default in a semantic
errors viewer window.  Integrated tools may define additional semantic
errors viewer window menus - please refer to those manuals for
details.

<H4>1.6.2 File Menu</H4>
<pre>
        File
          Reload	Ctrl-r
          Close		Ctrl-w
</pre>
'Reload Ctrl-r' enables reloading the fragment group after a possible
rechecking have been done.
<P>
'Close Ctrl-w' entry enables closing the semantic errors viewer
window.

<H4>1.6.3 Warnings Menu</H4>
<pre>
        Warnings
          Include	Ctrl-i
</pre>
'Include' is a toggle.  If toggle on, then warnings will be included
in the list in (11).  Otherwise, warnings are not shown in (11).

<H4>1.6.4 Mark Menu</H4>
<pre>
        Mark
          Mark as Corrected	Ctrl-m
          Unmark		Ctrl-u
</pre>
'Mark as Corrected' marks the currently selected element in (11) as
corrected (indicated by an asterics "*" in front of the element).
This is merely a help to the user during correction of the semantic
errors, enabling him to mark those errors, that he thinks he has
corrected.
<P>
'Unmark' removes such mark on the currently selected element in (11).

<HR>

<H3>1.7 Semantic Errors Editor Window</H3>

The semantic errors editor window is opened through the 'Windows' menu
in the browser window.  It offers the facility to view and edit
semantic errors independently of any browser window.
<pre>
        +------------------------+
        | File | Warnings | Mark |
        +------+----------+------+
        |                        |
        |          (10)          |
        |                        |
        +------------------------+
        |                        |
        |          (11)          |
        |                        |
        |                        |
        +------------------------+
        |                        |
        |           (4)          |
        |                        |
        |                        |
        +------------------------+
</pre>
When a semantic error is selected in (11), the corresponding place in
the source code is selected in (4) in the lower part of the semantic
errors editor window.
<P>
As in the browser window, you can place the cursor between the
panes (10), (11) and (4), and thereby make the one smaller and the other
bigger.

<H4>1.7.1 Menus</H4>

The menus of the semantic errors editor window include those one
defined for semantic errors viewer.  'View' and 'Edit' menu may also
be available (depending on the tool integrated with Ymer).

<HR>

<H3>1.8 Help Window</H3>

The help window offers access to various help documents.  The help
documents are those supplied by the various tools integrated with
Ymer.
<P>
The help window looks like:
<pre>
        +------------------------+
        | File | Manuals         |
        +------+-----------------+
        |                        |
        |          (12)          |
        |                        |
        +------------------------+
        |                        |
        |          (13)          |
        |                        |
        |                        |
        +------------------------+
</pre>
Pane (12) contains a table of contents of the selected manual, and
pane (13) shows the text of the selected entry in pane (12).
<P>
As in the browser window, you can place the cursor between the two
panes (12) and (13), and thereby make the one smaller and the other
bigger.

<H4>1.8.1 File Menu</H4>
<pre>
        File
          Close		Ctrl-w
</pre>
'Close Ctrl-w' entry enables closing the help window.

<H4>1.8.2 Manuals Menu</H4>
<pre>
        Manuals
          Ymer: Short manual
          Ymer: Known bugs and inconveniences
</pre>
The entries in the 'Manuals' menu depend on the exact configuration,
Ymer is used.  Here is shown the entries supplied by Ymer.  Additional
entries may be available, depending on the tools integrated with Ymer.
<P>
Selecting one of the entries, will load the corresponding manual into
the help window pane (12).

<H2>2. Project definition:</H2>

A project is either:
<UL>
<LI>        A. Defined in a 'project-file' (more later)
<LI>        B. A directory
<LI>        C. A fragment group
</UL>
A project may contain subprojects.  These are defined differently for
the three project types:
<UL>
<LI>        A. A project may have defined subprojects in the project-file.
<LI>        B. The sub-directories are considered subprojects.
<LI>        C. Two subprojects are defined: [domain] and [extent].  These
           subprojects contain the fragment forms in the
           dependency-graph of the fragment group.  [domain] contains
           all those in the domain (that is excluding BODY fragments),
           and [extent] contains all those in the extent (that is
           including BODY fragments). These two subprojects have in
           turn defined subprojects, namely the fragment groups in the
           domain (resp. the extent), sorted out into the libraries
           they are part of (e.g. basiclib, process, etc).
</UL>
<H3>2.1 Standard projects</H3>

Assuming that you have not used ymer before, the project-list (1) will
display three projects at start-up: "Std. Libraries", "HOME" and
"CURRENT", where HOME is your user name, and CURRENT is the name of
the current directory.
<P>
"Std. Libraries" is a predefined project (defined in a project-file
located in ~beta/configuration/r3.0/ymer.pjt), containing all the
libraries in the standard MBS system (basiclib, containers, etc.)
<P>
"~USER" is a directory project, referring to your home directory.
"CURRENT" is a directory project, referring to the current directory
(i.e. the directory, where you invoked ymer from).
<P>
If you have invoked ymer with command line arguments, these will be
shown in the projects list as well.
<P>
When a project/directory is selected in (1), (2) will display all
fragment files in that project.  Ymer remembers the last selection in
(2) and (3), such that it will reestablish these selections next time
you enters the same project or group.
<P>
When a group is selected for the first time, the first fragment form
will automatically be selected.

<H3>2.2 Fold/unfold projects</H3>

To see the subprojects/subdirectories of a project, double-click on
the project (called unfold the project), then you will see the
subprojects, properly indented, e.g.:
<pre>
        Std. Libraries
          basiclib
          containers
          bifrost
          (etc.)
</pre>
Double-clicking again on the "Std. Libraries" will 'fold' the
subprojects, only showing the "Std. Libraries" project, and not the
subprojects.

<H3>2.3 Making a fragment group into a project</H3>

You can make a fragment group into a project by double-clicking on it
in (2).  It will then appear in (1) as a fragment group project.
Double-clicking on it in (1) will calculate the dependency graph, and
show the [domain] and [extent] subprojects.

<HR>

<H3>2.4 Domain and Extent projects</H3>

When selecting the [domain] or [extent] subprojects, ymer will try to
find possible conflicts in versions of libraries used, and report such
conflicts in a pop-up window.  The conflict analysis is based on the
assumption, that versions are identified by subdirectory names of the
form "vn.m", where 'n' i the major version number, and 'm' is the
minor version number.

<HR>

<H1>Comments and Error Reports</H1>

Comments and error reports are welcome.  Please send these to:
<pre>
        sif@mjolner.dk
</pre>