Short description of the Mjølner BETA System Browser
----------------------------------------------------

This short description describes the browser which is part of the
Mjølner BETA System.  This browser is used in a number of tools of the
system.  This description only describes the browser functionalities,
and not the application specific functionalities (such as the Sif
Structure Editor functionalities).

-------------------------------------------------------------------------------
Startup:
        ymer <file/directory>*

-------------------------------------------------------------------------------
User Interface:

When Ymer is visible on the screen, you will see an interface like:


                +--------------------------------------------+
                | File | Project | History | Tools | Windows | (menubar)
                +--------------------------------------------+
                |               |           |                |
                |               |           |                |
                |               |           |                |
                |    (1)        |    (2)    |     (3)        |
                |               |           |                |
                |               |           |                |
                |               |           |                |
                |               |           |                |
                +---------------+-----------+----------------+
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                     (4)                    |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                |                                            |
                +--------------------------------------------+
                | (5)                                        |
                | (6)                                        |
                +--------------------------------------------+

where
        (1) is a list of 'projects'
        (2) is a list of fragments in the 'project' that is
            selected in (1)
        (3) is a list of properties and fragment forms in the
            fragment that is selected in (2)
        (4) displays the BETA code of the fragment for that is,
            selected in (3)
        (5) Displays the full path of the selected in (2) - or
            in (1), if nothing is selected in (2)
        (6) Displays information, such as no fragments in the
            selected 'project'

A project is either:
        A. Defined in a 'project-file' (more later)
        B. A directory
        C. A fragment group

A project may contain subprojects.  These are defined differently for
the three project types:
        A. A project may have defined subprojects in the project-file.
        B. The sub-directories are considered subprojects.
        C. Two subprojects are defined: [domain] and [extent].  These
           subprojects contain the fragment forms in the
           dependency-graph of the fragment group.  [domain] contains
           all those in the domain (that is excluding BODY fragments),
           and [extent] contains all those in the extent (that is
           including BODY fragments). These two subprojects have in
           turn defined subprojects, namely the fragment groups in the
           domain (resp. the extent), sorted out into the libaries
           they are part of (e.g. basiclib, process, etc).

Assuming that you have not used ymer before, the project-list (1) will
display two projects at start-up: "Std. Libraries", and "~USER", where
USER is your user name.

"Std. Libraries" is a predefined project (defined in a project-file
located in ~beta/configuration/r3.0/ymer.pjt), containing all the
libraries in the standard MBS system (basiclib, containers, etc.)

"~USER" is a directory project, refering to your home directory.

When a project/directory is selected in (1), (2) will display all fragment
files in that project.

To see the subprojects/subdirectories of a project, double-click on
the project (called unfold the project), then you will see the
subprojects, properly insented, e.g.:
        Std. Libraries
          basiclib
          containers
          bifrost
          (etc.)
Double-clicking again on the "Std. Libraries" will 'fold' the
subprojects, only showing the "Std. Libraries" project, and not the
subprojects.

You can make a fragment group into a project by double-clicking on it
in (2) with <shift> down.  It will then appear in (1) as a fragment
group project.  Double-clickeing on it will calculate the dep.graph,
and show the [domain] and [extent] subprojects.

When selecting the [domain] or [extent] subprojects, ymer will try to
find possible conflicts in versions of libraries used, and report such
conflicts in a pop-up window.  The conflict analysis is based on the
assumption, that versions are identified by subdirectory names of the
form "vn.m", where 'n' i the major version number, and 'm' is the
minor version number.

Let me describe the individual menus:

        File
          Save settings
          Reload settings
          Close

S'ave settings' enables you to save the current contents of (1) on a
project-file $USER/.ymer.pjt.  This project is then automatically
loaded next time you invoke ymer - in this way you can save your
configuration.  It also saves/creates another file, $USER/.ymer.rc
containing information on the locations of the BETA compiler, and
other tools in the TOOLS menu.

'Reload settings' enables you to clear (1) and reset it to the last
settings (or the default settings, if no $USER/.ymer.[pjt|rc] files
are found.

'Close' closes the window (and terminates ymer, if this is the last
browser window).

        Project
          Create new project
          Load existing project
          Load Standard Libraries
          Save project
          Rename Project
          Relocate Project
          Delete Project

'Create new project' is not implemented (that is, there is some
dialog, but it's currently 'garbage' :-)

'Load existing project' opens a standard file dialog, and you can now
select (a) a project-file (must have extension .pjt), (b) a directory,
and (c) a .bet/.ast/.astL file.  You will then in (1) find a project
of the corresponding type A, B, or C.  All other selections will be
ignored (I hope :-).

'Load Standard Libraries' will create the previously mentioned
"Std. Libraries" project.  It's here to help, if people by accident
(or deliberate) have deleeted that project.

'Save Project' is yet another unimplemented menu-item.  Is intended to
enable the saving of changes to a project-file project.

'Rename Project' displays a dialog in which you can type a new name
for the selected project.

'Relocate Project' opens a standard file dialog, and allows you to
specify a new project-file/directory/source file to be displayed in
this project.

'Delete project' deletes the selected project from (1).

        History
          (variable contents)

This menu contains one entry for each fragment form, you have
displayed in (4).  This is used for speedy access to previously
visited fragment forms.  I can promise you, that the Sif variant will
have a much more elaborate history mechanism, alloving more
fine-grained back and forward navigation.

        Tools
          Compiler
          Repeating Compiler
          Execute
          Debug
          Edit: Sif
          Edit: Freja
          Edit: Text editor
          Edit: InterfaceBuilder
          Analyse: Betawc

All entries should be rather self-explanatory.  They all invoke the
tools as separate programs on the currently selected group in (2).
They all display a separate window (Lidskjalv window) to contain the
std. input and output for the tool.

This menu is _not_ in the Ymer/sif variant.  Instead, all Sif related
menues are inserted in this place.

The last menu is:
        Windows
          Open Workspace
          Open Separate Browser
          Open Separate Code Viewer
          (variable contents)

'Open workspace' opens a workspace window (see later more on this).

'Open Separate Browser' opens a fully new browser window, identical to
this one.  This window is controlled by the same ymer instance.  Makes
it possible to browse two different 'places' at once.

'Open Separate Code Viewer' opens a separate window just like (4),
displaying the currently selected fragment form in (3).  It enables
focussing on one fragment form, while browsing other fragment forms.

The rest of the meny contains one entry for each window opened by
ymer.  Selecting one of these items will bring the window to the front
(and wriggle it :-)

That's all on menus.  I hope it is sufficient.

                                --O--

A few words on the facilities of (3).

As already mentioned, you can display a fragment form in (4) by
selecting it in (3).  But that's not all you can do in (3).

If you double-click on an ORIGIN, INCLUDE, BODY or MDBODY property,
the fragment group referred to in the property will be included in (2)
and selected there.

If you double-click on a MAKE property, a new window appear with a
Lidskjalv text editor for editing the MAKE file.

                                --O--

A few words on the facilities of (4).

In the code viewer vindow (4), you have the semantic links facility,
such that double-clicking a name, brings you to the declaration, etc.
In all, you have the functionality from Sif (more on this from Elmer,
I hope :-)

                                --O--

A final note on the interface: If you position the cursor between any
of the panes (1-6), and cross-cursor appears.  You can now press the
mouse button, and you can then move the separation between the panes,
making more space for the one (and naturally then less for the other).

                                --O--

I have promised to tell you more on the workspace.  Here it is.

Workspace:

A workspace (you can create as many as you want) is a window in which
you can add fragment forms from different fragment groups (or the same
fragment group) to view them together (and edit them together).  The
window looks like:

        +---------------------+
        | Add | Show | Remove | (menubar)
        +-----+------+--------+
        |                     |
        |         (7)         |
        |                     |
        +---------------------+

(7) is an outer scroller, which initially is empty.

'Add' will always contain two entries.  The first entry is the name of
the currently selected fragment form in (3).  If selected, this
fragment form will be displayed in the workspace.  The other entry is
the name of the selected fragment group in (2).  If selected, all
fragment forms in the fragment group will be dispalyed in the
workspace.

When a fragment form is addes to the workspace, it will be made
visible in a view identical to (4).  The workspace may contain as many
such views as you wish. The outer scroller (7) enables you to scroll
amoung the fragment forms in the workspace (try it - it is difficult
to describe short).

'Show' will contain one item for each fragment form in the workspace.
If selected, the scroller will scroll such that the fragment form view
is visible - that is, this is the intent, but does not work currently
due to unimplemented feature in Lidskjalv :-(

'Remove' will contain one item for each fragment form in the
workspace.  If selected, the chosen fragment form view is removed
from the workspace.

As in the browser window, you can place the cursor between two views,
and thereby make the one smaller and the other bigger.  But in the
workspace you can even more.  If you press down <shift> while pressing
the mouse button, you will _only_ resize the view _above_ the cursor -
this is handy for making one view bigger without affecting the other
views.
                                --O--

Parse Errors Editor:

There is one more component (that I can think of now :-), namely the
parse errors editor.

If you select a fragment group that haven't been parsed (i.e. no
.ast[L] file exist, or it's outdated), a prompt will ask you if this
should be done.  If you say yes, the source file will be parsed.

Now, this source file may contain parse errors.  In such case, a parse
errors editor is displayed.  It looks the following:

        +-------------+
        | File | Edit |
        +------+------+
        |             |
        |     (8)     |
        |             |
        +-------------+
        |             |
        |     (9)     |
        |             |
        |             |
        +-------------+

(8) will display the list of parse errors, with the first one
selected.

(9) will contain the source file, with the line with the first parse
error selected.

If you press <cr> in (8), the next parse error is selected in (8), and
the corresponding line displayed in (9).

The 'File' menu includes 'Save' Revert' and 'Close' items, with the
obvious meanings, and the 'Edit' menu contains the 'Cut', 'Copy' and
'Paste' items with the likewise obvious meanings (working on the
contents of (9)).

As always, you can move the line between (8) and (9).

			--0--

Semantic Errors Editor:

There is a similar editor for semantic errors.  Just is (9) there a
code editor (i.e. a Sif editor).  This editor is invoked from the Sif
menus - see Elmer's description).

				--0--

That's all for now.  Ask, if there is anything not described here
(this is the first attempt towards a user's manual, so it's important
to know what's not described :-)

Comments are welcome.  Please report these to:

	sif@mjolner.dk
