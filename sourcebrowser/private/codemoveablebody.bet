ORIGIN '../codemoveable';
INCLUDE '~beta/basiclib/v1.4/formatio';

--- codemoveableEditorOpen:descriptor ---
(# cel: ^codemoveableEditorList;
do getencloser;
   father.size->size; 
   INNER open;
   getcodemoveableEditorList->cel[];
   THIS(codemoveableEditor)[]->cel.onInsert;
   THIS(codemoveableEditor)[]->cel.append;
#)
--- codemoveableEditorClose:descriptor---
(# cel: ^codemoveableEditorList;
do getcodemoveableEditorList->cel[];
   THIS(codemoveableEditor)[]->cel.at->cel.delete;
   THIS(codemoveableEditor)[]->cel.onDelete;
   INNER close;
#)
--- codemoveableEditorPrivate:descriptor ---
(# 
#)
--- codemoveableEditorOnMouseDown:dopart---
do INNER onMouseDown
   
--- codemoveableEditorOnKeyDown:dopart ---
do INNER onKeyDown
   
--- codemoveableContentsOpen:descriptor ---
(# t: ^Text; sz: @Point;
do 
   (contents[],defaultSize)->editor.open;
   'Fragment: '->t[];
   initialNode.frag.name->t.append;
   t[]->THIS(codemoveable).title;
   (if not (editor.size->defaultSize.isEqual) then
       editor.size->size;
   if);
   INNER open;
#)

---codemoveabledobindings:dopart ---
do TRUE->editor.bindRight->editor.bindBottom;
   (editorencloser.getAST,editorencloser.getBETACFL,initialNode.frag.root[],initialNode[])
     ->editor.newfragment;
   INNER;
   NONE->initialNode[]; 
   
   
--- codemoveableopen:descriptor ---
(# 
do 
#)

--- codemoveableclose:descriptor ---
(# 
#)

--- codemoveableOpenInWindowAction:dopart---
do

--- codemoveableEditorSelect:dopart ---
do (node[],1,0,0)->SifViewer.setFocus;
   
--- codemoveableEditorUpdate:dopart ---
do (frag.root[],- 1)->sifViewer.astView.pp.present;
   SifViewer.cs->SifViewer.setFocus;
