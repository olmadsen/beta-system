ORIGIN '~beta/basiclib/v1.6/file'
---- program: descriptor ----

(# (* ------------------------------------------------
    *   count.bet: Simple file handling program
    *              -Counting occurrences of characters-
    * ------------------------------------------------*)
   
   inFile: @file;
   Ch: @char;
   nc: @integer;
   occurrences: [256]@Char;
do
   2->Arguments->inFile.name ;
   inFile.openRead;  (* OPENING *)
   Loop: 
     (if inFile.eos//false then
         inFile.Get->Ch; 
         nc+1->nc;
         occurrences[Ch]+1->occurrences[Ch];
         restart Loop
     if);
   NewLine;
   (for i: 256 repeat
        (if occurrences[i]//0 then else (* only print if > 0 *)
            i->put; (* notice how a char can be printed *)
            ': '->puttext; 
            occurrences[i]->putint;
            newline;
        if);
   for);
   'Total '->puttext;
   nc->putint; 
   ' characters in file'->putline;
   inFile.close;
#)
