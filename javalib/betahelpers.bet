ORIGIN '~beta/basiclib/betaenv';

BUILD jvm 'jvm/$(objdir)/libBetaHelpers.so' 'BetaHelpers.c' 'jvm/beta_BetaHelpers.h' 'mkdir -p jvm/$objdir; gcc -Wall -fpic -shared $1 -I . -I jvm -I $JAVAHOME/include -I $JAVAHOME/include/$JNIDIR -o jvm/$objdir/libBetaHelpers.so';

BUILD jvm 'jvm/beta_BetaHelpers.h' 'jvm/beta/BetaHelpers.class' 'javah -jni -d jvm -classpath jvm beta.BetaHelpers';

BUILD jvm 'jvm/beta/BetaHelpers.class' 'BetaHelpers.java' 'javac -classpath jvm -d jvm $1';

INCLUDE 'java/lang/String';
INCLUDE 'java/io/InputStream';
INCLUDE 'java/io/PrintStream';

--LIB: attributes--

BetaHelpers: ExternalClass
  (# 
     (* static methods *)
     int2long: static_proc
       (# I: @int32;
          J: @int64;
       enter I
       exit J
       #);
     
     long2int: static_proc
       (# J: @int64;
          I: @int32;
       enter J
       exit I
       #);
     
     int2longMul1000: static_proc
       (# I: @int32;
          J: @int64;
       enter I
       exit J
       #);

     long2intDiv1000: static_proc
       (# J: @int64;
          I: @int32;
       enter J
       exit I
       #);
     
     get_System_in: static_proc
       (# in: ^InputStream
       exit in[]
       #);
     
     get_System_out: static_proc
       (# out: ^PrintStream
       exit out[]
       #);
     
     get_System_err: static_proc
       (# err: ^PrintStream
       exit err[]
       #);
     
     loadJNILibraries: static_proc
       (# 
       #);
     
     getenv: static_proc
       (# key, value: ^String
       enter key[]
       exit value[]
       #);
     
  do 'beta/BetaHelpers' -> classname;
  #);

String2Text:
  (# S: ^String;
     T: ^Text;
  enter S[]
  exit S[]->T[]
  #);
