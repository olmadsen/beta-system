ORIGIN '~beta/basiclib/betaenv';
BUILD jvm 'jvm/beta/BetaHelper.class' 'BetaHelper.java' 'javac -classpath jvm -d jvm $1';

--LIB: attributes--

BetaHelper: ExternalClass
  (# 
     (* instance methods *)
     convertInt2long: proc
       (# I: @int32;
          J: @int64;
       enter I
       exit J
       #);

     convertLong2int: proc
       (# J: @int64;
          I: @int32;
       enter J
       exit I
       #);
  do 'beta/BetaHelper' -> classname;
  #);

(* Wrappers for instance methods *)
convertInt2Long:
  (# I: @int32;
     J: @int64;
     H: ^BetaHelper;
  enter I
  do &BetaHelper[] -> H[];
     I -> H.convertInt2long -> J
  exit J
  #);
convertLong2Int:
  (# I: @int32;
     J: @int64;
     H: ^BetaHelper;
  enter J
  do &BetaHelper[] -> H[];
     J -> H.convertLong2Int -> I
  exit I
  #);

(* Static methods (FIXME: not working for int64) *)

int2long: external
  (# I: @int32;
     J: @int64;
  enter I
  do 'static beta/BetaHelper/int2long(I)J' -> callC
  exit J
  #);

long2int: external
  (# J: @int64;
     I: @int32;
  enter J
  do 'static beta/BetaHelper/long2int(J)I' -> callC
  exit I
  #);
