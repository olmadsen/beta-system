#!/usr/local/bin/perl -s
#-*-Perl-*-

if ($h || ($#ARGV!=0)){
    print "Usage: mbs_prunebet [-h] .bet file\n";
    print "          -h   Print this help\n";
    print "          -v   Verbose output\n";
    print "          -n   No effects - only print what would be done\n";
    print "       Removes .ast(L) file corresponding to given .bet file\n";
    exit 0;
}

# Called like this:
#   mbs_prunebet /users/beta/r4.2/foo.bet
# this script causes the following files to
# be deleted, if present:
#   /users/beta/r4.2/foo.ast
#   /users/beta/r4.2/foo.astL
#   /users/beta/r4.2/foo.astl
#
# The intended use of this is:
#  cvs update -W '*.bet -f "mbs_prunebet %s"'
# which should cause .ast files corresponding to updated
# .bet files to be removed. But -f does not work
# with client/server versions of CVS (:-(

$file=$ARGV[0];
$ast=$file;
$ast=~s/\.bet$/.ast/;
$astL=$ast."L";
$astl=$ast."l";

#print "argument: \n";
if (-f $ast){
   print "deleting: $ast\n";
   unlink $ast;
}
if (-f $astL){
   print "deleting: $astL\n";
   unlink $astL;
}
if (-f $astl){
   print "deleting: $astl\n";
   unlink $astl;
}
