#!/usr/local/bin/perl -s
#-*-Perl-*-

push(@INC, $ENV{'BETALIB'} . "/bin/admin");

require "utils.perl";

if ($h){
    print "Usage: rmastlocal [-h][-u][-l][-b][-a]\n";
    print "          -h   Print this help\n";
    print "          -v   Verbose output\n";
    print "          -n   No effects - only print what would be done\n";
    print "       Remove all .ast(L) files in local directory and subdirectories\n";
    exit 0;
}

$match='\.ast[lL]?';
$desc="all"; 
$match .= '$';

print "Scanning directories.\n";
@dirs = &GetDirsRecursively(".");
print "Scanning files.\n";
@files = &GetFilesInDirs(@dirs);

print "Removing files.\n";
foreach $file (@files) {
   if ($file =~ /$match/) {
      print "$file\n"; #if ($verbose);
      if (!$simulate) {
          unlink $file or print "Unable to delete file $file\n";
      }
   }
}
