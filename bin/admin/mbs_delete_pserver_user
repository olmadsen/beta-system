#!/usr/local/bin/perl

$htpasswd = "/usr/local/www/bin/htpasswd";
$pserverpasswd = "/users/beta/.CVSHOME/CVSROOT/passwd";

if ($#ARGV!=0){
   print "Usage: mbs_delete_pserver_user username\n";
   exit 1;
}

if (! -e "$htpasswd"){
   print "$htpasswd not found. You must run this on webserver\n";
   exit 1;
}

$user = $ARGV[0];

print "Delete pserver password for user $user? (n/y) ";
$answer = <STDIN>;
chomp $answer;
if ($answer ne "y"){
    print "$user not deleted.\n";
} else {
    system "$htpasswd -D $pserverpasswd $user";
    if ($? == -1) {
	print "htpasswd failed: $!\n";
	exit 1;
    }
}
