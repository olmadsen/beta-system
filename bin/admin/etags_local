#!/usr/local/bin/perl -s
#-*-Perl-*-

push(@INC, $ENV{'BETALIB'} . "/bin/admin");

require "env.perl";

if ($#ARGV < 0){
    print "usage: etags_local <pattern>\n";
    print "       where <pattern> are files to match\n";
    print "       e.g. '\\.html\$'\n";
    print "       or   '\\.(txt|html)\$'\n";
    exit;
}

$match = join (' ', @ARGV);

print "Creating emacs TAGS file.\n";


foreach $curdir (&GetDirsRecursively(".")) {
    next if ($curdir =~ /CVS$/);
    print "*** Searching $curdir ***\n";
    @files = &GetFilesInDirs($curdir);
    foreach $file (@files) {
	if ($file =~ /$match/) {
            print "  $file\n" if ($v);
	    push @Files, $file;
	}
    }
}

print "Tagging (be patient) ...";
system("etags -o TAGS -l none @Files");
print " done.\n"
