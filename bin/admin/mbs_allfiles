#!/usr/local/bin/perl5 -s
#-*-Perl-*-

require "dirlist";

open(FULL, ">$betalib/AllFilesInMBS.lst") or die "$betalib/AllFilesInMbs.lst: $!";

foreach $dir (@Dirs) {
    if (-d &path("$betalib/$dir")) {
	print "$dir...";
	@todo = ("$betalib/$dir");
	while ($dir = shift @todo) {
	    opendir (DIR, $dir) or die "Unable to readdir: $!";
	    foreach (readdir(DIR)) {
		next if ($_ eq "." || $_ eq "..");
		$file =  "$dir/$_";
		if (-d $file) {
		    push (@todo, $file);
		} else {
		    if ($file =~ /$betalib\/(.*)$/) {
			print FULL "$1\n";
		    } else {
			die "Argh!";
		    }
		}
	    }
	}
	print "done\n";
    }
}
close FULL;
