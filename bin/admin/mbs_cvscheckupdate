#!/usr/local/bin/perl5 -s
#-*-Perl-*-

push(@INC, $ENV{'BETALIB'} . "/bin/admin");

if ($h){
    print "Usage: mbs_cvscheckupdate [ -h ]\n";
    print "          -h   Print this help\n";
    print "          -v   Verbose output\n";
    print "       Checks if cvs update is needed in BETALIB\n";
    exit 0;
}

require "env.perl;

$|=1;

print "Checking if cvs update is needed (by means of cvs -n update)\n  in $betalib.\n";
print "  Notice: Will not check for missing directories!\n";

$basedir = "$betalib";
if (!-d &path("$basedir/CVS")) {
    print "Missing CVS directory in $betalib!  Bailing out! \n";
    exit 1;
}

system ("cvs -nq update -Pd") && print "CVS command failed\n";
