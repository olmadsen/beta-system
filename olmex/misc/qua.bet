ORIGIN '~beta/basiclib/v1.4/betaenv'
---LIB:attributes---
qua:
  (# as:< object; R: ^object; thisObj: ^as;
     quaError:< exception(# do 'Qualification error'->msg.append; INNER #)
  enter R[]
  do (if R## <= as## // true then 
         R[]->thisObj[];
	 INNER
      else quaError
     if)
  exit thisObj[]
  #)
---program:descriptor--
(# vehicle: (# owner: @ text #);;
   bus: vehicle(# noOfPass: @ integer #);
   car: vehicle(# private: @ boolean #);
   
   R: ^ vehicle; b: ^bus;
   n: @integer
do &bus[]->b[]->R[];  111->b.noOfPass; 

   R[]->qua(# as::bus do 111->thisObj.noOfPass; 'ok\n'->puttext #);

   (R[]->qua(# as::bus #)).noOfPass->n;
   
   (if n//111 then 'ok\n'->puttext else 'NonOk\n'->puttext if);
   
   R[]->qua
   (# as::car; quaError::(#do 'Not a car\n'->puttext; #) 
   do true->thisObj.private; 'non ok\n'->puttext  
   #);
#)
