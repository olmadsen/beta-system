(* Test ex. paa lister.
 * er pr|vet med begge for-l|kker og som man ser er der markant forskel.
 * For list2 skyldes forskellen nok at de er mere GC.
 * Jeg tror derfor det er vaerd at overveje at bruge repetitions i stedet
 * for linkede lister hvor det er muligt
 * 
 * Iovrigt d|r den med list1 med IOA overflow hvis 30000 erstattes med 100000
 *)
ORIGIN '~beta/basiclib/v1.4/betaenv'
---program:descriptor---
(#
   list1:
     (# R: [1] ^ text; top: @ integer;
     	insert:
     	  (# S: ^text
	  enter S[]
	  do (if (top+1->top) > R.range then
	     	 R.range*2 -> R.extend
	     if);
	     S[]->R[top][]
     #)#);
   list2:
     (# elm: (# T: ^text; succ: ^ elm #);
	head,tail: ^ elm;
	insert:
	  (# S: ^ text; R: ^elm
	  enter s[]
	  do &elm[]->R[];
	     (if head[]//NONE then
		 R[]->head[]->tail[]
	     if);
	     S[]->R.T[];
	     R[]->tail.succ[];
	     R[]->tail[]
     #)#);
   L1: @ list1;
   L2: @ list2;
   T: ^ text
do &text[]->T[];
   (for i: 30000 repeat T[]->L1.insert for);  (* sys:1.0, CPU: 0.8*)
   (for i: 50000 repeat T[]->L2.insert for);  (* sys:4.0, CPU: 3.8*) 
#)

		 
   
