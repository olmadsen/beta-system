origin '~beta/basiclib/betaenv';
INCLUDE '~beta/containers/list'
---program:descriptor---
(# ModelViewFW:
     (# model:<
          (# registerView:<
               (# v: ^view
               enter v[]
               do v[] -> vs.append
               #);
             changed:
               (#
               do vs.scan
                  (#
                  do this(model)[] -> current.update
                  #);
               #);
             vs: @viewList
          #);
        view:<
          (#
             update:< (# m: ^model enter m[] do INNER #);
          #);
        viewList: list(# element::view #)
     #);
   DrawFM: ModelViewFW
     (# model::<
          (# getFigure:
               (#
               do 'getFigure'->putline
               #)
          #);
        view::<
          (# update::<
               (#
               do m.getFigure
               #)
          #)
     #);
   D: @DrawFM;
   M: @D.model;
   V1,V2: @D.view
do V1[] -> M.registerView;
   V2[] -> M.registerView;
   M.changed
#)

             

