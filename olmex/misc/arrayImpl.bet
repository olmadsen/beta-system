ORIGIN 'array'
---rep:descriptor--
(# R: [range] ^element; 
   rLow,rHigh: @integer;

   range: 
     (#
     do high->rHigh;
        low->rLow;
        true->initialized
     exit rHigh-rLow+1
     #);
#)
--low:doPart--
do (if initialized//true then rep.rLow->value else INNER low if) 
--high:doPart--
do (if initialized//true then rep.rHigh->value else INNER high if) 
--put:doPart--
do (if (rep.rLow<=index) and (index<=rep.rHigh)//true then
       e[]->rep.R[index-rep.rLow+1][]
    else index->indexOutOfRange
   if)
--get:doPart--
do (if (rep.rLow<=index) and (index<=rep.rHigh)//true then
       rep.R[index-rep.rLow+1][]->e[]
    else index->indexOutOfRange
   if)
--extendLow:doPart--
do exception(#do 'extendLow is not implemented!'->msg #)
--extendHigh:doPart--
do n->rep.R.extend; rep.rHigh+n->rep.rHigh
--indexOutOfRange:doPart--
do 'Index ('->msg; index->msg.putint; ') out of range ('->msg.append;
   rep.rLow->msg.putInt; ':'->msg.put; rep.rHigh->msg.putInt; ')'->msg.put;
   INNER indexOutOfRange
