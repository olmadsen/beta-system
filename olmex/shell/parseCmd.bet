ORIGIN '~beta/basiclib/betaenv'
---lib:attributes---
parseCmd:
  (# T: ^text;
     cmd,args: ^text;
     ch: @char;
     nextCh: @
       (#
       do (if not T.eos then
              T.get -> ch
           else
              ascii.fs -> ch
          if)
       exit ch
       #);
     skipBlanks:
       (#
       do (if (ch <= ' ') and (ch <> ascii.fs) then 
              nextCh -> ch;
              restart skipBlanks
          if);      
       #);
     add:
       (# S: ^text
       enter S[]
       do (if ch > ' ' then 
             ch -> S.put; 
             nextCh -> ch;
           restart add
       if);
       #)
  enter T[]     
  do &text[] -> cmd[];
     &text[] -> args[];
     0 -> T.setPos;
     skipBlanks;
     
     (if ch >= ' ' then
         ch -> cmd.put
     if);
     nextCh -> ch;
     cmd[] -> add;

     skipBlanks;
     args[] -> add;
     (*'('->put; cmd[] -> puttext;':'->put; args[] -> puttext;')'->put*)
  exit(cmd[],args[])
  #)
