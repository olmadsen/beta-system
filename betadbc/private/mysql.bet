ORIGIN '~beta/basiclib/betaenv';
--lib:attributes--

(* int STDCALL mysql_ping(MYSQL *mysql); *)
mysql_ping:external
  (# mysql,result:@integer
  enter mysql
  do callStd 
  exit result
  #);

(* MYSQL * STDCALL mysql_init(MYSQL *mysql); *)
mysql_init:external
  (# mysql,result:@integer
  enter mysql
  do callStd
  exit result
  #);

(* MYSQL * STDCALL mysql_connect(MYSQL *mysql, const char *host,
 * const char *user, const char *passwd); 
 *)

mysql_connect:external
  (# mysql,connection:@integer;
     host,user,passwd:[0]@char
  enter (mysql,host,user,passwd)
  do callStd
  exit connection
  #);

(* int STDCALL mysql_select_db(MYSQL *mysql, const char *db); *)

mysql_select_db:external
  (# mysql,result:@integer;
     db:[0]@char
  enter (mysql,db)
  do callStd
  exit result
  #);

(* void STDCALL mysql_free_result(MYSQL_RES *result); *)
mysql_free_result:external
  (# resultset:@integer
  enter resultset
  do callStd
  #);

(* int STDCALL mysql_query(MYSQL *mysql, const char *q); *)
mysql_query:external
  (# connection,result:@integer;
     query:[0]@char
  enter (connection,query)
  do callStd
  exit result
  #);

(* MYSQL_RES *	STDCALL mysql_store_result(MYSQL *mysql); *)
mysql_store_result:external
  (# connection,result:@integer;
  enter connection
  do callStd
  exit result
  #);


(*MYSQL_ROW STDCALL mysql_fetch_row(MYSQL_RES *result); *)
mysql_fetch_row:external
  (# res,row:@integer;
  enter res
  do callStd
  exit row
  #);

(* void STDCALL mysql_close(MYSQL *sock); *)
mysql_close:external
  (# connection:@integer
  enter connection
  do callStd
  #);

(* BETA c-define wrappers *)

printerror:external
  (# mysql:@integer
  enter mysql
  #);

numOfCols:external
  (# mysqlres,cols:@integer;
  enter mysqlres
  exit cols
  #);

numOfRows:external
  (# mysqlres,rows:@integer;
  enter mysqlres
  exit rows
  #);

BMysql_getColumn:external
  (# mysqlres,col,ColumnName,ColumnNameType,DataType:@integer
  enter (mysqlres,col,ColumnName,ColumnNameType,DataType)
  #);

BMySql_getInteger:external
  (# mysqlrow,inx:@integer;
     result:@integer
  enter (mysqlrow,inx)
  exit result
  #);

BMySql_getText:external
  (# mysqlrow,inx:@integer;
     ptr:@integer
  enter (mysqlrow,inx)
  exit ptr
  #);

BMySql_AffectedRows:external
  (# connection,rows:@integer;
  enter connection
  exit rows
  #);

BMySql_getReal:external
  (# mysqlrow,inx:@integer;
     result:@real
  enter (mysqlrow,inx)
  exit result
  #);

(*
enum enum_field_types { FIELD_TYPE_DECIMAL, FIELD_TYPE_TINY,
			FIELD_TYPE_SHORT,  FIELD_TYPE_LONG,
			FIELD_TYPE_FLOAT,  FIELD_TYPE_DOUBLE,
			FIELD_TYPE_NULL,   FIELD_TYPE_TIMESTAMP,
			FIELD_TYPE_LONGLONG,FIELD_TYPE_INT24,
			FIELD_TYPE_DATE,   FIELD_TYPE_TIME,
			FIELD_TYPE_DATETIME, FIELD_TYPE_YEAR,
			FIELD_TYPE_NEWDATE,
			FIELD_TYPE_ENUM=247,
			FIELD_TYPE_SET=248,
			FIELD_TYPE_TINY_BLOB=249,
			FIELD_TYPE_MEDIUM_BLOB=250,
			FIELD_TYPE_LONG_BLOB=251,
			FIELD_TYPE_BLOB=252,
			FIELD_TYPE_VAR_STRING=253,
			FIELD_TYPE_STRING=254
};
 *)

FIELD_TYPE_DECIMAL:(# exit 0 #);
FIELD_TYPE_TINY:(# exit 1 #);
FIELD_TYPE_SHORT:(# exit 2 #);
FIELD_TYPE_LONG:(# exit 3 #);
FIELD_TYPE_FLOAT:(# exit 4 #);
FIELD_TYPE_DOUBLE:(# exit 5 #);
FIELD_TYPE_NULL:(# exit 6 #);
FIELD_TYPE_TIMESTAMP:(# exit 7 #);
FIELD_TYPE_LONGLONG:(# exit 8 #);
FIELD_TYPE_INT24:(# exit 9 #);
FIELD_TYPE_DATE:(# exit 10 #);
FIELD_TYPE_TIME:(# exit 11 #);
FIELD_TYPE_DATETIME:(# exit 12 #);
FIELD_TYPE_YEAR:(# exit 13 #);
FIELD_TYPE_NEWDATE:(# exit 14 #);
FIELD_TYPE_ENUM:(# exit 247 #);
FIELD_TYPE_SET:(# exit 248 #);
FIELD_TYPE_TINY_BLOB:(# exit 249 #);
FIELD_TYPE_MEDIUM_BLOB:(# exit 250 #);
FIELD_TYPE_LONG_BLOB:(# exit 251 #);
FIELD_TYPE_BLOB:(# exit 252 #);
FIELD_TYPE_VAR_STRING:(# exit 253 #);
FIELD_TYPE_STRING:(# exit 254 #);
