<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>




<TITLE> 3 Installation guide for Power Macintosh</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING5></A>


<P><A HREF=misc.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=install-unix.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P>Installation Guide</P>


<A NAME=HEADING5-0></A>
<H1> 3 Installation guide for Power Macintosh</H1>
<A NAME=HEADING5-1></A>
<H2> 3.1 The Mj&oslash;lner System on Macintosh</H2>
<P> This page describes how to use the Mj&oslash;lner System on Macintosh.</P>
<A NAME=HEADING5-3></A>
<H3> 3.1.2 MPW</H3>
<P> The current version of the BETA compiler on the Macintosh is available as an MPW tool. MPW stands for &quot;Macintosh Programmers Workshop&quot;, which is the official programming environment for the Macintosh, developed by Apple, Inc. The BETA compiler runs as an MPW tool, that is, it is a command, that can be invoked from the MPW Shell (command interpreter). </P>
<P> MPW 3.4 or later is needed to use BETA.  In addition to the MPW Shell, the compiler uses the MPW Link and Rez tools to build the programs.</P>
<A NAME=HEADING5-6></A>
<H2> 3.2 Requirements</H2>
<P> Power Macintosh (or Performa with RISC processor)</P>
<P> MacOS 7 or 8</P>
<P> 40 MB memory recommended.</P>
<P> At least 60-100 MB disk space (depending on the size of the harddisk)</P>
<P> MPW 3.4 or later</P>
<A NAME=HEADING5-12></A>
<H2> 3.3 Installation</H2>
<A NAME=HEADING5-13></A>
<H3> 3.3.1 Unpack</H3>
<P> </P>
<P> This distribution is stored as a self-extracting archive. To install the Mj&oslash;lner System, double-click the self-extracting archive.</P>
<A NAME=HEADING5-16></A>
<H4> 433.1.1. Configuring the Files</H4>
<P> After the beta folder is installed you need to move the file UserStartup&lt;APPLE&gt;beta in the beta folder to the MPW folder (the folder containing the MPW Shell). The purpose of UserStartup(beta is to set up the environment used by The Mj&oslash;lner System. When starting MPW the first time after you moved UserStartup(beta to the MPW folder, you will be asked to select the beta folder. The position of the beta folder will be remembered afterwards using the file BetaStartup(Home in the MPW folder. If this file is deleted or you move or rename the beta folder you will be prompted for the beta folder again.  During the first startup UserStartup(beta also creates the file BetaStartup(Menu.  In BetaStartup(Menu the &lt;BETA&gt; menu is defined as described below. You can modify this file to suit your specific needs. In case it is deleted a new standard Beta-Startup(Menu is created during the next startup of the MPW.</P>
<A NAME=HEADING5-18></A>
<H3> 3.3.2 CodeWarrior MPW</H3>
<P> As an alternative to Apple's MPW,  a MPW package is included in the MetroWerks CodeWarrior<A NAME=MARKER-2-38></A> package.  Information about MetroWerks can be found at</P>
<P>  http://www.metrowerks.com</P>
<P> Information about MetroWerks CodeWarrior can be found at</P>
<P>  http://www.metrowerks.com/products/cw/</P>
<A NAME=HEADING5-23></A>
<H3> 3.3.3 Additional Configuration for CodeWarrior MPW</H3>
<P> Using the CodeWarrior version requires additional configuration. The name of the CodeWarrior link tool is MWLinkPPC<A NAME=MARKER-2-39></A>, whereas the name of the linker in the MPW from Apple is PPCLink. The BETA compiler must be instructed to use the MWLinkPPC tool instead. This is done by inserting the following line in a MPW UserStartup file:</P>
<P>  set -e betaopts -s 70</P>
<P> A MPW UserStartup is a file with a name like UserStartup&yen;john that are located in the MPW folder.</P>
<P> An alternative method is to rename the MWLinkPPC tool to PPCLink.</P>
<P> </P>
<A NAME=HEADING5-29></A>
<H2> 3.4 Macintosh Specific Issues</H2>
<A NAME=HEADING5-30></A>
<H3> 3.4.1 Using MPW - Macintosh Programmers Workshop</H3>
<P> This section briefly describes how to use MPW<A NAME=MARKER-2-40></A> for compiling and running BETA applications.</P>
<P> MPW is a program development environment for the Macintosh computers with tools for editing, compilation and execution of e.g. BETA programs. MPW is a command driven interface to the Macintosh operative system (analogous to the Unix shell).</P>

<P> MPW is centered around the concept of a worksheet<A NAME=MARKER-2-41></A>, where the commands are entered and thereafter executed. A worksheet saves its contents from session to session and can therefore be used to contain the most often used commands such that they can be easily executed in later sessions. The commands in the worksheet can be edited using the usual Macintosh editing facilities.<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-3">[3]</A></EM></P>

<P> Commands can be executed from the worksheet in two different ways:</P>
<UL>
<LI> The text cursor is placed somewhere in the command line and the Enter key<A NAME=MARKER-2-42></A><EM><A REL=FOOTNOTE HREF="#FOOTNOTE-4">[4]</A></EM> is pressed. The entire line will then be executed as one command.
<LI> Some text may be selected and the Enter key is pressed. The selected text will then be executed as one command.3.1 Using MPW for BETA programming
</UL>
<P> When starting MPW after installation, an environment is set up to make it easy to use the BETA system. The BETA compiler can be executed either using the script beta or by using the special &lt;BETA&gt; menu.</P>
<P> Notice that you only need to activate the BETA compiler on the program fragment that constitutes the application. If the program fragment uses other fragments (libraries), these are automatically included by the compiler and linker. If some fragments have been changed since the last compilation, these fragments will automatically be recompiled.</P>
<A NAME=HEADING5-41></A>
<H4> 3.4.1.1 The &lt;BETA&gt; Menu<A NAME=MARKER-2-43></A></H4>
<P> The BETA environment defines a &lt;BETA&gt; menu containing items which makes it easy to use the BETA compiler.</P>

<P> The items are:</P>
<UL>
<LI>Compile {Active}<A NAME=MARKER-2-44></A> Compile the front most window
<LI>Recompile<A NAME=MARKER-2-45></A> Compile the previously compiled file again
<LI>Compile File...<A NAME=MARKER-2-46></A> Prompts the user for a file, and compiles the selected file
<LI>Execute<A NAME=MARKER-2-47></A> Execute the last compiled file
<LI>Open Fragment<A NAME=MARKER-2-48></A> Tries to open the selection. The selection is treated as a BETA file name, e.g. ~beta/guienv/guienv
<LI>Directory {Active}<A NAME=MARKER-2-49></A> Changes directory to the location of the file shown in the front most window
<LI>-Application<A NAME=MARKER-2-50></A> Compile the BETA program as an application (default)
<LI>-Tool<A NAME=MARKER-2-51></A> Compile the BETA program as an MPW Tool
</UL>

<P> In most cases, the &lt;BETA&gt; menu defines the necessary interface to the BETA compiler. However, the advanced user may prefer to use the beta script instead, please see <A HREF="../bibliography/index.html#mia90-02">[MIA 90-02]</A> for legal options etc.</P>
<P> When selecting Compile {Active} the beta script is invoked with the active window as argument. The script first executes the BETA compiler and then executes the job file generated by the compiler. The job file links the compiled application. Output during compilation is directed to a separate MPW window.</P>
<A NAME=HEADING5-56></A>
<H5> Application and Tool</H5>
<P> The options -Application and -Tool specify whether the generated application should be a Macintosh stand-alone application or a MPW tool<A NAME=MARKER-2-52></A>. The default is that the application is linked as a Macintosh stand-alone application. If a BETA program uses the input/output streams keyboard and screen in betaenv and is executed as a stand-alone Macintosh application, a simple console window is opened. The input/output stream is redirected to this window. The console also defines the standard _, File, and Edit menus. The Cut, Copy, and Paste items in the Edit menus are available.</P>
<P> The execution can be stopped by selecting Quit in the File menu.</P>
<P> Notice, that if the program is using GuiEnv<A NAME=MARKER-2-53></A>, it must be compiled as a stand-alone application<A NAME=MARKER-2-54></A>. The input/output is in this case redirected to a special GuiEnv window.</P>
<A NAME=HEADING5-60></A>
<H4> 3.4.1.2. Free Download of MPW</H4>
<P> As of October 1997, Apple has decided to make MPW freely available for downloading. It can be downloaded from</P>
<P> </P>
<P>  <EM>ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/</EM></P>
<P> </P>
<P> The current versions of the packages needed are</P>
<P> </P>
<P>  MPW-3.4.2.sit.hqx</P>
<P>  Interfaces_Libraries-3.0.1.sit.hqx</P>
<P> </P>
<P> Please notice, that new versions may be available when you read this.</P>
<P> </P>
<A NAME=HEADING5-72></A>
<H4> 3.4.1.3 CodeWarrior MPW</H4>
<P> As an alternative to Apple's MPW, a MPW package is included in the MetroWerks CodeWarrior package.  Information about MetroWerks can be found at</P>
<P> </P>
<P>  <EM>http://www.metrowerks.com/</EM></P>
<P> </P>
<P> Information about MetroWerks CodeWarrior can be found at</P>
<P> </P>
<P>  <EM>http://www.metrowerks.com/products/cw/</EM></P>
<A NAME=HEADING5-80></A>
<H4> 3.4.1.4. Additional Configuration for CodeWarrior MPW</H4>
<P> Using the CodeWarrior version requires additional configuration. The name of the CodeWarrior link tool is MWLinkPPC, whereas the name of the linker in the MPW from Apple is PPCLink. The BETA compiler must be instructed to use the MWLinkPPC tool instead. This is done by inserting the following line in a MPW UserStartup file: </P>
<P> </P>
<PRE CLASS=beta>
	set -e betaopts -s 70
</PRE>
<P> </P>
<P> A MPW UserStartup is a file with a name like UserStartup?john that is located in the MPW folder.  An alternative method is to rename the MWLinkPPC tool to PPCLink.   </P>
<A NAME=HEADING5-86></A>
<H3> 3.4.2 Getting started on Macintosh</H3>
<P> The following steps are usually performed when handling BETA programs under MPW: </P>
<P> </P>
<P> MPW is started by double clicking the MPW Shell icon or on a BETA  source file (.bet). This opens MPW with the worksheet document in    a window. </P>
<P> We now edit the BETA program text. This may be initiated in two different ways: </P>
<P> We open an existing BETA file by selecting the Open entry in the File menu.</P>
<P> We create a new file for the BETA program by selecting the New entry in the File menu. The file name must end with .bet.</P>
<P> Now edit the file using the ordinary Macintosh editing facilities in the window containing the program.</P>
<P> Save the changed BETA program using the Save entry in the File menu.</P>
<P> Select Compile {Active} in the BETA menu.</P>
<P> Messages will now be written in the {MPW}:compilerOutput window. These messages informs about the progress of the compilation, and eventually about syntactic and semantic errors.</P>
<P> The program may now be executed by selecting Execute in the BETA menu.</P>
<P> Close MPW using the Quit entry in the File menu Steps 3, 4, 5 and 7 may be repeated over and over, while making changes to the same program.</P>
<A NAME=HEADING5-99></A>
<H3> 3.4.3 Memory Requirements<A NAME=MARKER-2-55></A> </H3>
<A NAME=HEADING5-100></A>
<H4> 3.4.3.1 Memory Requirements to MPW Shell</H4>


<P> To ensure proper workings of MPW and the BETA compiler, you should
ensure, that enough memory is allocated for MPW. In order to run the
BETA compiler at least 15 MB of memory must be allocated to the MPW
Shell. The amount of memory can be set by selecting the MPW Shell icon
and using the Show Info command in the Finder as illustrated in the
figure below:</P>

<P> </P>
<CENTER> <IMG ALIGN=TOP WIDTH=354 HEIGHT=401 SRC=MPW-info.gif></CENTER>
<P> </P>

<P> More memory allocated to MPW makes the compiler and especially the
linker run faster.</P>

<A NAME=HEADING5-107></A>
<H4> 3.4.3.2 BETA Application Memory Requirements</H4>
<P> You may have to increase the memory requirements of a compiled BETA application (1,5 MB for a BETA application). This is done by selecting the BETA application, and then use the Show Info command in the Finder.</P>
<A NAME=HEADING5-109></A>
<H3> 3.4.4 A Session Using the BETA Compiler</H3>
<P> The following steps are usually performed when handling BETA programs under MPW:</P>
<UL>
<LI> MPW is started by double clicking the MPW Shell icon or on a BETA source file (.bet). This opens MPW with the worksheet document in a window. 
<LI> We now edit the BETA program text. This may be initiated in two different ways:
<UL>
<LI>a) We open an existing BETA file by selecting the Open entry in the File menu.
<LI>b) We create a new file for the BETA program by selecting the New entry in the File menu. The file name must end with .bet.
</UL>
<LI> Now edit the file using the ordinary Macintosh editing facilities in the window containing the program.
<LI> Save the changed BETA program using the Save entry in the File menu.
<LI> Select Compile {Active} in the &lt;BETA&gt; menu.
<LI> Messages will now be written in the {MPW}:compilerOutput window. These messages informs about the progress of the compilation, and eventually about syntactic and semantic errors.
<LI> The program may now be executed by selecting Execute in the &lt;BETA&gt; menu.
<LI> Close MPW using the Quit entry in the File menu.
</UL>
<P> Steps 3, 4, 5 and 7 may be repeated over and over, while making changes to the same program.</P>
<A NAME=HEADING5-122></A>
<H3> 3.4.5 Errors and Configuration</H3>
<A NAME=HEADING5-123></A>
<H4> 3.4.5.1 Memory Allocation Errors</H4>
<P> When compiling programs or running BETA applications, memory is allocated when needed. During compilation memory is allocated in the MPW heap and during execution of BETA applications memory is allocated in the application heap. In case the execution runs out of memory, one of the following messages can appear:</P>

<UL>
<LI> IOA heapspace full<A NAME=MARKER-2-56></A>
<LI> Couldn't allocate ToSpace<A NAME=MARKER-2-57></A>
<LI> Couldn't allocate IOA<A NAME=MARKER-2-58></A>
</UL>
<P> You will then have to increase the memory heap as described in section 2.3.</P>
<A NAME=HEADING5-130></A>
<H4> 3.4.5.2 Virus detectors<A NAME=MARKER-2-59></A></H4>
<P> Some virus detectors (e.g. Vaccine and Gatekeeper) do not allow MPW to operate correctly. Gatekeeper complains during compilation of a BETA program. Vaccine does not complain; but causes MPW to run erroneously, typically to hang. Therefore Vaccine and Gatekeeper must be configured to accept MPW.</P>
<A NAME=HEADING5-132></A>
<H4> 3.4.5.3 Problems with Memory</H4>
<P> In case the system is unable to launch an application from MPW, the problem might be lack of memory. A solution could be to exit MPW and activate the application from the Finder by double-clicking on the application icon.</P>
<A NAME=HEADING5-134></A>
<H4> 3.4.5.4 Directories in Fragments</H4>
<P> Please notice, that directories in ORIGIN, INCLUDE etc. in fragments must be specified using the Unix directory syntax<A NAME=MARKER-2-60></A>. That is, the Macintosh file:</P>

<P>  {betalib}guienv:v1.4:guienv</P>
<P> must e.g. in an ORIGIN property of a fragment be specified as:</P>
<P>  ORIGIN '~beta/guienv/guienv'</P>
<P> Please also note, that ~beta/ is used instead of {betalib}.</P>
<P> </P>
<A NAME=HEADING5-142></A>
<H3> 3.4.6 Accessing the Macintosh Toolbox from BETA</H3>
<P> Programming the Macintosh is done through the Toolbox<A NAME=MARKER-2-61></A>. The Toolbox includes a large number of routines and they are all documented in Inside Macintosh<A NAME=MARKER-2-62></A>. There exists a BETA interface to most of these routines such that they can be used in a BETA program. </P>
<P> The fragment maclib in file {betalib}maclib:v3.0:maclib contains this toolbox interface.</P>
<A NAME=HEADING5-145></A>
<H4> 3.4.6.1 BETA extensions to the Toolbox</H4>
<P> Object oriented extensions to the interface to the Macintosh Toolbox have been built in order to make it possible to program the Macintosh in 'the BETA way.' Using purely Toolbox interface routines from BETA forces you to program in a Pascal-like fashion.</P>
<P> The fragments in the folder {betalib}guienv:v1.4: contain an environment (GuiEnv<A NAME=MARKER-2-63></A>) where windows, text editors, dialogs, menus, etc. have been lifted to 'real' BETA patterns with an object oriented interface.</P>
<P> The GuiEnv environment are documented in The Mj&oslash;lner System - Lidskjalv: User Interface Framework, Mj&oslash;lner Informatics Report MIA-95-30.</P>
<P> The Toolbox interface is documented in The Mj&oslash;lner System - Macintosh Libraries, Mj&oslash;lner Informatics Report MIA-90-10.</P>
<P> The folder {betalib}demo:maclib: contain demo programs using the Toolbox interface and the folder {betalib}demo:guienv: contain demo programs using the object oriented extensions.</P>
<A NAME=HEADING5-151></A>
<H3> 3.4.7 Adding Resources to Applications built with the BETA Compiler</H3>
<P> You may use macintosh resource files in your application. You do this by specifying a RESOURCE property<A NAME=MARKER-2-64></A>, e.g.</P>
<P> </P>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/betaenv';
RESOURCE ppcmac 'foo.r;
-- program: descriptor --
(# do ... #)
</PRE>
<P> </P>
<P> The BETA compiler will automatically compile all the resources in  &quot;foo.r&quot; into the application.  The extension '.r' tells the system that the resource file is a textual description that must be compiled using the MPW Rez<A NAME=MARKER-2-65></A> tool. If the extension is '.rsrc<A NAME=MARKER-2-66></A>' the system knows that the resource is a compiled resource file, and it will include the compiled resources without calling the Rez tool.</P>
<P> You may need to use the lowlevel Toolbox interface to utilize these resource in the current version of the libraries.</P>
<P> </P>
<A NAME=HEADING5-162></A>
<H2> 3.5 Additional Information for Macintosh </H2>
<A NAME=HEADING5-163></A>
<H3> 3.5.1 Limitations for Macintosh</H3>
<P> See http://www.daimi.aau.dk/~beta/FAQ/#PartV (PartV: Platform Specific Issues).</P>






<HR>

<A NAME=FOOTNOTE-3>[3] </A>
 Please se your Macintosh manuals for how to use your Macintosh.
<HR>

<A NAME=FOOTNOTE-4>[4] </A>
 The Enter key is located in the lower right corner of the numeric keypad. Pressing the Return key will just insert a carriage return






<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="40%" align="left">
<ADDRESS>Installation Guide</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=misc.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=install-unix.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
