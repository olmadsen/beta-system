<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> 1  Installation Guide for PC's running Windows NT / 95 / 98 / 2000</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING3></A>


<P><A HREF=install-unix.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P>Installation Guide</P>


<A NAME=HEADING3-0></A>
<H1> <A NAME="LINK-install-_Toc402869257"><A NAME=MARKER-9-3></A>1  Installation Guide for PC's running Windows NT / 95 / 98 / 2000</A></H1>
<P> This chapter contains the installation guide for the Mj&oslash;lner System on Windows NT and Windows 95 using the Microsoft or GNU SDK.</P>
<A NAME=HEADING3-2></A>
<H2> 1.1 Minimum Requirements <A NAME=MARKER-2-5></A></H2>
<P> Requirements for using the Mj&oslash;lner System on Windows NT/95/98/2000:</P>
<P> </P>
<UL>
<LI>CPU: 386/486/586/Pentium or compatible.
<LI>RAM: At least 16Mb RAM. 32Mb (or more) recommended.
<LI>Free disk space: Approximately 100Mb
<LI>Linker and standard C libraries from either Microsoft or GNU
<LI>Windows 95/98/2000 or Windows NT 3.5.1/NT 4.0 or later.
</UL>
<A NAME=HEADING3-10></A>
<H2> 1.2 Installation</H2>
<A NAME=HEADING3-11></A>
<H3> 1.2.1 Run the <A NAME="setup"><CODE>Setup</CODE> program</A><A NAME=MARKER-2-6></A></H3>
<P> To install The Mj&oslash;lner System, run the <CODE>Setup</CODE> Program, which can be found on the Mj&oslash;lner System CD in the folder named</P>
<P> </P>
<PRE CLASS=beta>
\windows\&lt;SDK&gt;\Disk1
</PRE>
<P> </P>
<P> where &lt;SDK&gt; is one of the following: <CODE>ms</CODE> or <CODE>gnu</CODE>.</P>
<P> </P>
<P> The <CODE>Setup</CODE> Program installs The Mj&oslash;lner System
on your system in the directory you specify. Throughout the rest of
this document, BETALIB refers to the directory chosen here.</P>

<A NAME=HEADING3-19></A>
<A NAME=HEADING3-20></A>
<H3> 1.2.2 Set up Environment Variables<A NAME=MARKER-2-7></A></H3>
<P> When the installation is completed you should make sure that the
programs and batch files are in your path. If you installed the
Mj&oslash;lner System in e.g.<CODE> C:\BETA</CODE>, the batch files are located in
<CODE>C:\BETA\bin</CODE> and the programs are in
<CODE>C:\BETA\bin\nti_&lt;SDK&gt;</CODE>.</P>


<P> </P>
<P> BETALIB should point to the location of the installation directory
of the Mj&oslash;lner System, e.g. <CODE>C:\BETA</CODE>.  If not set, the system
uses the path chosen during the installation.</P>

<P> </P>
<P> The setup for the Microsoft tools could look something like:</P>
<P> </P>
<PRE CLASS=beta>
set PATH=C:\MSDEV\BIN;%PATH%
set LIB=C:\MSDEV\LIB;
set PATH=C:\BETA\BIN;C:\BETA\BIN\NTI_MS;%PATH%
</PRE>
<P> </P>
<P> The setup for the Gnu tools could look something like:</P>
<P> </P>
<PRE CLASS=beta>
set GNU=C:\GNU
set PATH=%GNU%\BIN;%PATH%
set PATH=C:\BETA\BIN;C:\BETA\BIN\NTI_GNU;%PATH%
set GCC_EXEC_PREFIX=%GNU%\LIB\GCC-LIB\
set C_INCLUDE_PATH=%GNU%\INCLUDE
set LIBRARY_PATH=%GNU%\LIB
</PRE>
<P> </P>
<P> You can make Windows NT set the environment variables
automatically each time you log in via the System tool in the Control
Panel.</P>

<P> You can make Windows 95 set the environment variables
automatically each time you log in by setting them in the file
c:\autoexec.bat.</P>

<P> If you install the Mj&oslash;lner System for more than one SDK,
you can use the same location for all installations, as most of the
files are shared.</P>

<A NAME=HEADING3-43></A>
<H2> 1.3 Installing an SDK</H2>
<P>  To use the Mj&oslash;lner System you must also install one of the
following:</P>

<UL>
<LI>Microsoft Win32SDK including: a linker: <CODE>LINK.EXE</CODE>, a make program:
<CODE>NMAKE.EXE</CODE> (optional) and C libraries. These can be obtained through
e.g. Microsoft Visual C++ v4.0 or later. <CODE>NMAKE.EXE</CODE> is only needed if
the MAKE property is used, which is not recommended.
<P></P>
<LI>GNU Win32SDK including: a linker: <CODE>LD.EXE</CODE> and <CODE>GCC.EXE</CODE>, a make
program: <CODE>GMAKE.EXE</CODE> (optional) and C libraries. <CODE>GMAKE.EXE</CODE> is only
needed if the MAKE property is used, which is not recommended.
</UL>
<P> </P>

<A NAME=HEADING3-48></A>
<H3> 2.3.1. Installing the Microsoft Win32SDK</H3>
<P> You will need to install the Microsoft SDK including all library
files. Also, make sure that you have the LINK.EXE program in your
path. This program may not be installed automatically - if this is the
case simply locate it on your CD-ROM and copy it to a directory in
your path. </P> 

<A NAME=HEADING3-50></A>
<H3> 2.3.2. Installing the Gnu Win32SDK</H3>
<P> You will find the GNU sdk on the CD in <a href="../../utils/windows/GNU"><CODE>utils/windows/GNU</CODE></a> or at

<BLOCKQUOTE>
<A HREF="ftp://ftp.mjolner.com/mjolner-system/r5.2/utils/GNU/">
<CODE>ftp://ftp.mjolner.com/mjolner-system/r5.2/utils/GNU/</CODE>
</A>
</BLOCKQUOTE>

<P> </P>
<P> Execute the package <CODE>gcc-2.95.2-crtdll.exe</CODE>.  The recommended
place to install it is in <CODE>c:\gcc-2.95.2</CODE> or in a similar
directory on a different drive.</P>

<P> Due to an omission in the runtime library of the original gcc-2.95.2
Mingw release you will not be able to create GUI programs unless you also
install new runtime libraries in the c:\gcc-2.95.2 directory.  These
are in the <CODE>runtime-bin-crtdll-2000-03-27.zip</CODE> file found
at the same place as the <CODE>gcc-2.95.2-crtdll.exe</CODE> file above.

<P> If you have a CD then the following will install the
updated runtime libraries:  Start a
shell (MSDOS prompt) and then type the following commands (this assumes
that you installed GCC on the C drive and your CD is the E drive):

<BLOCKQUOTE>
<CODE>
c:
cd \gcc-2.95.2
e:\utils\windows\GNU\unzip e:\utils\windows\GNU\runtime-bin-crtdll-2000-03-27.zip
</CODE>
</BLOCKQUOTE>

<P> </P>

<A NAME=HEADING3-57></A>
<H2> 1.4 Notes</H2>
<UL>
<LI>You must NOT install the Mj&oslash;lner System in a directory
containing spaces in the path.  
<LI>If you are installing on Windows NT you must have Administrator
privileges. Otherwise no program group will be created.<A
NAME=MARKER-2-8></A> 
<LI>The file <CODE>DelsLog.1</CODE> located in BETALIB is a file used
by the uninstall mechanism. It should not be deleted. 
</UL>

<A NAME=HEADING3-61></A>
<H2> 1.5 Windows Specific Issues</H2>
<A NAME=HEADING3-62></A>

<H3> 1.5.1 Using Windows Resource Files<A NAME=MARKER-2-9></A></H3>
<P> You may use Windows resource files in your BETA programs. You do
this by specifying a RESOURCE property<A NAME=MARKER-2-10></A>,
e.g.</P> 

<PRE CLASS=beta>
ORIGIN '~beta/basiclib/betaenv';
RESOURCE nti 'foo.res';
-- PROGRAM:descriptor--
(# do ...
#)
</PRE>

<P> This specifies, that when linking, the <CODE>foo.res</CODE> precompiled
resource file should be included. You may also specify inclusion of a
non-compiled resource file (<CODE>foo.rc</CODE>). This will make the compiler
generate appropriate calls of the resource compiler for the SDK
used. If you are using Microsoft SDK, this requires, that you have the
<CODE>RC.EXE</CODE> <A NAME=MARKER-2-11></A>tool installed, and that it can be
found in your path. </P>

<A NAME=HEADING3-71></A>
<H3> 1.5.2 Calling External Functions</H3>
<P> As shown in, e.g. <A
HREF="../bibliography/index.html#mia94-24">[MIA 94-24]</A>, functions
and procedures produced by the C compilers can be called from within
BETA. Normally you will just prefix your pattern with external<A
NAME=MARKER-2-13></A> to achieve this. On Windows there are,
however, two different ways to call C:</P>

<OL>
<LI>If the C function is declared as <CODE>__stdcall</CODE><A
NAME=MARKER-2-14></A>, you must specify <CODE>callStd</CODE> <A
NAME=MARKER-2-15></A>in the do-part of the BETA external declaration,
e.g. 
<UL>
<LI> In C: 
<PRE CLASS=beta>
int __stdcall foo1();
</PRE>
<LI> In BETA:
<PRE CLASS=beta>
foo1: external
  (# result: @integer;
  do callStd;
  exit result
  #);
</PRE>
</UL>
Notice, that many C header files has defined <CODE>WINAPI</CODE>
<A NAME=MARKER-2-16></A>as an alias for <CODE>__stdcall</CODE>. 
<LI>Otherwise you can specify <CODE>callC</CODE> <A
NAME=MARKER-2-17></A>in the do-part. This is default, so leaving out
the do-part is equivalent. 
</OL>

<A NAME=HEADING3-85></A>
<H3> 1.5.3 Linking without Console<A NAME=MARKER-2-18></A></H3>
<P> By default the programs are linked in such a way that they always
include a console. To avoid this you can use 'switch 71' on the
compiler, e.g., run 
</P>

<PRE class=beta>
beta -s 71 foo.bet
</PRE>

<P>
to link <CODE>foo.exe</CODE>
without a console.
</P> 


<A NAME=HEADING3-87></A>
<H2> 1.6 Additional Information for the Windows Implementation</H2>
<A NAME=HEADING3-88></A>

<H3> 1.6.1 Limitations for the Windows Implementation</H3>

<P>
See the BETA FAQ: 
<A HREF="http://www.daimi.au.dk/~beta/doc/faq/beta-language-faq.html#SectionVI">
<CODE>http://www.daimi.au.dk/~beta/doc/faq/beta-language-faq.html#SectionVI</CODE>
</A>
</P>

<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Installation Guide</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=install-unix.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
