<H1><INX>MySQL</INX> interface tutorial</H1>

<H2>On MySQL</H2> 

Working with MySql has two advantages over Oracle and Microsoft Access.
<ul>
<li>In MySQL you can use excactly the same SQL syntax on SGIs and Windows PCs. Consequently, Beta users do not have to change their source code when porting programs from one platform to another.

<li>Using MySQL it is quite easy to move data between databases on different platforms. There is no easy way to do this when working with MS Access or Oracle.
</ul>


<H2>Downloading and installing MySQL</H2>

You can download MySQL at <pre>http://www.mysql.com</pre>
<p>
Installing MySQL on Windows is straightforward.
</p>
Installing MySQL on Unix is done as follows:
<beta>
gunzip ...
tar -xvf ...
./scripts/mysql_install_db
./bin/safe_mysqld
</beta>

<H2>Creating databases and users </H2>
<p>The database is now up and running. By default it has only one user called 'root' whose password is empty. New users are created using eg. GRANT statements as follows:
</p>
Start MySQL as user 'root' on the database 'mysql':
<beta>
./bin/mysql -u root mysql
</beta>

Create a user called 'firstusr' whose password is 'firstpswd':
<beta>
mysql> GRANT ALL PRIVILEGES ON *.* TO firstusr@localhost IDENTIFIED BY 'firstpswd' WITH GRANT OPTION;
mysql> GRANT ALL PRIVILEGES ON *.* TO firstusr@"%" IDENTIFIED BY 'firstpswd' WITH GRANT OPTION;
</beta>
Additional users can be created in a similar fashion.

Now create a database for the user 'firstusr':
<beta>
./bin/mysqladmin -u firstusr -p create firstdb
</beta>
This creates a database 'firstdb' after prompting for the password.

The user 'firstusr' can now log on to the database 'firstdb':
<beta>
./bin/mysql -u firstusr -p firstdb
</beta>

Tables can now be created using standard SQL statements:
<beta>
mysql> CREATE TABLE test (name CHAR(200) NOT NULL, KEY index_name (name(10)));
</beta>

<H2>Communicating with MySQL from a Beta program:</H2>

To utilize the MySQL interface in Beta you must do two things:
<ul>
<li>The Beta program must have its ORIGIN set to <pre>'~beta/betadbc/betadbc-mysql'</pre>
<li>After using connection.open you must select the database by using <pre>connection.<INX>select_db</INX></pre>
</ul>

To illustrate these points here are 10 lines from the adhoc.bet demo program:
<BETA> 
ORIGIN '~beta/betadbc/betadbc-mysql';
INCLUDE '~beta/basiclib/formatio'
        '~beta/basiclib/numberio' '~beta/basiclib/file';
-- program: Descriptor --
(#
   sqlCon: @Connection; stmt: @sqlCon.DirectSQLStatement;
   res: ^sqlCon.resultSet
do
   'hi there'->putline;
   (2->arguments,3->arguments,4->arguments)->sqlCon.open;
   'firstdb'->sqlCon.selectdb;
</beta>
adhoc is then invoked as follows:
<beta>
./adhoc vertigo firstusr firstpswd
 </BETA>
<P>
Where vertigo is the host on which the MySQL server is running. It is possible to use 'localhost'.
</P>
<P>
Please note that shared variables is currently not possible when using the MySQL interface. Suggested workaround: build your SQL statement dynamically using append or putformat.

<H2>Moving data between servers</H2>
<INX>mysqldump</INX> is useful for moving data from one MySQL server to another:
<beta> 
./bin/mysqldump -u firstusr -p firstdb > firstdb.txt
 </beta>
firstdb.txt is now a text file containing SQL statements. These statements will construct the tables and data of firstdb on another MySQL server when used as follows:
<beta> 
./bin/mysql/mysql -u firstusr -p < firstdb.txt.
</beta>
 
