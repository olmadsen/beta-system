<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> Motif Text Editor Widgets</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING32></A>


<P><A HREF=xwindows-33.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=xwindows-31.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=xwindows-27.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> MotifEnv</P>


<A NAME=HEADING32-0></A>
<H1> Motif Text Editor Widgets</H1>
<P> The three remaining widgets in the <A HREF="xwindows-31.html#HEADING31-0">figure of the primitive widget-hierarchy</A> are:</P>

<UL>
<LI><CODE>MotifText</CODE><A NAME=MARKER-2-290></A>: provides a single- or
multiline text editor for customizing both user and programmatic
interfaces. <BR>It can be used for single-line string entry, forms entry
with verification procedures, and full-window editing. <BR>It provides an
application with a consistent editing system for textual data. The
screen's textual data adjusts to the application writer's
needs. <BR>MotifText provides separate callbacks to verify movement of the
insert cursor, modification of the text, and changes in input
focus. Each of these callbacks provides the verification function with
the widget instance, the event that caused the callback, and a data
structure specific to the verification type. From this information the
function can verify if the application considers this to be a
legitimate state change and can signal the MotifText whether to
continue with the action. <BR>A MotifText allows the user to select
regions of text. Selection is based on the Interclient Communication
Conventions (ICCC) selection model. A MotifText supports both primary
and secondary selection.


<P></P>
<LI><CODE>ScrolledText</CODE><A NAME=MARKER-2-291></A>: Utility pattern for
instantiating a MotifText within a ScrolledWindow.


<P></P>
<LI><CODE>TextField</CODE><A NAME=MARKER-2-292></A>: Like MotifText, but contains
just one line of text. Used primarily for text entry fields in
dialogs.

</UL>
<A NAME=HEADING32-5></A>
<H1> Examples using Motif Text Editor Widgets</H1>
<P> This is an example showing how to create a MotifText within a ScrolledWindow using the pattern ScrolledText.</P>
<A NAME=HEADING32-7></A>
<A NAME=scrolledtext.bet><H4 CLASS=betacaption>scrolledtext.bet</H4></A>
<PRE CLASS=beta>
ORIGIN '~beta/Xt/motifenv';
INCLUDE '~beta/Xt/motif/texts';
-- PROGRAM: descriptor --
MotifEnv
(# txt: @ScrolledText
     (# init::&lt;
          (# 
          do 10 -&gt; rows;
             80 -&gt; columns;
             false -&gt; resizeWidth;
             false -&gt; resizeHeight;
          #)
     #);
do txt.init;
#)
</PRE>
<P> This program creates a MotifText within a composite ScrolledWindow widget, which provides scroll bars for its child. The ScrolledText widget is conceptually a specialization of MotifText, that has some ScrolledWindow attributes too.</P>
<P> When the above program is run, a text editor with 10 lines, each of 80 characters appears:</P>
<P> </P>
<BLOCKQUOTE><IMG ALIGN=TOP SRC=images/motifenv/scrolledtext.gif></BLOCKQUOTE>
<P> </P>

<P> The MotifText widget and the corresponding TextField widget have several callbacks installed: Virtual callbacks are called just before, and right after text is inserted into the buffer, when the widget gains and looses keyboard focus, when the widget gains or looses ownership of the X Window selection, when the insert cursor is moved within the buffer, etc.</P>

<P> The following example shows how to use the modifyVerifyCallback, which is called just before text is inserted into the buffer.The example shows how to implement the often used &quot;enter password&quot; field, where the characters typed is not visible on screen. To do this, within the callback, the character to be inserted into the buffer is changed to a '*'. This is done by manipulating the callback-data, which contains pointers to externally allocated stuctures containing, among other things, the character(s) to be inserted to the text buffer, after the callback.</P>
<P> The example is somewhat complex, and may be skipped at first reading.</P>
<A NAME=HEADING32-34></A>
<A NAME=getpasswd.bet><H4 CLASS=betacaption>getpasswd.bet</H4></A>
<PRE CLASS=beta>
ORIGIN '~beta/Xt/motifenv';
INCLUDE '~beta/Xt/motif/texts';
INCLUDE '~beta/Xt/motif/rowcolumn';
INCLUDE '~beta/Xt/motif/label';

-- PROGRAM: descriptor--
MotifEnv
(# rowcol: @RowColumn
     (# prompt: @Label
          (# init::&lt; (# do 'Enter password:' -&gt; labelString #)#);
        getpasswd: @MotifText
          (# passwd: @text; (* Used to save the password typed *)
             init::&lt;
               (# do XmSINGLE_LINE_EDIT -&gt; editMode #);
             modifyVerifyCallback::&lt;
               (* Called before text is deleted or inserted *)
               (# typedtext: @XmTextBlockRec;
                  string: @CString;
                  inx: @integer;
                  txt: @text;
               do data.text -&gt; typedtext;
                  (if typedtext.ptr=0 then 
                      (* BackSpace/Delete was typed: 
                       * Delete char in copy of typed password
                       *)
                      data.currInsert -&gt; inx;
                      (if inx&gt;0 then 
                          (inx, inx) -&gt; passwd.delete 
                      if);
                   else                
                      (if typedtext.length = 1 then 
                          (* Allow simple access to the external
                           * C string in the XmTextBlockRec struct
                           *)
                          typedtext.ptr -&gt; string;
                          (* Save the character typed *)
                          0-&gt; string.inxget -&gt; txt.put;
                          (txt[], data.currInsert+1) 
                            -&gt; passwd.insert; 
                          (* Replace character with '*' *)
                          (0, '*') -&gt; string.inxput;
                       else
                          (* Disable multi-character insertions
                           * (e.g. pasting)
                           *)
                          false -&gt; data.doit;
                      if);
                  if)
               #);
             activateCallback::&lt;
               (# (* The &lt;Return&gt; key was pressed *)
               do 'You have entered ''' -&gt; screen.puttext;
                  passwd[] -&gt; screen.puttext;
                  '''.' -&gt; screen.putline;
                  Stop;
               #);
          #);
        init::&lt; (# do prompt.init; getpasswd.init; #);
     #);
do rowcol.init;
#)
</PRE>

<P> To access the external string, an instance of a pattern called XmTextBlockRec (declared in MotifLib) is used.</P>
<P> When the program is run, and after six characters has been typed, the window looks like this:</P>
<P> </P>
<BLOCKQUOTE><IMG ALIGN=TOP SRC=images/motifenv/getpasswd.gif></BLOCKQUOTE>
<P> </P>

<P> When the &lt;RETURN&gt; key is typed, the activateCallback is called. Within this, the uncrypted password is printed on the screen.</P>




<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>X Libraries - Reference Manual</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=xwindows-33.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=xwindows-31.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=xwindows-27.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>



</BODY>
</HTML>
