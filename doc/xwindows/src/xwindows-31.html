<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> Primitive Motif Widgets</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING31></A>


<P><A HREF=xwindows-32.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=xwindows-30.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=xwindows-27.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> MotifEnv</P>


<A NAME=HEADING31-0></A>
<H1> Primitive Motif Widgets</H1>
<P> The following figure shows the patterns constituting the primitive MotifEnv patterns. Patterns from XtEnv are shaded gray.</P>
<P> </P>
<center><IMG ALIGN=TOP SRC=images/motifenv/primitives-hierarchy.gif></center>
<P> </P>
<P> </P>
<P> Notice that the Motif List and and Text widgets are modelled by patterns called MotifList<A NAME=MARKER-2-269></A> and MotifText<A NAME=MARKER-2-270></A>, respectively, to avoid confusing them with corresponding patterns of the basic BETA libraries. The ScrolledList and ScrolledText patterns do not correspond directly to existing Motif widgets, but are supplied for convenience.</P>
<P> The following gives a brief overview of the Primitive widgets. The text editor widgets are described later:</P>

<UL>
<LI><CODE>Primitive</CODE><A NAME=MARKER-2-271></A>: used as a supporting superpattern for other widget patterns. It handles border drawing and highlighting, traversal activation and deactivation, and various callbacks needed by other widgets.

<P></P>
<LI><CODE>ArrowButton</CODE><A NAME=MARKER-2-272></A>: consists of a directional arrow surrounded by a border shadow. When it is selected, the shadow changes to give the appearance that the ArrowButton has been pressed in. When the ArrowButton is unselected, the shadow reverts to give the appearance that the ArrowButton is released, or out.

<P></P>
<LI><CODE>Separator</CODE><A NAME=MARKER-2-273></A>: a primitive widget that separates items in a display. Several different line drawing styles are provided, as well as horizontal or vertical orientation.

<P></P>
<LI><CODE>ScrollBar</CODE><A NAME=MARKER-2-274></A>: consists of two arrows placed at each end of a rectangle. The rectangle is called the scroll region. A smaller rectangle, called the slider, is placed within the scroll region. The data is scrolled by clicking either arrow, selecting on the scroll region, or dragging the slider. When an arrow is selected, the slider within the scroll region is moved in the direction of the arrow by an amount supplied by the application. If the mouse button is held down, the slider continues to move at a constant rate.

<P></P>
<LI><CODE>MotifList</CODE><A NAME=MARKER-2-275></A>: allows a user to select one or more items from a group of choices. Items are selected from the list in a variety of ways, using both the pointer and the keyboard. MotifList operates on a StringArray that is defined by the application. Each string becomes an item in the MotifList, with the first string becoming the item in position 1, the second string becoming the item in position 2, and so on.

<P></P>
<LI><CODE>ScrolledList</CODE><A NAME=MARKER-2-276></A>: Utility pattern used to instantiate a MotifList within a ScrolledWindow.

<P></P>
<LI><CODE>Label</CODE><A NAME=MARKER-2-277></A>: can contain either a MotifString or a pixmap. When a Label is insensitive, its text is stippled, or the user-supplied insensitive pixmap is displayed.

<P></P>
<LI><CODE>CascadeButton</CODE><A NAME=MARKER-2-278></A>: links two MenuPanes or a MenuBar to a MenuPane. It is used in menu systems and must have a RowColumn parent with its rowColumnType resource set to XmMENU_BAR, XmMENU_POPUP or XmMENU_PULLDOWN. It is the only widget that can have a Pulldown MenuPane attached to it as a submenu. The submenu is displayed when this widget is activated within a MenuBar, a PopupMenu, or a PulldownMenu. Its visuals can include a label or pixmap and a cascading indicator when it is in a Popup or Pulldown MenuPane; or, it can include only a label or a pixmap when it is in a MenuBar.

<P></P>
<LI><CODE>DrawnButton</CODE><A NAME=MARKER-2-279></A>: consists of an empty widget window surrounded by a shadow border. It provides the application developer with a graphics area that can have PushButton input semantics.

<P></P>
<LI><CODE>PushButton</CODE><A NAME=MARKER-2-280></A>: consists of a text label or pixmap surrounded by a border shadow. When a PushButton is selected, the shadow changes to give the appearance that it has been pressed in. When a PushButton is unselected, the shadow changes to give the appearance that it is out.

<P></P>
<LI><CODE>Togglebutton</CODE><A NAME=MARKER-2-281></A>: Usually this widget consists of an indicator (square or diamond) with either text or a pixmap on one side of it. However, it can also consist of just text or a pixmap without the indicator. The toggle graphics display a 1-of-many or N-of-many selection state. When a toggle indicator is displayed, a square indicator shows an N-of-many selection state and a diamond indicator shows a 1-of-many selection state. A ToggleButton implies a selected or unselected state. In the case of a label and an indicator, an empty indicator (square or diamond shaped) indicates that ToggleButton is unselected, and a filled indicator shows that it is selected. In the case of a pixmap toggle, different pixmaps are used to display the selected/unselected states.
</UL>
<A NAME=HEADING31-19></A>
<H1> Examples using Primitive Motif Widgets</H1>
<P> The following small program shows how to make the traditional &quot;Hello world&quot; program using a Motif Label widget:</P>
<A NAME=HEADING31-21></A>
<A NAME=hello.bet><H4 CLASS=betacaption>hello.bet</H4></A>
<PRE CLASS=beta>
ORIGIN '~beta/Xt/motifenv';
INCLUDE '~beta/Xt/motif/label';

-- PROGRAM: descriptor --
MotifEnv
(# hello: @Label;
do hello.init;
   'Hello world' -&gt; hello.labelString;   
#)
</PRE>
<P> When the program is run, the following window appears:</P>
<P> </P>
<BLOCKQUOTE><IMG ALIGN=TOP SRC=images/motifenv/hello.gif></BLOCKQUOTE>
<P> </P>
<P> The border of the window, with grips for resizing the window, and the titlebar, with, e.g., iconify button, is added by the window manager, in this case mwm, the Motif Window Manager. The actual Label widget is the one showing the &quot;Hello world&quot; text.<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-2">[2]</A></EM> </P>
<P> Notice that the Label widget has no 3-D appearance in itself. If that is wanted, a Frame widget could be used as father of the Label.</P>
<P> The following program shows how to construct a list of four items, that the user can select:</P>
<A NAME=HEADING31-41></A>
<A NAME=list.bet><H4 CLASS=betacaption>list.bet</H4></A>
<PRE CLASS=beta>
ORIGIN '~beta/Xt/motifenv';
INCLUDE '~beta/Xt/motif/lists';

-- PROGRAM: descriptor -- 
MotifEnv
(#
   lst: @MotifList
     (#
        browseSelectionCallback::&lt;
          (* Called when an item is selected *)
          (# do (if data.item_position=itemCount then Stop if) #);
        defaultActionCallback::&lt;
          (* Called when an item is double-clicked *)
          (# item: @MotifString;
          do 'The item ''' -&gt; screen.putText;
             data.item -&gt; item; item.getText -&gt; screen.putText;
             ''', at position ' -&gt; screen.putText;
             data.item_position -&gt; screen.putInt;
             ' has been double-clicked' -&gt; screen.putLine;
          #);
        init::&lt;
          (# strings: @MotifStringArray;
          do strings.init;
             'Item 1' -&gt; strings.addText;
             'Item 2' -&gt; strings.addText;
             'Item 3' -&gt; strings.addText;
             'Item 4' -&gt; strings.addText;
             'Quit  ' -&gt; strings.addText;
             (strings, 1) -&gt; additems;
             itemCount -&gt; visibleItemCount;
          #)
     #)
do lst.init;
#)
</PRE>

<P> The list is constructed using the MotifString pattern, and the items are set up using the pattern MotifStringArray. MotifStringArray has almost the same attributes a the corresponding StringArray pattern of XtEnv. The difference is that a MotifStringArray is an array of so-called compound strings, that will be further explained in connection with the <A HREF="#multi_font.bet">multi_font</A> example below.</P>
<P> In the virtual init pattern of the ListWidget called lst, the MotifStringArray is initialized with five strings, and then added at position 1 in the list. The assignment of the itemCount resource (number of items) to the visibleItemCount resource, means that the window of the ListWidget will be big enough that all items are be visible.</P>

<P> A ListWidget have four different &quot;modes&quot; of operation: 
<OL>
<LI>Single Selection mode - only one item can be selected at a time;
<LI>Multiple selection mode - multiple items may be selected, even
non-adjacent items;
<LI>Extended select - ranges of adjecent items may be selected; and
<LI>Browse select - only one item may be selected at a time, but when
moving the pointer with mouse button one pressed, the item under the
mouse is highlighted, and when the mouse is released, the item is
selected.
</OL>
</P>

<P> Browse select is the default, and when the above program is run, the window may look like this:</P>
<P> </P>
<BLOCKQUOTE><IMG ALIGN=TOP SRC=images/motifenv/list.gif></BLOCKQUOTE>
<P> </P>
<P> Item 2 is selected, and the mouse has been moved down to item 4 with the first mouse button pressed.</P>

<P> In all callback<A NAME=MARKER-2-282></A>s to Motif widgets and gadgets, an item called data<A NAME=MARKER-2-283></A> is present. This is an instance of a virtual XmAnyCallbackStruct<A NAME=MARKER-2-284></A> pattern. In all callbacks to MotifList widgets, the pattern data is an instance of is further bound to a pattern called XmListCallbackStruct<A NAME=MARKER-2-285></A>. In the defaultActionCallback virtual of lst (which is called when an item is double-clicked) in the example, some of these attributes are used the print out information about the item selected. Likewise, in the browseSelectionCallback virtual (called when an item is selected in Browse selection mode), the data-object is used to determine if the last item (Quit) has been selected, and in that case the program is stopped.</P>

<P> The following small program shows how to use the Compound String<A NAME=MARKER-2-286></A>s of OSF/Motif, via the BETA abstraction called MotifString. It also shows how to define a fontlist for a Label widget. To incorporate more than one font in a MotifString, you must create a font list, that specifies multiple character sets, for the widget that will be displaying the MotifString. This example is somewhat advanced, and may be skipped until multiple-font strings are needed.</P>
<A NAME=HEADING31-92></A>
<A NAME=multi_font.bet><H4 CLASS=betacaption>multi_font.bet</H4></A>
<PRE CLASS=beta>
ORIGIN '~beta/Xt/motifenv';
INCLUDE '~beta/Xt/motif/label';
-- PROGRAM: descriptor --
MotifEnv
(# 
   multi: @Label
     (# 
        fontlst: @MotifFontList
          (# init::&lt;
               (# 
               do ('-*-courier-*-r-*--12-*', 'charset1')      
                    -&gt; addText;
                  ('-*-courier-bold-o-*--14-*', 'charset2')   
                    -&gt; addText;
                  ('-*-courier-medium-r-*--18-*', 'charset3') 
                    -&gt; addText;
               #)
          #);
        txt: @MotifString
          (# init::&lt;
               (# 
               do ('This is a string ',   'charset1', 
                   XmSTRING_DIRECTION_L_TO_R) -&gt; setTextSegment;
                  ('eerht sniatnoc taht', 'charset2',
                   XmSTRING_DIRECTION_R_TO_L) -&gt; appendSegment;
                  (' separate fonts',     'charset3',
                   XmSTRING_DIRECTION_L_TO_R) -&gt; appendSegment;
               #)
          #);
        init::&lt;
          (# string: @labelString; (* The MotifStringResource *)
          do fontlst.init;
             fontlst -&gt; fontList;
             txt.init;
             txt -&gt; string.set;
          #)
     #);
do multi.init;
#)
</PRE>

<P> Within the Label, two objects are used: A MotifFontList<A NAME=MARKER-2-287></A> called fontlst, and a MotifString<A NAME=MARKER-2-288></A> called txt. In fontlst, three standard X Windows font names are bound to three names, that may be used within the widget, the fontlist is used for. These three internal names denote so-called Character Set<A NAME=MARKER-2-289></A>s. In the initialization of the Label called multi, this font list is assigned to the fontList resource of the Label. Then MotifStrings displayed by multi may use these character sets: In the initialization of the MotifString, three segments are added, using these three character sets. Note that the character sets are identified by the names in the font list. Notice also the specification of string direction in the three segments: The second segment is appended using right-to-left direction. </P>
<P> When the program is run, the following window appears:</P>
<P> </P>
<BLOCKQUOTE><IMG ALIGN=TOP SRC=images/motifenv/multi_font.gif></BLOCKQUOTE>
<P> </P>
<P> Notice, that the second segment has been reversed in direction.</P>






<HR>

<A NAME=FOOTNOTE-2>[2] </A>
 Here the Label appears black and white. Normally the default color of Motif widgets is a bright blue color, but for documentation purposes, black and white looks better. The program was therefore invoked as hello -bg white, giving a white background, and consequently a black foreground. This is the case for most of the following screen snapshots too.






<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>X Libraries - Reference Manual</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=xwindows-32.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=xwindows-30.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=xwindows-27.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>



</BODY>
</HTML>
