<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> 3.2 Evaluations</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING9></A>


<P><A HREF=tutorial-10.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-7.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-7.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 3 Arithmetic and Expressions</P>


<A NAME=HEADING9-0></A>
<H2> 3.2 Evaluations</H2>
<P> In BETA, the term evaluation <A NAME=MARKER-2-24></A>is used to refer to expressions, assignment statements and procedure calls. </P>
<P> For evaluations arithmetic, boolean and relational operators are provided. The operator precedence is similar to C with the AND and OR operators considered to be on a par with * and + respectively. This means that parentheses will often be needed to obtain the desired result. The priorities are shown below:</P>

<TABLE BORDER=1>
<CAPTION></CAPTION>
<TR VALIGN=TOP><TD><P> Relative Priority</P></TD><TD><P> Class</P></TD><TD><P> Operators</P></TD></TR>
<TR VALIGN=TOP><TD><P> least</P></TD><TD><P> relational</P></TD><TD><P> =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=</P></TD></TR>
<TR VALIGN=TOP><TD><P>&nbsp;</P></TD><TD><P> additive</P></TD><TD><P> +, -, or, xor</P></TD></TR>
<TR VALIGN=TOP><TD><P>&nbsp;</P></TD><TD><P> multiplication</P></TD><TD><P> *, /, div), mod, and</P></TD></TR>
<TR VALIGN=TOP><TD><P> highest</P></TD><TD><P> unary</P></TD><TD><P>not, -, +</P></TD></TR>
</TABLE>
<P> When a real value is assigned to an integer the fractional part is removed irrespective of the sign of the value. Various functions for manipulating reals, including rounding, log, log10, sin, cos, tanh, sqrt, and power are available in the math library. This library also contains predefined constants such as PI, e, pihalf (PI/2), log2e (log(e) to base 2), log10e (log(e) to base 10), ln2 (natural log of 2), etc.</P>
<P> The max, min and abs functions are not generic; they do not work properly with reals since they will convert input values to integers. Instead the functions fmax, fmin and fabs in the math library could be used.</P>

<P> Finally, since characters are type compatible with integers and there is no type control at this level, some interesting evaluations may be done, such as:</P>
<PRE CLASS=beta>
(i+1) * ('a' * i) / 4.33-&gt;putint
</PRE>
<P> The program shown in Program 3 shows some of the things discussed here. First, it includes both the numberio and the math fragments required for the numeric work. It also shows our first procedure, tab, introduced to help simplify formatting the output.</P>
<A NAME=HEADING9-72></A>
<H4 CLASS=betacaption><A NAME="fig:Program 3: ExploreTypes.bet"> Program 3: ExploreTypes.bet</A></H4>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/numberio';
INCLUDE '~beta/basiclib/math';
---- program: descriptor ----
(# 
   
   (*  p3.bet: Exploring types and functions
    ***********************************************************)
   
   i,j,k: @integer;
   x,y,z: @real;
   tab: (# do '    '-&gt;puttext #);
   
do '\nEnvironment constants: \n\n'-&gt;puttext ;
   '\t MaxInt = '-&gt;puttext; maxint-&gt;putint;
   '\n\t MinInt = '-&gt;puttext; minint-&gt;putint;
   '\n\t MaxReal= '-&gt;puttext; maxreal-&gt;putreal (# do exp-&gt;style #);
   '\n\t MinReal= '-&gt;puttext; minreal-&gt;putreal (# do exp-&gt;style #);
   3-&gt;i; -10-&gt;j;
   '\n\n *** Simple functions *** \n'-&gt;puttext;
   '\n    I     J   max(I,J)  min(I,J)  abs(J) \n'-&gt;puttext;
   tab ;
   i-&gt;putint; tab;
   j-&gt;putint; tab;
   (i,j)-&gt;max-&gt;putint; tab; tab;
   (i,j)-&gt;min-&gt;putint; tab; tab;
   j-&gt;abs-&gt;putint;
   '\n\n *** Reals ***\n'-&gt;puttext;
   '\nX           Y           fmax(X,Y)       fmin(X,Y)       fabs(-3.6) \n'-&gt;puttext;
   3.01-&gt;x;  3.78-&gt;y;
   x-&gt;putreal;  tab;
   y-&gt;putreal;  tab;
   (x,y)-&gt;fmax-&gt;putreal; tab; tab;
   (x,y)-&gt;fmin-&gt;putreal; tab; tab;
   -3.6-&gt;fabs-&gt;putreal;
   '\n\nPi = '-&gt;puttext; pi-&gt;putreal; 
   '\ncos(Pi/4) = '-&gt;puttext;
   (Pi div 4)-&gt;cos-&gt;putreal;
   '\n\nMixing types: (i+1) * (''a'' * i) / 4.33'-&gt;
   putText; ' = '-&gt;putText;
   (i+1) * ('a' * i) / 4.33-&gt;putint;
   newline;
#)
</PRE>

<P> In BETA, procedures, types and objects are treated in a unified manner as variations of a single concept, the pattern. The general syntax for such a pattern declaration is:</P>
<PRE CLASS=beta>
&lt;names&gt;: &lt;descriptor&gt;
</PRE>
<P> In the simplest case, the object descriptor is what we have called a block which can contain declarations and imperatives. In the case of procedures which need parameters or functions which return results, there can also be input and output parameters but we leave that for later.</P>

<P> In our example, tab is defined by:</P>
<PRE CLASS=beta>
tab: (# do '    ' -&gt; puttext #);
</PRE>
<P> This has neither parameters nor a result. tab merely stands for the more lengthy statement which outputs a string of 4 blanks. Contrast this declarations with that of the variables for i,j,...,z which use @ to indicate that space is to be reserved for the variables.</P>
<P> Returning to our program, we first print out the maxint and minint constants defined for both integers and reals. Note the use of control characters, e.g. '\n' in the titles to do some formatting.</P>
<P> Next, we show the use of the min, max and abs functions on integers. We also use the tab procedure to space out the printed results.</P>
<P> After that we apply the fmin, fmax and fabs to reals.</P>
<P> Then we print PI, one of the built-in constants defined in math, as well as the value of cos(45 degrees). Note that angles must be expressed as radians.</P>
<P> To finish off, there is a mixed evaluation with integers, booleans, characters and real.</P>
<P> The results of executing ExploreTypes are shown below:</P>
<P> </P>
<PRE CLASS=beta>
Environment constants: 

	 MaxInt = 2147483647
	 MinInt = -2147483648
	 MaxReal= 1.797693e+308
	 MinReal= 2.225074e-308

 *** Simple functions *** 

    I     J   max(I,J)  min(I,J)  abs(J) 
    3    -10    3        -10        10

 *** Reals ***

X           Y           fmax(X,Y)       fmin(X,Y)       fabs(-3.6) 
3.010000    3.780000    3.780000        3.010000        3.600000

Pi = 3.141593
cos(Pi/4) = 0.707107

Mixing types: (i+1) * ('a' * i) / 4.33 = 268
</PRE>
<P> For more sophisticated examples on use of reals and math functions, the reader should look at the demonstrations programs:</P>
<UL>
<LI> realtest.bet
<LI> putreals.bet
</UL>
<P> These are located in the reals demo directory of basiclib.</P>











<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Libraries Tutorial</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=tutorial-10.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-7.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-7.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
