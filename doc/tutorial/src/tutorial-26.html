<H1> 13 Container Library</H1>
<P> One of the strengths of the Mj&oslash;lner System is the large set of available libraries. One of very useful libraries, is the container<A NAME=MARKER-2-88></A> libraries. The container library supports a number of different ways to store data: sets, multisets, lists, hashtables, stacks, etc. Here we will show how to use the list and the hashTable.</P>




<A NAME=HEADING27-0></A>
<H2> 13.1 List<A NAME=MARKER-2-89></A> Example</H2>
<P> The list library is available in the '~beta/containers/list', thus this library must be included when using lists.</P>
<P> We will use the directory example above, and make a list to store the entries of the directory.</P>
<P> A list is simply declared as follows:</P>
<PRE CLASS=beta>
dirList: List
 (# element:: Text #);
</PRE>



<P> Here we declare a pattern named dirList that inherits from the list pattern in the '~beta/containers/list' library. We specify the type of the elements in the list by extending the virtual pattern element to be the type of text. For details about the BETA concept of virtual patterns, see the BETA language introduction <A HREF="../bibliography/index.html#mia94-26">[MIA 94-26]</A>.</P>
<P> The dirList pattern inherits an operation from the list pattern that can be used to add elements, so we can simply add an element to the list by:</P>
<PRE CLASS=beta>
dirname[] -&gt; dirList.append;
</PRE>
<P> Lists have several other operations. Some useful operations are briefly described in the table below. Please see the container manual <A HREF="../bibliography/index.html#mia92-22">[MIA 92-22]</A> for more details.</P>

<TABLE BORDER=1><CAPTION>
</CAPTION><TR VALIGN=TOP><TD>
l.clear
</TD><TD>Removes all elements currently in the list, making it empty
</TD></TR><TR VALIGN=TOP><TD>l.empty -&gt; b
</TD><TD>Returns true if the list is empty
</TD></TR><TR VALIGN=TOP><TD>l.size -&gt; i
</TD><TD>Returns the number of elements currently in the list
</TD></TR><TR VALIGN=TOP><TD>equal:: (# ... #)
</TD><TD>Defines the equality test used by the implementation of the different operations. Users of list must further bind equal to contain the proper equality test for the specified element type.  Default equality test for equal references (i.e. the same object)
</TD></TR><TR VALIGN=TOP><TD>e[] -&gt; l.has
</TD><TD>Takes an element, and checks whether it is in the list
</TD></TR><TR VALIGN=TOP><TD>l.scan(# ... #)
</TD><TD>Scans through the list, invoking INNER for each element in the list. In each turn of the scan, &quot;current&quot; refers to the current element in the list.
</TD></TR><TR VALIGN=TOP><TD>l.copy-&gt; ll[]
</TD><TD>Default copy is one-level (shallow) copying.  I.e. copying the list and all objects in the list.
</TD></TR><TR VALIGN=TOP><TD>elm[]-&gt;l.prepend
</TD><TD>insert elm as first element
</TD></TR><TR VALIGN=TOP><TD>elm[]-&gt;l.append
</TD><TD>insert elm as last element
</TD></TR></TABLE>
<P> </P>
<P> In the table above, it is mentioned, that the equality test should always be defined. For our directory list this can be done like:</P>

<PRE CLASS=beta>
dirList: List
 (# element:: Text;
    equal:: 
      (# (* since the element type is text simply test whether the
          * two text strings are equal
          *)
      do left[]-&gt;right.equal-&gt;value;
      #);
 #);
</PRE>
<P> The extended directory listing program can the be as follows:</P>
<A NAME=HEADING27-96></A>
<H4 CLASS=betacaption><A NAME="fig:Program 13.1: SaveListDir.bet"> Program 13.1: SaveListDir.bet</A></H4>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/directory';
INCLUDE '~beta/containers/list';
---program: descriptor---
(# dirList: @List
     (# element:: Text;
        equal:: 
          (# (* since out element type is text simply test whether the
              * two text strings are equal
              *)
          do left[]-&gt;right.equal-&gt;value;
          #);
     #);
   d: @directory;
do (if noOfArguments &lt;&gt; 2 then
       'Usage: ' -&gt; puttext; 1-&gt;arguments-&gt;puttext; ' path' -&gt; putline;
       stop;
   if);
   (* set name of directory *)
   2 -&gt; arguments -&gt; d.name;
   (* print name of directory *)
   newline;
   (* initialize list *)
   dirList.init;
   (* scan the entries and append to list *)
   d.scanEntries
     (# (* found refers to the current entry *)
     do found.path -&gt; dirList.append;
     #);
   (* dirList now contains all the names of the entries in the
    * directory
    *)
   dirList.scan
   (# (* current refers to the current text element *)
   do current[] -&gt; putline; (* print the text *)
   #);
#)
</PRE>
<P> Later we shall see how this list can be saved (persistent) and used in another program.</P>










