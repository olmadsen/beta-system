<H1> 11 Directory</H1>

<P> Directory handling is very similar to file handling in the Mj&oslash;lner System. Files and directories have similar properties like name, path, etc. Files are special since the contents typically are characters that can be read and written, directories are special since the contents are files and directories. These similar and special properties are both modeled in the file and directory libraries.</P>
<P> When using the directory library, a directory is simply declared as</P>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/directory';
...
  d: @directory;
...
</PRE>
<P> A directory can be given a name:</P>

<PRE CLASS=beta>
'myDir' -&gt; d.name;
</PRE>
<P> And it can be tested for existence, content, entries, and be scanned:</P>
<UL>
<LI> d.exists: returns true if the directory exists
<LI> d.empty: returns true if the directory has some content
<LI> d.noOfEntries: returns the number of entries (files and directories) in the directory.
<LI> d.scanEntries: calls INNER for each entry (found) in the directory.
</UL>
<P> The following program shows a simple use of directory: The directory with the path given as argument is scanned, and the names of all the entries are printed.</P>
<A NAME=HEADING23-15></A>
<H4 CLASS=betacaption><A NAME="fig:Program 11: ListDir.bet"> Program 11: ListDir.bet</A></H4>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/directory';
---program: descriptor---
(# d: @directory;
do (if noOfArguments &lt;&gt; 2 then
       'Usage: ' -&gt; puttext; 1-&gt;arguments-&gt;puttext; ' path' -&gt; putline;
       stop;
   if);

   (* set name of directory *)
   2 -&gt; arguments -&gt; d.name;

   (* print name of directory *)
   newline;
   d.name -&gt; puttext;

   (* test for content *)
   (if d.empty then ' is empty.' -&gt; putline;
    else ' is not empty.' -&gt; putline;
   if);

   'It contains the following '-&gt; puttext;
   d.noOfEntries -&gt; putint;
   ' entries:' -&gt; putline;

   (* scan the entries *)
   d.scanEntries
     (# (* found refers to the current entry *)
     do found.path -&gt; putline;
     #);
   newline;
#)
</PRE>

<P> This program also checks for the number of arguments. If the number of arguments is not 2, then an error message is printed, and stop is called. stop is defined in the basic environment betaenv, and when called, terminates the execution.</P>
<P> Below we show the output of ListDir on the current working directory:</P>
<PRE CLASS=beta>
 
nil% ListDir .

. is not empty.
It contains the following 17 entries: 
.
..
CountChar.bet
CountChar1.bet
CountChar2.bet
ExploreTypes.bet
HelloWorld.bet
ListDir
ListDir.ast
ListDir.bet
MultipleAssignment.bet
Multiplication1.bet
Multiplication2.bet
Multiplication3.bet
SimpleTypes.bet
SquareRoot.bet
sun4s
</PRE>












