<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> 13.2 HashTable Example</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING28></A>


<P><A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-26.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-26.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 13 Container Library</P>


<A NAME=HEADING28-0></A>
<H2> 13.2 HashTable Example</H2>
<P> <A NAME=MARKER-2-91></A>We could also choose to save the file list in a hash table. A hash table is typically used to store objects that should be retrieved fast from the table. In order to store an object in a hash table it is necessary to define a hash function that given an element returns a value that can be used in the hash table implementation. A good hash function for our file list could be</P>
<PRE CLASS=beta>
hashFunction::
  (# (* scan all characters in the filename and compute a value
      * for the hash function 
      *)
  do name.scanAll(# do value*100 + ch -&gt; value #);
  #);
</PRE>
<P> The hashtable can then be defined as follows:</P>
<PRE CLASS=beta>
   dirTable: @ hashTable
     (# element:: Text;
        hashFunction::
          (#
          do e.scanAll(# do value*100 + ch -&gt; value #);
          #);
     #);
</PRE>
<P> And the complete program using this hash table:</P>
<A NAME=HEADING28-7></A>
<H4 CLASS=betacaption><A NAME="fig:Program 13.2: DirTable.bet"> Program 13.2: DirTable.bet</A></H4>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/directory';
INCLUDE '~beta/containers/hashTable;
---program: descriptor---
(# dirTable: @ hashTable
     (# element:: Text;
        hashFunction::
          (#
          do e.scanAll(# do value*100 + ch -&gt; value #);
          #);
     #);
   d: @directory;
do (if noOfArguments &lt;&gt; 2 then
       'Usage: ' -&gt; puttext; 1-&gt;arguments-&gt;puttext; ' path' -&gt; putline;
       stop;
   if);
   (* set name of directory *)
   2 -&gt; arguments -&gt; d.name;
   (* print name of directory *)
   newline;
   (* initialize table *)
   dirTable.init;
   (* scan the entries and append to list *)
   d.scanEntries
     (# (* found refers to the current entry *)
     do found.path -&gt; dirTable.insert;
     #);
   (* dirTable now contains all the names of the entries in the
    * directory
    *)
   dirList.scan
   (# (* current refers to the current text element *)
   do current[] -&gt; putline; (* print the text *)
   #);

   (* print hashtable statistics on screen*)
   '\nStatistics: '-&gt;screen.putline;
   dirTable.statistics(# do screen[]-&gt;print #);
#)
</PRE>
<P> Running this program on the current directory gives the following output:</P>
<PRE CLASS=beta>
nil% DirTable .

StaticAndDynamic.bet
FileCount.bet
ExploreTypes.bet
CountChar2.bet
CountChar1.bet
CountChar.bet
Multiplication3.bet
Multiplication2.bet
Multiplication1.bet
MultiplicationTable.bet
DirTable.bet
DirTable.ast
HelloWorld.bet
SaveListDir.bet
QuickSort.bet
SquareRoot.bet
..
.
MultipleAssignment.bet
DirTable
sun4s
ListDir.bet
SimpleTypes.bet

Statistics: 
Histogram: (0,2,1,3,0,0,0,0,2,3,0,3,2,0,0,2,0,0,0,1,2,2,2,0,1)
Maximum Collisions: 3
Minimum Collisions: 0
Average Collisions: 2
</PRE>

<P> More information and more examples using the other containers in this library can be found the Mj&oslash;lner System manual <A HREF="../bibliography/index.html#mia92-22">[MIA 92-22]</A>.</P>











<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Libraries Tutorial</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-26.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-26.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
