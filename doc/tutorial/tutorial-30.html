<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>




<TITLE> 14.1 Examples Using Exception</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING30></A>


<P><A HREF=tutorial-31.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 14 Exceptions</P>


<A NAME=HEADING30-0></A>
<H1> 14.1 Examples Using Exception</H1>
<P> In order to illustrate the use of exceptions, let us return to the previous file example. Without using the exception handling facilities an attempt to open a non-existing file produced the following error messages: </P>
<PRE CLASS=beta>
nil% CountChar

**** Exception processing
File exception for 'data1'
No such file

# Beta execution aborted: Stop is called
# Look at CountChar.dump'
</PRE>
<P> Now let us see what can be done by using exceptions.</P>
<P> The binding of noSuchFileError shows how to prevent the system from stopping the execution when the program attempts to open a non-existing file. Instead the user is prompted for another file name. The binding of noSpaceError shows that a message can be added to msg. </P>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/file'
(# inFile: @file 
     (# noSuchFileError:: (* continue execution *)
          (# do true-&gt;continue; false-&gt;OK #)#);
   outFile: @file
     (# noSpaceError:: (* extend exception; put message to msg  *)
         (# do 'It is time to delete garbage!'-&gt;msg.putline #)#);
   OK: @boolean; 
   
do 'in.bet' -&gt; inFile.name;
   true -&gt; OK;
   openFile: (* labeled block *)
   (# 
   do inFile.openRead;
      (if not OK then
         'File does not exist!' -&gt;  screen.putline;
         'Type input file name: ' -&gt;  screen.puttext;
         inFile.readFileName;
         true -&gt; OK;
         restart openFile (* restart labeled block *)
   if)#);
   
   'out.bet' -&gt; outFile.name;
   outFile.openWrite;
   readFile: 
   (# 
   do (if not inFile.eos then 
      false -&gt; inFile.gettext -&gt; outFile.puttext;
      outFile.newline;
      restart readFile
    else leave readFile
   if)#);
   inFile.close;
   outFile.close;
#)
</PRE>
<P> An attempt to open a non-existing file will produce the following error messages: </P>
<PRE CLASS=beta>
File does not exist!
Type input file name:
</PRE>
<P> It gives the possibility to proceed with another file name. </P>
<P> In case of disk space exhausted, the following message will be printed on the screen before the program execution is stopped: </P>
<PRE CLASS=beta>
**** Exception processing
Error in file 'in.bet'
File system is full
It is time to delete garbage!
</PRE>
<P> The first line is from the general pattern exception, the second and the third lines are from the binding of noSpaceError in file and the fourth line is from the binding above, i.e. at the user level. </P>







<!-- TOC -->



<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>Mj&oslash;lner System Tutorial</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=tutorial-31.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=tutorial-29.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
