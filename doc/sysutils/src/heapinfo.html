
<H1>Heap Info Library</H1>

The Heap Info Library gives the programmer access to information about the memory heaps of the program. BETA programs uses 3 different heaps:
<UL>
<LI>Infant-Object-Area (IOA):  A dobbelt heap for newly instantiated object. Garbage collected using a stop-and-copy algorithm. When a object reachs a certain age is it copied to AOA.
<LI>Adult-Object-Area (AOA): A large heap garbage collected using a freelist. This heap is also used for repetitions. 
<LI>CBFA (callbacks): A area used for callback structures.
</UL>
<P>
The library defines two patterns, getHeapInfo and PrintHeapUsage.<P>

<B>PrintHeapUsage<A NAME=PrintHeapUsage></A></B> prints information on heap usage on standard output. It is used like this:
<BLOCKQUOTE>
<TABLE BORDER=3 class=beta>
<TR VALIGN=TOP><TD><B>NAME 'MyProgram'</B></TD></TR>
<TR VALIGN=TOP><TD><B>INCLUDE '~beta/sysutils/heapinfo'</B></TD></TR>
<TR VALIGN=TOP><TD><B>PROGRAM: descriptor</B></TR>
<TR VALIGN=TOP><TD><PRE>
(# 
do ...
   'Heap Info at program point a'-&gt;PrintHeapUsage;
   ...
#)
</PRE>
</TD></TR>
</TABLE>
</BLOCKQUOTE>

<P>
<B>getHeapInfo<A NAME=getHeapInfo></A></B> gives access to the individual data. The use is like this:<BR>
<BETA LIST="Getting Heap Informations">
(# ioasize:@integer;
do HeapInfoIOASize->getHeapInfo->ioasize;
   'my IOA-size is %d\n'
     ->putformat(# do ioasize->d #);
#)
</BETA>
<P>
The argument to getHeapInfo is predefined constants. getHeapInfo evaluates to an integer.

The library defines the following constants to be used with getHeapInfo:
<UL>
<LI>HeapInfoIOA
<LI>HeapInfoIOALimit
<LI>HeapInfoIOATop
<LI>HeapInfoIOASize
<LI>HeapInfoIOAActive
<LI>HeapInfoIOAspace
<LI>HeapInfoCBFA
<LI>HeapInfoCBFALimit
<LI>HeapInfoCBFATop
<LI>HeapInfoCBFABlockSize
<LI>HeapInfoCBFAsize
<LI>HeapInfoAOABaseBlock
<LI>HeapInfoAOATopBlock
<LI>HeapInfoAOABlockSize
<LI>HeapInfoAOATotalSize
<LI>HeapInfoAOATotalFree
</UL>

