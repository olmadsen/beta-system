<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<HEAD>
<TITLE>(Type document title here)</TITLE>
<LINK REV="made" HREF="mailto:xxx@mjolner.com">
<LINK REL="stylesheet" HREF="../style/miadoc.css" TYPE="text/css">
</HEAD>

<BODY>

<P>
<A HREF=objint.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A> 
<A HREF=errorscr.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A> 
<A HREF=../contents.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A>
<P>
<P>Sysutils Reference Manual</P>
<HR>
<!---------------------------------------------------------->

<H1>Heap Info Library</H1>

The Heap Info Library gives the programmer access to information about the memory heaps of the program. BETA programs uses 3 different heaps:
<UL>
<LI>Infant-Object-Area (IOA):  A dobbelt heap for newly instantiated object. Garbage collected using a stop-and-copy algorithm. When a object reachs a certain age is it copied to AOA.
<LI>Adult-Object-Area (AOA): A large heap garbage collected using a freelist. This heap is also used for repetitions. 
<LI>CBFA (callbacks): A area used for callback structures.
</UL>
<P>
The library defines two patterns, getHeapInfo and PrintHeapUsage.<P>

<B>PrintHeapUsage<A NAME=heapinfo.html#PrintHeapUsage></A></B> prints information on heap usage on standard output. It is used like this:
<BLOCKQUOTE>
<TABLE BORDER=3 class=beta>
<TR VALIGN=TOP><TD><B>NAME 'MyProgram'</B></TD></TR>
<TR VALIGN=TOP><TD><B>INCLUDE '~beta/sysutils/heapinfo'</B></TD></TR>
<TR VALIGN=TOP><TD><B>PROGRAM: descriptor</B></TR>
<TR VALIGN=TOP><TD><PRE>
(# 
do ...
   'Heap Info at program point a'->PrintHeapUsage;
   ...
#)
</PRE>
</TD></TR>
</TABLE>
</BLOCKQUOTE>

<P>
<B>getHeapInfo<A NAME=heapinfo.html#getHeapInfo></A></B> gives access to the individual data. The use is like this:<BR>
<PRE class=beta>
(# ioasize:@integer;
do HeapInfoIOASize->getHeapInfo->ioasize;
   'my IOA-size is %d\n'
     ->putformat(# do ioasize->d #);
#)
</PRE><P>
The argument to getHeapInfo is predefined constants. getHeapInfo evaluates to an integer.

The library defines the following constants to be used with getHeapInfo:
<UL>
<LI>HeapInfoIOA
<LI>HeapInfoIOALimit
<LI>HeapInfoIOATop
<LI>HeapInfoIOASize
<LI>HeapInfoIOAActive
<LI>HeapInfoIOAspace
<LI>HeapInfoCBFA
<LI>HeapInfoCBFALimit
<LI>HeapInfoCBFATop
<LI>HeapInfoCBFABlockSize
<LI>HeapInfoCBFAsize
<LI>HeapInfoAOABaseBlock
<LI>HeapInfoAOATopBlock
<LI>HeapInfoAOABlockSize
<LI>HeapInfoAOATotalSize
<LI>HeapInfoAOATotalFree
</UL>


<!---------------------------------------------------------->
<HR>
See the <A HREF="interface/heapinfo.html">Interface file</A> for details.
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left"><ADDRESS>Sysutils Reference Manual</ADDRESS></TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<A HREF=objint.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A> 
<A HREF=errorscr.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A> 
<A HREF=../contents.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A>

</BODY>
</HTML>