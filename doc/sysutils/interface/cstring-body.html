<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>Cstring Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<BASE TARGET="_parent">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="cstring">Cstring Interface</A></H1>

<PRE CLASS=interface>
ORIGIN '~beta/basiclib/betaenv';
LIB_DEF 'sysutilscstring' '../lib';
BODY 'private/cstringbody';

(*
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1992-96
 *       All rights reserved.
 *)

-- LIB: attributes --

<B>CString</B><A name="CString.1(17)"></A>:
  (* BETA interface to standard NULL-terminated C-strings, externally
   * allocated, e.g., using malloc.
   * Consult the ctext fragment for a more highlevel based C-string
   * interface.
   *)
  (# <B>charptr</B><A name="CString.1.charptr.2(18)"></A><A name="charptr.2(18)"></A>: @integer
       (* The pointer to the external string *);
     <B>init</B><A name="CString.1.init.2(19)"></A><A name="init.2(19)"></A>: 
       (* Allocate length bytes (default 256) using malloc, and assign the
        * result to charptr. You may want to explicitly free THIS(CString)
        * before a reinitialization.
        *)
       (# length: @integer;
       enter length 
       do ...
       #);
     <B>set</B><A name="CString.1.set.2(20)"></A><A name="set.2(20)"></A>: 
       (* Initializes THIS(CString) to be large enough to hold the chars of 
        * T, and then copies the chars of T to THIS(CString). You may want to
        * explicitly free THIS(CString) before this operation, if this is a
        * reinitialization.
        * For convenience, it also exits the char pointer.
        *)
       (# T: ^text; 
       enter T[]
       do ...
       exit charptr
       #);
     <B>get</B><A name="CString.1.get.2(21)"></A><A name="get.2(21)"></A>:
       (* Return the chars of THIS(CString) copied into the text T *)
       (# T: ^text;
       do ... 
       exit T[]
       #);
     <B>getChars</B><A name="CString.1.getChars.2(22)"></A><A name="getChars.2(22)"></A>:
       (* Return a repetition, with the chars of THIS(CString) copied to it *)
       (# R: [0]@char;
       do ...
       exit R
       #);
     <B>length</B><A name="CString.1.length.2(23)"></A><A name="length.2(23)"></A>: IntegerValue
       (* Return the string-length if THIS(CString), i.e., the number of chars
        * before the NULL-char in the externally allocated string.
        *)
       (# ... #);
     <B>inxPut</B><A name="CString.1.inxPut.2(24)"></A><A name="inxPut.2(24)"></A>:
       (* Put ch at index inx in the externally allocated CString. The first char
        * is at index 0. NOTICE: There is no index check, it is  the programmer to
        * ensure, that it is allowed to put at the given index.
        *)
       (# inx: @integer;
          ch: @char;
       enter (inx, ch) 
          ...
       #);
     <B>inxGet</B><A name="CString.1.inxGet.2(25)"></A><A name="inxGet.2(25)"></A>:
       (* Obtain the char at the given index in the externally allocated string.
        * The first char is at index 0. 
        *)
       (# inx: @integer;
          ch: @char;
       enter inx
          ...
       exit ch
       #);
     <B>toLocal</B><A name="CString.1.toLocal.2(26)"></A><A name="toLocal.2(26)"></A>:
       (* Convert a BETA CString with newlines to a string containing system
        * line terminators.
        *)
       (# new: ^CString;
       ...
       exit new[]
       #);
     <B>fromLocal</B><A name="CString.1.fromLocal.2(27)"></A><A name="fromLocal.2(27)"></A>:
       (* Convert a CString containing system line terminators to a BETA 
        * string with the proper newline character
        *)
       (# new: ^CString
       ...
       exit new[]
       #);
     <B>free</B><A name="CString.1.free.2(28)"></A><A name="free.2(28)"></A>: 
       (* Free the externally allocated string. The chars of the externally
        * allocated string will be unaccessible after this operation.
        *)
       (# ... #);
     
     &lt;&lt;SLOT CStringLib: attributes&gt;&gt;;
     
  enter charptr
  do INNER
  exit charptr
  #);

(* Standard C-library operations to perform on CStrings *)

<B>strlen</B><A name="strlen.1(29)"></A>: External
  (# <B>charptr</B><A name="strlen.1.charptr.2(30)"></A><A name="charptr.2(30)"></A>: @integer;
     <B>result</B><A name="strlen.1.result.2(31)"></A><A name="result.2(31)"></A>: @integer;
  enter charptr
  exit result
  #);

<B>strcat</B><A name="strcat.1(32)"></A>: External
  (# <B>charptr1</B><A name="strcat.1.charptr1.2(33)"></A><A name="charptr1.2(33)"></A>,<B> charptr2</B><A name="strcat.1.charptr2.2(34)"></A><A name="charptr2.2(34)"></A>: @integer;
     <B>result_ptr</B><A name="strcat.1.result_ptr.2(35)"></A><A name="result_ptr.2(35)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result_ptr
  #);

<B>strncat</B><A name="strncat.1(36)"></A>: External
  (# <B>charptr1</B><A name="strncat.1.charptr1.2(37)"></A><A name="charptr1.2(37)"></A>,<B> charptr2</B><A name="strncat.1.charptr2.2(38)"></A><A name="charptr2.2(38)"></A>: @integer;
     <B>n</B><A name="strncat.1.n.2(39)"></A><A name="n.2(39)"></A>: @integer;
     <B>result_ptr</B><A name="strncat.1.result_ptr.2(40)"></A><A name="result_ptr.2(40)"></A>: @integer;
  enter (charptr1, charptr2, n)
  exit result_ptr
  #);

<B>strdup</B><A name="strdup.1(41)"></A>: External
  (# <B>charptr</B><A name="strdup.1.charptr.2(42)"></A><A name="charptr.2(42)"></A>: @integer;
     <B>result_ptr</B><A name="strdup.1.result_ptr.2(43)"></A><A name="result_ptr.2(43)"></A>: @integer;
  enter (charptr)
  exit result_ptr
  #);

<B>strcmp</B><A name="strcmp.1(44)"></A>: External
  (# <B>charptr1</B><A name="strcmp.1.charptr1.2(45)"></A><A name="charptr1.2(45)"></A>,<B> charptr2</B><A name="strcmp.1.charptr2.2(46)"></A><A name="charptr2.2(46)"></A>: @integer;
     <B>result</B><A name="strcmp.1.result.2(47)"></A><A name="result.2(47)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result
  #);

<B>strncmp</B><A name="strncmp.1(48)"></A>: External
  (# <B>charptr1</B><A name="strncmp.1.charptr1.2(49)"></A><A name="charptr1.2(49)"></A>,<B> charptr2</B><A name="strncmp.1.charptr2.2(50)"></A><A name="charptr2.2(50)"></A>: @integer;
     <B>n</B><A name="strncmp.1.n.2(51)"></A><A name="n.2(51)"></A>: @integer;
     <B>result</B><A name="strncmp.1.result.2(52)"></A><A name="result.2(52)"></A>: @integer;
  enter (charptr1, charptr2, n)
  exit result
  #);

<B>strcpy</B><A name="strcpy.1(53)"></A>: External
  (# <B>charptr1</B><A name="strcpy.1.charptr1.2(54)"></A><A name="charptr1.2(54)"></A>,<B> charptr2</B><A name="strcpy.1.charptr2.2(55)"></A><A name="charptr2.2(55)"></A>: @integer;
     <B>result_ptr</B><A name="strcpy.1.result_ptr.2(56)"></A><A name="result_ptr.2(56)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result_ptr
  #);

<B>strncpy</B><A name="strncpy.1(57)"></A>: External
  (# <B>charptr1</B><A name="strncpy.1.charptr1.2(58)"></A><A name="charptr1.2(58)"></A>,<B> charptr2</B><A name="strncpy.1.charptr2.2(59)"></A><A name="charptr2.2(59)"></A>: @integer;
     <B>n</B><A name="strncpy.1.n.2(60)"></A><A name="n.2(60)"></A>: @integer;
     <B>result_ptr</B><A name="strncpy.1.result_ptr.2(61)"></A><A name="result_ptr.2(61)"></A>: @integer;
  enter (charptr1, charptr2, n)
  exit result_ptr
  #);

<B>strchr</B><A name="strchr.1(62)"></A>: External
  (# <B>charptr</B><A name="strchr.1.charptr.2(63)"></A><A name="charptr.2(63)"></A>: @integer;
     <B>c</B><A name="strchr.1.c.2(64)"></A><A name="c.2(64)"></A>: @integer;
     <B>result_ptr</B><A name="strchr.1.result_ptr.2(65)"></A><A name="result_ptr.2(65)"></A>: @integer;
  enter (charptr, c)
  exit result_ptr
  #);

<B>strrchr</B><A name="strrchr.1(66)"></A>: External
  (# <B>charptr</B><A name="strrchr.1.charptr.2(67)"></A><A name="charptr.2(67)"></A>: @integer;
     <B>c</B><A name="strrchr.1.c.2(68)"></A><A name="c.2(68)"></A>: @integer;
     <B>result_ptr</B><A name="strrchr.1.result_ptr.2(69)"></A><A name="result_ptr.2(69)"></A>: @integer;
  enter (charptr, c)
  exit result_ptr
  #);

<B>strpbrk</B><A name="strpbrk.1(70)"></A>: External
  (# <B>charptr1</B><A name="strpbrk.1.charptr1.2(71)"></A><A name="charptr1.2(71)"></A>,<B> charptr2</B><A name="strpbrk.1.charptr2.2(72)"></A><A name="charptr2.2(72)"></A>: @integer;
     <B>result_ptr</B><A name="strpbrk.1.result_ptr.2(73)"></A><A name="result_ptr.2(73)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result_ptr
  #);

<B>strspn</B><A name="strspn.1(74)"></A>: External
  (# <B>charptr1</B><A name="strspn.1.charptr1.2(75)"></A><A name="charptr1.2(75)"></A>,<B> charptr2</B><A name="strspn.1.charptr2.2(76)"></A><A name="charptr2.2(76)"></A>: @integer;
     <B>result</B><A name="strspn.1.result.2(77)"></A><A name="result.2(77)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result
  #);

<B>strcspn</B><A name="strcspn.1(78)"></A>: External
  (# <B>charptr1</B><A name="strcspn.1.charptr1.2(79)"></A><A name="charptr1.2(79)"></A>,<B> charptr2</B><A name="strcspn.1.charptr2.2(80)"></A><A name="charptr2.2(80)"></A>: @integer;
     <B>result</B><A name="strcspn.1.result.2(81)"></A><A name="result.2(81)"></A>: @integer;
  enter (charptr1, charptr2)
  exit result
  #)
</PRE>
<TABLE BORDER=0 ALIGN=RIGHT>
<TR>
<TD>
<A HREF="http://validator.w3.org/check/referer">
<IMG BORDER=0 SRC="../../images/vh40.gif" ALT="Valid HTML 4.0!" HEIGHT=31 WIDTH=88>
</A>
</TD>
</TR>
</TABLE>
<BR CLEAR=right>
<P></P>
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<HR>
<P></P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left"><ADDRESS>Cstring Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size=-1>&#169; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT>
</TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
