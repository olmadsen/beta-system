<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<TITLE>RepetitionObject Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT DEFER TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<SCRIPT DEFER TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/printframe.js"></SCRIPT>
<BASE TARGET="_top">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="RepetitionObject">RepetitionObject Interface</A></H1>

<PRE CLASS=interface>
ORIGIN '~beta/basiclib/betaenv';
(* 
 *   
 *
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1992-94
 *       All rights reserved.
 *)

BODY 'private/RepetitionObjectBody';

--- lib:attributes ---
<B>memcpy</B><A name="memcpy.1(253)"></A>: external
  (# <B>adrTarget</B><A name="memcpy.1.adrTarget.2(254)"></A><A name="adrTarget.2(254)"></A>: @Integer;
     <B>adrSource</B><A name="memcpy.1.adrSource.2(255)"></A><A name="adrSource.2(255)"></A>: @Integer;
     <B>byteCount</B><A name="memcpy.1.byteCount.2(256)"></A><A name="byteCount.2(256)"></A>: @Integer;
     <B>out</B><A name="memcpy.1.out.2(257)"></A><A name="out.2(257)"></A>: @Integer;
  enter (adrTarget, adrSource, byteCount)
  exit out
  #);

<B>RepetitionObject</B><A name="RepetitionObject.1(258)"></A>:
  (* Used to pass serialized objects around.
   * Can also be used to pass simple datastructures through sockets.
   *)
  (# <B>r</B><A name="RepetitionObject.1.r.2(259)"></A><A name="r.2(259)"></A>: [InitialRange]@Integer;
     <B>initialRange</B><A name="RepetitionObject.1.initialRange.2(260)"></A><A name="initialRange.2(260)"></A>:&lt; 
       (# value: @Integer; 
       do 10 -&gt; value; INNER
       exit value
       #);
     
     &lt;&lt;SLOT RepetitionObjectAttributes:attributes&gt;&gt;;
     
     <B>size</B><A name="RepetitionObject.1.size.2(261)"></A><A name="size.2(261)"></A>: @ (# enter r[1] exit r[1] #);
     (* Index of last used entry in r. (Not the same as r.range *)
     
     <B>pos</B><A name="RepetitionObject.1.pos.2(262)"></A><A name="pos.2(262)"></A>: @(# enter r[2] exit r[2] #);
     (* next position to get or put *)
     
     <B>get</B><A name="RepetitionObject.1.get.2(263)"></A><A name="get.2(263)"></A>: @(# do r[2] + 1 -&gt; r[2] exit r[r[2] - 1] #);
     
     <B>getLong</B><A name="RepetitionObject.1.getLong.2(264)"></A><A name="getLong.2(264)"></A>: @ (* Get a long, byteswapping it, if on little-endian. *)
       (# l: @Integer;
       ...
       exit l
       #);
                  
     (* Like Get, except it does not update position *)
     <B>Peek</B><A name="RepetitionObject.1.Peek.2(265)"></A><A name="Peek.2(265)"></A>: @(# exit r[r[2]] #);
     
     <B>PeekLong</B><A name="RepetitionObject.1.PeekLong.2(266)"></A><A name="PeekLong.2(266)"></A>: @ 
       (# l: @Integer;
       ...  
       exit l
       #);
     
     <B>put</B><A name="RepetitionObject.1.put.2(267)"></A><A name="put.2(267)"></A>: @
       (# enter r[r[2]]
       ...  
       #);
     
     (* Put a long, byteswapping it on little-endian machines. *)
     <B>putLong</B><A name="RepetitionObject.1.putLong.2(268)"></A><A name="putLong.2(268)"></A>: @
       (# enter r[r[2]]
          ...
       #);
     
     (* The user of cheapPut must ensure that space is available 
      * (using makeSpace) and that size is updated (using checkSize). *)
     <B>cheapPut</B><A name="RepetitionObject.1.cheapPut.2(269)"></A><A name="cheapPut.2(269)"></A>: @ (# enter r[r[2]] do r[2]+1 -&gt; r[2] #);
     
     (* Put a long, byteswapping it on little-endian machines.
      * Comment on cheapPut applies, as they share the allocated space. *)
     <B>cheapPutLong</B><A name="RepetitionObject.1.cheapPutLong.2(270)"></A><A name="cheapPutLong.2(270)"></A>: @ 
       (# l: @Integer;
       enter l
       ... 
       #);
     
     <B>makeSpace</B><A name="RepetitionObject.1.makeSpace.2(271)"></A><A name="makeSpace.2(271)"></A>: @
       (# nlongs: @Integer;
       enter nlongs
       ...
       #);
     
     <B>checkSize</B><A name="RepetitionObject.1.checkSize.2(272)"></A><A name="checkSize.2(272)"></A>: @(# ... #);
     
     <B>getText</B><A name="RepetitionObject.1.getText.2(273)"></A><A name="getText.2(273)"></A>: @
       (# t: ^Text; len, wsize: @Integer;
       ...  
       exit t[]
       #);   
     
     <B>putText</B><A name="RepetitionObject.1.putText.2(274)"></A><A name="putText.2(274)"></A>: @
       (# t: ^Text;
          len, wsize: @Integer;
       enter t[]
       ... 
       #);
     
     <B>firstPos</B><A name="RepetitionObject.1.firstPos.2(275)"></A><A name="firstPos.2(275)"></A>: (# exit 3 #);
     <B>initialSize</B><A name="RepetitionObject.1.initialSize.2(276)"></A><A name="initialSize.2(276)"></A>: (# exit 2 #);
     <B>reset</B><A name="RepetitionObject.1.reset.2(277)"></A><A name="reset.2(277)"></A>: @(# ... #);
              
     <B>init</B><A name="RepetitionObject.1.init.2(278)"></A><A name="init.2(278)"></A>: @(# ... #);
     
     (* Safety checking procedures.
      * As the operations above do NO parameter checking at all,
      * the following functions may be used when the origin of
      * a repetitionObject is uncertain.  
      * They are also quite usefull to catch programming errors.
      *)
     
     <B>checkGet</B><A name="RepetitionObject.1.checkGet.2(279)"></A><A name="checkGet.2(279)"></A>: BooleanValue
       (# ... #);
     
     <B>checkGetText</B><A name="RepetitionObject.1.checkGetText.2(280)"></A><A name="checkGetText.2(280)"></A>: BooleanValue
       (# maxLen: @Integer;
       enter maxLen
       ...
       #);
  #)
</PRE>
<!---------------------------------------------------------->
<HR>
<P></P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="40%" align="left"><ADDRESS>RepetitionObject Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
