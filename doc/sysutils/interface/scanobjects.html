<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>Scanobjects Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">
</HEAD>
<BODY>
<P></P>
<A HREF="time.html"><IMG ALIGN=BOTTOM SRC="../../images/next.gif" ALT=Next BORDER=0></A>
<A HREF="RepetitionObject.html"><IMG ALIGN=BOTTOM SRC="../../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html"><IMG ALIGN=BOTTOM SRC="../../images/content.gif" ALT=Content BORDER=0></A>
<A HREF="inx.html"><IMG ALIGN=BOTTOM SRC="../../images/index.gif" ALT=Index BORDER=0></A>
<P></P>
<P>Interface Description</P>
<HR>
<!---------------------------------------------------------->

<H1>Scanobjects Interface</H1>
<PRE CLASS=interface>
ORIGIN '~beta/basiclib/betaenv';
BODY 'private/scanobjectsbody';

(* Support for scanning all objects at a point of time
 * in the execution of any BETA program.
 *
 * If you specialize the 'callback' virtual, it will be
 * executed once for each object visited, with 'obj'
 * referring to the object being visited. It will
 * never be executed for a non-object, such as a
 * repetition etc.
 *
 * The pattern variable 'root' is used to select
 * which objects to visit: an object is visited iff
 * it is an instance of a specialization of the
 * pattern denoted by 'root'. If 'root' is NONE,
 * all objects and non-objects are visited. If
 * (root## = object##), all objects are visited.
 *
 * If 'printVisited' is true, a message is printed
 * describing the pattern of each visited object,
 * and giving the category of each visited non-object,
 * such as '[Value Repetition]'.
 *
 * When 'printVisited' is true, other booleans can be
 * used to enhance the output for objects: If
 * 'printOrigin' is true, the origin of each
 * visited object is printed. If 'printSize'
 * is true, the size in bytes of each visited
 * object is printed. 
 *
 * If a garbage collection runs during a scan, it
 * will be aborted with an error message, but the
 * program continues otherwise unaffected. To
 * avoid this, try to create as few objects as
 * possible in callback. (If callback is not
 * specialized, it will not get called, and no
 * objects will be created during the scan.)
 *
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1994-96
 *       All rights reserved.
 *)

--- LIB: attributes ---

<B>scanCallback</B><A name="scanCallback.1(275)"></A>:
  (# <B>obj</B><A name="scanCallback.1:obj.2(276)"></A><A name="obj.2(276)"></A>: ^object;
  enter obj[]
  do INNER
  #);

<B>scanPrefix</B><A name="scanPrefix.1(277)"></A>:
  (# <B>callback</B><A name="scanPrefix.1:callback.2(278)"></A><A name="callback.2(278)"></A>:&lt; scanCallback;
     <B>root</B><A name="scanPrefix.1:root.2(279)"></A><A name="root.2(279)"></A>: ##object;
     <B>printVisited</B><A name="scanPrefix.1:printVisited.2(280)"></A><A name="printVisited.2(280)"></A>,<B>printOrigin</B><A name="scanPrefix.1:printOrigin.2(281)"></A><A name="printOrigin.2(281)"></A>,<B>printSize</B><A name="scanPrefix.1:printSize.2(282)"></A><A name="printSize.2(282)"></A>: @boolean;
  do INNER
  #);

<B>scanIOA</B><A name="scanIOA.1(283)"></A>:  scanPrefix(# do ... #);
<B>scanAOA</B><A name="scanAOA.1(284)"></A>:  scanPrefix(# do ... #);
<B>scanLVRA</B><A name="scanLVRA.1(285)"></A>: scanPrefix(# do ... #);

<B>ScanRefsToPrefix</B><A name="ScanRefsToPrefix.1(286)"></A>:
  (# <B>target</B><A name="ScanRefsToPrefix.1:target.2(287)"></A><A name="target.2(287)"></A>: ^Object;
     <B>callback</B><A name="ScanRefsToPrefix.1:callback.2(288)"></A><A name="callback.2(288)"></A>:&lt; scanCallback;
     <B>printName</B><A name="ScanRefsToPrefix.1:printName.2(289)"></A><A name="printName.2(289)"></A>: @Boolean;
     <B>skipGC</B><A name="ScanRefsToPrefix.1:skipGC.2(290)"></A><A name="skipGC.2(290)"></A>: @Boolean; (* Set to true when using within the other scans *)
  enter target[]
  do INNER
  #);

(* Scans IOA only for references to the given target *)
<B>scanRefsToObject</B><A name="scanRefsToObject.1(291)"></A>: ScanRefsToPrefix(# do ... #)
</PRE>
<!---------------------------------------------------------->
<HR>
<P></P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left"><ADDRESS>Interface Description</ADDRESS></TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P></P>
<A HREF="time.html"><IMG ALIGN=BOTTOM SRC="../../images/next.gif" ALT=Next BORDER=0></A>
<A HREF="RepetitionObject.html"><IMG ALIGN=BOTTOM SRC="../../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html"><IMG ALIGN=BOTTOM SRC="../../images/content.gif" ALT=Content BORDER=0></A>
<A HREF="inx.html"><IMG ALIGN=BOTTOM SRC="../../images/index.gif" ALT=Index BORDER=0></A>
</BODY>
</HTML>
