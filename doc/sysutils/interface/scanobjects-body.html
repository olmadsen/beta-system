<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>Scanobjects Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<BASE TARGET="_parent">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="scanobjects">Scanobjects Interface</A></H1>

<PRE CLASS=interface>
ORIGIN '~beta/basiclib/betaenv';
BODY 'private/scanobjectsbody';

(* Support for scanning all objects at a point of time
 * in the execution of any BETA program.
 *
 * If you specialize the 'callback' virtual, it will be
 * executed once for each object visited, with 'obj'
 * referring to the object being visited. It will
 * never be executed for a non-object, such as a
 * repetition etc.
 *
 * The pattern variable 'root' is used to select
 * which objects to visit: an object is visited iff
 * it is an instance of a specialization of the
 * pattern denoted by 'root'. If 'root' is NONE,
 * all objects and non-objects are visited. If
 * (root## = object##), all objects are visited.
 *
 * If 'printVisited' is true, a message is printed
 * describing the pattern of each visited object,
 * and giving the category of each visited non-object,
 * such as '[Value Repetition]'.
 *
 * When 'printVisited' is true, other booleans can be
 * used to enhance the output for objects: If
 * 'printOrigin' is true, the origin of each
 * visited object is printed. If 'printSize'
 * is true, the size in bytes of each visited
 * object is printed. 
 *
 * If a garbage collection runs during a scan, it
 * will be aborted with an error message, but the
 * program continues otherwise unaffected. To
 * avoid this, try to create as few objects as
 * possible in callback. (If callback is not
 * specialized, it will not get called, and no
 * objects will be created during the scan.)
 *
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1994-96
 *       All rights reserved.
 *)

--- LIB: attributes ---

<B>scanCallback</B><A name="scanCallback.1(281)"></A>:
  (# <B>obj</B><A name="scanCallback.1.obj.2(282)"></A><A name="obj.2(282)"></A>: ^object;
  enter obj[]
  do INNER
  #);

<B>scanPrefix</B><A name="scanPrefix.1(283)"></A>:
  (# <B>callback</B><A name="scanPrefix.1.callback.2(284)"></A><A name="callback.2(284)"></A>:&lt; scanCallback;
     <B>root</B><A name="scanPrefix.1.root.2(285)"></A><A name="root.2(285)"></A>: ##object;
     <B>printVisited</B><A name="scanPrefix.1.printVisited.2(286)"></A><A name="printVisited.2(286)"></A>,<B>printOrigin</B><A name="scanPrefix.1.printOrigin.2(287)"></A><A name="printOrigin.2(287)"></A>,<B>printSize</B><A name="scanPrefix.1.printSize.2(288)"></A><A name="printSize.2(288)"></A>: @boolean;
  do INNER
  #);

<B>scanIOA</B><A name="scanIOA.1(289)"></A>:  scanPrefix(# do ... #);
<B>scanAOA</B><A name="scanAOA.1(290)"></A>:  scanPrefix(# do ... #);
<B>scanLVRA</B><A name="scanLVRA.1(291)"></A>: scanPrefix(# do ... #);

<B>ScanRefsToPrefix</B><A name="ScanRefsToPrefix.1(292)"></A>:
  (# <B>target</B><A name="ScanRefsToPrefix.1.target.2(293)"></A><A name="target.2(293)"></A>: ^Object;
     <B>callback</B><A name="ScanRefsToPrefix.1.callback.2(294)"></A><A name="callback.2(294)"></A>:&lt; scanCallback;
     <B>printName</B><A name="ScanRefsToPrefix.1.printName.2(295)"></A><A name="printName.2(295)"></A>: @Boolean;
     <B>skipGC</B><A name="ScanRefsToPrefix.1.skipGC.2(296)"></A><A name="skipGC.2(296)"></A>: @Boolean; (* Set to true when using within the other scans *)
  enter target[]
  do INNER
  #);

(* Scans IOA only for references to the given target *)
<B>scanRefsToObject</B><A name="scanRefsToObject.1(297)"></A>: ScanRefsToPrefix(# do ... #)
</PRE>
<TABLE BORDER=0 ALIGN=RIGHT>
<TR>
<TD>
<A HREF="http://validator.w3.org/check/referer">
<IMG BORDER=0 SRC="../../images/vh40.gif" ALT="Valid HTML 4.0!" HEIGHT=31 WIDTH=88>
</A>
</TD>
</TR>
</TABLE>
<BR CLEAR=right>
<P></P>
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<HR>
<P></P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left"><ADDRESS>Scanobjects Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size="-1">&#169; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT>
</TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
