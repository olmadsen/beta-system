all: generated link-check

# Update all the generated files in the various manuals.
generated:
	cd grammars; make
	cd basiclib; make
	cd sysutils; make
	cd containers; make
	cd bifrost-ref; make
	cd bifrost-tut; make
	cd distribution; make
	cd lidskjalv-ref; make
	cd maclib; make
	cd unixlib; make
	cd persistence; make
	cd process; make
	cd xwindows; make
	cd yggdrasil; make
	cd win32lib; make
	cd comlib; make
	cd compiler; make
	cd manpages; make

link-check:
	@echo Checking all links from index.html
	perl bin/linklint_2.1/linklint /@ -net -error -xref -doc admin/errors -quiet -root . -index index.html -orphan -htmlonly -limit 2000
	@echo See file admin/errors/linklint.html for a survey of errors.

up: update

update:
	cvs update -dP

# Tags: Only include html files that are not
# generated
tags:
	etags \
*.html \
*/*.html \
xwindows/interface/index.html \
xwindows/LessTifFaq/index.html

# wmtags: Tag files originally generated by webmaker:
wmtags:
	etags -o WMTAGS \
basiclib/*.html \
beta/*.html \
beta-intro/*.html \
beta-overview/*.html \
bifrost-ref/*.html \
bifrost-tut/*.html \
compiler/*.html \
containers/*.html \
distribution/*.html \
freja/*.html \
frigg/*.html \
install/*.html \
lidskjalv-ref/*.html \
lidskjalv-tut/*.html \
maclib/*.html \
mjolner/*.html \
persistence/*.html \
process/*.html \
sif/*.html \
sysutils/*.html \
teaching/*.html \
tutorial/*.html \
unixlib/*.html \
valhalla/*.html \
win32lib/*.html \
xwindows/*.html \
yggdrasil/*.html 


