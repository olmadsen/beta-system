<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>Fragmentscanner Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<BASE TARGET="_parent">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="fragmentscanner">Fragmentscanner Interface</A></H1>

<PRE CLASS=interface>
ORIGIN 'astlevel';
(*
 * COPYRIGHT
 *   Copyright Mjolner Informatics, 1995-97
 *   All rights reserved.
 *)
-- fragmentGroupLib: Attributes --

<B>scanPropsAndFrags</B><A name="scanPropsAndFrags.1(588)"></A>:
  (# <B>doProperty</B><A name="scanPropsAndFrags.1.doProperty.2(589)"></A><A name="doProperty.2(589)"></A>:&lt;
       (# prop,s,selector: @text
       enter (prop,s,selector)
       do INNER
       #);
     <B>doFragmentLink</B><A name="scanPropsAndFrags.1.doFragmentLink.2(590)"></A><A name="doFragmentLink.2(590)"></A>:&lt;
       (# include: ^astinterface.fragmentgroup.linklisttype.link
       enter include[]
       do INNER
       #);
     <B>doFragmentForm</B><A name="scanPropsAndFrags.1.doFragmentForm.2(591)"></A><A name="doFragmentForm.2(591)"></A>:&lt;
       (# fle: ^fragmentListElement
       enter fle[]
       do INNER
       #);
     <B>doFragmentGroup</B><A name="scanPropsAndFrags.1.doFragmentGroup.2(592)"></A><A name="doFragmentGroup.2(592)"></A>:&lt;
       (# fle: ^fragmentListElement
       enter fle[]
       do INNER
       #);
     <B>doConstProperty</B><A name="scanPropsAndFrags.1.doConstProperty.2(593)"></A><A name="doConstProperty.2(593)"></A>:&lt;
       (# toggle: @boolean; const: @integer
       enter (toggle, const)
       do INNER
       #);
     <B>inx</B><A name="scanPropsAndFrags.1.inx.2(594)"></A><A name="inx.2(594)"></A>: @integer; <B>continue</B><A name="scanPropsAndFrags.1.continue.2(595)"></A><A name="continue.2(595)"></A>: @boolean;
     <B>prophelp</B><A name="scanPropsAndFrags.1.prophelp.2(596)"></A><A name="prophelp.2(596)"></A>,<B> selector</B><A name="scanPropsAndFrags.1.selector.2(597)"></A><A name="selector.2(597)"></A>: @text;
  do (if prop[] = none then
         '<B>scanPropsAndFrags</B><A name="scanPropsAndFrags.1.scanPropsAndFrags.2(598)"></A><A name="scanPropsAndFrags.2(598)"></A>: prop is none'-&gt;putLine;
         leave scanPropsAndFrags
     if);
     (if fragmentlist[] = none then
         '<B>scanPropsAndFrags</B><A name="scanPropsAndFrags.1.scanPropsAndFrags.2(599)"></A><A name="scanPropsAndFrags.2(599)"></A>: fragmentlist is none'-&gt;putLine;
         leave scanPropsAndFrags
     if);
     true-&gt;continue;
     <B>propScan</B><A name="scanPropsAndFrags.1.propScan.2(600)"></A><A name="propScan.2(600)"></A>:
       prop.scanProp
       (# doProp::&lt;
            (# propUC: ^text; strs: [10]@text; pos: @integer;
            do prop.copy-&gt;propUC[]; propUC.makeUC;
               (* Ignore some properties. *)
               (if true
                // propUC.t[1]='_'
                // ('DONECHECK'-&gt;propUC.equal)
                // ('FREJAMARK'-&gt;propUC.equal)
                // ('ABSTRACTED'-&gt;propUC.equal) then
                   (* These properties are internal - to be ignored *)
                // ('ON'-&gt;propUC.equal) then
                   scanParameters
                     (# doConst::&lt;
                          (#
                          do inx+1-&gt;inx;
                             (true,c)-&gt;doConstProperty;
                             (if not continue then leave propScan if);
                          #)
                     #)
                // ('OFF'-&gt;propUC.equal) then
                   scanParameters
                     (# doConst::&lt;
                          (#
                          do inx+1-&gt;inx;
                             (false,c)-&gt;doConstProperty;
                             (if not continue then leave propScan if);
                          #)
                     #)
                // ('ORIGIN'-&gt;propUC.equal) then
                   scanParameters
                     (# doString::&lt;
                          (#
                          do inx+1-&gt;inx; (prop,s,'')-&gt;doProperty;
                             (if not continue then leave propScan if);
                             (* handle INCLUDEs immediately after ORIGIN *)
                             scanIncludes
                               (#
                               do inx+1-&gt;inx;
                                  current[]-&gt;doFragmentLink;
                                  (if not continue then leave propScan if);
                               #)
                          #)
                     #)
                // ('BODY'-&gt;propUC.equal) then
                   scanParameters
                     (# doString::&lt;
                          (#
                          do inx+1-&gt;inx; (prop,s,'')-&gt;doProperty;
                             (if not continue then leave propScan if);
                          #)
                     #)
                // ('MDBODY'-&gt;propUC.equal)
                // ('OBJFILE'-&gt;propUC.equal)
                // ('BETARUN'-&gt;propUC.equal)
                // ('MAKE'-&gt;propUC.equal)
                // ('LIBFILE'-&gt;propUC.equal) then
                   scanParameters
                     (# doName::&lt;
                          (#
                          do n[]-&gt;prophelp.putText;
                             ' '-&gt;prophelp.put;
                             n-&gt;selector;
                          #);
                        doString::&lt;
                          (#
                          do inx+1-&gt;inx; (prop,s,selector)-&gt;doProperty;
                             (if not continue then leave propScan if);
                          #)
                     #)
                // ('BUILD'-&gt;propUC.equal) then
                     scanParameters
                     (# doName::&lt;
                          (#
                          do n[]-&gt;prophelp.putText;
                             ' '-&gt;prophelp.put;
                             n-&gt;selector;
                          #);
                        doString::&lt;
                          (#
                          do (if (pos+1-&gt;pos)&gt;strs.range then
                                 10-&gt;strs.extend
                             if);
                             s-&gt;strs[pos];
                          #)
                     #);
                   inx+1-&gt;inx; (prop,strs[pos],selector)-&gt;doProperty;
                   (for i: pos-1 repeat
                        inx+1-&gt;inx; (prop,strs[i],'')-&gt;doProperty;
                        (if not continue then leave propScan if);
                   for);
               if)
            #)
       #);
     <B>fragScan</B><A name="scanPropsAndFrags.1.fragScan.2(601)"></A><A name="fragScan.2(601)"></A>:
       (if continue then
           fragmentList.scan
             (#
             do (if current.type
                 // formType then
                    (#
                    do inx+1-&gt;inx; current[]-&gt;doFragmentForm;
                       (if not continue then leave fragScan if);
                    #)
                 // groupType then
                    (#
                    do inx+1-&gt;inx; current[]-&gt;doFragmentGroup;
                       (if not continue then leave fragScan if);
                    #);

                if)
             #)
       if);
  #);

<B>scanPropsAndFragsForText</B><A name="scanPropsAndFragsForText.1(602)"></A>: scanPropsAndFrags
  (# <B>displayText</B><A name="scanPropsAndFragsForText.1.displayText.2(603)"></A><A name="displayText.2(603)"></A>:&lt; (# t: ^text;  enter t[] do INNER #);

     <B>doProperty</B><A name="scanPropsAndFragsForText.1.doProperty.2(604)"></A><A name="doProperty.2(604)"></A>::&lt;
       (# propUC: ^text;
       do prop.copy-&gt;propUC[]; propUC.makeUC;
          propUC-&gt;prophelp;
          ' '-&gt;prophelp.put;
          (if true
           // ('MDBODY'-&gt;propUC.equal)
           // ('OBJFILE'-&gt;propUC.equal)
           // ('BETARUN'-&gt;propUC.equal)
           // ('MAKE'-&gt;propUC.equal)
           // ('LIBFILE'-&gt;propUC.equal) then
              selector[]-&gt;prophelp.putText;
              ' '-&gt;prophelp.put
           // ('BUILD'-&gt;propUC.equal) then
              (if selector.lgth=0 then
                  '      $'-&gt;prophelp;
                  fileno-&gt;prophelp.putint; fileno+1-&gt;fileno;
                  '='-&gt;prophelp.put
               else
                  0-&gt;fileno;
                  selector[]-&gt;prophelp.putText;
                  ' '-&gt;prophelp.put;
              if)
          if);
          '\''-&gt;prophelp.put;
          s[]-&gt;prophelp.putText;
          '\' '-&gt;prophelp.putText;
          prophelp[]-&gt;displayText;
          prophelp.clear
       #);
     <B>doFragmentLink</B><A name="scanPropsAndFragsForText.1.doFragmentLink.2(605)"></A><A name="doFragmentLink.2(605)"></A>::&lt;
       (# t: ^text;
       do 'INCLUDE \''-&gt;t[];
          include.linkname[]-&gt;t.putText;
          '\''-&gt;t.put;
          t[]-&gt;displayText
       #);
     <B>doFragmentForm</B><A name="scanPropsAndFragsForText.1.doFragmentForm.2(606)"></A><A name="doFragmentForm.2(606)"></A>::&lt;
       (# catName,t: ^text
       do (if fle.type=formType then
              (# ff: ^astInterface.fragmentForm
              do fle.open-&gt;ff[];
                 (ff.name).copy-&gt;t[];
                 ': '-&gt;t.append;
                 (if ff.grammar[] = none then
                     'ff.grammar[] is none!!'-&gt;putLine; (*leave scanFrags*)
                 if);
                 ff.category-&gt;ff.Grammar.symbolToName-&gt;catName[];
                 (if catName[]=none then
                     'ff.category: '-&gt;putText;
                     ff.category-&gt;putInt;
                     newLine;
                     'ff.root.symbol: '-&gt;putText;
                     ff.root.symbol-&gt;putInt;
                     newLine
                  else
                     (if true
                      // ('DescriptorForm'-&gt;catName.equal)
                      // ('ObjectDescriptor'-&gt;catName.equal) then
                         'Descriptor'-&gt;t.putText;
                      // ('AttributesForm'-&gt;catName.equal)
                      // ('AttributeDecl'-&gt;catName.equal) then
                         'Attributes'-&gt;t.putText;
                      else
                         (if catName.empty then
                             'Unexpanded'-&gt;t.putText;
                          else
                             catName[]-&gt;t.putText;
                         if)
                     if)
                 if);
                 t[]-&gt;displayText
              #)
          if)
       #);
     <B>doFragmentGroup</B><A name="scanPropsAndFragsForText.1.doFragmentGroup.2(607)"></A><A name="doFragmentGroup.2(607)"></A>::&lt; (# do INNER #);
     <B>doConstProperty</B><A name="scanPropsAndFragsForText.1.doConstProperty.2(608)"></A><A name="doConstProperty.2(608)"></A>::&lt;
       (#
       do (if toggle then
              'ON '-&gt;prophelp.append
           else
              'OFF '-&gt;prophelp.append
          if);
          const-&gt;prophelp.putInt;
          prophelp[]-&gt;displayText;
          prophelp.clear
       #);
     <B>fileno</B><A name="scanPropsAndFragsForText.1.fileno.2(609)"></A><A name="fileno.2(609)"></A>: (*private*) @integer;
  #);

<B>findPropsAndFrags</B><A name="findPropsAndFrags.1(610)"></A>: scanPropsAndFrags
  (# <B>doProperty</B><A name="findPropsAndFrags.1.doProperty.2(611)"></A><A name="doProperty.2(611)"></A>::&lt;
       (#
       do (if inx=currentItemNo then
              INNER doProperty; false-&gt;continue
          if)
       #);
     <B>doFragmentLink</B><A name="findPropsAndFrags.1.doFragmentLink.2(612)"></A><A name="doFragmentLink.2(612)"></A>::&lt;
       (#
       do (if inx=currentItemNo then
              INNER doFragmentLink; false-&gt;continue
          if)
       #);
     <B>doFragmentForm</B><A name="findPropsAndFrags.1.doFragmentForm.2(613)"></A><A name="doFragmentForm.2(613)"></A>::&lt;
       (#
       do (if inx=currentItemNo then
              INNER doFragmentForm; false-&gt;continue
          if)
       #);
     <B>doFragmentGroup</B><A name="findPropsAndFrags.1.doFragmentGroup.2(614)"></A><A name="doFragmentGroup.2(614)"></A>::&lt;
       (#
       do (if inx=currentItemNo then
              INNER doFragmentGroup; false-&gt;continue
          if)
       #);
     <B>doConstProperty</B><A name="findPropsAndFrags.1.doConstProperty.2(615)"></A><A name="doConstProperty.2(615)"></A>::&lt;
       (#
       do (if inx=currentItemNo then
              INNER doConstProperty; false-&gt;continue
          if)
       #);
     <B>currentItemNo</B><A name="findPropsAndFrags.1.currentItemNo.2(616)"></A><A name="currentItemNo.2(616)"></A>: @integer;
  enter currentItemNo
  #)
</PRE>
<TABLE BORDER=0 ALIGN=RIGHT>
<TR>
<TD>
<A HREF="http://validator.w3.org/check/referer">
<IMG BORDER=0 SRC="../../images/vh40.gif" ALT="Valid HTML 4.0!" HEIGHT=31 WIDTH=88>
</A>
</TD>
</TR>
</TABLE>
<BR CLEAR=right>
<P></P>
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<HR>
<P></P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left"><ADDRESS>Fragmentscanner Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size=-1>&#169; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT>
</TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
