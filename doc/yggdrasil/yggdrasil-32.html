<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>




<TITLE> The Pretty-print Specification</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING32></A>


<P><A HREF=yggdrasil-33.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-31.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 6.2.8 Modifying the Pretty-print Specification</P>


<A NAME=HEADING32-0></A>
<H1> The Pretty-print Specification</H1>
<P> The pretty-printer is based on the algorithm just described, but because the internal representation of a document is an abstract syntax tree, the input stream to the pretty-printer algorithm must be generated from the AST. This step is called unparsing. The structure of an AST is described by means of a grammar. The pretty-print specification defines for each production in the grammar how it shall be unparsed. </P>
<P> Only those productions, that result in nodes in the AST, has a corresponding specification. The productions are constructor and list productions as described previously.</P>
<P> The grammar for pretty-print specifications is described in <A HREF="yggdrasil-39.html">Appendix 2.</A> </P>
<P> The pretty-print specification of a constructor production has the
following form: </P>

<PRE class=beta>
&lt;Constructor&gt; ::= &lt;ProductionName:nameAppl&gt; '=' &lt;Stream:ItemList&gt;;
&lt;ItemList&gt;    ::* &lt;Item&gt;;
&lt;Item&gt;        ::| &lt;Terminal&gt; | &lt;NontTerm&gt; | &lt;Break&gt; 
                | &lt;Block&gt; | &lt;CommentPlace&gt;
</PRE>

<P> The ProductionName is the name of the syntactic category on the
left side of the corresponding production in the language grammar. The
items in the stream can be terminals, nonterminals, breaks, blocks or
comment places: </P>

<UL>
<LI> A terminal <A NAME=MARKER-2-173></A>can be a terminal symbol from the corresponding production. This is specified by T:n, where n is the terminal number in the production. A terminal can also be an explicit terminal symbol: abc. 
<LI> A nonterminal <A NAME=MARKER-2-174></A>is referring to the nonterminal symbol in the corresponding production or, if the nonterminal has been expanded, to the underlying sub-AST. Like terminals the nonterminals are numbered (N:n). 
<LI> A break <A NAME=MARKER-2-175></A>is specified by $&lt;length&gt;,&lt;indention&gt;. The meaning of length and indention is described above. The default break $$ has length 0 and indention 1. 
<LI> A consistent block <A NAME=MARKER-2-176></A>is specified by [c ... ] and an inconsistent block is specified by [i ... ]. 
<LI> The comment place <A NAME=MARKER-2-177></A>character * is used to
indicate where to pretty-print the comment that may be associated with
the node (corresponding to the production) in the AST. A comment place
character shall be positioned after a terminal symbol and cannot be
used in a list production. 
</UL>

<P> The pretty-print specification of a list production has the
following form: </P>

<PRE class=beta>
&lt;ListProd&gt; ::= &lt;ProductionName:nameAppl&gt; '=' '(' &lt;ListSpec&gt; ')';
&lt;ListSpec&gt; ::= &lt;Beginning:ItemList&gt; 
               '{' &lt;BlockType&gt; &lt;Separator:ItemList&gt; '}' 
               &lt;Ending:ItemList&gt; 
</PRE>

<P> The list production specifies what is going to be pretty-printed before the list, between the list elements and after the list. A list is always surrounded by a block. Note the the block delimitors for lists are { and }. </P>
<P> The pretty-print specification must always start with a fragment form soecification (similar to the grammar specification).  For a pretty-print specification the syntax is:</P>

<PRE class=beta>
-- name: prettyprint: prettyprint --
</PRE>

<P> where name must be the name chosen for this grammar. </P>


<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>Metaprogramming System</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=yggdrasil-33.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-31.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
