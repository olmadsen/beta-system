<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>
<LINK REL=TOP HREF=index.html>
<LINK REL=UP HREF=contents.html>
<LINK REL=PREV HREF=yggdrasil-39.html>
<LINK REL=NEXT HREF=yggdrasil-41.html>
<TITLE> Appendix 3: Expression Grammar Example</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>

<DIV>
<A NAME=HEADING40></A>

<DIV>
<P><A HREF=yggdrasil-41.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-39.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P>Metaprogramming System</P>

</DIV>
<A NAME=HEADING40-0></A>
<H1> <A NAME="LINK-yggdrasil-_Toc364700537"><A NAME=MARKER-9-201></A>Appendix 3: Expression Grammar Example<A NAME=MARKER-2-203></A></A></H1>
<P> This appendix contains an example of use of the metaprogramming system for generating an expression calculator, enabling the user to enter expressions from the keyboard, which are then parser and the resulting AST is then evaluated by an interpreter (actually a recursive traversal of the AST, eveluating sunexpressions), and the calculated result is then printed on the screen. To give an impression of the application, the following is an example of an execution of the calculator (the underlined text is entered by the user &Ntilde; expreval is the name of the calculator):</P>
<PRE CLASS=beta>

expreval
Eval? 3+4
7
Eval? (3+4)*(20+2)/4
38
Eval? (3+4
PARSE-ERRORS
#   1 (3+4
# ****** ^
#  Expected symbols:  / mod ) * +
Eval? 22 mod 5
2
Eval? .
</PRE>
<P> This application consists of five files: </P>
<P> &yen; expr-meta.gram: Contains the grammar specification for the valid expressions.</P>
<P> &yen; expr-pretty.pgram: Contains the pretty-printer specification.</P>
<P> &yen; exprcfl.bet: Contains the generated context-free level interface.</P>
<P> &yen; exprsematt.bet: Contains the additional semantic level interface. Primerily the eval routine.</P>
<P> &yen; expreval.bet: Contains the initialization, and keyboard and screen handling code.</P>
<P> We will in the following present the five files along with a few comments on the important aspects of the particular file.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>Metaprogramming System</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=yggdrasil-41.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-39.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
