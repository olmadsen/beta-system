<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>
<LINK REL=TOP HREF=index.html>
<LINK REL=UP HREF=yggdrasil-30.html>
<LINK REL=PREV HREF=yggdrasil-30.html>
<LINK REL=NEXT HREF=yggdrasil-32.html>
<TITLE> The Pretty-print Algorithm</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING31></A>


<P><A HREF=yggdrasil-32.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 6.2.8 Modifying the Pretty-print Specification</P>


<A NAME=HEADING31-0></A>
<H1> The Pretty-print Algorithm<A NAME=MARKER-2-172></A></H1>
<P> The pretty-print algorithm is an adaptive pretty-printer, i.e. the pretty-printer always tries to print as much as possible on each line. If the pretty-printed text cannot fit on one line, the pretty-print specification tells where to break the line. For each production in the grammar, there is a specification of how to pretty-print that production. Furthermore it is indicated where to associate a possible comment. </P>
<P> The pretty-printer algorithm takes as input a stream of tokens. A token is a text string, a break or a block. </P>
<OL>
<LI> a text string is a sequence of characters
<LI> a break specifies, where a line may be broken
<LI> a block is specified by means of two delimitor tokens: [ and ].
</OL>
<P> A stream is defined by </P>

<OL>
<LI>a text string is a stream and 
<P>if s1, s2, ... sn is a stream then [ s1 &lt;break&gt; s2 &lt;break&gt; .. &lt;break&gt; sn ] is also a stream.
</OL>


<P> The algorithm gives a text string as output. The text string has a fixed maximal width. The block concept is used in the following way: the algorithm tries to break onto different lines as few blocks as possible according to the maximal width. If a block cannot fit on one line the block has to be broken. The breaks are used to specify where to break the block. A break has a length and an indention. The length specifies the number of single space characters to be written if the block is not broken. The indention specifies the number single space characters to be written (relative to the surrounding block) at the beginning of a new line if the block is broken. </P>
<P> There exist two types of blocks: consistent and inconsistent blocks. If a consistent block cannot be written on one line the substreams of the block will be written on separate lines. I.e. all breaks in the block will imply a line break. If an inconsistent block cannot be written on one line the substreams are only written on a separate line if they cannot be written on the rest of the current line. </P>
<P> The reason for the distinction between consistent and inconsistent blocks is that one might prefer:</P>
<PRE CLASS=beta>
	if &lt;&lt;condition:exp&gt;&gt; then
	       &lt;&lt;thenPart:statement&gt;&gt;
	else
	       &lt;&lt;elsePart:statement&gt;&gt;
	endif
to	if &lt;&lt;condition:exp&gt;&gt; then &lt;&lt;thenPart:statement&gt;&gt; else
	&lt;&lt;elsePart:statement&gt;&gt; endif
and	import a,b,
	       c
to<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-4">[4]</A></EM>	import a,
	       b,
	       c
</PRE>






<HR>

<A NAME=FOOTNOTE-4>[4] </A>
 Naturally, we are assuming that the line width is not sufficient to have the entire  import a, b, c on one single line









<!-- TOC -->



<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>Metaprogramming System</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=yggdrasil-32.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=yggdrasil-30.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
