<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>bidl - Handling Ast Overflows</TITLE>
<LINK REL=stylesheet HREF="../style/miadoc.css" TYPE="text/css">
</HEAD>
<BODY>

<A HREF=imports.html><IMG ALIGN=BOTTOM SRC=../images/next.gif ALT=Next BORDER=0></A> 
<A HREF=limitations.html><IMG ALIGN=BOTTOM SRC=../images/prev.gif ALT=Previous BORDER=0></A> 
<A HREF=index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC=../images/content.gif ALT=Contents BORDER=0></A>
<A><IMG ALIGN=BOTTOM SRC=../images/indexg.gif ALT=Index BORDER=0></A>
<P>
<P>bidl - IDL to BETA Translation</P>
<HR>
<!---------------------------------------------------------->
<H2><A NAME="astoverflow">Handling AST overflows</A></H2>

Because of limitations in the current version of the Mjølner
Metaprogramming system, there is a limit on the size of the files
that can be parsed. This can influence in two cases, when translating
an IDL file to BETA:
<OL>
<LI>The IDL file can be too large to be parsed by <CODE>bidl</CODE>
<LI>The generated BETA file can be too large to be parsed by the BETA
compiler.
</OL>

Let us take the second case first:

<H3>Generated BETA file too large for BETA compiler</H3>

If this happens, you should first try to use the <CODE>-c</CODE> (or
<CODE>--compact</CODE>) option of bidl. This will generate code 
without comments, and this can in some cases make the BETA file 
sufficiently small.
<P>
If this does not solve the problem, currently you will have to split
up the BETA file before compiling it. This is most easily done by
splitting up the original IDL file and regenerating the BETA files.
See the next section.

<H3>IDL file too large for bidl</H3>

If an ast-overflow error happens during parsing of an IDL file in
bidl, you can try one thing first: If there are expressions, which
comes
from preprocessing (e.g. symbolic disp-id's, which turns out to be
expressions instead of mere constants), you can try to leave out
the include-files, which defines these expressions. This will
make the symbolic names be used in the generated BETA files, but
often the names are simply ignored in producing the BETA files. E.g.
the values in <CODE>id(...)</CODE> in attributes of methods in
a dispinterface is not used in the BETA files.
Leaving out the expressions and only having an identifier will yield
smaller ASTs.
<P>

If this is not enough/not possible,
currently there is no other way of solving this problem than
splitting up the IDL file.
<P>
The following scheme is the suggested one for solving the problem:
<P>
Assume that the following IDL file gives AST overflow:
<P>
<CENTER>

<TABLE border=3 cellpadding=5 bgcolor="wheat">
<CAPTION ALIGN=top><CODE><STRONG>foobar.idl</STRONG></CODE></CAPTION>
<TR><TD><PRE>
interface foo: IUnknown {
  ...
}
interface bar: IUnknown {
  ...
}
</PRE></TD>
</TABLE>

</CENTER>
<P>
It is then suggested, that you split the file into the following 3 files:
<P>
<CENTER>

<CENTER>
<TABLE border=3 cellpadding=5 bgcolor="wheat">
<CAPTION ALIGN=top><CODE><STRONG>foobar1.idl</STRONG></CODE></CAPTION>
<TR><TD><PRE>
interface foo: IUnknown {
  ...
}
</PRE></TD></TABLE>

</TD><TD>

<TABLE border=3 cellpadding=5 bgcolor="wheat">
<CAPTION ALIGN=top><CODE><STRONG>foobar2.idl</STRONG></CODE></CAPTION>
<TR><TD><PRE>
import "foobar1.idl";
interface bar: IUnknown {
  ...
}
</PRE></TD></TABLE>

</TD></TABLE>
</CENTER>

<P>
<TABLE border=3 cellpadding=5 bgcolor="wheat">
<CAPTION ALIGN=top><CODE><STRONG>foobar.idl</STRONG></CODE></CAPTION>
<TR><TD><PRE>
import "foobar2.idl";
</PRE></TD>
</TABLE>

</CENTER>
<P>

The generated <CODE>foobar.bet </CODE>will behave exactly as the one
that would have resulted from converting the original
<CODE>foobar.idl</CODE>, given that this was possible.
</BLOCKQUOTE>

<!---------------------------------------------------------->
<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="40%" align="left">
<ADDRESS>bidl - IDL to BETA Translation</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>

<P>
<A HREF=imports.html><IMG ALIGN=BOTTOM SRC=../images/next.gif ALT=Next BORDER=0></A> 
<A HREF=limitations.html><IMG ALIGN=BOTTOM SRC=../images/prev.gif ALT=Previous BORDER=0></A> 
<A HREF=index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC=../images/content.gif ALT=Contents BORDER=0></A>
<A><IMG ALIGN=BOTTOM SRC=../images/indexg.gif ALT=Index BORDER=0></A>

</BODY>
</HTML>


