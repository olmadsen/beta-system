<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>FAQ: BETA Programming Language</TITLE>
<LINK REV="made" HREF="mailto:jlk@daimi.au.dk">
<LINK REL=stylesheet HREF="../style/miadoc.css" TYPE="text/css">
</HEAD>

<BODY>
Archive-name: beta-language-faq<BR>
Last-modified: Mar 30, 1999<BR>
Version: 1.15 (last public version 1.12 - dated: May 07, 1998)<BR>
Maintained-by: J&oslash;rgen Lindskov Knudsen 
&lt;<a href="mailto:jlk@daimi.au.dk"><TT>jlk@daimi.au.dk</TT></a>&gt;

<HR> 
<P>
<IMG SRC="beta.js.gif" WIDTH=244 HEIGHT=70 ALT="">
<P>
<H1>BETA: Frequently Asked Questions (FAQ)</H1>


This question-and-answer list is posted regularly to the
BETA mail group, and to the Usenet newsgroups 
<A HREF="news:comp.lang.beta">comp.lang.beta</A>, 
<A HREF="news:comp.answers">comp.answers</A>, and 
<A HREF="news:news.answers">news.answers</A>.   
<P>

Please send corrections, additions and comments to J&oslash;rgen Lindskov
Knudsen (<code><a
href="mailto:jlk@daimi.au.dk">jlk@daimi.au.dk</a></code>).
<P>

This information is abstracted and condensed from the posts of many
different contributors.  No guarantees are made regarding its
accuracy.





<HR>
There are several ways to get this document:

<UL>
<LI>E-mail: 
The FAQ can be obtained by sending an empty mail to <TT><a href="mailto:usergroup-faq@mjolner.com">usergroup-faq@mjolner.com</a></TT> 

<LI>FTP: 
The FAQ can be fetched via anonymous ftp from <TT>ftp.daimi.au.dk</TT> as
<TT><A HREF="ftp://ftp.daimi.au.dk/pub/beta/faq/beta-language-faq.txt">ftp://ftp.daimi.au.dk/pub/beta/faq/beta-language-faq.txt</A></TT>

<LI>WWW:
The FAQ is available in hypertextualized form on the World Wide Web at URL
<TT><A HREF="http://www.daimi.au.dk/~beta/doc/faq/beta-language-faq.html">http://www.daimi.au.dk/~beta/doc/faq/beta-language-faq.html</A></TT>.
This site always contains the most recent version.<BR>
<IMG SRC="../images/handright.gif" ALT="Notice!" width=24 height=13 align=left><B>Notice:</B> This is a new location as of version 1.13 of this FAQ.
<BR clear=all>
</UL>


More information on BETA can be found on:
<UL>
<LI>The BETA Home Page:
<TT><A HREF="http://www.daimi.au.dk/~beta/">http://www.daimi.au.dk/~beta/</A></TT>
<LI>The Mj&oslash;lner System Home Page:
<TT><A HREF="http://www.mjolner.com">http://www.mjolner.com/</A></TT>
</UL>




<H2>Changes since version 1.12</H2>
<H3>New entries:</H3>
<UL>
<LI><A HREF="#M03">M03) How do i download MPW from Apple?</A>
<LI><A HREF="#M09">M09) I cannot compile Beta programs with MPW that ships with CW Pro 2.</A>
<LI><A HREF="#Lx04">Lx04) Using the Mj&oslash;lner System with RedHat 5 and other glibc 2 based Linux-systems.</A>
<LI><A HREF="#Sun02">Sun02) Running BETA on Solaris v2.6 and later</A>
</UL>

<H3>Changed entries:</H3>
<UL>
<LI><A HREF="#W07">W07) </A>
</UL>

In addition, a number of minor changes and corrections have been made
to other entries.



<H2><A NAME="contents">Contents</A></H2>

<DIV class=toc>

<UL>
<LI><A HREF="#PartI">Part I: <STRONG>Frequently Asked Questions</STRONG></A>

<UL>
<LI><A HREF="#Q01">Q01) What is BETA?</A>
<LI><A HREF="#Q02">Q02) Where did BETA come from?</A>
<LI><A HREF="#Q03">Q03) What BETA products are available?</A>
<LI><A HREF="#Q04">Q04) Are there any school or student discounts?</A>
<LI><A HREF="#Q05">Q05) Is BETA available in the public domain?</A>
<LI><A HREF="#Q06">Q06) What books are available for learning about BETA?</A>
<LI><A HREF="#Q07">Q07) Does an introduction to BETA besides the BETA book exist?</A>
<LI><A HREF="#Q08">Q08) Are any magazines or newsletters concerning BETA available?</A>
<LI><A HREF="#Q09">Q09) Are there any user groups related to BETA?</A>
<LI><A HREF="#Q10">Q10) Are there any mailing lists related to BETA?</A>
<LI><A HREF="#Q11">Q11) Are there any newsgroups related to BETA?</A>
<LI><A HREF="#Q12">Q12) Is there an archive of BETA postings?</A>
<LI><A HREF="#Q13">Q13) Are there any conferences for BETA users?</A>
<LI><A HREF="#Q14">Q14) Is BETA available on PC, Mac, NeXT, Amiga, Atari, ...?</A>
<LI><A HREF="#Q15">Q15) Are there standards for the BETA language?</A>
<LI><A HREF="#Q16">Q16) What is Mj&oslash;lner, Sif, Valhalla, Bifrost, Yggdrasil, etc.?</A>
<LI><A HREF="#Q17">Q17) Is it possible to obtain an evaluation version of
        the Mj&oslash;lner System?</A>
<LI><A HREF="#Q18">Q18) What is the origin of the name BETA?</A>
<LI><A HREF="#Q19">Q19) How to format BETA programs in LaTeX?</A>
</UL>
<P>
<LI><A HREF="#PartII">Part II: <STRONG>Language Issues</STRONG></A>

<UL>
<LI><A HREF="#L01">L01) What features do BETA have?</A>
<LI><A HREF="#L02">L02) What changes have been made to the BETA language definition?</A>
<LI><A HREF="#L03">L03) How do I deal with concurrency in BETA?</A>
<LI><A HREF="#L04">L04) How do I deal with persistence in BETA?</A>
<LI><A HREF="#L05">L05) How do I deal with distribution in BETA?</A>
<LI><A HREF="#L06">L06) How do I deal with exception handling in BETA?</A>
<LI><A HREF="#L07">L07) Can classes be treated as first-order elements in BETA?</A>
<LI><A HREF="#L08">L08) What about garbage collection in BETA?</A>
<LI><A HREF="#L09">L09) How do I create a &quot;parameterized class&quot;?</A>
<LI><A HREF="#L10">L10) What is the difference between a virtual binding, a further binding and a final binding (i.e. between <CODE>:&lt;</CODE>, <CODE>::&lt;</CODE>, and <CODE>::</CODE>)?</A>
<LI><A HREF="#L11">L11) What about invariants in BETA?</A>
<LI><A HREF="#L12">L12) What about change propagation in BETA?</A>
<LI><A HREF="#L13">L13) What about futures in BETA?</A>
<LI><A HREF="#L14">L14) Why can't local variables be accessed in <CODE>INNER</CODE>?</A>
<LI><A HREF="#L15">L15) How do I implement a copy (or clone) operation?</A>
<LI><A HREF="#L16">L16) Why doesn't BETA have multiple inheritance?</A>
<LI><A HREF="#L17">L17) What is the rationale behind the syntax of BETA?</A>
<LI><A HREF="#L18">L18) How do the scope rules of BETA actually work?</A>
<LI><A HREF="#L19">L19) What is a pattern?</A>
<LI><A HREF="#L20">L20) Are identifiers and keyworks case-sensitive in BETA?</A>
<LI><A HREF="#L21">L21) What characters are allowed in BETA identifiers? </A>
<LI><A HREF="#L22">L22) What is the exact semantics of <TT>leave
P</TT> and <TT>restart P</TT>, when <TT>P</TT> is the name of a pattern?</A>
<LI><A HREF="#L23">L23) What is the BETA lexem syntax?</A>
<LI><A HREF="#L24">L24) What is the maximum length of a BETA identifier?</A>
<LI><A HREF="#L25">L25) What is the exact qualification rules for nested patterns?</A>
</UL>
<P>
<LI><A HREF="#PartIII">Part III: <STRONG>Environment Issues</STRONG></A>

<UL>
<LI><A HREF="#E01">E01) What is the Mj&oslash;lner System?</A>
<LI><A HREF="#E02">E02) What does the Mj&oslash;lner System contain?</A>
<LI><A HREF="#E03">E03) What libraries come with the Mj&oslash;lner System?</A>
<LI><A HREF="#E04">E04) What frameworks come with the Mj&oslash;lner System?</A>
<LI><A HREF="#E05">E05) What tools come with the Mj&oslash;lner System?</A>
<LI><A HREF="#E06">E06) Does a <CODE>beta-mode</CODE> for Emacs exist?</A>
</UL>
<P>
<LI><A HREF="#PartIV">Part IV: <STRONG>Specific Issues</STRONG></A>

<UL>
<LI><A HREF="#SectionI">Section I: The Fragment System</A>

<UL>
<LI><A HREF="#F01">F01) What is the purpose of the fragment system?</A>
<LI><A HREF="#F02">F02) How do I separate implementation and specification code?</A>
<LI><A HREF="#F03">F03) How do I work around
        <CODE>&quot;*****Only pattern-declarations may appear in a fragment of 
        category 'attributes'&quot;</CODE>?</A>
<LI><A HREF="#F04">F04) Why can't I have instances in attributes-fragments?</A>
<LI><A HREF="#F05">F05) Why can't I have virtual declarations/bindings in attributes-fragments?</A>
<LI><A HREF="#F06">F06) What are the differences between the <CODE>INCLUDE</CODE> facilities of BETA and C?</A>
<LI><A HREF="#F07">F07) Why doesn't the compiler complain about a missing <CODE>inner</CODE> in a <CODE>body</CODE> fragment?</A>
<LI><A HREF="#F08">F08) Can <TT>&lt;&lt;Attributes&gt;&gt;</TT> be used instead of <TT>&lt;&lt;AttributeDecl&gt;&gt;</TT>?</A>
</UL>

<LI><A HREF="#SectionII">Section II: The X libraries</A>

<UL>
<LI><A HREF="#X01">X01) Why does my label widget sometimes get the attribute name as
        label-string, and sometimes not?</A>
<LI><A HREF="#X02">X02) Why do I get the error "<CODE>There must be only one non-shell widget which is son of Toplevel</CODE>"?</A>
<LI><A HREF="#X03">X03) How do I get a separate window for my widget?</A>
<LI><A HREF="#X04">X04) Why do I get the error "<TT>clockWidgetClass: undefined</TT>" when linking my <TT>AwEnv</TT> program?</A> [corrected in r4.0]
<LI><A HREF="#X05">X05) Why do I get the error "<TT>Error: NULL
ArgVal in XtGetValues</TT>" when executing my <TT>Xt</TT>
program?</A> [corrected in r4.0]
<LI><A HREF="#X06">X06) How do I set font information in MotifStrings?</A>
<LI><A HREF="#X07">X07) Resource specification errors in Xt/v1.9</A>
</UL>

<LI><A HREF="#SectionIII">Section III: The BETA compiler</A>

<UL>
<LI><A HREF="#C01">C01) What is the execution speed of BETA programs?</A>
<LI><A HREF="#C02">C02) How do I get rid of the warning:
        <CODE>&quot;A run-time qualification check will be inserted here&quot;</CODE>?</A>
<LI><A HREF="#C03">C03) What *does* that Qua-check warning mean, anyway?</A>
<LI><A HREF="#C04">C04) How do I work around
        <CODE>&quot;*****Repetition of non simple patterns is not implemented&quot;</CODE>?</A> [corrected in r4.0]
<LI><A HREF="#C05">C05) How do I work around <CODE>&quot;Labeled imperative not implemented&quot;</CODE>?</A>
<LI><A HREF="#C06">C06) Why does a BETA program called <CODE>test.bet</CODE> cause problems on some UNIX installations?</A>
<LI><A HREF="#C07">C07) How do I disable qualification check warnings?</A>
<LI><A HREF="#C08">C08) What is the difference between <CODE>P</CODE> and <CODE>&amp;P</CODE>?</A>
<LI><A HREF="#C09">C09) What does &quot;<TT>virtual prefix not implemented</TT>&quot; mean?</A> [corrected in r4.0]
<LI><A HREF="#C10">C10) What should I do if the compiler prints &quot;<TT>Please report the error to Mjolner Informatics</TT>&quot; and stops?</A>
<LI><A HREF="#C11">C11) What are the known errors the compiler?</A>
<UL>
<LI><A HREF="#C11.1">C11.1) Bugs in version 5.0</A>
<LI><A HREF="#C11.2">C11.2) Bugs in version 5.1</A>
<LI><A HREF="#C11.3">C11.3) Bugs in version 5.2</A>
</UL>
<LI><A HREF="#C12">C12) Tracing the work of compiler?</a>
<LI><A HREF="#C13">C13) Problem with floating point expressions in
connection with repetitions</a>
<LI><A HREF="#C14">C14) New features introduced in the Compiler</A>
<UL>
<LI><A HREF="#C14.1">C14.1) New features in version 5.3 of the Compiler</A>
<LI><A HREF="#C14.2">C14.2) New features in version 5.2 of the Compiler</A>
<LI><A HREF="#C14.3">C14.3) New features in version 5.1 of the Compiler</A>
<LI><A HREF="#C14.4">C14.4) New features in version 5.0 of the Compiler</A>
</UL>
</UL>

<LI><A HREF="#SectionIV">Section IV: The Basic libraries</A>

<UL>
<LI><A HREF="#B01">B01) How do you compare text strings in BETA?</A>
<LI><A HREF="#B02">B02) How do you read and write text in BETA?</A>
<LI><A HREF="#B03">B03) Why does <CODE>getInt</CODE> followed by <CODE>getLine</CODE> not necessarily work as expected?</A>
<LI><A HREF="#B04">B04) What is the rationale behind the Mj&oslash;lner System file directory
        structures?</A>
<LI><A HREF="#B05">B05) What do the <CODE>(* idx+ *)</CODE>, etc. comments mean?</A>
<LI><A HREF="#B06">B06) Error in v1.4/seqContainer.bet</A>? [corrected in r4.0]
<LI><A HREF="#B07">B07) Error in v1.4/regexp.bet</A>? [corrected in r4.0]
<LI><A HREF="#B08">B08) Error in v1.4/basicsystemenv.bet</A>? [corrected in r4.0]
<LI><A HREF="#B09">B09) Why does my guienvsystemenv program stop at startup?</A>
</UL>
</UL>
<P>
<LI><A HREF="#PartV">Part V: <STRONG>Platform Specific Issues</STRONG></A>
<UL>

<LI><A HREF="#SectionV">Section V: BETA on Macintosh</A>

<UL>
<LI><A HREF="#M01">M01) What are the system requirements to run BETA on Macintosh?</A>
<LI><A HREF="#M02">M02) What is MPW. Where do I get it?</A>
<LI><A HREF="#M03">M03) How do i download MPW from Apple?</A>
<LI><A HREF="#M04">M04) Do I need a floating point unit to use BETA?</A>
<LI><A HREF="#M05">M05) Does BETA work on PowerPC machines?</A>
<LI><A HREF="#M06">M06) Does BETA work on Motorola machines?</A>
<LI><A HREF="#M07">M07) Known bugs, limitations and inconveniences in release 4.0.2</A>
<LI><A HREF="#M08">M08) Known bugs, limitations and inconveniences in release 4.1</A>
<LI><A HREF="#M09">M09) I cannot compile Beta programs with MPW that ships with CW Pro 2.</A>
</UL>

<LI><A HREF="#SectionVI">Section VI: BETA on Windows 95, 98, 2000 and Windows NT</A>

<UL>
<LI><A HREF="#W01">W01) What are the system requirements to run BETA on
Windows 95, 98, 2000 and Windows NT?</A>
<LI><A HREF="#W02">W02) SDK Requirements for Windows 95, 98, 2000 or Windows NT</A>
<LI><A HREF="#W03">W03) Why do I need a MAKE facility?</A>
<LI><A HREF="#W06">W06) Known bugs, limitations and inconveniences in release 4.0.2</A>
<LI><A HREF="#W07">W07) Known bugs, limitations and inconveniences in release 4.1</A>
</UL>

<LI><A HREF="#SectionVII">Section VII: BETA on HPUX</A>

<UL>
<LI><A HREF="#HP01">HP01) What are the system requirements to run BETA on
HPUX workstations?</a>
<LI><A HREF="#HP02">HP02) Why do some callbacks cause &quot;<TT>Illegal Instruction</TT>&quot; on <TT>hpux9pa</TT> (using v5.0 of the compiler)?</A>
</UL>

<LI><A HREF="#SectionVIII">Section VIII: BETA on Linux</A>

<UL>
<LI><A HREF="#Lx01">Lx01) What are the system requirements to run BETA on
Linux machines?</a>
<LI><A HREF="#Lx02">Lx02) How to make the BETA compiler version 5.0/5.1 work with
Linux ELF libraries</A> [corrected in r4.0]
<LI><A HREF="#Lx03">Lx03) Why does GuiEnv demos segmentation fail?
</A> [error in r4.0 &amp; r4.0.1]
<LI><A HREF="#Lx04">Lx04)Using the Mj&oslash;lner System with RedHat 5 and other glibc 2 based Linux-systems.</A>
</UL>

<LI><A HREF="#SectionIX">Section IX: BETA on Silicon Graphics</A>

<UL>
<LI><A HREF="#SG01">SG01) What are the system requirements to run BETA on
Silicon Graphics workstations?</A>
<LI><A HREF="#SG02">SG02) Gnu C Compiler <code>gcc</code> not supported</A>
<LI><A HREF="#SG03">SG03) Remember to set <code>LD_LIBRARY_PATH</code></A>
<LI><A HREF="#SG04">SG04) Using BETA on IRIX 6 machines</A>
<LI><A HREF="#SG05">SG05) Limitations, bugs and inconveniences</A>
<LI><A HREF="#SG06">SG06) Disclaimer (Slow startup of tools)</A>
</UL>

<LI><A HREF="#SectionX">Section X: BETA on Sun workstations</A>

<UL>
<LI><A HREF="#Sun01">Sun01) What are the system requirements to run BETA on
Sun workstations?</A>
<LI><A HREF="#Sun02">Sun02) Running BETA on Solaris v2.6 and later</A>
</UL>

</UL>
</UL>
</DIV>

<!--++++++++++++++++++++++++++++++-->


<H2><A NAME="PartI">PART I: Frequently Asked Questions</A></H2>



<H3><A NAME="Q01">Q01) What is BETA?</A></H3>

BETA is a modern object-oriented language with comprehensive facilities for
procedural and functional programming.  BETA has powerful abstraction
mechanisms than provide excellent support for design and implementation,
including data definition for persistent data.  The abstraction mechanisms
include support for identification of objects, classification, and composition.
BETA is a strongly typed language (like Simula, Eiffel, and C++), with most 
type checking being carried out at compile-time.
<P>

The abstraction mechanisms include class, procedure, function, coroutine,
process, exception, and many more, all unified into the ultimate abstraction
mechanism: the pattern.  In addition to the pattern, BETA has subpattern,
virtual pattern, and pattern variable.
<P>

BETA does not only allow for passive objects as in Smalltalk, C++, and Eiffel.
BETA objects may also act as coroutines, making it possible to model
alternating sequential processes and quasi-parallel processes.  BETA coroutines
may also be executed concurrently with supported facilities for 
synchronization and communication, including monitors and rendezvous 
communication.




<H3><A NAME="Q02">Q02) Where did BETA come from?</A></H3>

BETA originates from the Scandinavian school of object-orientation where the
first object-oriented language Simula was developed.  Object-oriented
programming originated with the Simula languages developed at the Norwegian
Computing Center, Oslo, in the 1960s.  The first Simula language, Simula I, was
intended for writing simulation programs.  Simula I was later used as a basis
for defining a general-purpose programming language, Simula 67 (later renamed
to Simula).  Simula has been used by a relatively small community for a number
of years, although it has had a major impact on research in computer science.
<P>

The BETA language development process started out in 1975 with the aim to
develop concepts, constructs and tools for programming, partly based on the
Simula languages.  The BETA language team consists of Bent Bruun Kristensen,
Birger M&oslash;ller-Pedersen, Ole Lehrmann Madsen, and Kristen Nygaard.  Kristen
Nygaard was one of the two original designers of the Simula languages.




<H3><A NAME="Q03">Q03) What BETA products and services are available?</A></H3>

Currently there is only one supplier of BETA products, namely
Mj&oslash;lner Informatics, who is marketing an entire development
system (the Mj&oslash;lner System) based on the BETA language.
<P>
Mj&oslash;lner Informatics offers the Mj&oslash;lner System
technology to other commercial organizations who are interested in
building BETA products (such as alternative development systems), 
or who are interested in developing value-added products for the
Mj&oslash;lner System.  
This offer is based on licensing of the implementation of the existing 
system (including source code, if needed).

<BLOCKQUOTE>
<EM>Mj&oslash;lner Informatics</EM><DD>
Helsingforsgade 27<BR>
DK-8200 Aarhus N<BR>
Denmark<BR>
Phone: +45 70 27 43 43<BR>
Fax: +45 70 27 43 44<BR>
E-mail: <code><a href="mailto:info@mjolner.com">info@mjolner.com</a></code><BR>
WWW: <code><a href="http://www.mjolner.com">http://www.mjolner.com</a></code><BR>
</BLOCKQUOTE>


<H3><A NAME="Q04">Q04) Are there any school or student discounts?</A></H3>

<P>Generally, the Mjolner System is freely
available directly from Mj&oslash;lner Informatics.  Visit the <a
href="http://www.mjolner.com/mjolner-system/download_en.php">download area</a> for more
information.
<P>
Thus discounts are not an issue.




<H3><A NAME="Q05">Q05) Is BETA available in the public domain?</A></H3>

The BETA language definition is in the public domain.  A reference
manual on the language is in progress (release-date not fixed yet). 

<P>

The Mjolner System is freely available from
Mj&oslash;lner Informatics.  Visit the <a
href="http://www.mjolner.com/mjolner-system/download_en.php">download area</a> for more
information.

<P>

Kai Petzke has initiated a project for writing a freeware compiler for
BETA.  It is implemented as a translator of BETA to C.  For more
information and to download a working copy of the compiler, that
understands most of BETA's grammatical terms, see the web page:
<a href="http://troubadix.physik.tu-berlin.de/~petz0433/beta/eindex.html">
http://troubadix.physik.tu-berlin.de/~petz0433/beta/eindex.html</a>.




<H3><A NAME="Q06">Q06) What books are available for learning about BETA?</A></H3>

The ultimate source of information on the BETA language is:

<A NAME="Q06_beta_book">
<BLOCKQUOTE>
Ole Lehrmann Madsen, Birger M&oslash;ller-Pedersen, Kristen Nygaard:<BR>
<CITE>
&quot;Object-Oriented Programming in the BETA Programming Language&quot;
</CITE><BR>
Addison-Wesley and ACM Press, 1993<BR>
ISBN 0-201-62430-3<BR>
</BLOCKQUOTE>
</A>

An german introduction to BETA can be found in the book:

<A NAME="Q06_german_beta_book">
<BLOCKQUOTE>
Ernst Erich Doberkat, Stefan Di&szlig;mann:<BR>
<CITE>
&quot;Einf&uuml;hrung in die objectkorientierte Programmierung mit BETA&quot;
</CITE><BR>
Addison-Wesley-Longman, 1996<BR>
ISBN 3-8273-1026-1<BR>
</BLOCKQUOTE>
</A>


The Mj&oslash;lner System and the BETA language is also extensively 
described in the book:

<A NAME="Q06_mjolner_book">
<BLOCKQUOTE>
J&oslash;rgen Lindskov Knudsen, Mats L&ouml;fgren, Ole Lehrmann Madsen, Boris
Magnusson (eds.):<BR>
<CITE>
&quot;Object-Oriented Environments: The Mj&oslash;lner Approach&quot;
</CITE><BR>
Prentice-Hall, 1993<BR>
ISBN 0-13-009291-6<BR>
</BLOCKQUOTE>
</A>



<H3><A NAME="Q07">Q07) Does an introduction to BETA besides the BETA book exist?</A></H3>

The previously mentioned book: <CITE>&quot;Object-Oriented Environments: The Mj&oslash;lner
Approach&quot;</CITE> contains an introductory chapter on the BETA language. 
<P>

Besides, various current activities indicate that introductory material in 
the form of tutorials are in the pipeline.
<P>

See also question <A HREF="#Q08">Q08</A>.




<H3><A NAME="Q08">Q08) Are any magazines or newsletters concerning BETA available?</A></H3>

The BETA language has been presented in several conference papers, including
the OOPSLA, ECOOP, and TOOLS conferences.  BETA has also been described in a
couple of articles in <CITE>Dr. Dobb's Journal</CITE>, #206, October 1993.
Furthermore, <CITE>Communications of the ACM</CITE>, Vol. 37, No. 2, February 
1994, is a special issue on Hypermedia, including three papers on the use of
the Mj&oslash;lner System (and the BETA language) for building hypermedia
systems.  




<H3><A NAME="Q09">Q09) Are there any user groups related to BETA?</A></H3>

Yes, there is a user group hosted by Mj&oslash;lner Informatics.  
The user group is primarily organized around the BETA mailing list: 
<TT><a href="mailto:usergroup@mjolner.com">usergroup@mjolner.com</a></TT>
<P>

The BETA user group is one of the important sources of information on the
developments of the Mj&oslash;lner System, and an important source of information
to Mj&oslash;lner Informatics on the users' expectations for future developments.
<P>

See also question <A HREF="#Q10">Q10</A>.




<H3><A NAME="Q10">Q10) Are there any mailing lists related to BETA?</A></H3>

There is a mailing list for BETA, organized by Mj&oslash;lner Informatics:
<TT><a href="mailto:usergroup@mjolner.com">usergroup@mjolner.com</a></TT>

In order to be added to  the mailing list, please send 
a empty mail to:
<TT><a href="mailto:usergroup-subscribe@mjolner.com">usergroup-subscribe@mjolner.com</a></TT>

To be removed, send an empty mail to:
<TT><a href="mailto:usergroup-unsubscribe@mjolner.com">usergroup-unsubscribe@mjolner.com</a></TT>

Mail sent to the mailing list is automatically forwarded to the
<TT>comp.lang.beta</TT> newsgroup and news posted on the newsgroup is
automatically forwarded to the mailing list.  The mailing list is
lightly moderated to avoid spam.


<H3><A NAME="Q11">Q11) Are there any newsgroups related to BETA?</A></H3>

The <A HREF="news:comp.lang.beta"><TT>comp.lang.beta</TT></A> Usenet
newsgroup is available for discussing issues related to the BETA
language.

<P>

Postings to <TT>comp.lang.beta</TT> are
automatically forwarded (moderated) to the <TT><a
href="mailto:usergroup@mjolner.com">usergroup@mjolner.com</a>
</TT>
mailing list and mails to the mailing list is automatically posted to
the newsgroup.




<H3><A NAME="Q12">Q12) Is there an archive of BETA postings?</A></H3>

Mj&oslash;lner Informatics keeps an archive of the BETA mailing list. 
Send an empty email to 
<TT><a href="mailto:usergroup-help@mjolner.com">usergroup-help@mjolner.com</a></TT>
for information on accessing this archive.

<P>
In addition, the University of Aarhus maintains an archive of all 
postings to the <TT>comp.lang.beta</TT> newsgroup, available at:
<UL>
<LI><A HREF="http://www.daimi.au.dk/~beta/News/"><TT>http://www.daimi.au.dk/~beta/News/</TT></A>
<LI><A HREF="ftp://ftp.daimi.au.dk/pub/beta/comp.lang.beta"><TT>ftp://ftp.daimi.au.dk/pub/beta/comp.lang.beta</TT></A>
</UL>
The former is updated daily, the latter annually.





<H3><A NAME="Q13">Q13) Are there any conferences for BETA users?</A></H3>

There are no conferences devoted entirely to the BETA language and 
development system.  BETA shares the spotlight with other object-oriented
languages including C++, Eiffel, and Smalltalk in conferences like:
<P>

<DL>
<DT><EM>TOOLS</EM><DD>
the major international conference devoted to the applications of
Object-Oriented technology.

<DT><EM>ECOOP</EM><DD>
the European Conference on Object-Oriented Programming.

<DT><EM>OOPSLA</EM><DD>
the major international conference on Object-Oriented Programming, 
Systems, Languages, and Applications.
</DL>



<H3><A NAME="Q14">Q14) Is BETA available on PC, Mac, NeXT, Amiga, Atari, ...?</A></H3>

Currently, BETA is available on UNIX workstations, on PowerPC Macintosh and on
Intel-based PCs.
<P>

On UNIX, the platforms supported are: Sun Sparc (Solaris), HP 9000
(series 700) and Silicon Graphics MIPS machines running IRIX 5.3 or 6.

<P>

Mj&oslash;lner System is also available for Linux
(386/486/Pentium).  Linux is a very popular freely available UNIX
implementation (for more information, see <a
href="http://www.linux.com/">Linux.com</a>).
<P>

Mj&oslash;lner System is also available for Windows 95, 98, 2000 and
Windows NT (386/486/Pentium and compatibles).
<P>

There are no current plans to port the Mj&oslash;lner System to
neither DOS nor Windows 3.1 due to the 16-bit addressing and
8-character filename limitations.
<P>

Although not officially confirmed by Mj&oslash;lner Informatics, users
of the Mj&oslash;lner System have reported that the
Mj&oslash;lner System can be effectively used on Amiga 4000
machines under the MacOS simulator, with an execution speed reported
to be comparable to that of an HP 9000/425 workstation.

<P>

The following additional info is kindly supplied by Juha Makinen
&lt;<a href="mailto:Juha.Makinen@cs.Helsinki.FI">Juha.Makinen@cs.Helsinki.FI</a>&gt;:

<blockquote>
   Actually this program is an emulator, because it can run
   native Apple Macintosh 680x0-code in Amigas. The name of this
   program is an Emplant and it is a 99,9% compatible Apple
   Macintosh emulator. It emulates the Machintosh (like Quadra)
   even <i>faster</i> than an equivalent Macintosh is running with
   the same processor and clock-speed. (This is due to separate
   graphics, I/O etc. co-processors found on motherboard of the 
        Amiga. Some programs show two times better performance.)
<P>
   The program is an multi-platform -emulator and can also 
        multitask another emulation and/or AmigaOS on the backgroud.
   There is a rival (Amax IV) for this emulation-program, but it is
        <i>only</i> 99,5% Macintosh-compatible and is not supported as widely
   as this one is. (I'm not sure which one the original author refers
   to, but I'm quite sure that you can run Beta-compiler on Emplant
   with Macintosh Emulation. Every program which run in original
   Quadra should run on Emplant.)
<P>
   And as an addition, you can run Emplant-emulator also on
   the Amiga 3000 (and A2000 if you have a processor-card with MMU).
</blockquote>


<H3><A NAME="Q15">Q15) Are there standards for the BETA language?</A></H3>

The definition of the BETA language is in the public domain. This
definition is controlled by the original designers of the BETA
language: Bent Bruun Kristensen, Ole Lehrmann Madsen, Birger
M&oslash;ller-Pedersen, and Kristen Nygaard.  This means that anyone
or any company may create a compiler, interpreter, or whatever having
to do with BETA.

<P>
Currently, no language definition document exist.  Work is in progress
to write this language definition document.  The definition will be
given in strict natural language.

<P>
See section <A HREF="#Q06">Q06</A> and <A HREF="#L02">L02</A> for
information on available language descriptions and latest changes to
the language.
<P>

The BETA and the Mj&oslash;lner System trademarks are owned and
controlled by Mj&oslash;lner Informatics.




<H3><A NAME="Q16">Q16) What is Mj&oslash;lner, Sif, Valhalla, Bifrost, Yggdrasil, etc.?</A></H3>

Many have wondered about the origins of the strange product names used for
parts of the Mj&oslash;lner System.  Due to the origin of the Mj&oslash;lner BETA
System, many of the components of the system bear Nordic names.  These Nordic
names originate from the Nordic Mythology, and are thus names within the
common cultural background of people in the entire Nordic region:
<P>

<DL>
<DT><EM>Mj&oslash;lner:</EM><DD>
is the name of the hammer of the god Thor.  According to the
Mythology, this hammer is the perfect tool that cannot fail, that
grows with the task, and always returns to the hand of Thor if he
throws it at something.  Finally about the pronunciation of
Mj&oslash;lner. For English speaking people, the &quot;spelling of the
pronunciation&quot; could be: &quot;Myolner&quot; or
&quot;Myulner&quot;, and for French speaking people it could be:
&quot;Mieulnor&quot;.

<DT><EM>Yggdrasil:</EM><DD>
is the name of the Tree of the World, the ash tree of which the
crown covers the whole world.  The tree gets it power from the gods, from the
evil giants, and from the kingdom of the dead.  Everything in the world
happens under the mighty crown of Yggdrasil.
Yggdrasil is the name of the metaprogramming system.

<DT><EM>Bifrost:</EM><DD>
is the name of the luminous bridge, the rainbow, that leads from
Midgaard to Asgaard.  Midgaard is the place where the human beings live, and
Asgaard is the habitat of the Gods in the middle of the world.
Bifrost is the name of the graphics system.

<DT><EM>Valhalla:</EM><DD>
is the name of Odin's hall to where all dead warriors come when they
have fallen as heroes on the battlefield.
Valhalla is the name of the source-level debugger.

<DT><EM>Sif:</EM><DD>
is the name of the wife of Thor.  Sif is famous for her golden hair.
Sif is the name of the hyper structure editor.

<DT><EM>Freja:</EM><DD>
is the name of the goddess of love.  She lives in Folkvang and is the
most beautiful of all women in Asgaard.  She owns the golden piece of jewelry
Brisingemen.
Freja is the name of the CASE tool.

<DT><EM>Frigg:</EM><DD>
is the name of the wife of Odin and queen of Asgaard.
Frigg is the name of the user interface editor.

<DT><EM>Odin:</EM><DD>
is the name of the highest ranking god in Asgaard.

<DT><EM>Thor:</EM><DD>
is the name of the strongest of all gods. He is the god for all 
peasants.  He is the son of Odin and Frigg and lives together with his wife Sif
in Trudvang on the farm Bilskirner which is the biggest house in the world,
with 540 floors.
</DL> 




<H3><A NAME="Q17">Q17) Is it possible to obtain an evaluation version of the Mj&oslash;lner System?</A></H3>

The latest release 5.0 of The Mjølner System can be downloaded 
free of charge from

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/download/">http://www.mjolner.com/download/</A>
</BLOCKQUOTE>


<H3><A NAME="Q18">Q18) What is the origin of the name BETA?</A></H3>

[Ole Lehrmann Madsen (<code><a href="mailto:olm@daimi.au.dk">olm@daimi.au.dk</a></code>) writes:]
<p>

Originally Beta was just one of a series of languages developed at
Nordic universities.
<p>

The first object-oriented language Simula was originally designed as a
simulation language but it was soon realised that the main ideas could
be used for programming in general and this lead to Simula 67, which
has class, subclass, virtual function coroutines, etc. It also
supplied the first object-oriented framework in the form of Class
Simulation which is a set of classes to support the original goal of
Simula to write simulation programs.
<p>

It turned out that many users of Simula seemed to get more understanding of
their problem domain by having to develop a model using Simula than of
the actual simulation results.
<p>

Kristen Nygaard and others then decided to develop a successor for Simula,
but with main focus of system description - not execution.
This lead to a language called
<blockquote>
   Delta
</blockquote>

In Delta you could express true concurrent objects and use predicates
to express state changes. Delta could, however, not be executed.
Delta means 'participate' in Norwegian'.  [E. Holbaek-Hannsen, P
Haandlykken, K. Nygaard: System Description and the Delta
Language. Norwegian Computing Center, Publ. no 523, 1973]
<p>

When Kristen Nygaard was a visiting professor at Aarhus University in
1973-75, a project was started to develop a programming language based
on the Delta ideas. This language should be a (programming language)
successor to Simula and was called
<blockquote>
   Gamma
</blockquote>

In the seventies, it was often assumed that a general programming language
was not usable as a systems programming langauge. It was therefore
decided to define a systems programming langauge which should also be
used to implement Gamma. This language was called
<blockquote>
   BETA
</blockquote>

Finally the machine level languages were referred to as 
<blockquote>
   Alpha
</blockquote>

Long story:-)
<p>

So what happened to Delta and Gamma?
<p>

There is a (big) report describing Delta and there has later been some
related work on Delta including using it in a few projects, but it is
no longer being used or developed.  The language
<blockquote>
	Epsilon
</blockquote>

was a simplified version of Delta and the result of attempts to
formalize Delta by means of Petri Nets.
<p>

The Gamma language was never developed. During the work on Beta it
was soon realized that there was no need for Gamma. It turned out that
by having powerful abstraction mechanisms in Beta, the Gamma-level
could be handled by supplying class libraries and frameworks.  You may
thus think on the Gamma-level as the libraries and frameworks of the
Mj&oslash;lner System.
<p>

And this is where we are today.
<p>

Some of the stuff in Delta could be handled by adding constraints to
BETA and supporting invariants and pre/post conditions.  (The idea of
invariants and pre/post conditions for classes were originally
suggested by Tony Hoare for Simula. [C.A.R. Hoare: Proof of
correctness of data representation, Acta Informatics, 4, 271-281,
1972]
<p>

The Mj&oslash;lner System has some libraries supporting initial versions of 
constraints and invariants.
<p>

It has often discussed changing the name BETA - to avoid the
beta-testing jokes. The suggestion for a name change is Scala -
Scandinavian Language and also Scala means 'going up'...  But so far
it has been decided to stick with Beta.



<H3><A NAME="Q19">Q19) How to format BETA programs in LaTeX?</A></H3>

The best way to format BETA programs in the LaTeX formatting system
is by using the <code>lgrind</code> LaTeX package.

<p>

You can use the following <code>lgrind</code> style:

<pre>
beta|the BETA programming language:\
        :pb=(^\d?\p\d?\:\d?\p?\d?\(#\d?:\
        :id=_:\
        :bb=\d(\(#|\(if|\(for)\d:\
        :be=\d(#\)|if\)|for\))\d|;:\
        :oc:\
        :cb=\(*:\
        :ce=*\):\
        :sb=':\
        :se=':\
        :tb=%%:\
        :te=%%:\
        :mb=%\$:\
        :me=\$%:\
        :vb=%\|:\
        :ve=\|%:\
        :kw=if then else for repeat\
            do inner none this enter exit leave restart suspend\
            and or xor mod div\
            stop:
</pre>

This <code>lgrind</code> style can be made available in two different ways:

<ul> 

<li> Included in the among standard <code>lgrind</code> styles.  This
is done by copying the above definition into the
<code>lgrindefs</code> styles file, which is installed as part of the
<code>lgrind</code> installation (possibly in the
<code>/usr/share/local/lib/lgrindefs</code> file - dependent on your
local setup).  This installation must be done by the local systems
administrator.

<li> You can also copy the <code>lgrind</code> style onto a file in
your personal file system.  Let us for further reference assume that this file is called: <code>$HOME/lgrind/lgrindefs</code>.

</ul>

<H4>Q19.1) How to use the BETA <code>lgrind</code> style</H4>

When the <code>lgrind</code> style is made available (as above), you can
use it in the following way.
 
<p>

Let us assume, that you have a BETA source file called
<code>prog.bet</code>.

<p>
<ul> 

<li> If the <code>lgrind</code> style is saved among the standard
<code>lgrind</code> styles, you execute:

<pre>
   lgrind -lbeta -i prog.bet &gt; prog.tex
</pre>

<li> If the <code>lgrind</code> style is saved in your personal file
system, you execute:

<pre>
   lgrind -lbeta -d $HOME/lgrind/lgrindefs -i prog.bet &gt; prog.tex
</pre>

</ul>

You are now ready to include the BETA source into a LaTeX document.
You do this by inserting the following in the start of the LaTeX
document:

<pre>
   \usepackage{lgrind}
</pre>

Please note, that you only need to insert this once.

<p>

This implies, that the <code>lgrind</code> LaTeX style is available.
At the position in the document, where you wish the BETA source code,
you just insert one of the following:

<ul>
<li><code>\lgrindfile{prog}</code><br>

which will simply include the file at that point of text, and will
draw horizontal lines before and after the listing.

<li><code>\lagrind[htbp]{prog.tex}{caption}{label}</code><br>

which will put the listing also within a figure environment, using the
float options, caption and label you gave.
</ul>

You insert one <code>lgridfile</code> or <code>lagrind</code> command
for each piece of BETA source code, you wish to include in the
document.



<H2><A NAME="PartII">PART II: Language Issues</A></H2>



<H3><A NAME="L01">L01) What features do BETA have?</A></H3>

BETA replaces classes, procedures, functions, and types by a single abstraction
mechanism, called the pattern.  It generalizes virtual procedures to virtual
patterns, streamlines linguistic notions such as nesting and block structure,
and provides a unified framework for sequential, coroutine, and concurrent
execution.  The resulting language is smaller than Simula in spite of being
considerably more expressive.
<P>

The pattern concept is the basic construct.  A pattern is a description from
which objects may be created.  Patterns describe all aspects of objects, such
as attributes and operations, as seen in traditional object-oriented languages,
but also aspects such as parameters and actions, as seen in procedures.
<P>

Objects are created from the patterns.  Objects may be traditional objects as
found in other languages, but they may also be objects which correspond to
procedure or function activations, exception occurrences, or even coroutines or
concurrent processes.
<P>

Objects may be created statically or dynamically and the objects are
automatically garbage collected by the runtime system when no references exist
to them any longer.
<P>

Patterns may be used as superpatterns to other patterns (the subpatterns).
This corresponds to traditional class hierarchies, but since patterns may
describe other types of objects, inheritance is a structuring means available
also for procedures, functions, exceptions, coroutines, and processes.
<P>

Patterns may be virtual.  This corresponds to traditional virtual procedures 
but again the generality of the pattern construct implies that also classes, 
exceptions, coroutines, and processes may be virtual.
<P>

Virtual patterns in the form of classes are similar to generic templates in
other languages.  The prime difference is that the generic parameters (that
is, the virtual class patterns) may be further restricted without actually
instantiating the generic template.  The generality of the pattern also implies
that genericity is available for classes, procedures, functions, exceptions,
coroutines, and processes.
<P>

Patterns may be be handled as first-order values in BETA.  This implies the
possibility of defining pattern variables which can be assigned pattern 
references dynamically at runtime.  This gives the possibilities for a very 
dynamic handling of patterns at runtime.
<P>

You can find more introductions to the BETA language by looking at 

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/beta_en.php">http://www.mjolner.com/mjolner-system/beta_en.php</A>
</BLOCKQUOTE>



<H3><A NAME="L02">L02) What changes have been made to the BETA language definition?</A></H3>

The BETA language definition has been stable since 1992, apart form
the following minor changes:

<H4>L02.1) String Literals as References </H4>

The pattern <code>text</code> enters and exits a <code>char</code>
repetition. This means, that a text may be initialized using constant
strings as follows: <pre>
      t: @text; 
   do 'hello' -&gt; t; 
</pre>
Many operations involving texts, however, takes references to texts as
enter/exit parameters. This is mainly for efficiency reasons. 
<P>
To allow easy invocation of such operations on string literals, the
following is also allowed:<pre>
      t: ^text; 
   do 'hello' -&gt; t[]; 
</pre>
The semantics of this is, that a text object is instantiated,
initialized by the constant string, and finally assigned to the text
reference.

<H4>L02.2) Simple If </H4>

Often the following If statement is used: <pre>
      b: @boolean; 
   do (if b//TRUE then ... else ... if); 
</pre> 
The current version of the compiler supports an extension to the BETA
language called Simple If. This extension means, that the
case-selector <code>//</code> may be omitted, if the evaluation on the
left hand side exits a boolean. That is, the above may be written
<pre>
      b: @boolean; 
   do (if b then ... else ... if); 
</pre>
Like in the general if-statement, the <code>else</code> part if optional.

<H4>L02.3) <code>Xor</code> Primitive </H4>

An <code>xor</code> primitive is supported as a basic operation on
booleans. That is <pre>
      b1, b2, b3: @boolean 
   do b1 xor b2 -&gt; b3 
</pre>
is possible.

<H4>L02.4) Short-circuit Boolean Expressions </H4>

Boolean expressions are implemented as short-circuit. That is, in <pre>
      B1 or B2 </pre> 
<code>B2</code> is not evaluated if
<code>B1</code> is <code>true</code>, and<pre>
      B1 and B2</pre>
<code>B2</code> is not evaluated if <code>B1</code> is <code>false</code>.

<H4>L02.4) Labelled imperatives </H4>
Labelled imperatives were previously defined in the language in two forms:
<pre>
   L: Imp;
</pre>
and
<pre>
   (L: Imp1; ...; :L)
</pre>
The second form has now been removed from the language. 
Instead, the compiler offers the form
<pre>
   L: (# do Imp1; ... #)
</pre>

Note that this form is implemented very efficiently in the case where
there are no declarations in the object descriptor (i.e. between
<code>(#</code> and <code>do</code>).


<H3><A NAME="L03">L03) How do I deal with concurrency in BETA?</A></H3>

The processes of BETA (concurrent objects) are based on a simple fork-mechanism
and semaphores.  Based on these mechanisms, pattern definitions are available
for shared variables in the form of monitors, and for synchronous process
communication based on a port communication metaphor.  The abstractions also
contain facilities for utilizing future values in connection with process
interactions.




<H3><A NAME="L04">L04) How do I deal with persistence in BETA?</A></H3>

The Mj&oslash;lner System contains a library that implements a persistent store
for BETA objects.  Any BETA object can be stored into the persistent store 
and subsequent obtained from the store in a type-safe way.  There are no
requirements that the persistent objects must inherit from any specific
superpattern, and persistent objects are fully type-checked both when saved in
the persistent store, and when retrieved from the persistent store.




<H3><A NAME="L05">L05) How do I deal with distribution in BETA?</A></H3>

The Mj&oslash;lner System contains a distributed object system in
which BETA objects may reside on different hosts, and communicate transparently
with each others, just as if they were residing on the same host.  The objects
may even be residing on different host types (e.g. on Macintosh and Unix
workstations, respectively).




<H3><A NAME="L06">L06) How do I deal with exception handling in BETA?</A></H3>

Exception handling is dealt with through a predefined library containing basic
exception handling facilities.  The exception handling facilities are fully
implemented within the standard BETA language in the form of a library pattern,
and the usage is often in the form of virtual patterns, inheriting from this
library pattern.




<H3><A NAME="L07">L07) Can classes be treated as first-order elements in BETA?</A></H3>

Yes, they can.  This is possible by using the pattern variable construct in
BETA.  A pattern variable may dynamically be assigned pattern references.
Pattern variables may be used to dynamically create instances of the pattern,
currently contained in the pattern variable.




<H3><A NAME="L08">L08) What about garbage collection in BETA?</A></H3>

Garbage collection is conducted automatically by the BETA runtime system when
it is discovered that no references to the object exist.  The garbage
collection mechanism is based on generation-based scavenging.  The implemented
garbage collection system is very efficient.




<H3><A NAME="L09">L09) How do I create a &quot;parameterized class&quot;?</A></H3>

A parameterized class (a template in C++ or a generic class in Eiffel) is
created in BETA by using the virtual pattern mechanism.  The generic parameter
is specified as a virtual attribute of the pattern, and subpatterns of this
patterns may now make further restrictions on the generic parameter by further
binding the virtual attribute.  Generic instantiation is done by either making
a final binding of the virtual attribute, or by instantiating an object
directly from the pattern.




<H3><A NAME="L10">L10) What is the difference between a virtual binding, a
further binding and a final binding (i.e. between <CODE>:&lt;</CODE>, <CODE>::&lt;</CODE>, and <CODE>::</CODE>)?</A></H3>

To illustrate the difference between new and further-bindings, 
consider  

<pre>
   p:  (# v:&lt;  (# do ...; inner #) #);
   q: p(# v::&lt; (# do ...        #) #);
   r: p(# v:&lt;  (# do ...        #) #);
</pre>

in which a pattern <CODE>p</CODE> with a virtual attribute <CODE>v</CODE>, and
two subpatterns, <CODE>q</CODE> and <CODE>r</CODE>, are declared. Pattern
<CODE>q</CODE> further-binds <CODE>p</CODE>'s virtual attribute, while pattern
<CODE>r</CODE> declares a new virtual attribute <CODE>v</CODE> which has no
connection to <CODE>p</CODE>'s <CODE>v</CODE>, except that it happens to have
the same name.  [This may or may not be what the programmer intended, so
perhaps a warning should be issued in this case.]
<P>

Thus, if <CODE>rp</CODE> is a pointer of type <CODE>p</CODE>, and
<CODE>rp</CODE> happens to denote a <CODE>q</CODE> object, then calling
<CODE>rp.v</CODE> will cause <CODE>q</CODE>'s <CODE>v</CODE> part to be
executed in addition to <CODE>p</CODE>'s (because <CODE>v</CODE> has been
further-bound in <CODE>q</CODE>). However, if <CODE>rp</CODE> denotes an
<CODE>r</CODE> object, then calling <CODE>rp.v</CODE> will cause only
<CODE>p</CODE>'s <CODE>v</CODE> part to be executed, not <CODE>r</CODE>'s
(because <CODE>p</CODE>'s <CODE>v</CODE> attribute has <em>not</em> been
further-bound). [Of course, if <CODE>rr</CODE> denotes a pointer of type
<CODE>r</CODE>, then <CODE>rr.v</CODE> <em>will</em> cause <CODE>r</CODE>'s
<CODE>v</CODE> part to be executed.]
<P>

A final binding has the same effect as a further-binding, except that it
specifies that the virtual may not be further-bound from this point on. There
are (at least) three different reasons why you might want to use final
bindings:
<P>

<ul>
<li>Modelling: Final-bindings are often considered to be a nice 
     feature from a purely object-oriented modelling perspective since it
     indicates that the model is no longer extensible with respect to this
     attribute. 
<li>Efficiency: The compiler is able to generate tighter code when 
     it is known that a pattern is not virtual (any longer).
<li>Inheritance: It is not allowed to inherit from a virtual pattern; 
     but it is ok to inherit from a final-bound one.
</ul>




<H3><A NAME="L11">L11) What about invariants in BETA?</A></H3>

Invariants are not an integrated part of the BETA language.  However, it is
possible to create an invariant system as a framework or library, entirely
written in BETA.  In the Mj&oslash;lner System, an experimental invariant
system is available.  The system offers class invariants as well as pre-
and post-conditions for operations.  The invariant system also offers the
ability to control whether the invariants are checked or not, either on
individual object basis or system-wide.




<H3><A NAME="L12">L12) What about change propagation in BETA?</A></H3>

Change propagation (as in Model-View-Control - MVC) is also available in BETA
(with extended facilities). Change propagation is available as an experimental
part of the current system.




<H3><A NAME="L13">L13) What about futures in BETA?</A></H3>

Futures are used in concurrent programming to return results from a concurrent
computation, even before they have been calculated. The result can then be 
passed around as any other value, and only when an attempt is made to 
access it, the reader will be blocked until the result is made available 
by the concurrent computation.

Based on the existing BETA facilities, futures can easily be implemented, and
an experimental futures library is available as part of the current system.




<H3><A NAME="L14">L14) Why can variables declared in execution blocks not be accessed in <CODE>INNER</CODE>?</A></H3>

Consider the following code fragment:

<pre>
   P: (# do ...; (# x: ... do inner P #); ... #)
   PP: P(# do ... #)
</pre>

According to the BETA visibility rules, <CODE>x</CODE> may not be 
referenced from the do-part of <CODE>PP</CODE>. Why?
<p>

The answer lies in the fact that patterns may have more than one 
<CODE>inner</CODE> section.

Consider the following (slightly modified) example, where 
<CODE>inner</CODE>s are placed in different inserted descriptors, 
each containing declarations of different sets of local variables:



<pre>
   P: (#
      do ...;
         (# x: ... do inner P #); 
         ...;
         (# y: ... do inner P #);
          ...;
      #)
   PP: P(# do ... #)
</pre>

In this case, the do-part of <CODE>PP</CODE> is executed twice via 
<code>inner</code>, but with different sets of local variables 
(<code>x</code> and <code>y</code>, respectively). 
It is therefore meaningless to refer to any one of these in the 
do-part of <code>PP</code>.


<H3><A NAME="L15">L15) How do I implement a copy (or clone) operation?</A></H3>

It is often useful to be able to make a genuine copy of an object.  
It is currently being discussed to introduce a 'clone' operation into 
the <code>object</code> pattern, which should take care of this copying 
automatically, but no decision has been made as to how and when.
<P>

Until then, the following trick does the job:
<pre>
   P: (# (* internal P structures *)
         copy:&lt; (* generic copy operation *)
           (# copyType: ##P;
              theCopy: ^P;
           do this(P)##-&gt;copyType##;
              &amp;copyType[]-&gt;theCopy[];
              (* insert here code to  implement the copying
               * of internal P structures into theCopy *)
              INNER copy;
              (* possible finalization of the copying process *)
           exit theCopy[]
           #)
      #);

   Q: P(# (* internal Q structures *)
          copy::&lt;
            (# Qcopy: ^Q 
            do theCopy[]-&gt;Qcopy[];
              (* insert here code to  implement the copying
               * of internal Q structures into Qcopy *)
              INNER copy;
              (* possible finalization of the Q copying process *)
            #)
       #);   
   
   R: Q(# (* internal R structures *)
          copy::&lt;
            (# Rcopy: ^R 
            do theCopy[]-&gt;Rcopy[];
              (* insert here code to  implement the copying
               * of internal R structures into Rcopy *)
              INNER copy;
              (* possible finalization of the R copying process *)
            #)
       #);
</pre>
Given the declarations
<pre>
   a: @R;
   aCopy: ^R;
</pre>
then
<pre>
   a.copy-&gt;aCopy[]
</pre>
will make a copy of the <code>a</code> object with the proper
qualification (here <code>R</code>), and a state that is a copy of the
state of <code>a</code>.
<p>

Note: The 
<pre>
      Rcopy: ^R 
   do theCopy[]-&gt;Rcopy[]
</pre>
part of the <code>copy</code> further binding is an inconvenience, but
is necessary to persuade the type system to allow remote access to 
the <code>R</code>-parts of the <code>theCopy</code> object.



<H3><A NAME="L16">L16) Why doesn't BETA have multiple inheritance?</A></H3>

[Ole Lehrmann Madsen (<code><a href="mailto:olm@daimi.au.dk">olm@daimi.au.dk</a></code>) writes:]
<p>

I shall try to explain why there is no (traditional) multiple
inheritance in BETA.
Please note that I am not trying to argue against MI.
The following is only an attempt to explain why it is not in BETA.
<p>

When BETA was designed we did not think that the concept of multiple 
inheritance was ready for being incorporated in the language.
One of the main design goals for BETA was that it should be good for 
modelling. 
Most usages of MI seemed to be for pure code reuse, i.e. a new class 
may be defined by inheriting from a number of classes and then 
redefining the parts that should differ. 
Often this is done without there being any conceptual relation between 
the new class and the ones it inherits from. 
We did not like that way of using inheritance.
<p>

MI in BETA should be there to model classification hierarchies
which are non-tree structured.
In my experience, such hierarchies are rare in practice. 
What is more common is that you may want several independent 
tree-structured classification hierarchies for the same objects. 
A set of person objects might be classified according to their 
profession, nationality, and religion.
This gives three class-hierarchies. People often handle such situation
using MI, but this will merge the hierarchies in a way that makes
it difficult to identify the three original ones.
<p>

We would like to support such independent classification 
hierarchies in BETA, but no concrete proposal exists.
<p>

The various proposals for solving name conflicts and overlapping
superclasses also seemed rather complex. We did not want
the semantics of basic constructs to be complicated to understand.
<p>

For BETA there are a number of additional problems:
<ul>
<li>Virtual patterns from a common superclass may have conflicting
bindings in the superclasses:
<pre>
   A: (# V:&lt; A1; ... do ... inner ... #);
   B: A(# V::&lt; A2; ... do ... inner ... #);
   C: A(# V::&lt; A3; ... do ... inner ... #);
   D: B &amp; C (# V:: A4; ... do ... #);
</pre>
(The syntax <code>B &amp; C</code> has tentatively been used for MI in BETA.)
<p>
Here <code>A2</code> and <code>A3</code> must both be subclasses of 
<code>A1</code>, and <code>A4</code> must be a subclass of both 
<code>A2</code> and <code>A3</code>. 
(In her Ph.D. Thesis, Kristine Thomsen defined a language
along these lines, which handled virtual bindings a la those in BETA.
It should be available from the Computer Science Department, Aarhus 
University.)
<p>
<li>The semantics for combining <code>inner</code>s of multiple superclasses 
must also be defined. 
In the example above, should <code>B</code>'s do-part be executed 
before <code>C</code>'s or vice versa?
Since we are not in favour of making the order of superclasses 
significant, we were considering letting the execution order of 
<code>B</code> and <code>C</code> be non-deterministic, in the sense 
that the implementation may execute <code>B</code> or <code>C</code> 
in any order.
(Thomsen's thesis also deals with combing <code>inner</code>s and 
proposes a number of other alternatives. 
You may also want to take a look at: 
K. S. Thomsen: "Inheritance on Processes, Exemplified
on Distributed Termination Detection", International Journal
of Parallel Programming, pages 24-37, November 1988.)
</ul>

Finally, we have not felt an strong need to support MI in the traditional
sense, since BETA has other means for handling some of the most common
MI cases:
<p>

In BETA you may inherit from part-objects and at the same time 
further-bind its virtuals:
<pre>
   A: (# f:&lt; ... #);
   B: (# g:&lt; ... #);
   C: (# ...
         X: @A(# f::&lt; (# ... #); ... #);
         Y: @B(# g::&lt; (# ... #); ... #);
         ...
      #);
</pre>
<code>X</code> and <code>Y</code> are singular part-objects; 
due to BETA's block structure the virtual bindings of <code>f</code> 
and <code>g</code> may refer to variables in the enclosing 
<code>C</code>-object. 
<p>
Given the declaration <code>W: ^C</code>, the functions <code>f</code> 
and <code>g</code> may be invoked as <code>W.X.f</code> and 
<code>W.Y.g</code>.
The difference from MI is that you have to qualify using X and Y.
Some people think of this as an inconvenience; 
others think of it as an advantage since it forces them to be explicit 
about name conflicts between <code>A</code> and <code>B</code>.
If you prefer writing <code>W.f</code> and <code>W.g</code>, you may 
define <code>f</code> and <code>g</code> functions in <code>C</code> 
and let them forward the calls to <code>X.f</code> and <code>Y.g</code>.
<p>
Given the declaration <code>V: ^A</code>, then 
<code>W.X[]-&gt;V[]</code> is possible, and an invocation of 
<code>V.f</code> calls the further-binding of <code>f</code> in 
<code>X</code>, thereby possibly accessing/changing the state of 
<code>C</code>.
<p>
To sum up, this form of multiple inheritance via part objects is very 
similar to non-overlapping inheritance in C++.
<p>

As a final example, consider the following well-known MI case:
<pre>
                  Window
                 /      \        
   WindowWithBorder    WindowWithTitle
                 \      /       
         WindowWithBorderAndTitle
</pre>
In BETA this may be handled using block-structure 
<pre>
   Window:
     (# ...
        Border: (# ... #);
        Title: (# ... #);
     #);
   W1: @Window(# B: @Border; T: @Title #);
   W2: @Window(# T1,T2: @Title #);
</pre>
Here <code>W1</code> has a border and a title, whereas <code>W2</code> 
has no border and two titles. 
(For a further discussion, see 
K. &Oslash;sterby: "Parts, Wholes, and Subclasses", 
Proceedings of the 1990 European Simulation Multiconference, 
pages 259-263, 1990.)
<p>
To sum up, we did not think that traditional MI has been worth the
complications it will add to the language, since many of the MI
cases can be handled by other means. We are, however, still discussing
MI, and it may end up being supported more directly.


<H3><A NAME="L17">L17) What is the rationale behind the syntax of BETA?</A></H3>

[Ole Lehrmann Madsen (<code><a href="mailto:olm@daimi.au.dk">olm@daimi.au.dk</a></code>) writes:]
<p>

When we designed BETA, we spent a lot of time discussing syntax - it is 
one of those things people can really disagree about.
We tried to develop what we considered to be a nice and readable syntax
with as few long keywords as possible. 
<p>
The following type of brackets are used: 
<pre>
     (# ... #)     object
     (* ... *)     comment
    (if ... if)    if-imperative
   (for ... for)   for-imperative
</pre>
We did consider using <code>{</code> and <code>}</code> for objects or 
comments, but ended up not doing it; we did not feel a strong need to 
have BETA look like C.
<p>
As we did not like long keywords (as in Pascal or Ada), BETA uses 
symbols like <code>@</code>, <code>^</code>, <code>|</code>, and 
<code>:&lt;</code> instead.
We believe that for a small language like BETA, it is an advantage to have 
a compact syntax. 
This way, you can have more code on a page or in a window. 
(Of course, <code>{</code>,<code>}</code> is shorter than 
<code>(#</code>,<code>#)</code>, but we preferred the syntax to be 
consistent with <code>(if</code>,<code>if)</code>, etc.)
<p>
It is not our experience that the syntax of BETA presents any obstacle 
to learning the language. 
BETA has very few constructs (and symbols), and while they may seem 
strange at first, they are easy to learn and use. 
Try it!
<P>

You can find a quick overview of the BETA syntax by looking at the BETA
Quick Reference Card at

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/beta-intro/Quick-Reference-Card.html">http://www.mjolner.com/mjolner-system/documentation/beta-intro/Quick-Reference-Card.html</A>
</BLOCKQUOTE>



<H3><A NAME="L18">L18) How do the scope rules of BETA actually work?</A></H3>

The BETA scope rules may seem slightly complex to the new BETA
programmer, but are actually rather intuitive and simple.
There are three visibility rules:

<OL>
<LI>Names declared in the <EM>descriptor itself</EM> are visible 
within the descriptor.
<LI>Names declared in the <EM>superpattern</EM> of a descriptor are 
visible within the descriptor.
<LI>Names declared in <EM>outer blocks</EM> (i.e. enclosing 
descriptors) are visible within the descriptor.
</OL>

These rules are applied in order to find the definition for a given 
name application:

<UL>
<LI>Start by using rule 1, looking for a local declaration.
<LI>If not found, then use rule 2 to find the declaration in the 
superpattern (if the descriptor has one). While using this rule, you
may apply rule 1.
<LI>If still not found, then use rule 3 to find the declaration in 
the enclosing descriptors. While using this rule, you may apply rule 1
and 2.
</UL>

Note: This method implies that it is possible to reuse the same name 
for different declarations, as long as the declarations are in 
different descriptors.

<P>

To see how the rules interact, take a look at the example program 
below. It illustrates most of the combinations, and has the 
resulting output is shown in comments after each imperative.

<PRE>
   (# a: (# do 1-&gt;screen.putint #);
      P1: (# do a; INNER P1 #);
      P2: (# a: (# do 2-&gt;screen.putint #);
          do a
          #);
      P3: P1(# do a #);
      P4: P1(# a: (# do 3-&gt;screen.putint #);
          do a
          #);
      P5: P1(# foo1: (# do a; inner foo1 #);
               foo2: (# a: (# do 4-&gt;screen.putint #)
                     do a; inner foo2
                     #);
            #);
      P6: P5(# a: (# do 5-&gt;screen.putint #);
               foo3: (# do a; inner foo3 #);
               foo4: foo1(# do a; inner foo4 #);
               foo5: foo2(# do a; inner foo5 #);
            #);
      P: @P6;
   do 
      a;                (*   1 *)
      P1;               (*   1 *)
      P2;               (*   2 *)
      P3;               (*  11 *)
      P4;               (*  13 *)
      P5;               (*   1 *)
      P6;               (*   1 *)
   
      P.foo1;           (*   1 *)
      P.foo2;           (*   4 *)
      P.foo3;           (*   5 *)
      P.foo4;           (*  15 *)
      P.foo5;           (*  44 *)
   
      P.foo1(# do a #); (*  11 *)
      P.foo2(# do a #); (*  44 *)
      P.foo3(# do a #); (*  51 *)
      P.foo4(# do a #); (* 151 *)
      P.foo5(# do a #); (* 444 *)
   #)
</PRE>



<H3><A NAME="L19">L19) What is a pattern?</A></H3>

The following is an attempt to explain the <EM>pattern</EM> concept.
The description is divided into two parts: 
a description in the form of examples, and a more abstract explanation.
<p>

To begin with, think of a pattern as a generic word for the concepts 
<EM>class</EM>, <EM>procedure</EM> and <EM>function</EM>. 
This is not all there is to it, but it
will get you started. In BETA, a pattern is anything starting with
<CODE>(#</CODE> and ending with <CODE>#)</CODE>. 

As a simple example, here is a function that multiplies two numbers:

<PRE>
   multiply: (# a,b: @integer;
             enter (a,b)
             exit a*b
             #);
</PRE>

The <CODE>multiply</CODE> pattern takes two integers, 
<CODE>a</CODE> and <CODE>b</CODE>, and returns their product.
These kinds of patterns are often called <EM>functional patterns</EM>, 
since their use correspond to functions (or procedures) in other 
languages. 
In BETA, a call to <CODE>multiply</CODE> might look like: 
<PRE>
   (7,17)-&gt;&amp;multiply-&gt;&amp;putInt;
</PRE>
<CODE>putInt</CODE> is a procedure that writes the result on the screen.
<p>

As another example, let's build a stack class in the typical 
object-oriented paradigm:

<PRE>
   stack: (# content: [100] @integer;
             currentSize: @integer;
             push: (# e: @integer;
                   enter e
                   do currentSize+1-&gt;currentSize;
                      e-&gt;content[currentSize];
                   #);
             empty: (# exit (currentSize=0) #);
             pop: (# e: @integer;
                  do content[currentSize]-&gt;e;
                     currentSize-1-&gt;currentSize;
                  exit e
                  #);
          #);
</PRE>

Now, <CODE>stack</CODE> is also just a pattern. 
You may call it a <EM>class pattern</EM> since its meant to be 
used as a class: to make instances, the actual stacks. 

And just in case you were wondering: 
Yes, the <CODE>push</CODE>, <CODE>empty</CODE>, and <CODE>pop</CODE>
methods defined for <CODE>stack</CODE> are also patterns 
(<EM>functional</EM>/<EM>procedural patterns</EM>), 
defined inside the <CODE>stack</CODE> pattern.

<P>

BETA offers a lot of extra functionality which could make the 
example much more realistic (information hiding, generic stacks, 
exceptions due to overflow, dynamic expansion of the stack capacity, 
etc.), but let's keep the example simple.

<P>

Having shown a few practical examples, here's the more elaborate 
explanation:
<p>

A <EM>pattern</EM> is used for instantiating <EM>objects</EM> 
(static objects, dynamic objects, inserted objects, etc.). 
A <EM>pattern declaration</EM> in its full form looks like this 
(other forms below):

<PRE>
   P: S(# decl1; decl2; ... decln;
       enter enterlist
       do imperatives
       exit exitlist
       #);
</PRE>

This declares <CODE>P</CODE> as a (direct) subpattern of
<CODE>S</CODE>. 
(<CODE>S</CODE> thus is the (direct) superpattern of <CODE>P</CODE>.) 
<CODE>S</CODE> may be omitted, in which case <CODE>object</CODE> 
(the direct or indirect superpattern of all patterns) is assumed. 
Each part (declarations, enter part, do part
and exit part) can be omitted. 
(Thus &quot;<CODE>P: (# #);</CODE>&quot; is legal.)

<P>

Each declaration can be a declaration of a pattern, a virtual pattern,
a further or final binding of a previously declared virtual pattern, a
static item, a dynamic item, a static component, a dynamic component,
a repetition (array) or a pattern variable (used for holding a pattern, 
popularly speaking). 
Or a number of same. 

<P>

Thus the above declaration of <CODE>P</CODE> fits into an outer 
pattern. 
If both <CODE>P</CODE> and <CODE>S</CODE> have declared enter parts, 
the enter list of a <CODE>P</CODE> object consists of the enter lists
concatenated. 
The same goes for the exit list. 
Thus the subpattern declaration can only add to the enter and exit 
lists, not make other changes. 
A bit more complicated rules exist for do-parts, but the basic 
principle is the same: only additions are possible.  

<p>

A pattern can be <em>virtual</em>. 
There are three forms of virtual pattern declarations:

<PRE>
   P: (# V:&lt; Q; #);
   P: (# V:&lt; Q(# ... #); #);
   P: (# V:&lt; (# ... #); #);
</PRE>

where <CODE>Q</CODE> is a pattern name. 

<P>

(For the sake of completeness, this should perhaps be written as 
<PRE>
   P: S(# ...; V:&lt; Q; ...; enter ... do ... exit ... #);
   P: S(# ...; V:&lt; R(# ...; enter ... do ... exit ... #); ...;
       enter ... do ... exit ...
       #);
</PRE>
etc., but we'll leave the that out.)

<P>

Virtual declarations can be extended, or <em>further bound</em>, 
in subpatterns:

<PRE>
   P1: P(# V::&lt; Q1; #);
   P1: P(# V::&lt; Q1(# ... #); #);
   P1: P(# V::&lt; (# ... #); #);
</PRE>

In the first two forms, it is required that one of the following
two conditions holds:

<OL>
<LI><CODE>V</CODE> was declared in <CODE>P</CODE> (or some superpattern 
of <CODE>P</CODE>) as <CODE>V:&lt; Q</CODE>, 
and <CODE>Q1</CODE> is a direct or indirect subpattern of 
<CODE>Q</CODE>.
<LI><CODE>V</CODE> was already further bound in <CODE>P</CODE> (or some
superpattern of <CODE>P</CODE>) using the form <CODE>V::&lt; Q0</CODE>,
and <CODE>Q1</CODE> is a direct or indirect subpattern of
<CODE>Q0</CODE>.
</OL>

The third form <CODE>V::&lt; (# ... #)</CODE> can be used regardless 
of which form was used for the previous declaration or further binding
of <CODE>V</CODE>.
In this case, the descriptor <CODE>(# ... #)</CODE> is used to 
automatically form a subpattern.
(This form of further binding is the only available one if
<CODE>V</CODE> is declared using <CODE>V:&lt; (# ... #)</CODE>, or
<CODE>V</CODE> has been further bound using <CODE>V::&lt; Q1(#
... #)</CODE> or <CODE>V::&lt; (# ... #)</CODE>.) 

<P>

Thus, the further binding makes V a subpattern of what it was before.

<P>

Finally, a virtual pattern may be <em>final bound</em>. 
A final binding is a further binding, except (syntactically) 
<CODE>::</CODE> is used instead of <CODE>::&lt;</CODE>, and 
(semantically) after a final binding, <CODE>V</CODE> is no longer 
virtual, and can therefore not be further bound.
The final binding must otherwise follow the same rules as described
above for further bindings.  

<P>

Also, see Question <A HREF="#L10">L10</A>.



<H3><A NAME="L20">L20) Are identifiers and keyworks case-sensitive in BETA?</A></H3>

Neither identifiers nor keywords of the BETA language are
case-sensitive.  That is, the identifier <code>hello</code> is the
same as the identifier <code>HELlo</code>, and the keyword
<code>INNER</code> is the same as the keywork <code>inner</code>.

However, there is <i>one</i> exception from this rule.  Identifiers
used for declaring <code>External</code>s are case-sensitive (due to
identifiers in the C programming language being case-sensitible).
Please refer to the BETA Compiler Manual for details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/compiler/">http://www.mjolner.com/mjolner-system/documentation/compiler/</A>
</BLOCKQUOTE>




<H3><A NAME="L21">L21) What characters are allowed in BETA identifiers? </A></H3>

The identifiers in the BETA language must obey the following literal syntax:
<blockquote>
A BETA indentifier has to start with a letter or '_', and may be followed by
a sequence of letters, digits, and '_'.
</blockquote>


<H3><A NAME="L22">L22) What is the exact semantics of <TT>leave
P</TT> and <TT>restart P</TT>, when <TT>P</TT> is the name of a pattern?</A></H3>

Leave and restart are the very basic local control mechanisms in BETA.
Leave and restart are specified by:
<BLOCKQUOTE>
   <TT>restart id</TT><BR>and<BR>
   <TT>leave id</TT>
</BLOCKQUOTE>

where id is the name of either a label or an enclosing pattern.

When <TT>id</TT> is an enclosing pattern, <TT>id</TT> is defined to
refer to the do-part of <TT>id</TT> (hence <EM>not</EM> to the do-part
of any superpattern of <TT>id</TT>).
<P>

Consider the pattern:
<PRE>
   P: A(# ... 
       do (* L1 *)
          ...;
          leave/restart P;
          ...;
          (* L2 *)
       #)
</PRE>

<TT>restart P</TT> implies that execution continues at <TT>(* L1 *)</TT>:
<BLOCKQUOTE>
	This means that <TT>restart P</TT> has the effect of entering
	the do-part of <TT>P</TT> as after an <TT>inner</TT> in <TT>A</TT>.
</BLOCKQUOTE>

<TT>leave P</TT> implies that execution continues at <TT>(* L2 *)</TT>: 
<BLOCKQUOTE>
	This means that <TT>leave P</TT> has the effect that execution
	continues in the do-part of <TT>A</TT> after the
	<TT>inner</TT> that called the main-do-part of <TT>P</TT>.
</BLOCKQUOTE>
	
Example:
<PRE>
   (# A: (#
         do (for 4 repeat '['-&gt;put; INNER; ']'-&gt;put for)
         #);
      P: A (# k: @integer
	   do k+1-&gt;k-&gt;putInt;
              (if k=2 then '-'-&gt;put; leave P if);
              (if k=3 then '*'-&gt;put; restart P if);
              '+'-&gt;put
           #);
   do P
   #)
</PRE>

will give the following output:
<PRE>
   [1+][2-][3*4+][5+]
</PRE>


<H3><A NAME="L23">L23) What is the BETA lexem syntax?</A></H3>

The different lexems in the BETA language grammar (names, strings, and
numbers) are not precisely defined in any of the available documents.
We will therefore here give the definition:

<PRE>
&lt;NameAppl&gt; =	&lt;NameDecl&gt;
&lt;NameDecl&gt; =    (&lt;letter&gt;|"_")+(&lt;digit&gt;|&lt;letter&gt;|"_")*

&lt;String&gt;   =    "'"&lt;char&gt;*"'"
           where &lt;char&gt; can be any char except "'" and newline.
			"'" are allowed in &lt;String&gt;, iff preceeded with "\".
			"\n", "\t", etc. are allowed in &lt;String&gt; to
			represent non-printable chars - see Compiler
			manual (mia91-02) for details.

&lt;Const&gt;   =     (&lt;int&gt;|&lt;based&gt;|&lt;real&gt;) where
        &lt;int&gt;      = &lt;digit&gt;+
        &lt;based&gt;    = &lt;int&gt;("X"|"x")&lt;basedNum&gt;
	&lt;basedNum&gt; = (&lt;digit&gt;|&lt;letter&gt;)+
        &lt;real&gt;     = &lt;int&gt;["."&lt;int&gt;][("E"|"e")[("+"|"-")]&lt;int&gt;]


&lt;letter&gt;  =     "a"|"b"|...|"z"|"A"|"B"|...|"Z"
&lt;digit&gt;   =     "1"|"2"|...|"9"|"0"
</PRE>

The usage of <CODE>|</CODE>, <CODE>+</CODE>, <CODE>*</CODE>,
<CODE>(...)</CODE>, and <CODE>[...]</CODE> conform to standard regular
expressions syntax.


<H3><A NAME="L24">L24) What is the maximum length of a BETA identifier?</A></H3>

For most practical cases there is no maximum lenghth of a name.  The
length of an name is currently limited by the representation of an
abstract syntax tree (AST). There is currently a limitation to the
size of an AST. In the AST representation, a 16-bit integer is used to
represent the length of a name. A name can thus in theory consist of
more than 65000 characters. However, it is much more likely that a
BETA fragment breaks the limit of an AST than an identifier becomes
too large.



<H3><A NAME="L25">L25)  What is the exact qualification rules for nested patterns?</A></H3>

In Chapter 8 on Block Structure in the BETA book it is (in section
8.2) said that patterns like <CODE>Pascal.Symbol</CODE> and
<CODE>Simula.Symbol</CODE> are different.  The corresponding
declarations are as follows

<PRE>
        Grammar: (# ...; Symbol: (# ... #); ... #);
        Pascal: @Grammar;
        Simula: @Grammar;
</PRE>

The current implementation does, however, not consider nested patterns
like <CODE>Pascal.Symbol</CODE> and <CODE>Simula.Symbol</CODE> to be
different.  The reason for this is historical.

<P>

Qualification check was implemented in two stages. First the
compile-time checks were implemented, and next the run-time checks.
The qualification rules for run-time checking were implemented such
that nested pattern like <CODE>Pascal.Symbol</CODE> and
<CODE>Simula.Symbol</CODE> are identical.

<P>

This is a relaxation of the proper run-time qualification rule (as
defined by the BETA language), and a future release of the MBS will
properly implement run-time qualification check.




<H2><A NAME="PartIII">PART III: Environment Issues</A></H2>



<H3><A NAME="E01">E01) What is the Mj&oslash;lner System?</A></H3>

The Mj&oslash;lner System is an integrated and interactive general-purpose
software development environment that supports industrial strength programming
using object-oriented programming in the BETA programming language.
<BR>(Note: "Mj&oslash;lner System" was formerly designated "Mj&oslash;lner BETA system".)



<H3><A NAME="E02">E02) What does the Mj&oslash;lner System contain?</A></H3>

The Mj&oslash;lner System includes an implementation of the BETA language, a
series of libraries and application frameworks, a set of development tools, and
a metaprogramming system.  All components of the Mj&oslash;lner System are
constructed using the BETA language.
<P>

Major parts of the Mj&oslash;lner System (e.g. the editor, parser,
pretty-printer, metaprogramming system, fragment system) are grammar-based in
the sense that tool generators exist that, given a specific grammar for a
language, will define a specific tool that is able to manipulate programs
written in that particular language.




<H3><A NAME="E03">E03) What libraries come with the Mj&oslash;lner System?</A></H3>

<DL> 
<DT><EM>Basic libraries </EM><DD>
The basic patterns are the object-oriented variants of the standard simple data
types, such as <CODE>char</CODE>, <CODE>boolean</CODE>, <CODE>integer</CODE>,
and <CODE>real</CODE>.  These patterns make it possible to treat e.g. integers
as ordinary objects.  The basic patterns also includes the Object pattern which
is the implicit superpattern for all patterns that have no explicit
superpattern. 
<BR>See the Basic Libraries Manual for more details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/basiclib">http://www.mjolner.com/mjolner-system/documentation/basiclib</A>
</BLOCKQUOTE>

<DT><EM>The Stream Patterns</EM><DD>
  A  Stream  is  a  generalization of  internal  and  external  text
  objects. An internal text object (Text) is a sequence (repetition)
  of  chars.  An  external  text  object  (File)  corresponds  to  a
  traditional text file. Stream, Text, and File are organized in the
  following hierarchy:
<pre>
   Stream: (# ... #);
     Text: Stream(# ... #);
     File: Stream(# ... #);
       UnixFile: File(# ... #);
       MacFile: File(# ... #);
</pre>
  As  part  of  the  interface to the operating  system,  the  basic
  libraries  include patterns for accessing the directory structures
  of hierarchical file systems:
<pre>
   Directory: (# ... #);
     UnixDirectory: Directory(# ... #);
     MacDirectory: Directory(# ... #);
</pre>


See the Basic Libraries Manual for more details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/basiclib">http://www.mjolner.com/mjolner-system/documentation/basiclib</A>
</BLOCKQUOTE>

<DT><EM>The Process Patterns</EM><DD>
  The  Process  interface  facilitates  execution  of  subprocesses,
  communication between several independent processes, client/server
  architectures, and it is even possible to establish  communication
  between Unix, PC and Macintosh processes.
<BR>

See the Process Libraries Manual for more details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/process">http://www.mjolner.com/mjolner-system/documentation/process</A>
</BLOCKQUOTE>

<DT><EM>The External Language Interface Patterns</EM><DD>
  To  enable  interfacing with external languages (such as  C),  the
  basic  libraries define  the external, cStruct, and externalRecord
  patterns.
<BR>

See the Basic Libraries Manual for more details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/basiclib">http://www.mjolner.com/mjolner-system/documentation/basiclib</A>
</BLOCKQUOTE>


<DT><EM>Container libraries</EM><DD>
  The   standard  container  data structures  are  organized  in  the
  following inheritance hierarchy of patterns:

<pre>
                         container
             _________________|__________________________
             |             |             |              |
         collection arrayContainer sequentialContainer list
       ______|_______         ___________|_______________
       |            |         |       |       |         |
    multiset    hashTable   stack   queue   deque  prioQueue
       |            |
      set   extensibleHashTable
     __|_____________________ 
     |                      |
classificationSet   classificationSubSet
</pre>

  Container  patterns  are generic patterns in the  sense  that  the
  element  type  of  the  elements kept in the  container  can  vary
  between different container instances.
<BR>
See the Container Libraries Manual for more details:

<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/containers">http://www.mjolner.com/mjolner-system/documentation/containers</A>
</BLOCKQUOTE>

<DT><EM>Persistent store:</EM><DD>
  Support  for  saving  any kind of object  generated  by  a  BETA
  program  execution  on secondary storage and restoring  them  in
  another  BETA program execution. The persistent store  is  fully
  type safe.  An  object-oriented  database  for  BETA  objects  is
  currently under development.
<BR>
See the Persistence Libraries Manual for more details:
<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/persistence">http://www.mjolner.com/mjolner-system/documentation/persistence</A>
</BLOCKQUOTE>


<DT><EM>Metaprogramming system libraries:</EM><DD>
  A  metaprogram  is  a  program  that  manipulates other  programs.
  Yggdrasil  is a metaprogramming system  that supports creation  of
  metaprograms.   Yggdrasil  is   grammar-based:  a  metaprogramming
  environment may be generated from the grammar of any language.
  The  metaprograms manipulate programs through a  common  
  representation called abstract syntax trees (ASTs).
  An AST is modelled as an instance of a pattern. There is a pattern
  corresponding  to  each syntactic category (non-terminal)  of  the
  grammar.  The  grammar hierarchy is modelled  by  a  corresponding
  pattern hierarchy, derived automatically from the grammar.
<BR>

See the Metaprogramming Libraries Manual for more details:
<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/yggdrasil">http://www.mjolner.com/mjolner-system/documentation/yggdrasil</A>
</BLOCKQUOTE>


<DT><EM>OpenGL:</EM><DD>

 The latest release (r4.2) of Mjolner System allows the use of SGI's OpenGL library for
doing 3D graphics from inside of BETA programs.  The library functions as a
subsystem of the Graphical User Interface (GUIenv) framework.<BR>
 It supports platform independent 3D graphics. This means that the same
openGL/BETA program will work on different machines with only recompilation
required. <Br>
The system is not a implementation but does calls to the standard library.<Br>
Note that this is the first version and errors may occur. (see Part V for limitations and requirements.)
 <BR> </DL>



<H3><A NAME="E04">E04) What frameworks come with the Mj&oslash;lner System?</A></H3>

<DL> 
<DT><EM>Concurrency framework</EM><DD>
The basic libraries define various patterns for dealing with concurrency,
synchronization, and communication.  These patterns are: <CODE>system</CODE>,
<CODE>semaphore</CODE>, <CODE>fork</CODE>, <CODE>monitor</CODE>,
<CODE>port</CODE>, <CODE>restrictedPort</CODE>, <CODE>objectPort</CODE>,
<CODE>qualifiedPort</CODE>, <CODE>conc</CODE>, and <CODE>alt</CODE>.

<DT><EM>Graphical User Interface framework</EM><DD>
  The  Mj&oslash;lner System contains from release 4.0
  a platform independent framework for the construction of graphical
  user interfaces, called <CODE>guienv</CODE>..

<DT><EM>X Window System framework</EM><DD>
  The  Mj&oslash;lner  BETA  object-oriented interface  to  the  X  Toolkit
  Intrinsics (Xt) is called XtEnv. This pattern contains  the  basic
  patterns common for many user-interface toolkits built upon the  X
  Window  System,  but  it does not  contain any  higher-level  user
  interface  elements. It is typically used together with  a  widget
  set  containing such user interface elements built on top  of  it.
  Examples  of such widget sets are the Athena Widgets,  OPEN  LOOK,
  and  Motif.  The  Mj&oslash;lner System currently  includes  
  object-oriented  interfaces to the Athena Widgets (AwEnv)  and  to  Motif
  (MotifEnv).

<DT><EM>Bifrost graphics framework</EM><DD>
  The interactive object-oriented graphics system
  Bifrost  is  based on the Stencil &amp; Paint imaging  model.  Bifrost
  models  computer graphics images by abstracting the geometric  and
  color  properties of graphical objects. The important new  concept
  introduced  in  Bifrost  is  that  there  is  one  basic   drawing
  primitive,  the  graphical  object.  The  graphical  object unites
  interaction,  graphics  modelling, and  graphics context.  Bifrost
  includes  extensive  support  for various  kinds  of  interaction:
  interactive   creation,  reshaping,  translation,   scaling,   and
  rotation of graphical objects. The object-oriented approach  makes
  extensibility  and  tailorability a simple task,  and  facilitates
  object-oriented drawing applications. One of the main goals of the
  development of Bifrost was to make the graphics system independent
  of underlying graphics and hardware systems.

<DT><EM>Distribution framework</EM><DD>
  A distributed object system is available for enabling transparent
  access to BETA objects located on different hosts on the network.

<DT><EM>OODB framework</EM><DD>
  A distributed object-oriented database system for BETA objects is currently
  being developed.
</DL> 




<H3><A NAME="E05">E05) What tools come with the Mj&oslash;lner System?</A></H3>

<DL> 
<DT><EM>BETA Compiler</EM><DD>
  The BETA compiler is a native code generation compiler.

<DT><EM>Fragment System</EM><DD>
  The  fragment  system  is used for splitting  BETA  programs  into
  smaller pieces (fragments). The fragment system is responsible for
  the  dependencies  between different fragment  files,  defining  a
  given  library or program. Due to the generality of  the  fragment
  system, a BETA program can be divided into smaller pieces in  many
  different ways.

<DT><EM>Source Browser</EM><DD>
  The different tools in the Mj&oslash;lner System uses the
  same source browser.  This source browser gives easy access to the
  file system, and gives facilities for browsing in the entire set of
  source files, belonging to a given program (the dependency graph of
  the program).

<DT><EM>Source-level Debugger</EM><DD>
  A  source-level debugger for the BETA language is  available  on
  all platform (except Macintosh and HP-PA). It contains facilities for  specifying  
  break-points, single stepping, inspection of object states, inspecting
  the  run-time organization, etc. The debugger has a  graphical
  interface.

<DT><EM>Hyper Structure Editor</EM><DD>
  The Mj&oslash;lner BETA Hyper Structure Editor has the following properties:
<DL> 
<DT><EM>Syntax-directed Editing</EM><DD>
    Syntax-directed  editing makes it possible to construct  and  edit
    programs  or  other documents without introducing  syntax  errors.
    Syntax-directed editing is especially useful for application-oriented
    languages intended for end-users, casual users and beginners that may 
    have difficulties in remembering the concrete syntax.

<DT><EM>Abstract Presentation and Browsing</EM><DD>
    The editor is able to present a program at any level of detail. At
    the top-level of a program the user may get an overview of classes
    and  procedures. It is then possible to browse through modules and
    procedures  to  see  more  and  more details.

<DT><EM>Adaptive Pretty-Printing</EM><DD>
    The  editor  includes an adaptive pretty-printing algorithm  which
    prints the program or document such that it always fits within the
    size  of  the  window  or  paper.

<DT><EM>Text Editing and Incremental Parsing</EM><DD>
    The  programmer  may   freely  alternate  between  syntax-directed
    editing  and  textual editing.  Any program part may be  textually
    edited  using keyboard, mouse, and menus in the usual  style known
    from  the  Macintosh  or  the X Window System,  respectively.  Any
    program part that has been textually edited is immediately parsed.

<DT><EM>Fragment Manipulation and Browsing</EM><DD>
    The  editor  provides an interface to the fragment system.  It  is
    possible  to  browse  through the fragment structure and to create 
    and combine fragments.

<DT><EM>Integration of Program and Documentation</EM><DD>
    The  user  may add a comment at any place in a program.  The  user
    decides whether or not to display a comment. Also the user decides
    whether  to display a comment as part of the program or in another
    window; in the latter case a comment is indicated by means of (*).
    Using abstract presentation it is possible to obtain a pretty-print
    of a program which includes just the classes and procedure
    headings  and  corresponding comments. This makes it  possible  to
    extract a functional specification from the program.

<DT><EM>Hypertext Facilities</EM><DD>
    The   editor  includes  hypertext  facilities.  The  facility  for
    handling  comments is an example of a hyperlink between a  program
    and  a text document. Another type of hyperlink is a link from the
    use  of  a  name  to  the declaration of the name  (this  is  only
    implemented for BETA).
</DL> 

<DT><EM>Object-oriented CASE Tool</EM><DD>
  The Mj&oslash;lner BETA CASE Tool provides
<UL> 
<LI>graphical structure editing of design diagrams
<LI>textual structure editing of programs
<LI>automatic program generation from design diagrams
<LI>reverse engineering from programs to design diagrams
<LI>simultaneous editing of design diagrams and programs
</UL> <em>No CASE gap:</em>
<UL> 
<LI>A single abstract language is used throughout analysis, design, and 
  implementation.
<LI>Different  concrete  syntaxes are used to  present  the  different
  models:
<UL> 
<LI>graphical syntax for design
<LI>textual syntax for programs
</UL> 
</UL> 

<DT><EM>User Interface Editor</EM><DD>
  The graphical user interface editor gives a direct manipulation
editor for the user interface of an application.  The user interface
editor is integrated with the structure editor, enabling both
graphical, structured and textual editing of the user interface of the
program.

<DT><EM>Metaprogramming tools</EM><DD>
  Supplementing the metaprogramming libraries, there is a number of
  grammar-based tools as part of the metaprogramming system, such as
  compiler-compiler, parser, pretty-printer, and the hyper structure editor.
  Being grammar-based, it is possible to customize them all towards specific 
  grammars. 
</DL> 





<H3><A NAME="E06">E06) Does a <CODE>beta-mode</CODE> for Emacs exist?</A></H3>

Yes, an Emacs mode for editing BETA programs is part of the
Mj&oslash;lner System. This <CODE>beta-mode</CODE> is in the
public domain and can be obtained by FTP from the directory <CODE><a
href="ftp://ftp.daimi.au.dk/pub/beta/emacs">ftp://ftp.daimi.au.dk/pub/beta/emacs</a></CODE>.
<P>
The file <CODE>beta-mode.el</CODE> contains a large comment that
explains how to use this.




<H2><A NAME="PartIV">PART IV: Specific Issues</A></H2>




<H3><A NAME="SectionI">SECTION I: The Fragment System</A></H3>



<H4><A NAME="F01">F01) What is the purpose of the fragment system?</A></H4>

The purpose of the fragment system is to enable modularization of BETA
programs.  The fragment system also supports separate compilation, dependency
analysis of modules, information hiding and separation of specification and
implementation modules.  The fragment system also enables the co-existence of
different implementations of the same specification, depending on the target
machine type (on the same file system), and automatic selection of the proper
variant for the specific machine type.
<P>

The fragment system is based on the slot and fragment metaphors.  A slot is a
specification in the source code which signifies that separately compiled
source code may be associated with that place.  A fragment is a piece of source
code which can be separately compiled, and associated with a slot.
<P>

The fragment system takes care of the slots and fragments, and the connections
between them.  Several different combination rules exist in the fragment 
system, enabling the specification of different modularization relations. 



<H4><A NAME="F02">F02) How do I separate implementation and specification code?</A></H4>

Let us assume that we has the following source code:
<pre>
   ORIGIN '...'
   --- lib: attributes ---
   f: (# t: @text; i,j: @integer; r: @real
      enter t[]
      do (* ... some code implementing f ... *)
      #)
</pre>
This source code is assumed to reside in a source code file called 
<CODE>fSource.bet</CODE>. 
<P>

If we want to separate the implementation and the specification, we can make 
the following change to <CODE>fSource.bet</CODE>:
<pre>
   ORIGIN '...';
   BODY 'fBody'
   --- lib: attributes ---
   f: (# t: @text; i,j: @integer; r: @real
      enter t[]
      &lt;&lt;SLOT fBody: dopart&gt;&gt;
      #)
</pre>
That is, we have replaced the implementation with a slot specification.
<P>

We now create another source file; let's call it <CODE>fBody.bet</CODE>:
<pre>
   ORIGIN 'fSource'
   --- fBody: dopart ---
   do  (* ... some code implementing f ... *)
</pre>
As can be seen, we have now modularized the implementation away from the
specification (except for the <CODE>i</CODE>, <CODE>j</CODE>, and
<CODE>r</CODE> attributes (see question <A HREF="#F05">F05</A>).




<H4><A NAME="F03">F03) How do I work around
     <CODE>&quot;*****Only pattern-declarations may appear in a fragment of 
     category 'attributes'&quot;</CODE>?</A></H4>

In F02, we didn't get rid of the <CODE>i</CODE>, <CODE>j</CODE>, and
<CODE>r</CODE> implementation attributes of <CODE>f</CODE>.  The reason is that
it is not possible to do the most obvious, which would have been the following:
<P> 
<pre>
fSource.bet:
   ORIGIN '...';
   BODY 'fBody'
   --- lib: attributes ---
   f: (# t: @text;
         &lt;&lt;SLOT fLib: attributes&gt;&gt;
      enter t[]
      &lt;&lt;SLOT fBody: dopart&gt;&gt;
      #)

fBody.bet:
   ORIGIN 'fSource'
   --- fLib: attributes ---
   i,j: @integer; r: @real
   --- fBody: dopart ---
   do  (* ... some code implementing f ... *)
</pre>
since it is not allowed to specify reference attributes (static or dynamic) in
attribute slots.  
<P>

Instead we have to use the following trick:
<pre>
fSource.bet:
   ORIGIN '...';
   BODY 'fBody'
   --- lib: attributes ---
   f: (# t: @text;
        fPrivate: @&lt;&lt;SLOT fLib: descriptor&gt;&gt;
      enter t[]
      &lt;&lt;SLOT fBody: dopart&gt;&gt;
      #)

fBody.bet:
   ORIGIN 'fSource'
   --- fLib: descriptor ---
   (# i,j: @integer; r: @real #)
   --- fBody: dopart ---
   do  (* ... some code implementing f ... *)
</pre>
and in <CODE>(* ... some code implementing f ... *)</CODE> we have to change
all references to <CODE>i</CODE>, <CODE>j</CODE>, and <CODE>r</CODE> to
<CODE>fPrivate.i</CODE>, <CODE>fPrivate.j</CODE>, and <CODE>fPrivate.r</CODE>.




<H4><A NAME="F04">F04) Why can't I have instances in attributes-fragments?</A></H4>

Allowing instances in attribute forms makes separate compilation of fragments
very difficult due to problems in calculating the size of objects being
allocated from the descriptor in which the fragment form is bound (to a slot).
E.g.

<pre>
fSource.bet:
   ORIGIN '...'
   --- lib: attributes ---
   f: (# t: @text;
         &lt;&lt;SLOT fLib: attributes&gt;&gt;
      enter t[]
      &lt;&lt;SLOT fBody: dopart&gt;&gt;
      #)

fUsage.bet:
   ORIGIN '...';
   INCLUDE 'fSource'
   --- program: descriptor ---
   (# foo: @f
   do (* ... usage of foo ... *)
   #)

fImpl1.bet:
   ORIGIN 'fSource'
   --- fLib: attributes ---
   i,j: @integer; r: @real
   --- fBody: dopart ---
   do  (* ... some code implementing f ... *)

fImpl2.bet:
   ORIGIN 'fSource'
   --- fLib: attributes ---
   i,j,k: @integer; r, s: @real
   --- fBody: dopart ---
   do  (* ... some code implementing f ... *)

fProg1.bet:
   ORIGIN 'fUsage';
   BODY 'fImpl1'

fProg2.bet:
   ORIGIN 'fUsage';
   BODY 'fImpl2'
</pre>

When compiling the <CODE>fUsage.bet</CODE> fragment separately, it is
impossible to pre-calculate the size of the <CODE>foo</CODE> object, since
<CODE>foo</CODE> will contain <CODE>i,j,r</CODE> in <CODE>fProg1.bet</CODE>,
whereas <CODE>foo</CODE> will contain <CODE>i,j,k,r,s</CODE> in
<CODE>fProg2.bet</CODE>.  <P>

A solution to this problem is being investigated by Mj&oslash;lner
Informatics, but there are no plan for when this will be supported.



<H4><A NAME="F05">F05) Why can't I have virtual declarations/bindings in attributes-fragments?</A></H4>

There are two problems in allowing virtual declarations in attribute fragments.
<P>

The first problem is a logical problem. Consider:

<pre>
fSource.bet:
   ORIGIN '...'
   --- lib: attributes ---
   A: (# V:&lt; T;
         ...
      #);
   B: A(# &lt;&lt;Blib: attributes&gt;&gt;
          ...
       #);
   C: B(# V::&lt; T1;
          ...
       #)

fUsage.bet:
   ORIGIN 'fSource'
   --- Blib: attributes ---
   V::&lt; T2
</pre>

The problem is, that when doing the semantic checking of <CODE>V::&lt; T1</CODE>
in <CODE>C</CODE>, it is impossible to know the further binding in the
<CODE>fUsage.bet</CODE> fragment, since it may be compiled after the
compilation of the <CODE>fSource.bet</CODE> fragment.  Thus it is impossible to
ensure, that the further binding in <CODE>C</CODE> is in fact legal (to be
legal, <CODE>T1</CODE> must be a subpattern of <CODE>T</CODE> <EM>and</EM> all
further bindings that might appear in all fragments later bound to the
<CODE>Blib</CODE> slot.
<P>

The second problem is in calculating the size of the virtual dispatch table, if
declaration of new virtuals were allowed in fragments bound to the
<CODE>Blib</CODE> slot.




<H4><A NAME="F06">F06) What are the differences between the <CODE>INCLUDE</CODE> facilities of BETA and C?</A></H4>

It is important to note that the fragment system <CODE>INCLUDE</CODE> mechanism
is radically different from e.g. the C compilers' <CODE>#include</CODE>
facility.  The C <CODE>#include</CODE> mechanism is merely a means for textual
composition, without any semantical implication.  The fragment system's
<CODE>INCLUDE</CODE> mechanism is a semantical, separate compilation facility,
and at the same time it describes parts of the dependency relations between the
program parts.  





<H4><A NAME="F07">F07) Why doesn't the compiler complain about a missing <CODE>inner</CODE> in a <CODE>body</CODE> fragment?</A></H4>

The BETA compiler permits the following fragments:

<pre>
top.bet:
   ORIGIN '~beta/basiclib/v1.6/betaenv';
   BODY 'testBody'
   --- lib: attributes ---
   test: (# do &lt;&lt;SLOT testBody: descriptor&gt;&gt; #)
   --- program: descriptor ---
   (# do test(# do ... #) #)

testBody.bet:
   ORIGIN 'top'
   --- testBody: descriptor ---
   (# do (* no inner! *) #)
</pre>

Why does the compiler allow the specialization of <code>test</code> in 
the <code>program</code> slot even though there is no <code>inner</code> 
in the definition of <code>test</code> (as can be seen in the 
<code>testBody</code> fragment)?
<p>

The reason is that the <code>testBody</code> fragment may be compiled 
separately, and later changed without recompiling or rechecking the 
<code>top.bet</code> fragment.  
That is, even though the <code>testBody</code> might originally have 
included an <code>inner</code>, there is no way to ensure that later 
changes do not remove it (without sacrificing the separate compilation 
ability).
<p>

Note: This behavior is consistent with the compiler not performing flow 
analysis to ensure that all execution paths of a pattern contain an 
<code>inner</code>. For example,
<pre>
   foo: (# do (if true then (* nothing! *) else inner if) #)
   bar: foo(# do ... #);
</pre>

is legal even though <code>bar</code>'s do-part is never executed.







<H4><A NAME="F08">F08) Can <TT>&lt;&lt;Attributes&gt;&gt;</TT> be used instead of <TT>&lt;&lt;AttributeDecl&gt;&gt;</TT>?</A></H4>

The fragment system has a pragmatic treatment of the syntactic
categories <TT>&lt;&lt;AttributeDecl&gt;&gt;</TT> and
<TT>&lt;&lt;Attributes&gt;&gt;</TT>.

In general one may want to leave slots in a delaration list for
inserting declarations as in:
<pre>
   (# a: @integer;
      &lt;&lt;SLOT lib1: attributes&gt;&gt;;
      b: ^ text;
      &lt;&lt;SLOT lib2: attributes&gt;&gt;;
      c: (# ... #)
   #)
</pre>

It is, however, not possible to generate the above form from the BETA
grammar, since the nonterminal <TT>&lt;attributes&gt;</TT> cannot
generate itself. It is possible to make a grammar that can do this,
but such a grammar is very likely to be ambiguous.

The following fragment can, however, be generated from the grammar:
<pre>
   (# a: @integer;
      &lt;&lt;SLOT lib1: attributeDecl&gt;&gt;;
      b: ^ text;
      &lt;&lt;SLOT lib2: attributeDecl&gt;&gt;;
      c: (# ... #)
   #)
</pre>

This will, however, only allow one fragment-form to be inserted in a
each library slot.

To handle this, the fragment system allows a fragment form of category
<TT>&lt;attributes&gt;</TT> to be inserted for an
<TT>&lt;attributeDecl&gt;</TT>.
 
This aliasing between <TT>&lt;attributeDecl&gt;</TT> and
<TT>&lt;attributes&gt;</TT> is handled by the alias mechanism for the
BOBS parser used by the meta programming system. See
<TT>$(BETALIB)/bobs/vx.y/bobs.bet</TT>, <TT>nontAlias</TT>.

The alias mechanism also makes it possible to use
<TT>&lt;descriptor&gt;</TT> as a shorthand for
<TT>&lt;objectDescriptor&gt;</TT>.

The use of syntac alias's is pragmatic and does not strictly follow
the principles of the fragment system, but it is considered a minor
but practical mechanism.



<H3><A NAME="SectionII">SECTION II: The X libraries</A></H3>



<H4><A NAME="X01">X01) Why does my label widget sometimes get the 
attribute name as label-string, and sometimes not?</A></H4>

The following BETA program creates a window containing &quot;Label&quot;

<pre>
   ORIGIN '~beta/Xt/awenv'
   --- program: descriptor --- 
   AwEnv
   (# Hello: @Label;
   do Hello.init; 
   #)       
</pre>

whereas the following program creates a window containing &quot;Hello&quot;

<pre>
   ORIGIN '~beta/Xt/awenv'
   --- program: descriptor --- 
   AwEnv
   (# Hello: @Label(##);
   do Hello.init; 
   #)       
</pre>

Why?

<P>

The connection between the names used for widgets in BETA and
the external names used in the external widgets interfaced to from
BETA is that the <em>pattern name</em> of the BETA widget is used for
the external widget name by default. 
In the first example, the <CODE>Hello</CODE> widget is an instance of 
the pattern <CODE>Label</CODE>, and in the second example the widget is 
the only possible instance of the singular pattern <CODE>Label(##)</CODE>,
which is named <CODE>Hello</CODE>.

<P>

The appearance of the windows in this case comes from the fact that
the Athena <CODE>Label</CODE> widget uses the external name of the
widget as default label-string, if it is not specified otherwise. 

A variant of this problem is the case where you specify a list of 
widgets using the same pattern:

<PRE>
   hello1, hello2: @Label(##);
</PRE>

In this case the default name will always be the <em>first</em> name
in the list, <CODE>hello1</CODE>. 
To avoid this behavior, use the scheme 

<PRE>
   hello1: @Label(##);
   hello2: @Label(##);
</PRE>

or specify the name explicitly instead.
<BR>
See the X Window System Libraries Manual for more details:
<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/xwindows">http://www.mjolner.com/mjolner-system/documentation/xwindows</A>
</BLOCKQUOTE>


<H4><A NAME="X02">X02) Why do I get the error "<CODE>There must be only one non-shell widget which is son of Toplevel</CODE>"?</A></H4>

Consider the following program:

<PRE>
   ORIGIN '~beta/Xt/awenv';
   --- program: descriptor ---
   AwEnv
   (# faculty: label
        (# init:: (# do 2-&gt; borderwidth #) #);
      University: @box
        (# Physics, Mathematics: @faculty; 
           init:: (# do Physics.init; Mathematics.init #);
        #)
   do University.init;
   #)
</PRE>

The idea was that a window with two labels named <CODE>Physics</CODE>
and <CODE>Mathematics</CODE> should appear. 
But executing it gives the error message

<BLOCKQUOTE>
<TT>Xt Error: There must be only one non-shell widget which is son of Toplevel.
The widget causing the conflict is named <CODE>faculty</CODE>.</TT>
</BLOCKQUOTE>

This is because the program uses the <CODE>init</CODE> pattern
of the widgets without specifying the father and name of the widgets.
In the Xt manual [MIA 91-16], it is briefly explained that the father
widget will default to &quot;the enclosing widget according to BETA's
scope rules&quot; (see the description of <CODE>Core</CODE> in "Basic
<CODE>XtEnv</CODE> patterns").  

<P>

To be precise, this is what happens: 
When the <CODE>init</CODE>
pattern of a widget is invoked, it first checked to see if the father is
<CODE>NONE</CODE>. 
This will be the case if no father is specified in the enter part of 
<CODE>init</CODE>. 
If so, a search is started in the statical environment of the widget 
pattern. 
If a specialization of a <CODE>Core</CODE> widget is found, this widget 
is used as the father.
This search is continued until a pattern with no enclosing pattern is
found. 
In this case the widget named <CODE>TopLevel</CODE> 
(in <CODE>xtenv</CODE>) is used as the father. 
The widget <CODE>TopLevel</CODE> is an instance of the pattern
<CODE>TopLevelShell</CODE>, which among its characteristics has the
constraint that it wants to have exactly one non-shell child.

<P> 

Now consider the example program: 
The first thing that happens is that the <CODE>init</CODE> attribute of 
<CODE>University</CODE> is invoked. 
Since no father is specified, a search for one is started from the 
<CODE>University</CODE> pattern. 
This search finds the pattern <CODE>AwEnv(# ... #)</CODE>, which is 
not a <CODE>Core</CODE>, and which has no enclosing pattern. 
Thus <CODE>University</CODE> will get the father widget 
<CODE>TopLevel</CODE>.

<P>

The final binding of <CODE>University.init</CODE> then invokes
<CODE>Physics.init</CODE>. 
<CODE>Physics</CODE> is an instance of the pattern <CODE>faculty</CODE>, 
which is declared in the same scope as <CODE>University</CODE>. 
Thus the search for a father for <CODE>Physics</CODE> is identical 
to the search for the father of <CODE>University</CODE>, and 
<CODE>Physics</CODE> also gets <CODE>TopLevel</CODE> as its father.
This is when the error occurs.
The reason why the name reported in the error message is 
<CODE>faculty</CODE> is explained in Question <A HREF="#X01">X01</A>.  

<P>

Notice that it did not matter that the instantiation of the
<CODE>Physics</CODE> object is done within <CODE>University</CODE>:
the default father is searched for starting from the <em>pattern</em>
declaration of the object. 

<P>

In general there are three possible solutions:

<OL>
<LI>Supply the father and name when initializing the 
<CODE>faculty</CODE> widgets:
<PRE>
   do ("Physics", University)-&gt;Physics.init;
      ("Mathematics", University)-&gt;Mathematics.init;
</PRE>
In this case, no search for a default father is needed for the 
<CODE>faculty</CODE> widgets.

<LI>Make (possibly empty) specializations of <CODE>faculty</CODE> inside 
<CODE>University</CODE>:
<PRE>
   Physics: @faculty(##);
   Mathematics: @faculty(##);
</PRE>
Now the search for a default father of <CODE>Physics</CODE> will start 
at the pattern <CODE>faculty(##)</CODE> inside <CODE>University</CODE>, 
so the <CODE>University</CODE> pattern will be the first found in this 
search, and hence the <CODE>University</CODE> widget will become the 
father of the <CODE>Physics</CODE> widget. Likewise for 
<CODE>Mathematics</CODE>.

<LI>Move the declaration of the <CODE>faculty</CODE> pattern inside the 
<CODE>University</CODE> pattern. 
This will give the same search path as in solution 2. 
(Conceptually, this might also be the best place to declare 
<CODE>faculty</CODE> in the first place.)
</OL>

The above example was a simple one. 
In more complicated cases, the reason for an error of this kind can be 
trickier to spot. 
If your program uses the fragment system to move declarations 
of useful widgets into a library, this kind of error is likely to occur. 
Remember that if an instance of an unspecialized widget is used, the 
widget pattern being declared in, say, the <CODE>XtEnvLib</CODE> 
attributes slot of <CODE>xtenv</CODE>, then the search for a 
default father is started at the <CODE>XtEnv</CODE> pattern, and 
therefore no father widget is found.
In this case the widget will get <CODE>TopLevel</CODE> as father. 
Solutions 1 or 2 above will be appropriate in these cases.

<BR>
See the X Window System Libraries Manual for more details:
<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/xwindows">http://www.mjolner.com/mjolner-system/documentation/xwindows</A>
</BLOCKQUOTE>



<H4><A NAME="X03">X03) How do I get a separate window for my widget?</A></H4>

Widgets that create separate windows which can be individually moved, 
resized, and so on, by the window manager are specializations of the 
<CODE>Shell</CODE> pattern. 
Normally you would use a <CODE>TopLevelShell</CODE> (the pattern used 
for the <CODE>TopLevel</CODE> widget created by default by 
<CODE>XtEnv</CODE>). 

<P>

To make the following Athena <CODE>Label</CODE> appear in a separate 
window

<PRE>
   goodbye: @Label(# init:: (# do 'Goodbye World'-&gt;label #)
</PRE>

you would wrap a <CODE>TopLevelShell</CODE> around it:

<PRE>
   byewindow: @TopLevelShell
     (# goodbye: @Label
          (# init:: (# do 'Goodbye World'-&gt;label #) #);
        init:: (# do goodbye.init #);
     #);
</PRE>

To make the window appear, it should be initialized like any other 
widget, and then the <CODE>Shell</CODE> method <CODE>popup</CODE> should 
be invoked:

<PRE>
   byewindow.init;
   byewindow.popup;
</PRE>

Notice that the <em>first</em> widget initialized by a program will by
default become a child of the <CODE>TopLevel</CODE> widget (see
question <A HREF="#X02">X02</A>), and will thus be in a separate window.

<P>

There are other possible shells to use, such as 
<CODE>OverrideShell</CODE>. 
The <CODE>OverrideShell</CODE> has gotten its name because although it
creates a separate top level window, it overrides all requests from
the window manager, and will therefore not be resizable, etc.






<H4><A NAME="X04">X04) Why do I get the error "<TT>clockWidgetClass:
undefined</TT>" when linking my <TT>AwEnv</TT> program using the
xt/v1.8 libraries?</A> [corrected in r4.0]</H4>

The X libraries in the Mj&oslash;lner System are based on X11
release 5 (X11R4/R5). 
Support for X11R6 is not included in release 3.0 of the Mj&oslash;lner 
System. 
But with a few exceptions, X11R6 is backward compatible with X11R5.  
One of the few exceptions is the reason for the above error: 
Some very infrequently used widgets have been removed from the Athena 
widget set in X11R6.  

<P>

To fix the error you should have your system administrator apply the
following patch to the file
<TT>~beta/Xt/v1.8/private/external/awInt.c</TT>: 

<pre>
   13d12
   &lt; #include &lt;X11/Xaw/Clock.h&gt;
   15,16d13
   &lt; #include &lt;X11/Xaw/Logo.h&gt;
   &lt; #include &lt;X11/Xaw/Mailbox.h&gt;
   37d33
   &lt; 
   53,55d48
   &lt; int getClockWidgetClass(){return ( (long) clockWidgetClass);}
   &lt; int getLogoWidgetClass(){return ( (long) logoWidgetClass);}
   &lt; int getMailboxWidgetClass(){return ( (long) mailboxWidgetClass);}
</pre>

That is, remove all lines referring to the <TT>clock</TT>,
<TT>logo</TT>, and <TT>mailbox</TT> widgets. 

Then the system administrator should compile one of the
<TT>awenv</TT> demos to get the changes incorporated into the
system.
<P>

To simplify correction of the above errors, a patch for the
Mj&oslash;lner System, release 3.0 and 3.1 has been supplied.
It can be fetched from 
<A HREF="ftp://ftp.mjolner.com/pub/X11R6_patch">
ftp://ftp.mjolner.com/pub/X11R6_patch</A>,`.
<P>
Please see the README file for details.






<H4><A NAME="X05">X05) Why do I get the error "<TT>Error: NULL
ArgVal in XtGetValues</TT>" when executing my <TT>Xt</TT>
program using the xt/v1.8 libraries?</A> [corrected in r4.0]</H4>

This is due to a programming error in the Mj&oslash;lner System
interface to the X toolkit.  
The error does not seem to influence programs linked under X11 
release 5, but (at least) X11R6 on Linux encounters it.

<P>

To fix the error have your system administrator change some files:

<OL>
<LI>In the file <TT>~beta/Xt/v1.8/xtlib.bet</TT>, the definition of
the pattern <TT>argList</TT> should be changed to:

<pre>
argList: cStruct
  (# byteSize::&lt; (# do 100-&gt;value #);
     max: (# exit R.range div 2 #);
     extend:
       (# size: @integer;
       enter size
       do (if size=0 then R.range-&gt;size
           else size-R.range-&gt;size;
          if);
          size-&gt;R.extend;
       #);
     set: @
       (# number: @integer;
          cStr: @integer;
          value: @integer;
       enter (number,cstr,value)
       do (* Cannot check ranges since no GC's may occur.
           * The user needs to do the bookkeeping himself
           * using 'max' and 'extend'.
           * The reason for this is that 'value' may be
           * the computed address of an integer.
           *)
          cstr-&gt;R[number*2-1];
          value-&gt;R[number*2]
       #);
     get: @
       (# number: @integer;
       enter number
       exit R[number*2]
       #);
     getName: @
       (# number: @integer;
          t: ^text;
       enter number
       do r[2*number-1]-&gt;CStringToText-&gt;t[];
       exit t[]
       #);
  #);
</pre>

<LI>In the file <TT>~beta/Xt/v1.8/private/xtenvbody.bet</TT>, the
two fragments <TT>IntegerResourceGet</TT> and
<TT>AncestorSensitiveGet</TT> should be changed to: 

<pre>
   --- IntegerResourceGet: dopart ---
   do (1,resourceName, @@value)-&gt;private.wargs.set;
      (Thewidget,private.wargs[],1)-&gt;XtGetValues;
</pre>
   and  
<pre>
   --- AncestorSensitiveGet: dopart ---
   do (1,xtnancestorsensitive,@@value)-&gt;private.wargs.set;
      (Thewidget,private.wargs[],1)-&gt;XtGetValues;
</pre>
respectively.

<LI>In the file <TT>~beta/Xt/v1.8/private/awenvbody.bet</TT>, the
fragment <TT>FloatResourceGet</TT> should be changed to:

<pre>
   --- FloatResourceGet: descriptor ---
   (# status,res: @integer
   do (1,resourceName,@@value)-&gt;private.wargs.set;
      (theWidget,private.wargs[],1)-&gt;XtGetValues;
      resolution-&gt;res;
      (@@value,res)-&gt;getQuotFromFloat-&gt;value
   #)
</pre>

<LI>In the file
<TT>~beta/Xt/v1.8/motif/private/basicsbody.bet</TT>, the three
fragments <TT>MotifStringResourceGetText</TT>,
<TT>MotifStringResourceGet</TT>, and <TT>ProcResourceGet</TT>
should be changed to: 

<pre>
   --- MotifStringResourceGetText: descriptor ---
   (# S: @MotifString; 
   do (1,resourceName,@@S.value)-&gt;Private.Wargs.Set;
      (TheWidget,Private.Wargs[],1)-&gt;XtGetValues;
      S.getText-&gt;t[];
      S.destroy;
   #)
</pre>
   and
<pre>
   --- MotifStringResourceGet: descriptor ---
   (# 
   do (1,resourceName,@@value)-&gt;private.wargs.set;
      (thewidget,private.wargs[],1)-&gt;XtGetValues;
   #)
</pre>
   and 
<pre>
   --- ProcResourceGet: descriptor ---
   (#
   do (1,resourceName,@@p)-&gt;private.wargs.set;
      (Thewidget,private.wargs[],1)-&gt;XtGetValues;
   #)
</pre>
   respectively.

<LI>In the file
<TT>~beta/Xt/v1.8/motif/private/rowcolumnbody.bet</TT> the two
fragments <TT>RowColumnLabelStringGetText</TT> and
<TT>RowColumnLabelStringGet</TT> should be changed to: 
 
<pre>
   --- RowColumnLabelStringGetText: descriptor ---
   (# S: @MotifString; 
   do (1,resourceName,@@S.value)-&gt;Private.Wargs.Set;
      (TheWidget,Private.Wargs[],1)-&gt;XtGetValues;
      S.getText-&gt;t[];
      S.destroy;
   #)
</pre>
   and 
<pre>
   --- RowColumnLabelStringGet: descriptor ---
   (# 
   do (1,resourceName,@@value)-&gt;private.wargs.set;
      (thewidget,private.wargs[],1)-&gt;XtGetValues;
   #)
</pre>
   respectively.

<LI>Then have your system administrator issue the commands

<pre>
   cd $BETALIB/Xt/v1.8
   beta -q -c private/awenvbody.bet motif/private/rowcolumnbody.bet
</pre>
   to get the changed files recompiled.
</OL>

These changes will be incorporated in version 1.9 of the Xt libraries.
<P>

To simplify correction of the above errors, a patch for the
Mj&oslash;lner System, release 3.0 and 3.1 has been supplied.
It can be fetched from 
<A HREF="ftp://ftp.mjolner.com/pub/X11R6_patch">
ftp://ftp.mjolner.com/pub/X11R6_patch</A>,`.
<P>
Please see the README file for details.




<H4><A name="X06">X06) How do I set font information in MotifStrings?</A></H4>

In order to set font information in MotifStrings, you can use the
following as a template:

<pre>
   sensorLabel: @Label
     (# init::
          (# s: @labelString;
             t: @MotifString 
	          (# init::
                       (# 
                       do ('Sensor:','ItalFont',XmSTRING_DIRECTION_L_TO_R)
                            -&gt; t.setTextSegment;
                       #);
                  #);
          do (...)                  
             t.init;
             t-&gt;s.set;                  
          #);
     #);
</pre>




<H4><A name="X07">X07) Resource specification errors in Xt/v1.9 [corrected in r4.0]</A></H4>

Version 1.9 of the BETA interface to X (part of r4.0) solves most of
the errors appearing when using X11R6 (e.g. the errors in <A
HREF="#X04">X04</A> and <A HREF="#X05">X05</A>).

<P>

This is done, among other things, by introducing
<CODE>BooleanResource</CODE>, <CODE>CharResource</CODE> and
<CODE>ShortResource</CODE> to correctly model the interface to X
resources with different physical representations.

<P>

Unfortunately a few of the resources was not converted correctly.
This means that you may get wrong behaviour when <EM>reading</EM>
these resources.

<P>

To fix this you can change the following in the <CODE>Xt/v1.9</CODE>
sources, and recompile the libraries (after appropriate setting of
permissions):

<PRE>
   Change from IntegerResource to ShortResource:
   ---------------------------------------------
   motif/rowcolumn.bet:         RowColumn.numColumns
   motif/texts.bet:             TextField.columns

   Change from IntegerResource to BooleanResource:
   -----------------------------------------------
   awenv.bet:                   SimpleMenu.menuOnScreen
   awenv.bet:                   Paned.refigureMode
   awenv.bet:                   AsciiText.autoFill
   awenv.bet:                   AsciiText.resize
   awenv.bet:                   AsciiText.displayNonprinting
   awenv.bet:                   CoreLIB.resizable
   xtenv.bet:                   Core.mappedWhenManaged
   xtenv.bet:                   Shell.allowShellResize
   xtenv.bet:                   Shell.overrideRedirect
   xtenv.bet:                   Shell.saveUnder
   xtenv.bet:                   WMShell.input
   xtenv.bet:                   WMShell.transient
   xtenv.bet:                   WMShell.waitForWM
   xtenv.bet:                   TopLevelShell.iconic
   motif/bulletinboard.bet:     BulletinBoard.defaultPosition
   motif/lists.bet:             MotifList.automaticSelection
   motif/scale.bet:             Scale.highlightOnEnter
   motif/texts.bet:             ScrolledText.scrollVertical
   motif/texts.bet:             ScrolledText.scrollHorizontal
   motif/texts.bet:             ScrolledText.scrollLeftSide
   motif/texts.bet:             ScrolledText.scrollTopSide
   motif/texts.bet:             TextField.verifyBell
</PRE>

These errors will naturally be corrected in the next release.



<H3><A NAME="SectionIII">SECTION III: The BETA compiler</A></H3>



<H4><A NAME="C01">C01) What is the execution speed of BETA programs?</A></H4>

For average programs, the execution speed of typical BETA programs is
comfortable.  However, there are many possibilities for optimization in the
current BETA compiler, the generated code, and the run-time system.  Mj&oslash;lner
Informatics is constantly working on improving the execution speed of BETA.





<H4><A NAME="C02">C02) How do I get rid of the warning:
     <CODE>&quot;A run-time qualification check will be inserted here&quot;</CODE>?</A></H4>
  
By using the <CODE>-q</CODE> or <CODE>-w</CODE> options to the
compiler: <CODE>&quot;beta -q ...&quot;</CODE> or <CODE>&quot;beta -w
...&quot;</CODE>





<H4><A NAME="C03">C03) What *does* that Qua-check warning mean, anyway?</A></H4>

If you have:
<pre>
   (# Vehicle: (# ... #);
      Bus: Vehicle(# ... #);
      aVehicle: ^Vehicle;
      aBus: ^Bus
   do ...
      aVehicle[]-&gt;aBus[]
      ...
   #)
</pre>
the compiler will give a Qua-check warning at the
<CODE>&quot;aVehicle[]-&gt;aBus[]&quot;</CODE>.  The reason is that <CODE>aBus</CODE> can
only refer to objects which are instances of a pattern that is a subpattern of
<CODE>Bus</CODE> (or is a <CODE>Bus</CODE>).  But <CODE>aVehicle</CODE> may
refer to all objects which are instances of a pattern that is a subpattern of
<CODE>Vehicle</CODE> (or is a <CODE>Vehicle</CODE>) - that is, not necessarily
<CODE>Bus</CODE>.  The BETA runtime system therefore inserts a test to verify
that the object referenced by <CODE>aVehicle[]</CODE> is actually an instance
of a pattern that is a subpattern of <CODE>Bus</CODE> (or is a
<CODE>Bus</CODE>) - otherwise a runtime error occurs.  
<P>

The Qua-warning is issued to direct your attention towards these places for
potential runtime errors.




<H4><A NAME="C04">C04) How do I work around
     <CODE>&quot;*****Repetition of non simple patterns is not
implemented&quot;</CODE> (using v5.0 of the compiler)?</A> [corrected in r4.0]</H4>

If you want to write:
<pre>
   persons: [100]@person
</pre>
(which is not implemented in version 5.0 of the BETA compiler), you
should instead write: 
<pre>
   persons: [100]^persons
</pre>
and then, before you start using the <CODE>persons</CODE> repetition, initialize it by:
<pre>
   (for i: persons.range repeat
        &amp;person[]-&gt;persons[i][]
   for)
</pre>
Then you can use the <CODE>persons</CODE> repetition in the rest of the
program, just as if it was declared as a repetition of static persons.  
<P>
In version 5.1 of the BETA compiler, <CODE>persons:
[100]@person</CODE> is implemented.




<H4><A NAME="C05">C05) How do I work around <CODE>&quot;Labeled imperative not implemented&quot;</CODE>?</A></H4>

If you want to write:
<pre>
   (L: Imp1; Imp2; ... Impi :L)
</pre>
(which is not implemented), you should instead write:
<pre>
   L: (# do Imp1; Imp2; ... Impi #)
</pre>
In fact, the <CODE>(L: ... :L)</CODE> construct is being considered for
exclusion from the BETA language due to the very simple replacement shown
above.  
<P>
See also <A HREF="#L22">L22</A>.



<H4><A NAME="C06">C06) Why does a BETA program called <CODE>test.bet</CODE> cause problems on some UNIX installations?</A></H4>

By default, the executable generated from a BETA program called 
<CODE>test.bet</CODE> is called <CODE>test</CODE>.
Depending on your UNIX installation's defaults and your own environment
variables, attempts to execute the BETA program by typing <CODE>test</CODE> 
may, however, result in the standard system program <CODE>test</CODE> being 
executed instead. 
To avoid the problem, just type <CODE>./test</CODE> instead of
<CODE>test</CODE>.
<P>

Similar problems can arise with other, existing UNIX commands.
<P>

[Note: This is a typical beginner's problem, not related to the BETA 
language or the BETA environment as such.]





<H4><A NAME="C07">C07) How do I disable qualification check warnings?</A></H4>

The &quot;<CODE>A run-time qualification check will be generated
here</CODE>&quot; warning may be disabled by using compiler switches.

In version v5.0 of the compiler, you can use the
<CODE>-noquawarn</CODE> (or <CODE>-q</CODE>) switch. All warnings may
disabled by using the <CODE>-nowarnings</CODE> (or <CODE>-w</CODE>)
switch.

If you would like the <CODE>-q</CODE> option to become the default, you can 
include it in your <CODE>BETAOPTS</CODE> environment variable, e.g.

<pre>
   setenv BETAOPTS -q
</pre>

If you would like to temporarily turn qualification check warnings back 
on, you may then do so by specifying the <CODE>-quawarn</CODE> switch.
<P>
As of version v5.1 of the compiler, the switch <CODE>-noquawarn</CODE>
have been renamed to <CODE>--noWarnQua</CODE>, and the switch
<CODE>-quawarn</CODE> have been renamed to <CODE>--warnQua</CODE>.



<H4><A NAME="C08">C08) What is the difference between <CODE>P</CODE> and <CODE>&amp;P</CODE>?</A></H4>

Consider the following BETA program:
<pre>
   (# P: (# do ... #)
   do P; &amp;P
   #)
</pre>
Compiling this program with the current BETA compiler shows no 
difference in the code generated for <CODE>P</CODE> and <CODE>&amp;P</CODE>.
<P>

However, the semantics of BETA defines a difference, namely that 
<CODE>P</CODE> is the execution of an inserted item and that 
<CODE>&amp;P</CODE> is the creation and execution of a dynamic item, 
one of the differences being that inserted items are only allocated 
once, irrespectively of how many times they are executed.
<P>

The current BETA compiler implements inserted items as dynamic ones, 
thereby not taking advantage of the potential possibility for optimization.
This limitation will be removed in a future release of the compiler.





<H4><A NAME="C09">C09) What does &quot;<TT>virtual prefix not implemented</TT>&quot; mean?</A> [corrected in r4.0]</H4>

A couple of typos in the compiler manual [MIA 90-02(1.3) August 1994]
for version v5.0 of the compiler have caused some confusion over this
message.  Section 5, item 8 (&quot;Implementation Restrictions&quot;)
should read as follows:

<BLOCKQUOTE>
8. Virtual superpatterns, i.e.,
<PRE>
   A::&lt; (# ... #); (* where A is some virtual *)
   B: A(# ... #);
</PRE>
have not been implemented.
<P>
By using a final binding, this limitation can often be overcome 
like this:
<PRE>
   A:: (# ... #); (* A is no longer virtual *)
   B: A(# ... #);
</PRE>
The situation may also occur in a more indirect way:
<PRE>
   graph:
     (# node:&lt; (# ... #);
        nodeList: @list(# element::&lt; node #);
        ...
     #);
</PRE>
Here the virtual further binding of <CODE>element</CODE> in 
<CODE>list</CODE> is not allowed, since <CODE>node</CODE> is itself 
virtual.
<P>
The next version of the compiler will allow final binding using a 
pattern that is itself virtual.
That is, you will be allowed to do this:
<PRE>
   graph:
     (# node:&lt; (# ... #);
        nodeList: @list(# element:: node #);
        ...
     #);
</PRE>
In version 5.0 of the compiler, this situation is not handled correctly.
Instead you can do as follows:
<PRE>
   graph:
     (# node:&lt; (# ... #);
        nodeListElement: (# n: ^node enter n[] exit n[] #);
        nodeList: @list(# element::&lt; nodeListElement #);
        ...
     #);
</PRE>
General virtual prefixes behave much like multiple inheritance and
will not be implemented in the near future.
</BLOCKQUOTE>
<P>

These errors have been fixed in the manual for the version v5.1 of the
compiler.



<H4><A NAME="C10">C10) What should I do if the compiler prints &quot;<TT>Please report the error to Mj&oslash;lner Informatics</TT>&quot; and stops?</A></H4>

The compiler may under very rare conditions run into an error from
which it is unable to recover. It will often print out the message
"<tt>Please report the error to Mj&oslash;lner Informatics</tt>" just before
stopping. If you run into an error like this, you should do the
following:
<p>

<ol>
<li>Check in question <a href="#C11">C11</a>, that the error has not yet
been reported.
<li>If it has not been reported, please make an archive with the following
   files (using e.g. <tt>tar</tt> on UNIX, and e.g. <tt>StuffIt</tt> or
   <tt>CompactPro</tt> on macintosh):

<ul>
<li>all relevant <tt>.bet</tt> source files
<li>the <tt>.dump</tt> file of the compiler, if it exists
<li>a file with the compiler output leading to the error
</ul>
   Then please mail this file to <tt><a href="mailto:support@mjolner.com">support@mjolner.com</a></tt> with a short
   description of the error.
</ol>

For users of r4.0, you will find a new tool, <code>betatar</code>,
which is usefull for packing the entire set of source files into a
tar-file (only available on UNIX platforms)


<H4><A NAME="C11">C11) What are the known errors in v5.0 of the compiler?</A></H4>

The following paragraphs deals with various bugs and workarounds in
the different compiler versions.


<H4><A NAME="C11.1">C11.1) Bugs in version 5.0 of the compiler</A></H4>

Since the release of v5.0 of the compiler in august 1994, the
following errors have been reported.
<p>

Some of these errors occur in very specific situations, that are hard
to describe in general, but others may be generally presented, please
see below.


<h5>C11.1.1. Static Constants [fixed in v5.1]</h5>

The following program will make the compiler crash:

<pre>
   ORIGIN '~beta/basiclib/current/betaenv';
   --- program: descriptor ---
   (# E: @(# exit 1 #) #)
</pre>

The compiler reports:

<pre>
   ******* System error!!!
   Constant used as static item
   Please report this error to Mjolner Informatics
</pre>

and then stops.
<p>

This is because constants should be declared without the '@' sign, 
i.e.:

<pre>
   ORIGIN '~beta/basiclib/current/betaenv';
   --- program: descriptor ---
   (# E: (# exit 1 #) #)
</pre>

<h5>C11.1.2. Computed remotes and virtuals [fixed in v5.1]</h5>

The computed remotes, that the compiler supports in general from release v5.0,
will sometimes make the compiler crash, especially if virtuals are
involved. Example:

<pre>
   ORIGIN '~beta/basiclib/current/betaenv';
   INCLUDE '~beta/containers/current/list';
   --- program: descriptor ---
   (# point: (# x: @integer; #);
      pointList: @List
        (# element::point;
           headx: (# exit (head).elm.x #);
        #);
   #)
</pre>

This program makes the compiler crash with the error:

<pre>
   ******* System error!!!
   Pre is empty/null(virtual binding)
   Please report this error to Mjolner Informatics
</pre>

The workaround in this case is to avoid the computed remote in headx:

<pre>
   ORIGIN '~beta/basiclib/current/betaenv';
   INCLUDE '~beta/containers/current/list';
   --- program: descriptor ---
   (# point: (# x: @integer; #);
      pointList: @List
        (# element::point;
           thehead: ^theCellType;
           headx: (# do head-&gt;thehead[]; exit thehead.elm.x #);
        #);
   #)
</pre>


<h5><A NAME="C11.1.3">C11.1.3. "T1PROGRAM undefined" reported by the linker [fixed in v5.1]</A></h5>

As explained in section 7.3 "Assembler and Linker Errors" in the compiler
reference manual [MIA 90-02], if an unbound SLOT of category Descriptor
or Dopart exist in your program, then this is currently not reported
by the compiler itself, but will be detected as an "Undefined Entry" by the
linker. Especially if you are new to BETA programming, you may wonder why
compiling this fragment (foolib.bet):

<pre>
   ORIGIN '~beta/basiclib/current/betaenv';
   --- lib: attributes ---
   foo: (# (* ... *) #);
</pre>

with "beta foolib" causes the linker error "T1PROGRAM undefined".
In this case the reason is that the fragment is actually a library
fragment - it only declares attributes to be used by some program.
Specifically the PROGRAM descriptor SLOT defined in "betaenv" has
not been bound, and thus the error.
<p>

The solution is quite simple: Just compile the program as "beta -c foolib"
instead.
The next version of the BETA compiler will not attempt to do the linking
if the PROGRAM SLOT is not bound.
<p>

If you think this is strange, compare to the equivalent situation in
C (foolib.c)

<pre>
   foo() { /* ... */ }
</pre>

If you compile this file with e.g. "cc foolib.c", you will often get the
linker error that "_main" is not defined. The solution here is like in 
BETA: "cc -c foolib.c"
<P>
Version v5.1 of the compiler may under rare conditions exhibit the
above behaviour, in which case you should use the above workaround,
except the the compiler switch <CODE>-c</CODE> in v5.1 have been
renamed to <CODE>-x</CODE>.

<h5>C11.1.4.   Reference assignment of repetitions [fixed in v5.1]</h5>

Consider the following example:

<pre>
   ORIGIN '~beta/basiclib/v1.6/betaenv';
   ---  program: descriptor ---
   (# P0: (# #); P1: P0 (# #);
      R1: [5] ^P0;
      R2: [5] ^P1;
   do R1[]-&gt;R2[]; (*not legal*)
   #)
</pre>

It is not legal to assign a repetition reference to another repetition 
reference. Unfortunately the compiler does NOT catch this error. The 
program compiles and gives unpredictable results when executed.
<p>

It is possible to have the following assignment

<pre>
   R1-&gt;R2
</pre>

which makes R2 be a copy of R1. But R1 and R2 do not refer to the same
repetition.
<p>

Note, it is of course possible to have the elemenst of R1 point to the
same elemenst as P1:

<pre>
   (for i: R1.range repeat R1[i][]-&gt;R2[i][] for)
</pre>

It would be possible to extend BETA to allow assigning a reference
to a repetion object to another reptition, but there are currently
no plans for this.
 
<h5><A NAME="C11.1.5">C11.1.5.   Assignment to index variables <em>not</em> checked</a></h5>

The BETA book states that it is not legal to assign to the index
variable of a for-imperative as in:

<pre>
   (for i: 12 repeat ...; 5-&gt;i; ... for)
</pre>

This restriction is currently not checked by the compiler.
<P>

Version v5.1 of the compiler still does not check for these
assignments.


<H4><A NAME="C11.2">C11.2) Bugs in version 5.1 of the compiler</A></H4>

Since the release of v5.1 of the compiler ultimo 1995, the following
errors have been reported.
<p>

Some of these errors occur in very specific situations, that are hard
to describe in general, but others may be generally presented, please
see below.


<h5>C11.2.1) "T1PROGRAM undefined" <EM>still</EM> reported by the linker</h5>

   As mentioned in <A HREF="#C11.1.3">C11.1.3</A>, version 5.1 of the compiler partly fixes
   the problem of "T1PROGRAM undefined". To be specific, v5.1 of
   the compiler checks, that the <CODE>PROGRAM</CODE> slot is met before initiating
   a call to the linker.
<P>
   However, it may fail as follows:

<pre>
   beta frag1 frag2
</pre>

   if <CODE>frag1</CODE> contains a <CODE>PROGRAM</CODE> slot, and <CODE>frag2</CODE> does not, you will
   get the linker error for <CODE>frag2</CODE>: Once a <CODE>PROGRAM</CODE> slot has been seen,
   all fragments subsequently translated will be attempted linked.
   This error also happens if you invoke the compiler as
	
<pre>
   beta -r frag1
</pre>

   and then enters <CODE>frag2</CODE> as second fragment to compile when the
   repeating compiler asks for it.
<P>
   Also, if you have declared a <CODE>Dopart</CODE>- or <CODE>Descriptor</CODE>-slot in
   one of your files, and do not have a fragment, that binds these
   slots in any of the files in the dependency graph, then the
   linker may still fail with an undefined entry for this slot.
<P>
   See also <A HREF="#C11.2.2">C11.2.2</A>.

<h5><A NAME="C11.2.2">C11.2.2) Other undefined entries (compiler import error)
   [hpux9pa, nti only]</A> [corrected in r4.0]</h5>

   Question: <BR>
   I experience errors from the linker concerning 
   undefined entries, and I am sure that all of my slots are
   bound. What is wrong?
<P>
   Answer:<BR>
   You may have encountered a situation where the internal import
   tables of the compiler gets confused because two of your slots
   have identical names.
<P>
   Consider:

<pre>
   main.bet:
	ORIGIN '~beta/basiclib/v1.6/betaenv';
	INCLUDE 'foo';
	--PROGRAM: descriptor--
	(# 
	do foo
	#)

   foo.bet:
	ORIGIN '~beta/basiclib/v1.6/betaenv';
	BODY 'foobody';
	-- LIB: attributes --
	foo:
	  (# size: (# s: @integer &lt;&lt;SLOT size:dopart&gt;&gt; exit s #);
	  do size -&gt; putint; newline;
	  #)

   foobody.bet:
	ORIGIN 'foo';
	INCLUDE 'bar';
	-- size: dopart --
	do (&amp;bar[]).size -&gt; s

   bar.bet:
	ORIGIN '~beta/basiclib/v1.6/betaenv';
	BODY 'barbody';
	--LIB: attributes--
	bar:
	  (# size: (# s: @integer &lt;&lt;SLOT size:dopart&gt;&gt; exit s #)#);
 
   barbody.bet:
	ORIGIN 'bar'
	-- size: dopart --
	do 1 -&gt; s
</pre>

   Although somewhat stupid, you would expect this program to
   print "<CODE>1</CODE>" onto the screen. And it does so on most platforms.
   But on the platforms <CODE>hpux9pa</CODE> (HPPA 9000/700 running HP-UX 9)
   and <CODE>nti</CODE> (Windows 95 / 98 / 2000 / Windows NT), when assembling the code
   produced for <CODE>foobody</CODE>, you get an error like

<pre>
   undefined label - M2BAR
</pre>

   The reason for this, is that the compiler gets confused by the
   two <CODE>dopart</CODE> slots both tagged with "<CODE>size</CODE>".
<P>   
   The solution is to use two distinct names, e.g. <CODE>foosize</CODE> and 
   <CODE>barsize</CODE>. Such a naming scheme is advisable to use in general - 
   notice that if the two SLOTs had been of kind <CODE>Descriptor</CODE>, then
   on all platforms, you would get 

<pre>
   multiply defined: M1SIZE
</pre>


<h5>C11.2.3) Qualification error in code generation of division expression
   [linux, nti only]</h5>

   Sometimes v5.1 of the compiler on Linux and Windows 95/98/2000/NT will
   will crash with a Qualification Error during code generation of
   expressions involving division.
<P>
   If the resulting dump file starts with something like

<pre>
   item &lt;op1ToEBX#&gt; in ~beta/.../system/v5.1/LINUXmachine
   -- GDIV-~ in ~beta/.../system/v5.1/LINUXmachine
</pre>

   then it is this error that has occurred.
<P>
   On linux, the error will occur if you compile e.g. the demo
   <CODE>~beta/demo/r3.1/Xt/awenv/scroll.bet</CODE>.
   None of the demos on Windows NT/95/98/2000 contain expressions that
   will cause this error, but you may encounter the problem in
   files of your own.
<P>
   The solution is to split up the expression involving the division
   into simpler expressions. Use option <CODE>--traceCode</CODE> to find out what
   expression is causing the error.


<H4><A NAME="C11.3">C11.3) Bugs in version 5.2 of the compiler</A></H4>

Since the release of v5.2 of the compiler august 1996, the following
errors have been reported.
<p>

Some of these errors occur in very specific situations, that are hard
to describe in general, but others may be generally presented, please
see below.


<h5><A NAME="C11.3.1">C11.3.1) Strange error messages like "attempting to translate <CODE>foo..db.bet</CODE>" [corrected in r4.0.1]</A></h5>

Some of the internal restructuring of the compiler that has been
done for version 5.2 has caused a new bug to appear.
The symptom of the bug is that <CODE>.bet</CODE> sometimes gets
appended to the file name reported, when e.g. an attempt to
write a file fails because of permission problems.
<P>
An example is
<PRE>
You are attempting to translate the file
        /users/smith/beta/private/sun4s/foobody..db.bet
You do not have permission for doing this!
</PRE>
in case the file <CODE>/users/smith/beta/private/sun4s/foobody..db</CODE>, or
the directory it resides in, is write protected.
<P>
There is currently no workaround for this bug, but it is usually
obvious what file name should have been reported.

<h5><A NAME="C11.3.2">C11.3.2) Errors when evaluating expressions involving reals <EM>and</EM> external calls [corrected in r4.0.1]</A></h5>

On all supported platforms, using both reals and external (C) calls in
an expression may yield unpredictable results.
<P>
For instance the following program
<PRE>
ORIGIN '~beta/basiclib/v1.5/math';
--PROGRAM: descriptor--
(#
do (1-&gt;sqrt) -&gt; putint; newline;
   (10-&gt;log10) -&gt; putint; newline;
   (1-&gt;sqrt)+(10-&gt;log10) -&gt; putint; newline;
#)
</PRE>
will give the (wrong) output
<PRE>
1
1
4
</PRE>
on Solaris.
The only known workaround is to split up the expressions, so that
the parts that call the external functions are isolated
(like the first part of the above program).





<H4><A NAME="C12">C12) Tracing the work of compiler?</a></h4>

In the extremely rare event that the compiler crashes during
compilation of your program, you may yourself do some tracing of the
compilation to find out what particular part of your program, that
makes the compiler crash. You do this by specifying some compiler
switches:

<ol>
<li>If the compiler crashes during *code generation* of a fragment, please do this:

<pre>
   beta -s 308 311 0 &lt;file&gt;
</pre>

   This will make the compiler print out each declaration and imperative
   just before code is generated for it. Thus when the compiler crashes,
   you can see what part of your program caused it.

<li>If the compiler crashes during *checking* of a fragment, please do this:

<pre>
   beta -s 191 192 193 0 &lt;file&gt;
</pre>

   This will make the compiler print out each descriptor, declaration
   and imperative just before checking it. Thus when the compiler
   crashes, you can see what part of your program caused it.
</ol>
<P>
In version v5.1 of the compiler, you can use the two new compiler
switches <CODE>--traceCode<CODE> and </CODE>--traceCheck</CODE> instead.



<H4><A NAME="C13">C13) Problem with floating point expressions in connection with repetitions [fixed in v5.1]</a></h4>

The compiler does not generate correct code when floating point
expressions are used in the calculation of repetition ranges as in:

<PRE>
      R: [FR1] ...
   do ...
      FR2-&gt;R.extend
      FR3-&gt;R.new
</PRE>

where FR1, FR2 and FR3 are expressions yielding a floating point
value. The compiler should convert these floating point values
into integer values, but fails in doing so.
<P>

You can get around the error by explicitly converting the
expression to an integer value. If "<CODE>I</CODE>" is an integer variable,
then the following will work:

<PRE>
      R: [FR1-&gt;I] ...
   do ...
      FR2-&gt;I-&gt;R.extend
      FR3-&gt;I-&gt;R.new
</PRE>
<P>
This problem have been fixed in version v5.1 of the compiler.


<H3><A NAME="C14">C14) New features introduced in the Compiler</A></H3>
<H4><A NAME="C14.1">C14.1> New features in version 5.3 of the Compiler</A></H4>
<dl>
<dt><em>BUILD property</em><DD>
BUILD property now included in the BETA compiler. This replaces the use of MAKE. <BR>
See the BETA Compiler Manual for more details:
<BLOCKQUOTE>
<A HREF="http://www.mjolner.com/mjolner-system/documentation/compiler">http://www.mjolner.com/mjolner-system/documentation/compiler</A>
</BLOCKQUOTE>

<dt><em>Binary Object Files</em><DD>
The compiler now generates binary object files on Windows95/98/2000/NT. This eliminates the need for an external assembler.
<dt><em>Debug info</em><DD>
The compiler now generates debug info on Win32 platforms. This enables the debugger, Valhalla, to work.
<dt><em>Gnu</em><DD>
The compiler now supports gnu as SDK. This makes personal use completely free on Win32.
<dt><em>SGI: IRIX 6.x</em><DD>
 SGI: IRIX 6.x is now supported (see however <A HREF="#SG04">SG04</A>).
</dl>

<H4><A NAME="C14.2">C14.2) New features in version 5.2 of the Compiler</A></H4>

The following new features have been implemented in version 5.2 of the
compiler, compared to version 5.1.

<dl>
<dt><em>New Platforms</EM><DD>
Much effort has been put into porting the compiler onto new platforms: 
<ul>
<li>A final version for Silicon Graphics MIPS is now available. 
<li>The Linux compiler now generates binary code directly.
<li>Work is ongoing to make a binary compiler for Windows NT and
    Windows 95/98/2000/NT.
<li>Work is ongoing to make native binary code generation for PowerPC
    based Macintoshes.
</ul>
This work has caused a lot of changes to the interior of the compiler
and runtime system. These changes should, however, be transparent to
the user.

<P><dt><em><CODE>##</CODE> now allowed for objects as well as for patterns</EM><DD>
You may now use <CODE>P##</CODE> as an alternative to
<CODE>P.struc</CODE> when <CODE>P</CODE> is an object. Previously
<CODE>##</CODE> was only allowed for patterns.

<P><dt><em><CODE>$CC</CODE> set in UNIX job files</EM><DD>
The job files on UNIX platforms now set the <CODE>CC</CODE>
environment variable to a reasonable default value before executing
the <CODE>MAKE</CODE> commands.  Thus <CODE>$(CC)</CODE> may now be
used in the <CODE>make</CODE> files on UNIX platforms.

<P><dt><em>Check for bound SLOTs</EM><DD>
The compiler will now only attempt to link if a <CODE>PROGRAM</CODE>
slot has been found in the dependency graph (this feature was
introduced in v5.1 of the compiler, but the implementation was buggy).
If SLOTs of category <CODE>dopart</CODE> or <CODE>descriptor</CODE> in
the dependency graph are not bound, and linking would otherwise have
happened, the compiler now issues a warning and does not attempt to
link. This is the kind of situation that could give an "<CODE>Undefined
Reference</CODE>" error at link time in v5.1 (and earlier versions) of
the compiler.  
<P>
Likewise, if two or more fragments try to bind the same SLOT, the
compiler will give a warning. This is the kind of situation which could
give an "<CODE>Multiply Defined Symbol</CODE>" error at link time in
v5.1 (and earlier versions) of the compiler.

<P><dt><em>Interfragment leave/restart</EM><DD>
Added support for interfragment leave/restart as in
<PRE>
foo.bet:
   ORIGIN '~beta/basiclib/v1.5/betaenv'; 
   BODY 'foobody';
   --PROGRAM:descriptor---
   (# do L: &lt;&lt;SLOT LL:descriptor&gt;&gt; #)

foobody.bet:
   ORIGIN 'foo';
   --LL:descriptor--
   (# do leave L #)
</PRE>
This feature did not work in previous versions of the compiler.

<P><dt><em>Generalized special characters in string literals</EM><DD> The
following special characters are now allowed in BETA string literals
(some of them, e.g. <CODE>\t</CODE>, has worked in previous versions,
too):

<TABLE>
<TR><TD>\a</TD>    <TD>alert (bell) character</TD>
<TR><TD>\b</TD>    <TD>backspace</TD>
<TR><TD>\f</TD>    <TD>form feed</TD>
<TR><TD>\n</TD>    <TD>newline</TD>
<TR><TD>\r</TD>    <TD>carriage return</TD>
<TR><TD>\t</TD>    <TD>horizontal tab</TD>
<TR><TD>\v</TD>    <TD>vertical tab</TD>
<TR><TD>\\</TD>    <TD>backslash</TD>
<TR><TD>\?</TD>    <TD>question mark</TD>
<TR><TD>\'</TD>    <TD>single quote</TD>
<TR><TD>\"</TD>    <TD>double quote</TD>
<TR><TD>\ooo</TD>  <TD>octal number</TD>
</TABLE>

The <CODE>\ooo</CODE> form can be shortened to <CODE>\o</CODE> or
<CODE>\oo</CODE>, provided that the character immediately following it
is not a digit.
<P>
Note that the backslash character is now an escape sequence which must 
itself be escaped if used literally. 
Thus, one must now write <CODE>'\\'</CODE> <EM>instead of</EM> the 
old-style <CODE>'\'</CODE>.
<P>
Note that you may now use <CODE>\'</CODE> <EM>as an alternative to</EM> 
the old-style <CODE>''</CODE> for including literal quotes in a string. 
Thus, <CODE>'Tom\'s Cottage'</CODE> produces the same result as 
<CODE>'Tom''s Cottage'</CODE>.
</dl>




<H4><A NAME="C14.3">C14.3) New features in version 5.1 of the Compiler</A></H4>

The following new features have been implemented in version 5.1 of the
compiler, compared to version 5.0.

<DL>
<DT><EM>General Repetitions</EM><DD>
Repetitions of static objects are now allowed. That is, given

<PRE>
   A: (# ... #); V:&lt; A;
   P: (# ... #);
   S: &lt;&lt;SLOT SS:Descriptor&gt;&gt;;
</PRE>
then

<PRE>
   X:  [10] @P;
   XC: [11] @|P;
   Y:  [12] @V;
   YC: [13] @|V;
   Z:  [14] @S;
   ZC: [15] @|S;
</PRE>

are all allowed.  The operators <CODE>new</CODE> and
<CODE>extend</CODE> also applies to repetitions of this kind, like for
other repetitions.

<P><DT><EM>Qualification from pattern attributes</EM><DD>
It is now possible to qualify a reference as in the following example: 
<PRE>
   grammar: (# symbol: (# ... #); .... #);
   A: ^grammar.symbol 
</PRE>
This was previously forbidden because grammar is not an object.

<P><DT><EM><CODE>THIS(P)</CODE> applies to prefix</EM><DD> 
Previously <CODE>THIS(P)</CODE> was only known to work inside the
<CODE>P</CODE> pattern. Now it also works for prefixes of
<CODE>P</CODE>, e.g.:

<PRE>
   Q: (# x:  @integer; ... #);
   P: Q(# x: @integer; 
      do ... THIS(Q).x -&gt; ... (* will get the x of Q *)
      #)
</PRE>

<P><DT><EM>Short-circuit Boolean Expressions</EM><DD> 
Boolean expressions are now
implemented as short-circuit.  That is, <CODE>B2</CODE> is not
evaluated if <CODE>B1</CODE> is <CODE>true</CODE> in
<PRE>
   B1 or B2
</PRE>
and <CODE>B2</CODE> is not evaluated if <CODE>B1</CODE> is
<CODE>false</CODE> in
<PRE>
   B1 and B2	
</PRE>

<P><DT><EM>Final Binding to a Virtual Pattern</EM><DD>
Final binding of a virtual pattern to another pattern, which is
virtual itself, is now allowed. That is, given the following:

<PRE>
   P1: (# V:&lt; ... (* V virtual *)
          W:&lt; ... (* W virtual *)
       #);
</PRE>
it is now allowed to do the following in a specialization of
<CODE>P1</CODE>:

<PRE>
   P2: P1(# W:: V (* V still virtual, but W now final bound *) #);
</PRE>
The implementation of this is somewhat preliminary.

<P><DT><EM>Special Characters in String Literals</EM><DD>
The compiler will no longer accept newline, carriage return or
file separator characters in string literals, not even if escaped by
<CODE>\</CODE>. This is to prevent errors that could occur when a
string literal was not closed, i.e. a closing quote was
forgotten. This kind of error is no longer possible.  Of course,
<CODE>\n</CODE> is still accepted in string literals.

<P>

Furthermore literal null-characters <CODE>\000</CODE> in strings will
now result in a warning, since this may yield unpredictable results.

<P><DT><EM><CODE>MAKE</CODE> Property Behavior</EM><DD>
When specifying a <CODE>MAKE</CODE> property for automatic
recompilation of external sources, the makefiles which are run
are now executed relative to the directory in which the file
containing the <CODE>MAKE</CODE> property is placed. This simplifies
writing of makefiles a lot.

<P><DT><EM>Consistent Command Line Options</EM><DD>
The command line options that can be used when activating the compiler
have been revised and are now more consistent than previously: 
most options now have an activating and a
deactivating form. Furthermore most options now have a short
one-character equivalent for the non-default form. The short options
have been chosen so that the character matches the first character in
the long form as often as possible. Short options can now be
concatenated.

<P>

Please inspect chapter 8 of the Compiler manual for details, and
please note that a few options have different meanings than
previously, e.g. <CODE>-c</CODE> now corresponds to
<CODE>--noCode</CODE>, where it previously corresponded to
<CODE>--noLink</CODE>.


</DL>



<H4><A NAME="C14.4">C14.4) New features in version 5.0 of the Compiler</A></H4>

The following new features have been implemented in version 5.0 of the
compiler, compared to version 4.4.2.

<dl>
<dt><em>Xor Primitive</EM><DD>
An xor primitive is now supported as a basic operation on booleans. That is
<PRE>
      b1, b2, b3: @boolean
   do (b1 xor b2)-&gt;b3
</PRE>
is now possible.

<P><dt><em>Simple If</EM><DD>
Often, the following if-construct is used
<PRE>
      b: @boolean;
   do (if b//TRUE then
        ...
      else
        ...
      if);
</PRE>

The BETA compiler now supports an extension to the BETA
language called simple-if. 
This extension means that the case selector may be omitted if the 
evaluation on the left hand side exits a boolean; 
it will default to <CODE>//TRUE</CODE>.
That is, the above may be written:

<PRE>
      b: @boolean;
   do (if b then
        ...
      else
        ...
      if);
</PRE>

<dt><em>Labelled imperatives</EM><DD>
Labelled imperatives were previously defined in two forms:
<pre>
   L: Imp;
</pre>
and
<pre>
   (L: Imp1; ...; :L)
</pre>
The second form has now been removed from the language. 
Instead, the compiler offers the form
<pre>
   L: (# do Imp1; ... #)
</pre>

Note that this form is implemented very efficiently in the case where 
there are no declarations in the object descriptor.
</dl>



<H3><A NAME="SectionIV">SECTION IV: The basic libraries</A></H3>



<H4><A NAME="B01">B01) How do you compare text strings in BETA?</A></H4>

Let's assume that we have:
<pre>
   t1, t2: @text;
</pre>
Then:
<pre>
   t1[]-&gt;t2.equal
</pre>
returns true if and only if <CODE>t1</CODE> and <CODE>t2</CODE> are 
equal, and
<pre>
   t1[]-&gt;t2.equalNCS
</pre>
returns true if and only if <CODE>t1</CODE> and <CODE>t2</CODE> are equal 
up to differences in case.




<H4><A NAME="B02">B02) How do you read and write text in BETA?</A></H4>

Texts are written onto standard output by:
<pre>
   'hello'-&gt;screen.puttext;
</pre>
which writes the string <CODE>'hello'</CODE> on the screen at current 
cursor position.
<pre>
   'hello'-&gt;screen.putline;
</pre>
also writes a carriage-return.
<P>

Integers are written by:
<pre>
   7-&gt;screen.putInt;
</pre>
<P>

If you want to write onto other text variables 
(such as <CODE>t: @text</CODE>), you can do it by:
<pre>
   'hello'-&gt;t.puttext;
   'hello'-&gt;t.putline;
   7-&gt;t.putInt;
</pre>
<P>

Reading texts is equally easy:
<pre>
   keyboard.getline-&gt;s[];
</pre>
reads a line of text from the keyboard, and assigns a reference to the read 
text to the text reference <CODE>s</CODE> (assumed to be declared as <CODE>s: ^text</CODE>).
<P>

Reading from other texts (e.g. <CODE>t</CODE>) is done by:
<pre>
   t.getline-&gt;s[];
</pre>




<H4><A NAME="B03">B03) Why does <CODE>getInt</CODE> followed by
<CODE>getLine</CODE> not necessarily work as expected?</A></H4>

You have to be careful when scanning input entered from the keyboard.
For example, if your program has a section of the form 

<pre>
   keyboard.getInt-&gt;...; 
   ...
   keyboard.getLine-&gt;...;
</pre>

and you enter, say, 

<pre>
   42&lt;return&gt;
   foo&lt;return&gt;
</pre>

then the string returned by <CODE>keyboard.getLine</CODE> will be empty because
<CODE>getInt</CODE> stops scanning immediately after <CODE>42</CODE> and does
not consume the (non-numeric) new-line character. [Thus, entering

<pre>
   42foo&lt;return&gt;
</pre>

works correctly.]

You may insert the line 

<pre>
   (if keyboard.peek=ascii.newline then keyboard.get if);
</pre>

between the calls to <CODE>getInt</CODE> and <CODE>getLine</CODE> to get the
desired effect, or even call

<pre>
   keyboard.scanWhiteSpace
</pre>

in which case, however, you won't be able to enter a string starting 
with white-space characters, similar to the functionality of C's 
library function <CODE>scanf()</CODE>.



<H4><A NAME="B04">B04) What is the rationale behind the Mj&oslash;lner System file directory
structures?</A></H4>

This entry describes the file structure of the Mj&oslash;lner System. The 
entry is intended as an illustration of one efficient way to structure the
files of a BETA development project.  At the same time, this file structure is
used all over the existing Mj&oslash;lner System to structure the various
subsystems of the Mj&oslash;lner System.
<P>

Let us assume that the development project is called <CODE>odin</CODE>, and
that it consists of (at least) three subprojects, called <CODE>brage</CODE>,
<CODE>vidar</CODE>, and <CODE>vale</CODE>.  
<P>

We would then define the following file structure (<CODE>brage/</CODE>
indicates that <CODE>brage</CODE> is the name of a subdirectory):

<pre>
   odin --+-- brage/
          |
          +-- vidar/
          |
          +-- vale/
</pre>
<P>

Each of the three subprojects may exists in different versions, reflecting the
development history.  These versions are kept in separate subdirectories for
each subproject.  Let us illustrate with <CODE>vidar</CODE> (having versions <CODE>1.0</CODE>, <CODE>1.1</CODE>, and <CODE>1.2</CODE>):

<pre>
   vidar -+-- v1.0/
          |
          +-- v1.1/
          |
          +-- v1.2/
</pre>

A configuration of <CODE>odin</CODE> now consists of the combination of the
corresponding versions of the subprojects.  <P>

Each version of each subproject has the following directory structure (here
illustrated with the <CODE>1.1</CODE> version):

<pre>
   v1.1 --+-- F1.bet
          |
          +-- F2.bet
          |
          +-- ...
          |
          +-- Fn.bet
          |
          +-- private/
          |
          +-- demo/
          |
          +-- test/
          |
          +-- (* ast files *)
          |
          +-- (* code directories *)
</pre>
<P>

The <CODE>Fi.bet</CODE> files contain the public interface files for the
<CODE>v1.1</CODE> version of the subproject.  
<P>

The private subdirectory contains the implementation fragments for the
<CODE>Fi.bet</CODE> interface files (see later).  
<P>

The <CODE>demo</CODE> subdirectory contains demo programs illustrating the
usage of this subproject.  <P>

The <CODE>test</CODE> subdirectory contains programs for testing the
functionality of this subproject.  <P>

The <CODE>(* ast files *)</CODE> indicates that there will be an
<CODE>Fi.ast</CODE> file (or an <CODE>Fi.astL</CODE> for Intel-based systems) for each
<CODE>Fi.bet</CODE>, containing the abstract syntax tree (AST) representation
of the <CODE>Fi.bet</CODE>.  <P>

The <CODE>(* code directories *)</CODE> indicates that there will be one
subdirectory for each machine type.  Currently, the possible subdirectories
are: <CODE>sun4s</CODE>,
<CODE>sgi</CODE>, <CODE>hpux9pa</CODE>, <CODE>ppcmac</CODE>, <CODE>nti</CODE>,
and <CODE>linux</CODE>.  There may be one subdirectory of each machine type.
<P>

The substructure consisting of <CODE>(* ast files *)</CODE> and <CODE>(* code
directories *)</CODE> is shared by ALL directories, containing compiled BETA
source files, and will therefore not be mentioned further below.  
<P>

The <CODE>demo</CODE> and <CODE>test</CODE> subdirectories may be further
structured, possibly with a subdirectory for each interface file
<CODE>Fi</CODE>, but may also follow different layouts.  
<P>

The <CODE>private</CODE> subdirectory is divided into the following
substructure: 
<P>

<pre>
   private -+-- F1Body.bet
            |
            +-- F2Body.bet
            |
            +-- ...
            |
            +-- FnBody.bet
            |
            +-- external/
            |
            +-- (* ast files *)
            |
            +-- (* code directories *)
</pre>

where <CODE>FiBody.bet</CODE> contains the implementation fragments for the
interface files.  
<P>

The <CODE>FiBody.bet</CODE> files may be machine-independent implementations or
machine-dependent implementations.  The <CODE>FiBody.bet</CODE> files therefore
follow the following naming convention:

<DL>
<DT><EM><CODE>FiBody.bet</CODE></EM><DD>
is the name of a machine-independent implementation
<DT><EM><CODE>Fi_macBody.bet</CODE></EM><DD>
is the name of a machine-dependent implementation(here for macintosh) 
</DL>

In most cases, there exists one implementation file for each interface file,
but for large (or complex) interface files, multiple implementation files may
exist (apart from the different machine dependent implementation files). 
<P>

The <CODE>external</CODE> subdirectory contains non-BETA source files (such as
C source code), and other files which are not used directly by the Mj&oslash;lner System.  The directory structure of
<CODE>external</CODE> follows the conventions of the non-BETA system used (e.g.
the C compiler).  


<H4><A NAME="B05">B05) What do the <CODE>(* idx+ *)</CODE>, etc. comments mean?</A></H4>

At different places in the Mj&oslash;lner System interface files, 
you may encounter comments of the form <CODE>(* idx=2 *)</CODE>,
<CODE>(* idx+ *)</CODE>, or <CODE>(* idx- *)</CODE>.  These are not 
compiler options - the compiler totally ignores all comments.  
Instead, the comments are used for formatting the interface files for 
the documentation.  
They can be safely ignored.

<H4><A NAME="B06">B06) Error in v1.4/seqContainer.bet</A>? [corrected in r4.0]</H4>

The <CODE>queue</CODE> pattern in <CODE>v1.4/seqContainer.bet</CODE>
contains an error that makes the pattern behave like a stack and not
a queue. 
This error is removed in <CODE>v1.5/seqContainer.bet</CODE>.

<H4><A NAME="B07">B07) Error in v1.4/regexp.bet</A>? [corrected in r4.0]</H4>

The <CODE>v1.4/regexp.bet</CODE> library contains an error that
manifests itself by repetition index runtime errors when
<CODE>regexp</CODE> is used on empty texts.  
This error will be removed in <CODE>v1.5/regexp.bet</CODE>.

<H4><A NAME="B08">B08) Error in v1.4/basicsystemenv.bet</A>? [corrected in r4.0]</H4>

The <CODE>objectPort</CODE> pattern in
<CODE>v1.4/basicsystemenv.bet</CODE> contains an error that makes it
almost unusable.  
This error is removed in
<CODE>v1.5/basicsystemenv.bet</CODE>.

<H4><A NAME="B09">B09)Why does my <CODE>guienvsystemenv</CODE> program stop at startup?</A></H4>

Possible problems in your program:

<ul>
<li>Your program was not a specialisation of <CODE>systemenv</CODE>

<li>You did not set <CODE>theWindowEnv</CODE> to the
<CODE>guienv</CODE> instance in <CODE>setWindowEnv</CODE>

<li>Your program forks in the <CODE>dopart</CODE> of
<CODE>guienv</CODE>. You should fork systems in the
<CODE>dopart</CODE> of <CODE>systemenv</CODE>. This might change in a
future release 
</ul>

Your program should look like this:

<pre>-- program: descriptor --
systemenv
(# setWindowEnv:: (# GUI[] -&gt; theWindowEnv[] #);

   GUI: @guienv
     (#
     do ... (* open windows here *)
     #);
do ... (* fork systems here *)
#)
</pre>



<H2><A NAME="PartV">PART V: Platform Specific Issues</A></H2>



<H3><A NAME="SectionV">SECTION V: BETA on Macintosh</A></H3>



<H4><A NAME="M01">M01) What are the system requirements to run BETA on Macintosh?</A></H4>

<h5>Release 3.1: BETA for Motorola Mac</h5>

<ul>
<li>CPU: MC68020 processor or later  (Release r3.1 works on PowerPC,
   please look at question <A HREF="#M05">M05</A>)<br>
<li>RAM: 5 Mb memory (8 or 16 Mb is recommended)
<li>Disk: 16 Mb of free space on harddisk
<li>OS: System 7.x or later (or Multifinder under System 6.x)
<li>The MPW environment version 3.2 or later (please see
question <A HREF="#M02">M02</A> for details).
<li>An FPU to be able to use reals, please see question
   <A HREF="#M04">M04</A> for more details.
</ul>

That is, Release 3.1 runs on machines like Classic II, SE/30, LC, LC
II, LC III, Centris, and all Macintosh II, Quadra and PowerBook models
(except PowerBook 100).  Release 3.1 cannot be used at Mac Plus, SE,
and Classic.  Release 3.1 works on PowerPC, please look at question
M05.
   
<h5>Release 4.0.2 or later: BETA for PowerMac</h5>

<ul>
<li>CPU: PowerPC 601 processor or later
<li>RAM: 40 Mb memory
<li>Disk: 60 Mb of free space on harddisk
<li>OS: System 7.x or later
<li>The MPW environment, version 3.4.1 or later
(please see question <A HREF="#M02">M02</A> for details), including
<ul>
<li>MPW Shell
<li>Interfaces&amp;Libraries
<li>PPCLink version 1.4 or later; or MWLinkPPC from Metrowerks, see <A HREF="#M02">M02</A>
<li>Rez
</ul>
These can be obtained from Apple from the 
Essentials-Tools-Objects (ETO) volume 20 or later.
<li>FPU to be able to use reals (please see question
<A HREF="#M04">M04</A> for more details).  However, a hardware FPU is build into most PowerPC Macintosh.
</ul>
      That is, Release 4.0.2 should work for alle PowerMac models.
      Please note that,  Release 4.0.2 or later does not work on motorola
macintoshes.


<H4><A NAME="M02">M02) What is MPW. Where do I get it?</A></H4>

MPW stands for "Macintosh Programmers Workshop", which is the official
programming environment for the Macintosh, developed by Apple, Inc.
The BETA compiler runs as an MPW tool, that is, it is a command, that
can be invoked from the MPW Shell (command interpreter).

<P>

You will need MPW 3.4 or later to use BETA.  In addition to the MPW
Shell, the compiler uses the MPW Link and Rez tools to build the
programs.

<P>

As of october 1997, Apple has decided to make MPW freely available for
downloading. You can download it from

<UL>
<LI><CODE><A HREF="ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/">
ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/</A></CODE>.
</UL>

The current versions of the packages needed are

<UL>
<LI><CODE><A HREF="ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/MPW-3.4.2.sit.hqx">MPW-3.4.2.sit.hqx</A></CODE>.
<LI><CODE><A HREF="ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/Interfaces_Libraries-3.0.1.sit.hqx">Interfaces_Libraries-3.0.1.sit.hqx</A></CODE>.
</UL>

<IMG SRC="../images/handright.gif" ALT="Notice!" width=24 height=13 align=left>Please notice, that new versions may have been available when you read
this.
<BR clear=all>

<P>

As an alternative to Apple's MPW, you can use the MPW supported by 
<A HREF="http://www.metrowerks.com">Metrowerks</A>
<A HREF="http://www.metrowerks.com/desktop/mac_os/">CodeWarrior</A>.

The <CODE>MWLinkPPC</CODE> linker included in this commercial package
is is up to 10 times faster than <CODE>PPCLink</CODE> from Apple.


<H4><A NAME="M03">M03) How do I download MPW from Apple?</A>
</H4>

To download MPW follow these steps:
<OL> 
<LI> Launch 'Fetch 3.0.1'
 
<LI> To make the connection, paste<BR>
       ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/MPW_etc./<BR>
    in the "New Connection" dialog.

<LI> In the menu, choose
          Customize
                Post Processing
 
    and disable the "Stuffit Archive"  post processing options, if  there
are any.
    This will allow you to only unpack the items that you need.
 
<LI> Select the "MPW-GM" directory in the file list and Choose
 
               Remote
                     Get Directories And Files...
 
    in the menu. This will download the entire MPW-GM directory to your
    disc.
<LI> Now you need to unpack the items that are needed. A sit archive are unpacked
    by dragging it to the "Stuffit Expander" application. You need to unpack the
    following items:
 <OL>
<LI> Interfaces and libraries
 
   Unpack:
      MPW-GM:Interfaces&Libraries:Interfaces:RIncludes.sit.hqx
      MPW-GM:Interfaces&Libraries:Libraries: SharedLibraries.sit.hqx
      MPW-GM:Interfaces&Libraries:Libraries: PPCLibraries.sit.hqx
 
<LI> The mpw shell application and workfiles
 
    Unpack MPW-GM:MPW:MPW_Shell.sit.hqx
 
    This will create a folder named "MPW_Shell.sit.hqx Folder". Move
    all the items in that folder one level up so they are placed directly
    in the "MPW-GM:MPW:"  folder.
 
<LI> The tools
 Command ('i' to return to index): 
    Unpack all files in the "MPW-GM:MPW:Tools: " folder.
 </OL>
<LI> Rename the MPW-GM to "Development" or some other name not
    containing a special character (or space). This is needed because
    there is an error in the Userstartup*beta script concerning spaces
    in the MPW pathname. You should also give your hard disc a name
    without special characters.
 
<LI> Set the preferred size of the MPW Shell in the Finder Info to 20 000 k
    or more.
 
<LI> Drag the UserstartUp*Beta file into the MPW Shell folder. Launch MPW Shell
    and point out the Beta folder in the dialog that will appear.
 
</OL>


<H4><A NAME="M04">M04) Do I need a floating point unit to use BETA?</A></H4>

Yes, to be able to run BETA programs, that use "reals", your machine
should have a built-in FPU, *or* you can install an FPU
simulator. Several free/shareware FPU simulators are available,
e.g. SoftwareFPU, which can be fetched from most macintosh archives,
or from the writer, John Neil, at 
<a href="http://www.jna.com/softmacos.html">http://www.jna.com/softmacos.html</a>.



<H4><A NAME="M05">M05) Does BETA work on PowerPC machines?</A></H4>

As of release 4.0.2, PowerPC based macintoshes are the only
macintoshes supported.

<p>

Release 3.1 of BETA can be run on PowerMac's using the MC680x0
simulator. 
That is, the applications will run with the usual slowdown for
simulated 
programs on PowerMac. 



<H4><A NAME="M06">M06) Does BETA work on Motorola machines?</A></H4>

Release 3.1 of the Mj&oslash;lner System is the last supporting
Motorola Macintoshes.

<p>

As of release 4.0.2, PowerMacintosh is the only Macintosh platform supported.



<H4><A NAME="M07">M07) Known bugs, limitations and inconveniences in release 4.0.2</A></H4>

The current release 4.0.2 is the first for power mac,
and is still considered an "alpha release".
There are a number of known bugs, limitations and inconveniences:

<ol>
<li>    Link time is very long for BETA programs.
        We have not been successful in getting appropriate 
        documentation from Apple to make optimal generation
        of the XCOFF files.
<li>    Freja is not yet available for PowerMac
<li>    Valhalla is not yet available for PowerMac
<li>    bobsit will not work, because the exbobs program 
        did not get ready for r4.0.2
<li>    Problems with Sif
<ul>
<li>      Closing a workspace may make the machine crash
</ul>
<li>    Persistence does not work 
<li>    Check for suspend involving callbacks is not done. 
        If you do a suspend in a callback situation the program 
        is likely to crash.
<li>    Integer division by zero will yield unpredictable results 
        (should be caught as an exception as on other platforms).
<li>    The pattern doGC in betaenv does not work on ppcmac. 
        This is used in implementation of 
<pre>
           sysutils/v1.5/scanobjects
</pre>
        used in the demo 
<pre>
           demo/sysutils/objinterface/scanobj 
</pre>
        which consequently does not work
<li>    The PutReal pattern in ~beta/basiclib/v1.5/numberio does not work.
        This is used in the demo programs in
<pre>
                ~beta/demo/basiclib/reals/
</pre>
        and
<pre>
                ~beta/demo/basiclib/random/tstgenchi.bet
</pre>
        which does not produce a correct output.
<li>    The touch and modtime.set operations on diskentry does not work
<li>    The iget operation on keyboard is not implemented.
        This is used in the demo programs in:
<pre>
                ~beta/demo/basiclib/iget/
</pre>
        which consequently does not work
<li>    Systemenv is not implemented
<li>    Process is not implemented
<li>    Bifrost is not implemented
<li>    Frigg is not available, due to some problems 
        (Will be fixed in the next release).
<li>    There is a number of problems with GuiEnv:
<ul>
<li>      There is no support for resources like icons, cursors etc.
<li>      There are some update problems.
<li>      The only way to make a window appear like a modal dialog is by
          further binding "menubarVisible" to exit false.
<li>      figureItems does not work yet.  
</ul>
<li>    The "Commando BETA" command in the Beta menu, does not work
<li>    the new timedate library does not work (linker error).
</ol>





<H4><A NAME="M08">M08) Known bugs, limitations and inconveniences in release 4.1</A></H4>


<H5><A NAME="M08.1">M08.1) Why do I get a linker warning about <CODE>errno</CODE>?</A></H5>

There is two macintosh libraries that contains <CODE>errno</CODE>:
<CODE>StdCLib</CODE> and <CODE>OTXTILib</CODE> - hence the
warning. <CODE>OTXTILib</CODE> only is used if you include the
<CODE>process</CODE> or <CODE>distribution</CODE> library.

This warning can safely be ignored.


<H5><A NAME="M08.2">M08.2) How do I open a PersistentStore in psbrowser on the macintosh?</A></H5>

You have to move the <CODE>psbrowser</CODE> application into the
directory that contains the <CODE>persistentstore</CODE> you want to
open before launching <CODE>psbrowser</CODE>. Now you can open the
<CODE>persistentstore</CODE> via the <CODE>open</CODE> command in the
<CODE>file</CODE> menu.

Be aware that the program that generated the
<CODE>persistentstore</CODE> must call
<CODE>persistentstore_fullnamepatch</CODE> included from

<pre>   ~beta/objectbrowser/v1.6/psbrowser/psfullnamepatch
</pre>

<H5><A NAME="M08.3">M08.3) Why does my <CODE>systemenv</CODE> program not work as expected in MPW?</A></H5>

If you link a <CODE>systemenv</CODE> program as a <CODE>MPW
tool</CODE>, the keyboard will block all systems when you call any of
the get operations: <CODE>getLine</CODE>, <CODE>getInt</CODE> etc.

The solution is to link your program as an application.

<H5><A NAME="M08.4">M08.4) OpenGL</A></H5>
OpenGL does not work on Apple.

<H4>
<A NAME="M09">M09) I cannot compile Beta programs with MPW that ships with CW Pro 2.</A>
</H4>
The problem is caused by a reorganization of the files in<P>
 
  Interfaces&Libraries:Interfaces:RIncludes:<BR>
 
A solution would be to replace the RIncludes folder with an older
version.<P>
 
If you have CW Pro 1, you can grab the Rincludes in the
'CodeWarrior MPW:Interface&Libraries:Interfaces:' folder
on that disc. Otherwise, a compatible version of Rincludes can be
downloaded from<P>
 
ftp://dev.apple.com/devworld/Tool_Chest/Core_Mac_OS_Tools/MPW_etc./MPW-GM/In
terfaces&Libraries/Interfaces/


<H3><A NAME="SectionVI">SECTION VI: BETA on Windows 95, 98, 2000 and Windows NT</A></H3>



<H4><A NAME="W01">W01) What are the system requirements to run BETA on
Windows 95, 98, 2000 and Windows NT?</A></H4>

<ul>
<li>CPU: Intel 386/486/Pentium<br>
<li>RAM: 16Mb (32 recommended)<br>
<li>Disk: 45 Mb of free space.<br>
<li>OS: Windows 95, 98, 2000 or Windows NT 3.5.1 or later.<br>
<li>Microsoft SDK or Gnu SDK (only assembler, linker, make
utilities and C libraries required).  Microsoft SDK recommended.
<li>opengl32.dll og glu32.dll is required to run openGL programs. [new feature in r4.2]
</ul>
For more information, see <A href="#W02">W02</a>.


<H4><A NAME="W02">W02) SDK Requirements for Windows 95, 98, 2000 or Windows NT</A></H4>

In order to use the Mj&oslash;lner System you need to have an
assembler, a linker, a make utility and C libraries from
Microsoft or Gnu.  The Microsoft utilities are recommended.
<P>

These utilities must satisfy the following:

<OL>
<LI>Microsoft

<DL>
<DT><EM>Assembler:</EM><DD>
       Starting from release r4.0.1, no assembler is needed any
       longer.
       <P>
       For older releases (e.g. r4.0) an assembler is needed. You
       can install one of the following
<UL>
       <LI>MASM386.EXE and EDITBIN.EXE from the Microsoft WIN32SDK.
       <LI>ML.EXE, which can be bought as a separate tool from
           Microsoft. ML.EXE is also part of Microsoft Development
           Network MSDN (level 2) and the Windows NT 3.5.1 DDK. 
</UL>
<DT><EM>Linker:</EM><DD>
<UL>
       <LI>LINK.EXE from e.g. Microsoft Visual C++.
</UL>
<DT><EM>Make:</EM><DD>
<UL>
       <LI>NMAKE.EXE from e.g. Microsoft Visual C++.
       <br>
       If you  do not plan to use the BETA MAKE facility, you can
       do with a dummy NMAKE program, that simply exits 0.
</UL>
<DT><EM>C libraries:</EM><DD>
<UL>
       <LI>from e.g. Microsoft Visual C++.
</UL>
</DL>

If you have installed Microsoft Visual C++ 2.0 or later for Windows 95, 98, 2000
or Windows NT, you do not need any more software to run the Mj&oslash;lner
System. If you do not have Visual C++, you will have to get a
linker and C libraries from Microsoft (<A
HREF="http://www.microsoft.com/">http://www.microsoft.com/</A>).

<LI>Gnu.
<DL>
<DT><EM>Assembler:</EM><DD>
 	No assembler is needed.

<DT><EM>Linker:</EM><DD>
	<EM>gcc</EM> and <EM>ld</EM>.

<DT><EM>Make:</EM><DD>
	The Gnu make utility.

<DT><EM>C libraries:</EM><DD>
	The C libraries that come with gcc for Win32.
</DL>
</OL>


You can purchase these utilities from Microsoft (<A
HREF="http://www.microsoft.com/">http://www.microsoft.com/</A>).
Please contact their national representatives for ordering
information.



<H4><A NAME="W03">W03) Why do I need a MAKE facility?</A></H4>

Question:<BR>
I do not have a MAKE facility on my Windows 95/98/2000/NT machine.
Why do I need that - I thought that the BETA compiler analyzed the
dependencies itself?
<P>

Answer:<BR>
The BETA compiler keeps track of dependencies between all involved
beta files. However, if you want to link in object files generated by
an external C compiler og assembler, you may add a MAKE property to
make the BETA compiler invoke the make-facility to keep the external
objectfiles up-to-date (see section 2.4 in "The Mj&oslash;lner System -
Using on Windows 95 / Windows NT [mia94-32]).
<P>

If you do <EM>not</EM> use the MAKE property in your programs, in principle
you do not need a make facility.
But since a few of the standard libraries included in the Mj&oslash;lner
System contains such MAKE properties, you will need a
make-facility anyway. However, since all external object files in the
standard libraries are up-to-date when distributed by Mj&oslash;lner
Informatics, you can do with a dummy make-utility.
<P>

For instance you may create a C file like this:

<PRE>
   main()
   {
     exit(0);
   }
</PRE>

compile it with your C compiler, and install it in your path
with the name NMAKE.EXE (if
you use the Microsoft SDK).



<H4><A NAME="W06">W06) Known bugs, limitations and inconveniences in release 4.0.2</A></H4>
 
<ol>
<li>Most parts of systemenv are still not implemented.
  Most of the demos in demo\basiclib\systemenv fails.
  Specificly using the operation "keyboard.get" will block.
 
<li>Process and socket communication is currently NOT supported. It may
  work, but known errors exist in these modules. These modules have
  been scheduled for re-structuring. It is possible, though not
  likely, that the interface specification changes.
 
<li>Binary/ASCII files has a work-around (kluge) to compensate for a
  bug(?) in Windows NT/95/98/2000. If a text file with UNIX style EOL characters
  (\n) is opened as a text file the offset (ftell) of the first
  character in the file is the negative of the number of '\n's found
  in the first 512 bytes. The kluge is that if a file is opened as a
  text file and a '\n' (UNIX EOL) is found before '\r\n' (Windows NT
  EOL) it will be opened as a binary file.
 
<li>File time stamps have proven difficulties in BETA on Windows NT. We
  (at GMT+1) experience the problem that files are reported to have a
  timestamp one hour less than the real time stamp of the file. This
  also means that when touching a file entry the file will be touched
  with a wrong time stamp (in our case one hour later than the real
  time).

<li>Freja is not available for nti

<li>Valhalla is not available for nti
<li>The new timedate library does not work (linker error).
</ol>



<H4><A NAME="W07">W07) Known bugs, limitations and inconveniences in release 4.1</A></H4>
 
<ol>
<li>Some parts of systemenv are still not implemented.
  Some of the demos in demo\basiclib\systemenv fails.
  Specificly using the operation "keyboard.get" will block the
  entire process, not only the component issuing the call.
 
<li>Binary/ASCII files has a work-around (kluge) to compensate for a
  bug(?) in Windows NT/95/98/2000. If a text file with UNIX style EOL characters
  (\n) is opened as a text file the offset (ftell) of the first
  character in the file is the negative of the number of '\n's found
  in the first 512 bytes. The kluge is that if a file is opened as a
  text file and a '\n' (UNIX EOL) is found before '\r\n' (Windows NT
  EOL) it will be opened as a binary file.
 
<li>File time stamps have proven difficulties in BETA on Windows NT. We
  (at GMT+1) experience the problem that files are reported to have a
  timestamp one hour less than the real time stamp of the file. This
  also means that when touching a file entry the file will be touched
  with a wrong time stamp (in our case one hour later than the real
  time).

<li>Freja is not available for nti

<li>BETACC.EXE misplaced on CD:<P>
	The program BETACC.EXE is misplaced on the CD distribution of release 4.1<Br>
	BETACC.EXE is used by the compiler when compilation of c-files is required, eg. 
	when beta-programs use the BUILD directive/external pattern. <Br>
	
	On the CD BETACC.EXE
	is placed in BETALIB but should be moved to BETALIB\bin. eg. 
	<pre> move c:\BETA\BETACC.EXE c:\BETA\BIN\BETACC.EXE</pre>
	
</ol>


<H3><A NAME="SectionVII">SECTION VII: BETA on HPUX</A></H3>



<H4><A NAME="HP01">HP01) What are the system requirements to run BETA on
HPUX workstations?</a></h4>

<h5>HP9000/700:</h5>
<ul>
<li>RAM: 16 MB, 32Mb recommended.
<li>Disk: 150 MB disk space<br>
          The installation is approx. 100 MB + documentation approx. 13 MB.
<li>OS: HP-UX 9
<li>X window system (Rel. 11.3 or newer)
<li>Motif 1.2 or later (not required for textual BETA programs)
<li>OpenGL libraries is required to run openGL programs. (GL.so GLU.so GLw.a) [new feature in r4.2]
</ul>


<H4><A name="HP02">HP02) Why do some callbacks cause &quot;<TT>Illegal Instruction</TT>&quot; on <TT>hpux9pa</TT> (using v5.0 of the compiler)?</A></h4>

If the following program is compiled and run on an hpux9pa (HP series
700 HPPA, HP-UX 9.x) using the BETA compiler version v5.0), it
displays a window with the text "Timer" in it, prints a random number
of 7'digits on the screen, and then dies with "Illegal Instruction":

<pre>
   ORIGIN '~beta/Xt/v1.8/awenv';
   --- program: descriptor ---
   AwEnv
   (# l: @Command
        (# init:: (# do 'Timer'-&gt;label #)#);
      t: @Timer
        (# timeOut:: (# do 10-&gt;start; '7'-&gt;Put; #) #);
   do l.init;
      10-&gt;t.start;
   #)
</pre>

The reason for this, is that in v2.6 of the hpux9pa runtime system for
BETA there is an error, which occurs if a callback is called very soon
after it is installed. In this case it is called ~10 ms after being
installed, and almost no other code has been executed in this period
of time. In this situation an HPPA cache should have been flushed to
ensure the correct behaviour, but there was an error in the runtime
system delivered with release 3.0 of the Mj&oslash;lner System. The
solution is to acquire a patched runtime system from Mj&oslash;lner
Informatics.






<H3><A NAME="SectionVIII">SECTION VIII: BETA on Linux</A></H3>


<H4><A NAME="Lx01">Lx01) What are the system requirements to run BETA on
Linux machines?</a></h4>

<ul>
<li>Linux (release 2.0 or later)<br>
<li>CPU: Intel 386/486/Pentium<br>
<li>RAM: 8Mb (16 to 32 recommended)<br>
<li>X11 Release 5 or later<br>
<li>OSF/Motif 1.2 or later (not required just to run compiler)<br>
<li>Programs needed: (g)as, ld, make.<br>
<li>OpenGL libraries is required to run openGL programs. (GL.so GLU.so GLw.a) [new feature in r4.2]
</ul>

In lack of Motif libraries, you can use the Lesstif Motif clone. 
These libraries works acceptable, but they are not 100% stabil. 
See <A HREF="../xwindows/LessTifFaq/index.html">BETA-LESSTIF-FAQ</A>


<H4><A NAME="Lx02">Lx02) How to make the BETA compiler version 5.0/5.1 work with
Linux ELF libraries</a> [corrected in r4.0]</h4>

If you are using a Linux version with support for the ELF libraries,
the Mj&oslash;lner System (release 3.1) cannot be used
immediately.  You will have to introduce the following patch:

<OL>
<LI>Make sure that <CODE>/usr/lib/crt0.o</CODE> can be found.
     E.g. do this:
    
<PRE>
   pushd /usr/lib; ln -s /usr/i486-linuxaout/lib/crt0.o; popd
</PRE>

<LI>Make sure the linker is called with "<CODE>-m i386linux</CODE>",
either by adding 

<PRE>
   LINKOPT linux '-m i386linux';
</PRE>

in the top of <CODE>basiclib/v1.4/private/betaenv_unixbody.bet</CODE>,
or (preferable) by adding this in your <CODE>.bashrc</CODE> (or the
corresponding stuff in your <CODE>.tcshrc</CODE>): 

<PRE>
   export BETALINKOPTIONS='-dc -dp -X -m i386linux';
</PRE>

The BETALINKOPTIONS environment variable sets *all* options to the
linker, that is why you have to set the other stuff in the variable
too.
</OL>

Disclaimer: This has not been tried with the Motif libraries, but it
ought to work.
<P>

Thanks to Erik Ernst &lt;<CODE><a
href="mailto:eernst@daimi.au.dk">eernst@daimi.au.dk</a></CODE>&gt; and
Stephen J Bevan &lt;<CODE><a
href="mailto:bevan@cs.man.ac.uk">bevan@cs.man.ac.uk</a></CODE>&gt; for
their investigations on this subject.



<H4><A NAME="Lx03">Lx03) Why does GuiEnv demos segmentation fail?</A> [error in r4.0 &amp; r4.0.1]</H4>

With some Linux distributions, the demos in
<CODE>$BETALIB/guienv/v1.4/demos</CODE> (aka
<CODE>BETALIB/demo/guienv</CODE>) all fail with a segmentation fault
upon startup, whereas, e.g. the MotifEnv demos all work correct.
<P>

The reason for this seems to be a buggy <CODE>gcc</CODE> used for
producing some of the files in the BETA releases r4.0 and r4.0.1. This
was done at the time that the Linux community was switching towards
ELF binaries, and possibly this is the reason, that <CODE>gcc</CODE>
produced wrong files.  The problem has not been observed for release
4.0.2.

<P>
A workaround is to do the following (as the owner of <CODE>BETALIB)</CODE>:
<PRE>
        cd $BETALIB/guienv/v1.4/private/X11
        chmod -R u+w .
        rm linux/guienv_unix.o
        rm linux/Canvas.o
        rm linux/Button.o
        rm linux/IconButton.o
        rm linux/ToggleButton.o
        beta guienv_unixbody
        chmod -R a-w .
</PRE>



<H4><LI><A NAME="Lx04">Lx04) Using the Mj&oslash;lner System with RedHat 5 and other glibc 2 based Linux-systems.</A></H4>

This is intended for people using the Mj&oslash;lner System, release 4.1, with RedHat 5
and other glibc 2 based systems.


<H5>What are the symptoms of the problem:</H5>

<ol>
<li>The linking phase of the compiler fails.
<li>The tools (Sif, Frigg, ..) will not start: they core-dump immediately.
</ol>


<H5>To correct the problems, do the following four steps:</H5>

<ol>
<li>Set the enviroment variable <code>libXm_PATH</code>:

<code>libXm_PATH</code> should refer to the directories where the
<code>libXm</code> libraries are loacated. If you use the
<em>lesstif</em> package included on the Mj&oslash;lner System r4.1
CD-ROM then it should be: 

<pre>
        &lt;INSTALL_PATH_FOR_LESSTIF&gt;/lib
</pre>

e.g. <code>/usr/local/lesstif/lib</code>. If you use a <em>motif</em> or
another <em>lesstif</em> installation then point it to where the
<code>libXm</code> libraries are installed.


<li>Create two empty object files <code>crtbegin.o</code> and
<code>crtend.o</code> and place them inside <code>/usr/lib/</code>.

You can do it in the following way:
<pre>	echo "manmathan1 () {}\n" > crtbegin.c
	echo "manmathan2 () {}\n" > crtend.c
	gcc -c crtbegin.c crtend.c
	mv crtbegin.o crtend.o /usr/lib/
</pre>

<li>Set the enviroment variable <code>BETALINKOPTIONS</code> to:<P>

<pre>   -L/usr/X11/lib -L$libXm_PATH -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -dc -dp -Bstatic -X</pre>

From bash:

<pre>    export BETALINKOPTIONS="-L/usr/X11/lib -L$libXm_PATH -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -dc -dp -Bstatic -X"</pre>

    From tcsh:

<pre>    setenv BETALINKOPTIONS="-L/usr/X11/lib -L$libXm_PATH -m elf_i386 -dynamic-linker /lib/ld-linux.so.2 -dc -dp -Bstatic -X"</pre>


<li>Edit the two environment configuration scripts located in the
<code>~beta/configuration</code> folder by commenting out the
<code>LD_LIBRARY_PATH</code> settings by typing a <code>#</code>-sign
in front: <br>

      in <code>env.sh</code>, line 171<br>
      in <code>env.csh</code>, line 190<br>
</ol>
Please email any problems to: <a href="mailto:support@mjolner.dk">support@mjolner.dk</a>



<H3><A NAME="SectionIX">SECTION IX: BETA on Silicon Graphics</A></H3>


<H4><A NAME="SG01">SG01) What are the system requirements to run BETA on
Silicon Graphics workstations?</a></h4>

<ul>
<li>RAM: 16 MB, 32Mb recommended.
<li>Disk: 150 MB disk space<br>
          The installation is approx. 100 MB + documentation approx. 13 MB.
<li>OS: IRIX 5.3 or 6.2 (32 bit)
<li>X window system (Rel. 11.3 or newer)
<li>Motif 1.2 or later (not required for textual BETA programs)
<li>OpenGL libraries is required to run openGL programs. (GL.so GLU.so GLw.a) [new feature in r4.2]
</ul>

If you run IRIX 5.3, you must have installed patch 410 from SGI in
order to fix the linker to generate pure ELF binaries.  If you have
not applied this patch, the linker will fail like this:
<pre>
        Unknown flag: -woff
</pre>



<H4><A NAME="SG02">SG02) Gnu C Compiler <code>gcc</code> not supported</a></h4>

You cannot link applications, that specify external OBJFILEs compiled
with <code>gcc</code>. You must use <code>cc</code> for external
object files.  If you get an error like:<pre>
        ld: FATAL 2: Internal: at ../commonlib/ld3264/relocate.c \
        merge_ext returns nil during relocation
</pre>

this may be caused by an attempt to link a <code>gcc</code>-produced
file into your application.

<P>

If you use make files invoked via the <code>MAKE</code> property in a
BETA fragment, you should use <code>$(CC)</code> instead of a
hardcoded C compiler name. The BETA compiler sets <code>CC</code> to a
proper default value on alle UNIX platforms.

<P>
If you do not know which external object file caused the error to
happen, you may find out like this:

<OL>
<LI>Compile the program with <CODE>beta -p</CODE>. This will preserve
the <EM>job-file</EM>, containing the link-directive(s) for the
program.
<LI>Open the preserved jobfile in a text-editor.
The job-file is located in the <CODE>sgi</CODE>
subdirectory, and has the same name as the application, but with
<CODE>..job</CODE> appended.
<LI>Add <CODE>-v</CODE> as argument to the <EM>last</EM> invocation
of
<CODE>/bin/ld</CODE> in the job file.
<LI>Save and execute the job-file.
</OL>

When the job-file starts to link the final application, it will now
print out the name of each file in the last link-directive as they are
processed. This includes all external object files (specified by
<CODE>OBJFILE</CODE> in the BETA code), and you should thus be able to
see what file causes the linker to fail: It is likely to be the last
one printed out before the linker crashes.


<H4><A NAME="SG03">SG03) Remember to set <code>LD_LIBRARY_PATH</code></a></h4>

After linking shared objects, the <code>LD_LIBRARY_PATH</code> should
be set so that it includes the directory, where the shared object
files reside. The compiler will tell which directory this is.  If you
get an error like:<pre>
        793:./foo: rld: Fatal Error: cannot map soname 'foo1..gso' \
        using any of the filenames /usr/lib/foo1..gso:/lib/foo1..gso:\
        /lib/cmplrs/cc/foo1..gso:/usr/lib/cmplrs/cc/foo1..gso: \
        -- either the file does not exist or the file is not mappable \
        (with reason indicated in previous msg)
</pre>
when running you application (here <code>foo</code>), this may be
caused by <code>LD_LIBRARY_PATH</code> not being set correctly.


<H4><A NAME="SG04">SG04) Using BETA on IRIX 6 machines</A></H4>
 
On the newest Silicon Graphics OS, IRIX 6, three binary
object file formats are supported by the OS - old 32 bit format, new
32 bit format and new 64 bit format. The BETA compiler in release 4.1,
however, only supports the old 32 bit format - the format also used
for IRIX 5.
<P>
There are 3 implications of this:
<OL>
 
<LI>Link directive:<BR> 
The compiler automatically fixes the link directive on IRIX 6 machines
 
<LI>Using BUILD:<BR>
If you are using BUILD properties, and may thus need to invoke the
C compiler, please note that you have to specify the CC environment
variable before compiling your BETA program:
<PRE>
  setenv CC 'cc -32'
</PRE>
If you are compiling with <CODE>beta -d ...</CODE>, you may also set
<CODE>CC</CODE> like this:
<PRE>
  setenv CC 'cc -O2 -32'
</PRE>
In a future version of the compiler, this will be done automatically.
 
<LI><CODE>LD_LIBRARY_PATH</CODE> specification:<BR>
If your program is linked using shared object files (the compiler
will tell you so), as always, you should set
<CODE>LD_LIBRARY_PATH</CODE> to point to the directory, where the
shared object files are places (usually directory <CODE>sgi</CODE>).
Since the compiler uses old 32 bit object files, it is enough to set
<CODE>LD_LIBRARY_PATH</CODE>. That is, do not set any of the new
<CODE>LD_LIBRARYN32_PATH</CODE> or <CODE>LD_LIBRARY64_PATH</CODE>
variables.
If you need to set any of these, then all 3 variables should be set,
and the <CODE>sgi</CODE> directory should be included in all three.
</OL>



<H4><A NAME="SG05">SG05) Limitations, bugs and inconveniences</a></h4>


<H5><A NAME="SG05.1">SG05.1) Limitations </a></h5>

The following limitations are currently specific to the SGI
implementation:

<ol>
<li>  Lazy Fetch in persistence is not implemented. (everything is fetzhed.)
      This means that the following demos does not work as intended:<pre>
         demo/persistentstore/largeRead
         demo/persistentstore/crossloc
</pre>

<li>  Check for suspend involving callbacks is not done.
      If you do a <code>suspend</code> in a callback situation the program is 
      likely to crash.

<li>  Integer division by zero will yield unpredictable results 
      (should be caught as an exception as on other platforms). [corrected in r4.1]
	
<li>  The compiler may sometimes crash during code generation.
      Normally you can just restart the compilation in this case. [corrected in r4.1]

<li>  There is sometimes a problem with real expressions involving
      external calls. This is e.g. the case in the demo<pre>
         demo/r4.0/tutorial/SquareRoot
</pre>
      which currently does not work on sgi. [corrected in r4.1]

<li>  The following runtime errors may not always result in correct 
      dumps:<pre>
         Repetition subrange out of range
         Text parameter to C routine too big (max. 1000 bytes)
</pre>

<li>  Do not specify an output file in the sgi-directory to the 
      compiler. I.e. do not do this:<pre>
          beta -o sgi/foo foo.bet
</pre>
      Instead you should do this:<pre>
          beta -o foo foo.bet
          mv foo sgi/
</pre>
      The first method may fail when linking shared.
      The problem is, that the shared object files are renamed
      to the file <code>sgi</code> in the sgi directory, and thus the program
      will fail to execute. [corrected in r4.1]

</ol>

<H5><A NAME="SG05.2">SG05.2) <CODE>doGC</CODE>and <CODE>scanobj</CODE>does not work</a></h5>

The pattern <CODE>doGC</CODE> in <CODE>betaenv</CODE> does <EM>not</EM> work
on SGI. This is used in implementation of 

<PRE>
	sysutils/v1.6/scanobjects
</PRE>

used in the demo 

<PRE>
	demo/sysutils/objinterface/scanobj
</PRE>

which consequently does not work.

<H5><A NAME="SG05.3">SG05.3) About <CODE>ld: WARNING 56: Invalid warning number (133)</CODE></a></h5>

When the beta compiler is used on IRIX 5.3 it may give the warning

<CODE>ld: WARNING 56: Invalid warning number (133)</CODE>

at link time. This warning is caused by the compiler trying to
turn of an IRIX 6.2 warning (number 133), which does not exist
on IRIX 5.3. The warning can be safely ignored.

<H5><A NAME="SG05.4">SG05.4) About <CODE>ld: WARNING 85: definition of vendorShellWidgetClass...</CODE></a></h5>

When compiling <CODE>awenv</CODE> programs on SGI, the linker will
give the following warnings:

<PRE>
ld: WARNING 85: definition of vendorShellWidgetClass in /usr/lib/libXaw.so
preempts that definition in /usr/lib/libXt.so.
ld: WARNING 85: definition of vendorShellClassRec in /usr/lib/libXaw.so
preempts that definition in /usr/lib/libXt.so.
</PRE>

These warnings are caused by (intentional) overriding of
the X Toolkit <CODE>VendorShell</CODE> in the SGI athena libraries.
The warnings can be safely ignored.





<H4><A NAME="SG06">SG06) Disclaimer (Slow startup of tools)</a></h4>

Startup time for SGItools(compiler, frigg, sif, psbrowser, ...) are quite
significant.  This is due to the dynamic linker, and may be fixed in a future
version.



<H3><A NAME="SectionX">SECTION X: BETA on Sun workstations</A></H3>


<H4><A NAME="Sun01">Sun01) What are the system requirements to run BETA on
Sun workstations?</A></h4>

<ul>
<li>RAM: 16 MB, 32Mb recommended.
<li>Disk: 150 MB disk space<br>
          The installation is approx. 100 MB + documentation approx. 13 MB.

<li>Sun SPARC/Solaris:
<ul>
<li>OS: Solaris 2.x
</ul>
<li>X window system (Rel. 11.3 or newer)
<li>Motif 1.2 or later (not required for textual BETA programs)
<li>OpenGL libraries is required to run openGL programs. (GL.so GLU.so GLw.a) [new feature in r4.2]
</ul>

<H4><A NAME="Sun02">Sun02) Running BETA on Solaris v2.6 and later</A></h4> 
Release 4.1 needs a patch to run on Solaris 2.6.  
<A HREF="ftp://ftp.mjolner.dk/BETA/r4.1/patches/sun-solaris-v2.6.tar.Z">
Download</A> it here, and install it on top of the basic release.

<HR>
<ADDRESS>
J&oslash;rgen Lindskov Knudsen /
Aarhus University /
<TT><a href="mailto:jlk@daimi.au.dk">jlk@daimi.au.dk</a></TT>
</ADDRESS>

</BODY>
</HTML>
