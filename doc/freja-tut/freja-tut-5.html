<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>




<TITLE> Editing</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING5></A>


<P><A HREF=freja-tut-6.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=freja-tut-4.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="../mjolner-tut/index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=../mjolner-tut/inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> CASE Tool</P>


<A NAME=HEADING5-0></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227625"><A NAME=MARKER-2-10></A><A NAME=MARKER-9-11></A>Editing</A></H1>
<A NAME=HEADING5-1></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227626"><A NAME=MARKER-2-13></A><A NAME=MARKER-9-14></A>Creating a New Diagram</A></H1>
<P> To create a new diagram use the command <A NAME=MARKER-2-16></A>New BETA program or N<A NAME=MARKER-2-17></A>ew BETA library in the File Menu. Below the command New BETA program has been used:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The title of the diagram corresponds to the name and the category (program) of the new BETA fragment:</P>
<PRE CLASS=beta>
ORIGIN '~beta/basiclib/betaenv'
-- program: DescriptorForm --
(# do #)
</PRE>
<A NAME=HEADING5-10></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227627"><A NAME=MARKER-9-18></A>Creating a New Class<A NAME=MARKER-2-20></A></A></H1>
<P> When an attribute or a title of a diagram is selected it is possible to create a new class using the Class command in the <EM>New...</EM> menu. Doing this you get a dialog where the name of the new class can be typed in.</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The BETA code corresponding to new class looks like this:</P>
<PRE CLASS=beta>
Person:(# #)
</PRE>
<A NAME=HEADING5-17></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227628"><A NAME=MARKER-9-21></A>Adding Attributes and Operations</A></H1>
<P> To add an attribute to a class, simply select the class and use the <EM>Static Reference Attribute</EM> or the <EM>Dynamic Reference Attribute</EM> command in the <EM>New...</EM> menu. As above a dialog is presented and you can now type in the name of the new attribute.</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> In case a static reference attribute is created the corresponding BETA code looks like this:</P>
<PRE CLASS=beta>
Person(# FirstName:@&lt;&lt;ObjectSpecification&gt;&gt; #)
</PRE>
<P> And in case of a dynamic reference attribute like this:</P>
<PRE CLASS=beta>
Person(# FirstName:^&lt;&lt;AttributeDenotation&gt;&gt; #)
</PRE>
<P> Notice the &lt;&lt;ObjectSpecification&gt;&gt; and &lt;&lt;AttributeDenotation&gt;&gt; parts of the above code. These are placeholders or nonterminals. In the above two cases they ensure that, though the type of the attribute has not yet been specified, the code is still syntactically correct. Placeholders like the ones above can either be filled in using subeditors or Sif (see later).</P>
<P> In the same manner as with attributes a new operation can be added to a class using the <EM>Operation / Local Class</EM> command in the <EM>New...</EM> menu.</P>
<A NAME=HEADING5-31></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227629"><A NAME=MARKER-9-23></A>Specifying <A NAME=MARKER-2-25></A>Specialization<A NAME=MARKER-9-26></A></A></H1>
<P> In the following situation two class declarations of the reservation program have been detailed. To specify that FlightReservation is a subclass of Reservation the <EM>Specialization</EM> command of the <EM>Relations </EM>menu is used. As the status message of the menubar states in the example below it is now possible to drag a specilization connector from the subclass to the superclass. </P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The result will look like this:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The code correspondingly changes from:</P>
<PRE CLASS=beta>
Reservation: (# ... #);
FlightReservation: (# ... #);
</PRE>
<P> to:</P>
<PRE CLASS=beta>
Reservation: (# ... #);
FlightReservation: Reservation(# ... #);
</PRE>
<A NAME=HEADING5-48></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227631"><A NAME=MARKER-9-28></A>Specifying Aggregation<A NAME=MARKER-2-30></A></A></H1>
<P> Below three class declarations of the reservation program have been detailed.</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> We wish to specifify a by-reference aggregation between FlightReservation and Flight. To do this select <EM>Aggregation</EM> in the <EM>Relations</EM> menu. This brings up the following dialog:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The aggregation dialog makes it possible to:</P>
<P> give the aggregation a name,</P>
<P> specifify the multiplicities of the whole and the part,</P>
<P> specify the implementation of a one-to-many<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-1">[1]</A></EM> aggregation; that is to specify if a repetition or one of  the basic container classes should be used in the resulting code,</P>
<P> specify if the aggregation is to be implemented by-reference or by-value,</P>
<P> give a textual description of the aggregation.</P>
<P> In this example we only specify the name of the aggregation (defaults are such that we get a one-to-one by-reference aggregation).</P>
<P> After choosing <EM>Ok</EM> in the dialog drag a connector from the class designating the whole (FlightReservation) to the class designating the part (Flight).</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The BETA code correspondingly changes from:</P>
<PRE CLASS=beta>
Flight: (# ... #);
FlightReservation: Reservation(# getFlightNo: ... #)
</PRE>
<P> to:</P>
<PRE CLASS=beta>
Flight: (# ... #);
FlightReservation: Reservation(# getFlightNo: ...; theFlight:^Flight #)
</PRE>
<P> As can be seen the name of the aggregation is reused in the code and the fact that we created a by-reference aggregation is reflected by the dynamic reference implementation of the new declaration (had we instead chosen by-value a static reference would have been declared).</P>
<A NAME=HEADING5-76></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227632"><A NAME=MARKER-9-31></A>Specifying Association<A NAME=MARKER-2-33></A></A></H1>
<P> Below two class declarations of the reservation program have been detailed.</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> We wish to specify a one-to-many association between Company and Person. To do this select <EM>Association</EM> in the <EM>Relations</EM> menu. This brings up the following dialog:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The Association dialog makes it possible to:</P>
<P> give the association a name,</P>
<P> specify role names for both sides of the association,</P>
<P> specify multiplicities for both sides of the association,</P>
<P> specify the implemention of a one-to-many or many-to-many association; that is to specify if a repetion or one of the basic container classes should be used in the resulting association code,</P>
<P> specify if the association should be embeded or not; that is to specify if the generated code is to result in a separate association class or if it is to be embedded in the source and destination classes (see below),</P>
<P> give a textual description of the association.</P>
<P> In this example we specify the name of the association, WorksFor, the name of the source role, employee, the name of the destination role, employer, and the multiplicities. Specifying that the multiplicity of the employee end of the association is more than one (in this case '*') automatically sets the implementation to the default, List. </P>
<P> After choosing <EM>Ok</EM> in the dialog drag a connector from the class designating the source (Person) to the class designating the destination (Company).</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The resulting code looks like this:</P>
<PRE CLASS=beta>
Person: (# ...; employer:^WorksFor #);
Company: (# employee:^WorksFor #);
WorksFor: OneToManyAssociation
  (# oneType:: Company; manyElmType:: Person #)
</PRE>
<P> Where the things added to code are the employer and employee declarations and the WorksFor class.</P>
<P> Had the embed option been chosen the code would have looked like this:</P>
<PRE CLASS=beta>
Person: (# ...; employer:@AssociationOne(# element:: Company #) #);
Company: (# employee:@AssociationMany(# element:: Person #) #)
</PRE>
<P> Notice that in this case no separate association class is generated.</P>
<A NAME=HEADING5-108></A>
<H1> <A NAME="LINK-freja-tut-_Toc380227633"><A NAME=MARKER-9-34></A>Completing the Code in <A NAME=MARKER-2-36></A>Sif<A NAME=MARKER-9-37></A></A></H1>
<P> Consider the following design diagram which could be considered as complete at the design level:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> To fill out the code details, Sif, the textual representation editor must be activated, if not already visible (use <EM>Show Sif</EM> in the <EM>File</EM> menu to make Sif visible):</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> The textual representation of the design is, however, not complete. It still contains unexpanded placeholders. For example the type of the FirstName attribute of the Person class needs to be specified. To do this simply select the placeholder &lt;&lt;ObjectSpecification&gt;&gt; and start typing the name of the type, e.g. Text. Finish this textediting by choosing Parse Text form Sif&otilde;s Edit menu (or rather use the keyboard shortcut ctrl-t). In this manner all the placeholders can be filled in:</P>
<P> &lt;&lt;fig&gt;&gt;</P>
<P> </P>
<P> In this case all placeholders disappear, but this is not always the case. Optional placeholders may exist in the program. For example the getFlightNo operation of the FlightReservation class may look like this:</P>
<PRE CLASS=beta>
getFlightNo:
  (# &lt;&lt;AttributeDeclOpt&gt;&gt;
     &lt;&lt;EnterPartOpt&gt;&gt;
     do theFlight.no-&gt;putint
     &lt;&lt;ExitPartOpt&gt;&gt;
   #)
</PRE>
<P> To get rid of these optionals select the part of the code containing them and choose <EM>Remove Optionals</EM> from Sif&otilde;s or from Freja&otilde;s <EM>Edit</EM> menu. In the above example the effect will be:</P>
<PRE CLASS=beta>
getFlightNo:
  (#
     do theFlight.no-&gt;putint
   #)
</PRE>
<P> After filling out more code in Sif, e.g.  the action sequences of the objects, the compiler is activated in the <EM>Tools </EM>menu of Sif (or alternatively, if one only whiches to check the program for semantic errors, the checker can be activated using the <A NAME=MARKER-2-39></A><EM>Check</EM> entry of Freja's <EM>Edit </EM>menu).</P>
<P> If the compiler reports a semantic error, the corresponding node is also selected in Freja.</P>
<P> When the program is semantically correct and it can be executed and tested. In this phase Freja will typically not be activated. When the program has been tested and considered fulfilling the requirements, the design diagrams may have become obsolete, and need to be updated, i.e. reverse engineering is necessary. This is done by activating Freja on the BETA program. </P>






<HR>

<A NAME=FOOTNOTE-1>[1] </A>
 An aggregation is said to be one-to-many if the multiplicity of the part is one and the multiplicity of the whole is more than one.






<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="40%" align="left">
<ADDRESS>CASE Tool - Tutorial</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=freja-tut-6.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=freja-tut-4.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="../mjolner-tut/index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=../mjolner-tut/inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
