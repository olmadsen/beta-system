<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>Fields Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">
</HEAD>
<BODY>
<P></P>
<A HREF="figureitems.html"><IMG ALIGN=BOTTOM SRC="../../images/next.gif" ALT=Next BORDER=0></A>
<A HREF="controls.html"><IMG ALIGN=BOTTOM SRC="../../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html"><IMG ALIGN=BOTTOM SRC="../../images/content.gif" ALT=Content BORDER=0></A>
<A HREF="inx.html"><IMG ALIGN=BOTTOM SRC="../../images/index.gif" ALT=Index BORDER=0></A>
<P></P>
<P>Interface Description</P>
<HR>
<!---------------------------------------------------------->

<H1>Fields Interface</H1>
<PRE CLASS=interface>
ORIGIN 'guienv';
LIB_DEF 'guienvfields' '../lib';
INCLUDE 'controls';
INCLUDE 'styledtext';
BODY 'private/fieldsbody';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1991-96
 *       All rights reserved.
 *)
-- windowLib: attributes --
<B>movie</B><A name="movie.1(494)"></A>: (# #) (* ONLY defined to make this fragment compilable *);
<B>movieField</B><A name="movieField.1(495)"></A>: windowItem
  (# &lt;&lt;SLOT movieFieldLib: attributes&gt;&gt;;
     <B>contents</B><A name="movieField.1:contents.2(496)"></A><A name="contents.2(496)"></A>:
       (* the movie shown in THIS(movieField) *)
       (# theMovie: ^movie
       enter (# enter theMovie[] do ... #)
       exit (# do ... exit theMovie[] #)
       #);
     <B>scaleToFit</B><A name="movieField.1:scaleToFit.2(497)"></A><A name="scaleToFit.2(497)"></A>:
       (* if true, contents will be scaled to fit in
        * THIS(movieField).  Otherwise, it will be clipped.
        *)
       (# value: @boolean;
       enter (# enter value do ... #)
       exit (# do ... exit value #)
       #);
     <B>open</B><A name="movieField.1:open.2(498)"></A><A name="open.2(498)"></A>::&lt; (# create::&lt; (# do ... #);
       do ... 
       #);
     <B>close</B><A name="movieField.1:close.2(499)"></A><A name="close.2(499)"></A>::&lt;
       (# 
       do ...;
       #);
     <B>private</B><A name="movieField.1:private.2(500)"></A><A name="private.2(500)"></A>: @...;
  #) (* movieField *);
<B>textField</B><A name="textField.1(501)"></A>: windowItem
  (* this is a simple field that is used to edit styled text.  There
   * is no scroll functionality, use the textEditor pattern, if
   * scrolling is required. The normal editing commands cut, copy,
   * paste, clear are supported. THIS(textField) has to be the
   * window's target, when editing is performed. this can be obtained
   * by calling THIS(textField)[] -&gt; target... this is automatically
   * done when the user clicks in a textField that isn't the target
   * already
   *)
  (# &lt;&lt;SLOT textFieldLib: attributes&gt;&gt;;
     <B>eventhandler</B><A name="textField.1:eventhandler.2(502)"></A><A name="eventhandler.2(502)"></A>::&lt;
       (# <B>textChanged</B><A name="textField.1:eventhandler.2:textChanged.3(503)"></A><A name="textChanged.3(503)"></A>: event
            (* this event is called whenever the text in
             * THIS(textField) is changed
             *)
            (# do INNER #);
          <B>onTextChanged</B><A name="textField.1:eventhandler.2:onTextChanged.3(504)"></A><A name="onTextChanged.3(504)"></A>:&lt; textChanged;
          <B>beforeChange</B><A name="textField.1:eventhandler.2:beforeChange.3(505)"></A><A name="beforeChange.3(505)"></A>: event
            (* This is called before any change is performed in
             * THIS(textField) If allow is set to false, then change
             * is not performed.  Position indicates where in the
             * textfield, the text is inserted or deleted. Length
             * indicates how many characters is inserted or
             * deleted. If length is negative, then the characters are
             * deleted - otherwise they are inserted.
             *)
            (# position,length: @integer;
               allow: @boolean;
               theText:
                 (* The text beeing inserted when lenght &gt; 0 *)
                 (# value: ^text;
                 ...
                 exit value[]
                 #);
            enter (position,length)
            do true -&gt; allow;
               INNER;
            exit allow
            #);
          <B>onBeforeChange</B><A name="textField.1:eventhandler.2:onBeforeChange.3(506)"></A><A name="onBeforeChange.3(506)"></A>:&lt; beforeChange;
          <B>onFrameChanged</B><A name="textField.1:eventhandler.2:onFrameChanged.3(507)"></A><A name="onFrameChanged.3(507)"></A>::&lt;(# do ... #);
          <B>onKeyDown</B><A name="textField.1:eventhandler.2:onKeyDown.3(508)"></A><A name="onKeyDown.3(508)"></A>::&lt;(# do ... #);
          <B>onMouseDown</B><A name="textField.1:eventhandler.2:onMouseDown.3(509)"></A><A name="onMouseDown.3(509)"></A>::&lt;(# do ... #);
          <B>onMouseUp</B><A name="textField.1:eventhandler.2:onMouseUp.3(510)"></A><A name="onMouseUp.3(510)"></A>::&lt;(# do ... #);
          <B>onRefresh</B><A name="textField.1:eventhandler.2:onRefresh.3(511)"></A><A name="onRefresh.3(511)"></A>::&lt;(# do ... #);
          <B>onEnableTarget</B><A name="textField.1:eventhandler.2:onEnableTarget.3(512)"></A><A name="onEnableTarget.3(512)"></A>::&lt;(# do ... #);
          <B>onDisableTarget</B><A name="textField.1:eventhandler.2:onDisableTarget.3(513)"></A><A name="onDisableTarget.3(513)"></A>::&lt;(# do ... #);
       #);
     <B>paste</B><A name="textField.1:paste.2(514)"></A><A name="paste.2(514)"></A>:
       (* this method pastes text from the clipboard into
        * THIS(textField) at the current insertion point or replaces
        * the current selection.  The text is styled according to the
        * style information found in the scrap; if there is none, it
        * is given the same style as the first character of the
        * replaced selection (or that of the preceding character if
        * the selection is an insertion point)
        *)
       (# do ... #);
     <B>copy</B><A name="textField.1:copy.2(515)"></A><A name="copy.2(515)"></A>:
       (* the current selection is copied into the clipboard with the
        * associated style information. If the current selection is an
        * insertion point the clipboard is emptied
        *)
       (# do ... #);
     <B>cut</B><A name="textField.1:cut.2(516)"></A><A name="cut.2(516)"></A>:
       (* the current selection is first copied into the clipBoard
        * and then deleted
        *)
       (# do ... #);
     <B>clear</B><A name="textField.1:clear.2(517)"></A><A name="clear.2(517)"></A>:
       (* the current selection is deleted, and the clipboard is not
        * affected.  Calling delete is the same as pressing backspace
        *)
       (# do ... #);
     <B>contents</B><A name="textField.1:contents.2(518)"></A><A name="contents.2(518)"></A>: 
       (* the text in THIS(textField) *)
       (# theText: ^styledText;
       enter (# enter theText[]  do ... #)
       exit (# do ... exit theText[] #) 
       #);
     <B>getChar</B><A name="textField.1:getChar.2(519)"></A><A name="getChar.2(519)"></A>: 
       (* returns the character at position (pos) in THIS(textField).
        * The return character (ASCII.cr) and other control characters
        * count
        *)
       (# pos: @integer;
          ch: @char;
       enter pos
       do ...
       exit ch
       #);
     <B>length</B><A name="textField.1:length.2(520)"></A><A name="length.2(520)"></A>: integerValue
       (* returns the number of characters in THIS(textField) *)
       (# do ... #);
     <B>all</B><A name="textField.1:all.2(521)"></A><A name="all.2(521)"></A>: 
       (* if you want to scan all the text in THIS(textField), use:
        * all -&gt; scanText(#...#)
        *)
       (# exit (0,length) #);
     <B>scanText</B><A name="textField.1:scanText.2(522)"></A><A name="scanText.2(522)"></A>: 
       (* INNER is called for every character from position start to
        * end in THIS(textField). The variable ch is the current
        * character
        *)
       (# start,end: @integer;
          ch: @char;
       enter (start,end)
       do ...
       #);
     <B>posToPt</B><A name="textField.1:posToPt.2(523)"></A><A name="posToPt.2(523)"></A>:
       (* Calculates the coordinates of the character number `pos' in
        * the textField.
        *)
       (# pos: @integer;
          pt: @point;
       enter pos
       do ...;
       exit pt
       #);
     <B>ptToPos</B><A name="textField.1:ptToPos.2(524)"></A><A name="ptToPos.2(524)"></A>:
       (* Calculates the character that are located at the specified
        * coordinates in the textField.
        *)
       (# pos: @integer;
          pt: @point;
       enter pt
       do ...;
       exit pos
       #);
     <B>selection</B><A name="textField.1:selection.2(525)"></A><A name="selection.2(525)"></A>: @
       (* selection is the current range of characters in this
        * (textField) that is selected. Start is the position in the
        * text of the first character of the selection and end is the
        * position of the last.  If the selection is an insertion
        * point, "start" and "end" will be the position of the
        * character just after the carret
        *)
       (# <B>start</B><A name="textField.1:selection.2:start.3(526)"></A><A name="start.3(526)"></A>: integerValue
            (# do ... #);
          <B>end</B><A name="textField.1:selection.2:end.3(527)"></A><A name="end.3(527)"></A>: integerValue
            (# do ... #);
          <B>contents</B><A name="textField.1:selection.2:contents.3(528)"></A><A name="contents.3(528)"></A>: 
            (* returns the text selected in THIS(textField) *)
            (# theText: ^text;
            do ...
            exit theText[]
            #);
          <B>scrollIntoView</B><A name="textField.1:selection.2:scrollIntoView.3(529)"></A><A name="scrollIntoView.3(529)"></A>:
            (* scrollIntoView makes sure the Selection is visible,
             * scrolling the textField, if necesary
             *)
            ...;
          <B>set</B><A name="textField.1:selection.2:set.3(530)"></A><A name="set.3(530)"></A>: 
            (* this makes [theStart,theEnd] the new selection *)
            (# theStart,theEnd: @integer;
            enter (theStart,theEnd)
            do ...
            #);
          <B>get</B><A name="textField.1:selection.2:get.3(531)"></A><A name="get.3(531)"></A>: (# exit (start,end) #);
       enter set
       exit get
       #) (* selection *);
     <B>defaultStyle</B><A name="textField.1:defaultStyle.2(532)"></A><A name="defaultStyle.2(532)"></A>:
       (* The default style is the style that is used when the
        * textfield has been completely empty and new text is entered.
        *)
       (# style: ^textStyle;
       enter (# enter style[] do ... #)
       exit (# do ... exit style[] #)
       #);
     <B>isOneStyle</B><A name="textField.1:isOneStyle.2(533)"></A><A name="isOneStyle.2(533)"></A>: 
       (* this function returns a textStyle if the range of
        * characters [start,end] has the same style - in which case
        * "theStyle" will be set to that textStyle - Otherwise
        * theStyle will be NONE
        *)
       (# start,end: @integer;
          theStyle: ^textStyle;
       enter (start,end)
       do ...
       exit theStyle[]
       #);
     <B>setOneSize</B><A name="textField.1:setOneSize.2(534)"></A><A name="setOneSize.2(534)"></A>: 
       (* this makes the range of characters [start,end] have the
        * same size specified by "theSize"
        *)
       (# start,end: @integer;
          theSize: @integer;
       enter (start,end,theSize)
       do ...
       #);
     <B>setOneFont</B><A name="textField.1:setOneFont.2(535)"></A><A name="setOneFont.2(535)"></A>: 
       (* this makes the range of characters [start,end] have the
        * same font specified by "theFont"
        *)
       (# start,end: @integer;
          theFont: ^text;
       enter (start,end,theFont[])
       do ...
       #);
     <B>setOneFace</B><A name="textField.1:setOneFace.2(536)"></A><A name="setOneFace.2(536)"></A>: 
       (* this makes the range of characters [start,end] have the
        * same face (textFaces.italic, textFaces.bold etc.) specified
        * by "theFace". If doToggle is true and the face specified
        * exists across the entire selected range, that face is
        * removed (turned off).  Otherwise, all of the selected text
        * is set to include that face
        *)
       (# start,end: @integer;
          doToggle: @boolean;
          theFace: @integer;
       enter (start,end,theFace,doToggle)
       do ...
       #);
     <B>setOneStyle</B><A name="textField.1:setOneStyle.2(537)"></A><A name="setOneStyle.2(537)"></A>: 
       (* this makes the range of characters [start,end] have the
        * same continous style specified by "theStyle"
        *)
       (# start,end: @integer;
          theStyle: ^textStyle;
       enter (start,end,theStyle[])
       do ...
       #);
     <B>scanTextWithStyle</B><A name="textField.1:scanTextWithStyle.2(538)"></A><A name="scanTextWithStyle.2(538)"></A>: 
       (* this is a control pattern that calls an INNER for all
        * characters in THIS(textField) with the style "theStyle".
        * The variable "ch" is the current character
        *)
       (# theStyle: ^textStyle;
          ch: @char;
       enter theStyle[]
       do ...
       #);
     <B>margin</B><A name="textField.1:margin.2(539)"></A><A name="margin.2(539)"></A>: 
       (* use this pattern to set or retrieve the left- and top
        * margin of the text in THIS(textField).  The left margin is
        * the distance from the left bound of THIS(textField) to the
        * text in THIS(textField).  The top margin is the distance
        * from the upper bound of THIS(textField) to the text in
        * THIS(textField)
        *)
       (# leftMargin,topMargin: @integer;
       enter (# enter (leftMargin,topMargin) do ... #)
       exit (# do ... exit (leftMargin,topMargin) #)
       #);
     <B>insert</B><A name="textField.1:insert.2(540)"></A><A name="insert.2(540)"></A>: 
       (* insert takes the specified text and inserts it just before
        * the selection range in THIS(textField). Insert doesn't
        * affect either the current selection range or the clipboard
        *)
       (# theText: ^text;
       enter theText[]
       do ...
       #);
     <B>delete</B><A name="textField.1:delete.2(541)"></A><A name="delete.2(541)"></A>: 
       (* deletes the characters in the current selection range *)
       (# do ... #);
     
     <B>open</B><A name="textField.1:open.2(542)"></A><A name="open.2(542)"></A>::&lt; (# create::&lt; (# do ... #);
       do ... 
       #);
     <B>close</B><A name="textField.1:close.2(543)"></A><A name="close.2(543)"></A>::&lt; (# do ... #);
     <B>private</B><A name="textField.1:private.2(544)"></A><A name="private.2(544)"></A>: @...;
  #) (* textField *);
<B>abstractScroller</B><A name="abstractScroller.1(545)"></A>: canvas
  (* this is an abstract superpattern for objects with two
   * scrollbars.  The abstractScroller consist of a canvas containing
   * the virtual definition of contents that models the object that is
   * scrolled and the two scrollbars.  It also defines the virtual
   * procedure patterns scroll and adjustscrolling
   *)
  (# &lt;&lt;SLOT abstractScrollerLib: attributes&gt;&gt;;
     <B>contentsType</B><A name="abstractScroller.1:contentsType.2(546)"></A><A name="contentsType.2(546)"></A>:&lt; (* this describes the object that is scrolled *)
       windowItem;
     <B>contents</B><A name="abstractScroller.1:contents.2(547)"></A><A name="contents.2(547)"></A>: @contentsType;
     <B>scroll</B><A name="abstractScroller.1:scroll.2(548)"></A><A name="scroll.2(548)"></A>:&lt;
       (* this is a superpattern for scrolling functionality of
        * THIS(abstractScroller).  The contents are scrolled "dh"
        * pixels to the right and "dv" pixels down
        *)
       (# dh,dv: @integer       
       enter (dh,dv) 
       do ...;
       #);
     <B>open</B><A name="abstractScroller.1:open.2(549)"></A><A name="open.2(549)"></A>::&lt; (# create::&lt; (# do ... #);
       do ... 
       #);
     <B>close</B><A name="abstractScroller.1:close.2(550)"></A><A name="close.2(550)"></A>::&lt; (# do ... #);
     <B>private</B><A name="abstractScroller.1:private.2(551)"></A><A name="private.2(551)"></A>: @...;
  #) (* abstractScroller *);
<B>textEditor</B><A name="textEditor.1(552)"></A>: abstractScroller
  (* this models a texteditor, that is a textfield with two
   * scrollbars
   *)
  (# &lt;&lt;SLOT textEditorLib: attributes&gt;&gt;;
     <B>contentsType</B><A name="textEditor.1:contentsType.2(553)"></A><A name="contentsType.2(553)"></A>::&lt; 
       textField;
     <B>scroll</B><A name="textEditor.1:scroll.2(554)"></A><A name="scroll.2(554)"></A>::&lt;(# do ... #);
     <B>open</B><A name="textEditor.1:open.2(555)"></A><A name="open.2(555)"></A>::&lt; (# create::&lt; (# do ... #);
       do ... 
       #);
     <B>close</B><A name="textEditor.1:close.2(556)"></A><A name="close.2(556)"></A>::&lt;(# do ... #);
     <B>private</B><A name="textEditor.1:private.2(557)"></A><A name="private.2(557)"></A>: @...;
  #) (* textEditor *);
<B>scroller</B><A name="scroller.1(558)"></A>: abstractScroller
  (* this is a general scroller, which can scroll an entire canvas *)
  (# &lt;&lt;SLOT scrollerLib: attributes&gt;&gt;;
     <B>contentsType</B><A name="scroller.1:contentsType.2(559)"></A><A name="contentsType.2(559)"></A>::&lt; 
       canvas;
     <B>scroll</B><A name="scroller.1:scroll.2(560)"></A><A name="scroll.2(560)"></A>::&lt; (# do ... #);
     <B>open</B><A name="scroller.1:open.2(561)"></A><A name="open.2(561)"></A>::&lt; (# create::&lt; (# do ... #);
       do ... 
       #);
     <B>close</B><A name="scroller.1:close.2(562)"></A><A name="close.2(562)"></A>::&lt;(# do ...; #);
     <B>eventhandler</B><A name="scroller.1:eventhandler.2(563)"></A><A name="eventhandler.2(563)"></A>::&lt;
       (# <B>onFrameChanged</B><A name="scroller.1:eventhandler.2:onFrameChanged.3(564)"></A><A name="onFrameChanged.3(564)"></A>::&lt;
            (# 
            do ...;
            #);
       #);
     <B>private</B><A name="scroller.1:private.2(565)"></A><A name="private.2(565)"></A>: @...;
  #)
</PRE>
<!---------------------------------------------------------->
<HR>
<P></P>
<TABLE border=0 width=100%>
<TR><TD><ADDRESS>Interface Description</ADDRESS></TD>
<SCRIPT LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT>
</TABLE>
<P></P>
<A HREF="figureitems.html"><IMG ALIGN=BOTTOM SRC="../../images/next.gif" ALT=Next BORDER=0></A>
<A HREF="controls.html"><IMG ALIGN=BOTTOM SRC="../../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html"><IMG ALIGN=BOTTOM SRC="../../images/content.gif" ALT=Content BORDER=0></A>
<A HREF="inx.html"><IMG ALIGN=BOTTOM SRC="../../images/index.gif" ALT=Index BORDER=0></A>
</BODY>
</HTML>
