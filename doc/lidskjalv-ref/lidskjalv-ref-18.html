<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> Chapter 4:   The fields Library</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING18></A>


<P><A HREF=lidskjalv-ref-21.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=lidskjalv-ref-15.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>



<A NAME=HEADING18-0></A>
<H1> Chapter 4:   The fields Library</H1>

<P> The fields library contains five advanced subpatterns of windowItem.  These patterns are used for displaying movies and editable text fields (with and without scrolling facilities), and for scrolling a group of windowItems using scrollbars.</P>
<P> <center><IMG ALIGN=TOP SRC=images/fieldshierarchy.gif></center></P>

<P> TextField is an alternative to the editText control with extended facilities for cut/copy/paste, selection handling, etc.  TextField contains many attributes supporting many different text editing functions: changing text style, deleting and inserting text, etc.  Furthermore, textField has an additional event onTextChanged which will be invoked each time the text contents have been changed.</P>
<P> A readonly textField  can be implemented simply by further binding the onBeforeChange virtual and here specify false-&gt;allow.</P>
<P> TextField takes care of most interaction with the user and many applications using textField need not do anything else but extract the text contents of the textField instance at the appropriate time.</P>

<P> AbstractScroller is a subpattern of canvas and implements a scrolling facility for any windowItem type (specified through the contentsType virtual attribute).  An abstractScroller contains two scrollbars (one vertical and one horizontal), and the windowItem will scroll according to the manipulations of these scrollbars.</P>

<P> TextEditor is a subpattern of abstractScroller (with contentsType further bound to textField) and is an alternative to textField, offering additional scrolling facilities.  TextEditor is a full-fledged text editor with full editing and scrolling.  No additional attributes are defined.</P>
<P> TextEditor takes care of most interaction with the user and many applications using textEditor need not do anything else but extract the text contents of the textEditor instance at the appropriate time.</P>

<P> Scroller is another subpattern of abstractScroller (with contentsType further bound to canvas) that can scroll all windowItems attached to the canvas. </P>

<P> MovieField is intended for displaying video (not implemented yet).</P>


<A NAME=HEADING19-0></A>
<H1> Using the fields Library</H1>
<P> Remember that in order to utilize this extension to Lidskjalv, the fragment fields must be included as follows:</P>
<P> </P>
<PRE CLASS=beta>
ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/fields'
--- program: descriptor ---
guienv(# te: @textEditor;
         ...
      do ...
         ... -&gt; te..contents.selection;
         ...
      #)
</PRE>


<A NAME=HEADING20-0></A>
<H1> Examples of Use of the fields Fragment</H1>
<P> This demo program illustrates the facilities for constructing standard text editors.</P>
<P> </P>

<H4 class=betacaption>texteditor.bet</H4>
<PRE class=beta>
ORIGIN '~beta/guienv/fields';
INCLUDE '~beta/guienv/stddialogs';
INCLUDE '~beta/basiclib/file';
(* This demo shows how to build a simple texteditor. *)
--- program: descriptor ---
guienv
(# theWindow: @window
     (# menubarType::
          (# fileMenu: @menu
               (# textFile: @file;
                  openItem: @menuItem
                    (# eventHandler::
                         (# onSelect::
                              (# theText: @StyledText; path: ^text;
                              do theWindow[] -&gt; fileSelectionDialog -&gt; path[];
                                 (if path[]&lt;&gt;NONE then
                                     path[] -&gt; textFile.name;
                                     textFile.openRead;
                                     textFile.scan
                                     (# while:: (# do true-&gt;value #);
                                     do ch -&gt; theText.put
                                     #);
                                     theText[]
                                       -&gt;theTextEditor.contents.contents;
                                     textFile.close
                                 if)
                         #)#);
                       open:: (# do 'Open' -&gt; name #)
                    #);
                  saveItem: @menuItem
                    (# eventHandler::
                         (# onSelect::
                              (# theText: @Text; tempName: ^text;
                              do textFile.name -&gt; tempName[];
                                 (if tempName.length&gt;0 then
                                     textFile.openWrite;
                                     theTextEditor.contents.contents
                                       -&gt;textFile.puttext;
                                     textFile.close
                                 if)
                         #)#);
                       open:: 
                         (# do 'Save' -&gt; name #)
                    #);
                  quitItem: @menuItem
                    (# eventHandler:: 
                         (# onSelect:: (# do terminate #) #);
                       open:: 
                         (# do 'Quit' -&gt; name #)
                    #);
                  open::
                    (#
                    do 'File' -&gt; name;
                       openItem.open; openItem[] -&gt; append;
                       saveItem.open; saveItem[] -&gt; append;
                       quitItem.open; quitItem[] -&gt; append
               #)#);
             open:: 
               (# do fileMenu.open; fileMenu[] -&gt; append #)
          #); (* menubarType *)
        eventhandler::
          (# onAboutToClose:: (# do terminate #) #);
        thetextEditor: @textEditor
          (# open:: 
               (# 
               do 'TextEditor' -&gt; title;
                  theWindow.size -&gt; size;
                  true -&gt; bindBottom -&gt; bindRight
               #)
          #);
        open::
          (#
          do 'thetextEditor' -&gt; title;
             (400,400) -&gt; size;
             thetextEditor.open
          #)
     #)
do theWindow.open
#)
</PRE>


<BLOCKQUOTE>
<IMG ALIGN=TOP SRC=images/texteditor.gif></BLOCKQUOTE>








<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Lidskjalv - Reference Manual</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=lidskjalv-ref-21.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=lidskjalv-ref-15.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html#_toc><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
