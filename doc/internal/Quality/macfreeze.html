<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<HEAD>
<TITLE>Mac frysning</TITLE>

</HEAD>

<BODY>
<H1>Mac frysning</H1>

<H2><A NAME="macfreeze">Frysning af release: Macintosh</A></H2>

Frysning af et release til macintosh (her eksemplificeret af r4.0.2).

<OL>
<LI><A HREF="#checkout">Udcheckning og konfigurering af alle libraries.</A></LI>
<LI><A HREF="#compile">overs&aelig;ttelse af alle libraries/tools</A></LI>
<LI><A HREF="betatest.html">aftestning af Mjølner systemet</A></LI>
<LI><A HREF="#cleanup">oprydning</A></LI>
<LI><A HREF="#pack_freeze">pakning og frysning af system</A></LI>
</OL>
<HR>

<OL>
<LI><A NAME="checkout"><STRONG>Udcheckning og konfigurering af alle libraries/tools.</STRONG></A><BR>
Se <A HREF="mbsboot.html">mbsboot.html</A>
</LI>
<P>

<LI><A NAME="compile"><STRONG>Overs&aelig;ttelse af alle libraries/tools</STRONG></A><BR>
Afpr&oslash;v f&oslash;rst med 

<PRE>
mbs_cvscheckupdate
</PRE>

om alle libraries/tools er i "sync" med UNIX.
<P>
Inden overs&aelig;ttelse b&oslash;r man kalde scriptet 
<CODE>mbs_checkbet</CODE>, som checker, at der ikke ligger <CODE>.ast(L)</CODE>
filer i relaset, uden at have tilh&oslash;rende source fil.
<P>
Dern&aelig;st overs&aelig;tter man alle relevante libraries med

<PRE>
:scripts:mbs_compile
</PRE>

der er et <EM>MPW</EM> script, der overs&aelig;tter alle libraries.
Bem&aelig;rk, at det tilsvarende <EM>perl</EM> scripts i 
<CODE>:bin:admin:mbs_compile</CODE> <EM>ikke</EM> kan bruges, da
perl ikke kan finde ud af at starte MPW tool'et <CODE>beta</CODE>.

<P>
Efter overs&aelig;ttelse b&oslash;r man kalde scriptet 
<CODE>mbs_checkdb</CODE>, som checker, at alle <CODE>.bet</CODE>
filer i releaset, som har en <CODE>.o</CODE> fil, ogs&aring; har en
<CODE>.db</CODE> fil.

<P>
Dern&aelig;st overs&aelig;tter man alle tools. Dette skal pt
g&oslash;res manuelt, da <CODE>:bin:admin:mbs_compiletools</CODE>
<EM>ikke</EM> kan bruges, og der ikke er lavet et tilsvarende MPW
script.
</LI>
<P>

<LI><STRONG>Aftestning af Mjølner systemet</STRONG><BR>
Se <A HREF="betatest.html">betatest.html</A>
</LI>
<P>

<LI><A NAME="cleanup"><STRONG>Oprydning</STRONG></A><BR>

<OL>
<LI>Fjern alle automatisk genererede filer fra hele <CODE>{betalib}</CODE>
<PRE>
mbs_clean
</PRE>
<LI>I <CODE>{betalib}demo</CODE> fjernes desuden bin&aelig;re og objektfiler
<LI>Check for eventuel anden garbage rundt omkring
</OL>
</LI>
<P>

<LI><A NAME="pack_freeze"><STRONG>Pakning og frysning af system.</STRONG></A><BR>
Frysning af et release p&aring; macintosh foreg&aring;r ikke som p&aring; PC og UNIX ved
manipulationer af udviklingsdirectoriet, men ved at tage en kopi af de relevante 
filer i et andet directory, og (optionally) at l&aring;se filerne i dette
kopi-directory.
<P>
Der er f&oslash;lgende trin i pakningen:
<P>

<OL>
<LI>Generer MPW pakkescripts p&aring; unix:
<PRE>
cd $BETALIB/export/dotar
ppcmac.dotar   (eller ppcmac.dotar -pe)
</PRE>
hvor <CODE>$BETALIB</CODE> svarer til den <CODE>{betalib}</CODE> p&aring;
mac'en, som man skal have pakket.
<P>
Dette genererer en r&aelig;kke filer med extension <CODE>.pack</CODE> i
<CODE>$BETALIB/export/tarfiles/ppcmac</CODE> (eller
<CODE>$BETALIB/export/tarfiles/ppcmac.pe</CODE>). Overf&oslash;r disse filer til
macintosh, f.eks. vha <CODE>Fetch</CODE> fra mac'en.
<P>
I <CODE>ppcmac.dotar</CODE> scriptet kan man s&aelig;tte variablen
<CODE>BETALOCK</CODE> til <CODE>yes</CODE> eller <CODE>no</CODE>, alt efter
om filerne i det pakkede directory skal l&aring;ses eller ej.
<P>

<LI>Udf&oslash;r pakkescripts p&aring; macintosh:<P>
Man skal have <CODE>{betalib}</CODE> sat til at pege p&aring; udviklingsdirectoriet
(det, som man vil pakke), og udf&oslash;rer s&aring;:
<PRE>
mac.pack &lt;destination directory&gt;
</PRE>
Dette vil skabe <CODE>&lt;destination dirctory</CODE> med alle de relevante
filer i.
<P>

<LI>Komprimer <CODE>&lt;destination directory&gt;</CODE><BR>
Dette foreg&aring;r pt vha <CODE>Compact Pro</CODE> p&aring; mac'en, men det skal
unders&oslash;ges, hvor meget arbejde det vil v&aelig;re, at benytte Apple's
officielle Installer til dette. I f&oslash;lge Michale Lassen handler det om, at
komprimere directoriet vha et specielt MPW tools, og derp&aring; lave en resource
fil, der beskriver indholdet (og da det kun er een folder - Beta4.0.2 - skulle det
v&aelig;re overkommeligt.

</OL>

</LI>
<P>

</OL>

</BODY>
</HTML>
