<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="content-type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="../../style/miadoc.css" type="text/css">
<TITLE>SSH setup</TITLE>
</HEAD>

<BODY>
<H1>Hvordan man bruger SSH til CVS</H1>

<H2>Generelle tips</H2>

Se <a href="../sysadm/ssh.html">ssh.html</a> for den generelle
opsætning af ssh.  I det dokument omtales en ssh server og en
ssh klient.  I denne sammenhæng er serveren den maskine med CVS
repository (dvs. for BETA projektet alex.cs.au.dk), og klienten
er den du udvikler på.

<p>
Det kan ikke betale sig at læse dette dokument før du i det mindste
har fået ssh sat op så langt at du kan skrive
<pre>ssh the.name.of.my.server.dk -l username hostname</pre>
og få det fjerne hostname tilbage.  Hvis du bruger putty
er kommandoen selvfølgelig
<pre>plink the.name.of.my.server.dk -l username hostname</pre>

<p>
Hvis du vil kunne lave cvs operationer
(commit, update, etc.) uden at skrive password, så skal du også
kunne lave 'hostname' kommandoen ovenfor uden password.

<p>
Denne her guide er beregnet til dem der vil bruge ssh og cvs sammen
til at få adgang til BETA's CVS repository på Daimi fra en maskine
på Mjølner.  Dvs. du sidder på Mjølner (klient-siden) og vil logge
ind på Daimi (server-siden).   Hvis din situation er anderledes skal
du nok ændre detaljer her og der.

<p>
Der er en alternativ metode der går ud på at bruge pserver metoden.
Der har været åbnet et hul i Daimi's firewall fra Mjølner til pserver porten
på ariel (alex?) til formålet, men i skrivende stund ser den ud til at være
lukket igen (2002-03-25).  Som alternativ kan man bruge ssh til at tunnele
pserver port nummeret.

<p>
Den alternative tunnel metode er ikke beskrevet her, men er beskrevet i
mails til mia-beta fra MG og i man siden til ssh samt Cederquist
håndbogen til cvs (/usr/doc/cvs-*/cvs.ps på en Linux maskine).
<p>
Held og lykke.

<h2>Software Forudsætninger</h2>

(Til Windows:) WinCvs:
<a href="http://www.mjolner.com/software/Pc/Misc/WinCvs/WinCvs136.zip">
http://www.mjolner.com/software/Pc/Misc/WinCvs/WinCvs136.zip
</a>.
Husk at tilføje <CODE>ssh.exe</CODE> i din PATH efter installation.

<p>Desuden selvfølgelig <a href="../sysadm/ssh.html">ssh eller putty</a>

<h2>Environment variables</h2>
Environment variable 'CVS_RSH' sættes til 'ssh' eller 'plink'
<pre>setenv CVS_RSH ssh</pre>
    i .cshrc eller
<pre>CVS_RSH=ssh
export CVS_RSH</pre>
    i .profile for sh brugere.
<p>
    Hvis du har et cron job der bruger cvs skal det nok sættes i scriptet
    eller direkte i din cron fil.  Se 'man 5 cron' eller 'man -s 5 cron'
<p>Windows NT 4 brugere sætter environment variabler i
   Toolbox-&gt;System-&gt;Environment.  Andre versioner sætter det andre
   steder.  Ændringer virker først når man genstarter sin kommandoprompt
   (eller når man genstarter Windows på nogle versioner).  Man kan se de
   aktuelle environment variabler ved at skrive 'set' (Windows) eller
   'printenv' (Unix).

<p><b>Hvis du får fejlen "Connection refused" så er det nok fordi
du enten ikke bruger den rigtige version af cvs (check med cvs -v)
eller du ikke har sat CVS_RSH variablen</b>

<h2>CVS root</h2>

Din CVS root skal være noget i stil med
ariel.cs.au.dk:/users/beta/.CVSHOME eller
ditnavn@ariel.cs.au.dk:/users/beta/.CVSHOME

<p>(Der har været tradition for at bruge
beta@ariel.cs.au.dk:/users/beta/.CVSHOME men det anbefales ikke
længere.)

<p>
Du skal bruge ditnavn@-syntaksen hvis dit login navn på klienten er
anderledes end på serveren.  Det kan f.eks. være på en enkeltbruger
maskine eller hvis du logger ind som Administrator på din PC.

<p>Der er 3 forskellige måder at angive CVS root i CVS.

<ul>
<li>I CVS/Root filen i et spor der allerede er chekket ud.  Færdige beta-spor indeholder allerede CVS/Root filer, og de kan rettes til med mbs_setcvsroot.
<li>Med environment-variablen CVSROOT.  Bruges kun hvis andre metoder fejler, f.eks. ved etableringen af et nyt CVS spor med checkout.
<li>Med -d optionen til cvs (bemærk at den skal komme før en eventuel kommando, f.eks. "cvs -d theroot update" og ikke "cvs update -d theroot")

</ul>

</BODY>
</HTML>
