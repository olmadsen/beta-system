<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<HEAD>
<TITLE>Software pakning af Mjølner systemer</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">
</HEAD>

<BODY>
<H1>Software pakning af Mjølner systemer</H1>

<H2>Indhold</H2>

<UL>
<LI><A HREF="#unixpack">Pakning af systemer/delpakker til UNIX</A></LI>
<UL>
<LI><A HREF="#linuxreal">Pakning af fuldt system til <CODE>linux</CODE></A></LI>
<LI><A HREF="#linuxpe">Pakning af Personal Edition til <CODE>linux</CODE></A></LI>
<LI><A HREF="#makeallreal">Pakning af fuldt system til <CODE>alle</CODE> UNIX arkitekturer</A></LI>
<LI><A HREF="#makeallsif">Pakning af Sif til <CODE>alle</CODE> UNIX arkitekturer</A></LI>
</UL>
<LI><A HREF="#macpack">Pakning af systemer/delpakker til Power Macintosh</A></LI>
<LI><A HREF="#pcpack">Pakning af systemer/delpakker til PC</A></LI>
<LI><A HREF="#files">Specifikation af hvad der skal pakkes (*.files)</A></LI>
</UL>


<H2><A NAME="unixpack">Pakning af systemer/delpakker til UNIX</A></H2>

Dette er en kort beskrivelse af hvorledes man pakker (del-)systemer
p&aring; UNIX. Da <CODE>~beta</CODE> fysisk ligger på <CODE>ariel</CODE>
bør pakningen foregå derfra, uanset hvilken platform, der pakkes til.
<P>
Pakning foreg&aring;r ved at udføre de følgende kommandoer 
fra <CODE>$BETALIB</CODE>/export/dotar. 

<H3><A name="linuxreal">Pakning af fuldt system til <CODE>linux</CODE></A></H3>
<PRE>
	linux.dotar
</PRE>
Resultatet er en række tar-filer i <CODE>$BETALIB/export/tar/linux</CODE>.<BR>
Analogt for <CODE>sun4s</CODE>, <CODE>sgi</CODE>, <CODE>hpux9pa</CODE>, ...

<H3><A name="linuxpe">Pakning af Personal Edition til <CODE>linux</CODE></A></H3>
<PRE>
	linux.dotar -pe
</PRE>
Resultatet er en række tar-filer i <CODE>$BETALIB/export/tar/linux.pe</CODE>.<BR>
Analogt for <CODE>sun4s</CODE>, <CODE>sgi</CODE>, <CODE>hpux9pa</CODE>, ...

<H3><A name="makeallreal">Pakning af fuldt system til <CODE>alle</CODE> UNIX arkitekturer</A></H3>
<PRE>
	MakeAllReal
</PRE>

<H3><A name="makeallsif">Pakning af Sif til <CODE>alle</CODE> UNIX arkitekturer</A></H3>
<PRE>
	MakeAllSif
</PRE>
Analogt for andre delpakker. Hvis der ikke eksisterer et script til pakning af
den delpakke, der ønskes, så kan den nemt laves ud fra skabelonen i <CODE>MakeAllSif</CODE>.

<H2><A NAME="macpack">Pakning af systemer/delpakker til Power Macintosh</A></H2>

Se <A HREF="macfreeze.html#pack_freeze">Frysning af release: Macintosh - Pakning og frysning af system</A>.

<H2><A NAME="pcpack">Pakning af systemer/delpakker til PC</A></H2>

Der er generelt to muligheder her:
<OL>
<LI><A HREF="zippack.html">Pakning vha ZIP, ARJ</A>
<LI><A HREF="autoshield.html">Automatisk pakning vha InstallSHIELD</A>
</OL>

Den første mulighed benyttes typisk til pakning af delsystemer til udlevering til
f.eks. daimi kurser, medens den anden mulighed bruges til generering af fuld
pakke med installer program.
<P>
Se generelt <A HREF="pcfreeze.html#pack">PC frysning - pakning af system</A>
for bemærkninger til PC pakning.

<H2><A NAME="files">Specifikation af hvad der skal pakkes (*.files)</A></H2>

The file lists used for specifying what files to pack for the
different components of the system, are placed in the directory
<CODE>$BETALIB/export/files</CODE>.
<P>
When specifying a filelist script, the script should have this overall look:

<PRE>
. $BETALIB/export/misc/echonl.sh

echo +foo >/dev/tty

echonl "\
file1FromFoo \
file2FromFoo \
... \
fileNFromFoo \
"
</PRE>

where <CODE>file1FromFoo</CODE> etc. are the files you want packed for
the "foo" package (paths relative to BETALIB).<BR>
<EM>Remember</EM> the space before '\'.
<P>
In the file-specifications you can use the following variables:
<P>
<TABLE border>
<TR><TD>AST</TD>         <TD>is either "ast" or "astL"</TD>
<TR><TD>TARGET</TD>      <TD>is the name of the platform in lower case (e.g. "sun4s")</TD>
<TR><TD>CODEDIR</TD>     <TD>is the name of directory in which code is placed.
		             same as TARGET except on windows, where it is <CODE>nti/%SDK%</CODE></TD>
<TR><TD>OBJ</TD>         <TD>is a pattern maching the extention of object files 
                             (e.g. "obj" for windows/mac and "*o" for UNIX)</TD>
<TR><TD>MACHINETYPE</TD> <TD>is the name of the platform in upper case (e.g. "SUN4")</TD>
<TR><TD>BAT</TD>         <TD>is either empty (for UNIX) or ".bat" (for windows)</TD>
<TR><TD>EXE</TD>         <TD>is either empty (for UNIX) or ".exe" (for windows)</TD>
<TR><TD>BETARUN</TD>     <TD>betarun version (e.g. v2.9)</TD>
<TR><TD>COMPILER</TD>	 <TD>compiler version (e.g. v5.2)</TD>
</TABLE>
<P>
So when specifying the ast files you want packed, you should write

<PRE>
.../*.${AST}
</PRE>

instead of e.g.

<PRE>
.../*.ast
</PRE>

This ensures, that the specification works for both little- and big-endian.
<P>
When specifying object files you should write

<PRE>
.../${CODEDIR}/*.${OBJ}
</PRE>

instead of e.g. 

<PRE>
.../sun4s/*.o
</PRE>

Finally when specifying an executable (and its script) you should write e.g.

<PRE>
./bin/beta${BAT} \
.../${MACHINETYPE}beta${EXE} \
</PRE>

instead of

<PRE>
./bin/beta \
.../SUN4Sbeta \
</PRE>
 
<HR>
<PRE>
$Author: datpete $
$Date: 2004-06-30 15:08:03 $
$Revision: 1.1 $
</PRE>
</BODY>
</HTML>
