<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<HEAD>
<TITLE>BETA runtime error stack dump</TITLE>
<LINK REL="stylesheet" HREF="../style/miadoc.css" TYPE="text/css">
</HEAD>

<BODY>
<P>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<P>

<P>BETA runtime error stack dump</P>
<HR>
<!---------------------------------------------------------->

<H1>BETA runtime error stack dump</H1>

<P> Runtime errors are errors in the program detected during its
execution. In this case an error message is given and a dump of the
call stack of objects is generated on the file <CODE>foo.dump</CODE> 
if the program
is named <CODE>foo</CODE>.</P>

<P> Consider the following fragments (note that the name of the
fragments are complete UNIX file paths) </P>


<A NAME="mylib.bet"><H4 class=betacaption>/usr/smith/mylib.bet</H4></A>

<PRE class=beta>
ORIGIN '~beta/basiclib/betaenv'
--LIB: attributes--
lib1: (# do INNER #);
lib2: lib1 
  (# T: (# x: @integer #);
     R: ^T
  do (* &amp;T[]-&gt;R[] *) 
     111-&gt;R.x; (* R[] is NONE *)
     INNER
  #);
lib3: lib2(# do 'hello'-&gt;putLine #) 
</PRE>

<A NAME="runtimeerr.bet"><H4 class=betacaption>/usr/smith/runtimeerr.bet</H4></A>

<PRE class=beta>
ORIGIN '~beta/basiclib/betaenv'; 
INCLUDE 'mylib' 
--PROGRAM: descriptor--
(# foo1: (# do foo2 #);
   foo2: (# do foo.foo3 #);
   foo: @(# foo3: (# do lib3 #)#)
do foo1
#)
</PRE>

<P> Execution of this program on a SPARC Solaris (<CODE>sun4s</CODE>)
machine will result in the
following file:

<A NAME="runtimeerr.dump"><H4 class=betacaption>runtimeerr.dump</H4></A>

<PRE class=beta> 
Beta execution aborted: Reference is none.

Call chain: (sun4s)

  item lib3#&lt;lib2#&gt;lib1# in /usr/smith/mylib
    -- BETAENV-~ in ~beta/basiclib/betaenv
  item &lt;foo3#&gt; in /usr/smith/runtimeerr
    -- foo# in /usr/smith/runtimeerr
  item &lt;foo2#&gt; in /usr/smith/runtimeerr
    -- PROGRAM-~ in /usr/smith/runtimeerr
  item &lt;foo1#&gt; in /usr/smith/runtimeerr
    -- PROGRAM-~ in /usr/smith/runtimeerr
  comp &lt;PROGRAM-~&gt; in /usr/smith/runtimeerr

  basic component in ~beta/basiclib/betaenv
</PRE>

<P> The information in runtimeerr.dump has the following meaning: </P>

<ul>

 <li> The activation stack of invoked objects is shown. Each element
of the stack is shown as two lines. The object and its statically
enclosing object.</P>

 <li> For each object, the name of the file where it is defined is
also shown.

 <li> From the above file it can be seen that the error occurred in an
instance of lib3. The description lib3#&lt;lib2#&gt;lib1 shows the
superpattern chain of lib3. The braces (&lt;,&gt;) indicates that the
error occurred in the do-part of lib2.</P>

 <li>The symbol immediately after the name of an object shows its
kind. The different possibilities are:
</p>
<ul>

<li> <tt>#</tt> The descriptor belongs to a pattern, e.g. <tt>P:
(#...#)</tt></P>

<li> <tt>~</tt> Singular named descriptor, e.g. <tt>X: @(# ... #)</tt>

<li> <tt>* </tt> Singular unnamed descriptor, e.g.  <tt>...; (#
... #);...</tt></P>

<li> <tt>-</tt> Descriptor SLOT.
</ul>

<P> Notice that, e.g. the PROGRAM SLOT is marked with both <tt>-</tt>
and <tt>~</tt> since a descriptor SLOT gives rise to a singular named
descriptor.</P>
</ul>

<ul>

 <li>It can be seen that lib3 was called from foo3, which was called
from foo2, which was called from foo1, etc. The bottom most objects
are defined in betaenv.

 <li> For each active object its enclosing object is shown, on a line
starting with '--' The encloser of e.g. foo3 is foo. The rest of the
objects have enclosers, which are slots.

 <li> For each object, the corresponding fragment file is shown. The
pattern lib3 is defined in the file

</ul>

<PRE class=beta>/usr/smith/mylib</PRE>


<!---------------------------------------------------------->
<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="40%" align="left">
<ADDRESS>BETA runtime error stack dump</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<P>

</BODY>
</HTML>
