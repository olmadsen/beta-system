<H1> <A NAME="LINK-beta-intro-_Toc403635902"><A NAME=MARKER-9-155></A>Coroutines and Concurrency</A></H1>
<P> A BETA object may be the basis for an execution thread<A NAME=MARKER-2-157></A>. Such a thread<A NAME=MARKER-2-158></A> will consist of a stack of objects currently being executed. An object which can be used as the basis for an execution thread has to be declared as an object of kind component<A NAME=MARKER-2-159></A> as shown in the following declaration:</P>
<A NAME=HEADING28-2></A>
<H1> Components with execution threads</H1>
<PRE CLASS=beta>
A: @|<A NAME=MARKER-2-160></A> activity
</PRE>
<P> The symbol '|<A NAME=MARKER-2-161></A>' describes that the object A is a component. A component (thread) may be executed as a coroutine<A NAME=MARKER-2-162></A> or it may be forked as a concurrent process<A NAME=MARKER-2-163></A>. Consider the following description of activity:</P>
<PRE CLASS=beta>
activity:
  (#
  do cycle
      (#
      do getOrder; suspend;
         processOrder; suspend;
         deliverOrder; suspend
  #)#)
</PRE>
<P> The component object may be invoked by an imperative</P>
<PRE CLASS=beta>
A
</PRE>
<P> which implies that the do-part is executed. The execution of A is temporarily suspended when A executes a suspend-imperative. In the above example this happens after the execution of getOrder. A subsequent invocation of A will resume execution after the suspend-imperative. In the above example this means that processOrder will be executed. If B is also an instance of activity, then the calling object may alternate between executing A and B:</P>
<PRE CLASS=beta>
cycle(# do A;  B;  #)
</PRE>
<P> The above example shows how to use components as deterministic coroutines in the sense that the calling object controls the scheduling of the coroutines. In section 9.1 below another example of using coroutines will be given.</P>
<P> It is also possible to execute component objects concurrently. By executing</P>
<PRE CLASS=beta>
A[]-&gt;fork; B[]-&gt;fork
</PRE>
<P> the component objects A and B will be executed concurrently. As for the deterministic coroutine situation, A and B will temporarily suspend execution when they execute a suspend-imperative. Further examples of concurrent objects will be given below in section 9.2.</P>












