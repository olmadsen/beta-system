<H1> <A NAME="LINK-beta-intro-_Toc403635901"><A NAME=MARKER-9-150></A>Virtual Class Pattern</A></H1>
<P> Virtual patterns may also be used to parameterize general container patterns such as the register pattern described above. For the register pattern we assumed the existence of a type pattern defining the elements of the register, i.e. elements of a register must be instances of the pattern type. The pattern type may be declared as a virtual pattern attribute of register as shown below:</P>
<A NAME=HEADING27-2></A>
<H1> type is a virtual class pattern<A NAME=MARKER-2-152></A></H1>
<PRE CLASS=beta>
register:
  (# type:&lt; object;
     insert:&lt; (# e: ^type enter e[] do #)
     
  #)
</PRE>
<P> The declaration type:&lt; object specifies that type is either the pattern object or some subpattern of object. In the definition of register, type may be used as an alias for object, e.g. references qualified by type are known to be at least Objects. Since object is the most general superpattern, type may potentially be any other pattern. The virtual attribute type may be bound to a subpattern of object in subpatterns of register. The following declaration shows a pattern workerRegister which is a register where the type attribute has been bound to worker:</P>
<PRE CLASS=beta>
workerRegister: register
  (# type::&lt; worker;
     findOldestSeniority:
       (# old: @integer
       do scan
           (# do (if current.seniority &gt; old then 
                     current.seniority-&gt;old
           if)#)
       exit old
       #)
  #);
</PRE>
<P> In the definition of workerRegister, the virtual pattern type may be used as a synonym for the pattern worker. This means that all references qualified by type may be used as if they were qualified by worker. The reference current of the scan operation is used in this way by the operation findOldestSeniority which computes the oldest seniority of the register. The expression current.seniority is legal since current is qualified by type which in workerRegister is at least a worker.</P>
<P> In subpatterns of workerRegister it is possible to make further bindings of type thereby restricting the possible members of the register. Suppose that manager is a subpattern of worker. A manager register may then be defined as a subpattern of workerRegister:</P>
<PRE CLASS=beta>
managerRegister: workerRegister(# type::&lt; manager #)
</PRE>
<P> In the definition of managerRegister, type may be used as a synonym for manager, i.e. all references qualified by type are also qualified by manager.</P>
<A NAME=HEADING27-10></A>
<H1> General parameterized patterns </H1>
<P> Virtual patterns make it possible to define general parameterized patterns<A NAME=MARKER-2-153></A> like register and to restrict the member type of the elements. In this way virtual class patterns provide an alternative to templates<A NAME=MARKER-2-154></A> as found in C++.</P>












