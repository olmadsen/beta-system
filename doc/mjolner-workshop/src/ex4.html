<h2>Exercise 4: The fragment system</h2>
This exercise is about the fragment system and how it is represented in the Mjolner tool.


<h3>Hiding details of your implementation</h3>
Load the file <a href="useloops.bet">useloops.bet</a> in the Mjolner tool.
<p>
If you click the '+' next to the 'useloops' icon <png src="images/image063.png"> in the Projects window, you will see that the program INCLUDEs the file 'loops' (symbolized by a single up-arrow: <png src="images/image065.png">). 
<p>
Click the line that says<code> <png src="images/image065.png">loops</code>. We would like to save the do-parts in another file; our implementation file. 
<p>
While viewing 'loops' choose 'SLOTs-&gt;Create Implementation File...' and type<code> loopsbody</code>. Now you have created a new file 'loopsbody' whose ORIGIN is 'loops' (symbolized by a double up-arrow: <png src="images/image068.png">). Conversely, 'loops' now has BODY 'loopsbody' (symbolized by a down arrow: <png src="images/image070.png">).
<p>
Go back to 'loops' by double-clicking<code> <png src="images/image068.png">loops </code>in the Projects window.
<p>
Mark the do-part of<code> upTo </code>(press and hold the mouse button from the middle of 'do' to somewhere in the do-part).
<p>
<center><png src="images/image073.png"></center><br><br>
<p>
Choose 'SLOTs-&gt;Make DoPart SLOT', and name it<code> upToImplementation</code>. Now the implementation of<code> upTo </code>is automatically moved down into 'loopsbody'. 
<p>
Double-click<code> &lt;&lt;SLOT upToImplementation: DoPart&gt;&gt;</code>. This takes you directly to the code in 'loopsbody' (or click the Definiton button <png src="images/image023.png"> in the toolbar or press ctrl-d).
<p>
The Mjolner tool keeps track of your current implementation file at all times. This is the file into which the implementaion is moved when you choose 'SLOTs-&gt;Make DoPart SLOT'. When you use 'SLOTs-&gt;Create Implementation File...' to create a new file, that file becomes the current implementation file. If you wish to change it, use the SLOTs menu.
<p>
Move the do-parts of<code> downTo </code>and<code> stepTo </code>down into 'loopsbody' as well. This can be done in one step by selecting both<code> downTo </code>and<code> stepTo </code>and choosing 'SLOTs-&gt;Make DoPart SLOT'.


<h3>Browsing through SLOTs and fragment forms</h3>
A SLOT is something of the form<code> &lt;&lt;SLOT blahblah: DoPart&gt;&gt;</code>. The coresponding fragment form contains a line such as<code> ---blahblah: DoPart---</code>.
<p> 
Using the Mjolner tool you can easily jump from a SLOT to the corresponding fragment form or vice versa.
<p>
While viewing 'loops', double-click the<code> stepTo </code>SLOT. This causes the implementation of<code> stepTo </code>to be displayed. In the Fragment Forms window you can see that it contains three do-parts and that currently 'stepToImplementation' is displayed. 
<p>
Jump down to the implementation of<code> downTo </code>by clicking the line above.
To find the SLOT mathing the 'downTo' fragment form, click the 'ToSlot' button <png src="images/image076.png"> in the toolbar or right click in the Form window and select 'Follow-&gt;Link To SLOT'. 
<p>
<center><gif src="images/image079.gif"><br><br>
(Note that this screenshot is from version 5.1 of the Mjolner tool)</center>
<p>
Now the tool searches through the chain of ORIGINs (adhering to the rules for doing so) looking for a matching SLOT. It ends up finding such a SLOT in 'loops'.
<p>
<center><png src="images/image080.png"></center><br><br>
<p>
Three patterns are defined in 'loops':<code> upTo</code>,<code> downTo </code>and<code> stepTo</code>. To be precise, they are defined in a<code> lib:attributes </code>fragment form. as can be seen in the upper right corner of the tool. But which slot will this fragment form be inserted into, i.e. where is the SLOT corresponding to<code> lib:attributes</code>? Find out the same way as above. Of course, the matching SLOT is located in 'betaenv'. 


