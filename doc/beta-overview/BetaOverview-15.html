<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>
<LINK REL=TOP HREF=index.html>
<LINK REL=UP HREF=BetaOverview-14.html>
<LINK REL=PREV HREF=BetaOverview-14.html>
<LINK REL=NEXT HREF=BetaOverview-16.html>
<TITLE>8.2.1	 Monitor example</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING15></A>


<P><A HREF=BetaOverview-16.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=BetaOverview-14.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=BetaOverview-14.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<P>8.2  Concurrency</P>


<A NAME=HEADING15-0></A>
<H1>8.2.1  Monitor example</H1>
<DL>
<DT><DD>The following example describes a company with a number of salesmen, workers and carriers. The salesmen obtain orders from customers and store them in an order pool. The workers obtain orders from the order pool, process them and deliver the resulting item in an item pool. The carriers pick up the items from the item pool and bring them to the customer. Salesmen, workers and carriers are described as active objects whereas the order- and item pools are represented as monitor objects.
</DL>
<PRE CLASS=beta>
(# Salesman: Employee
     (# getOrder: (# ... <EM>exit</EM> anOrder[] #)
     <EM>do</EM> cycle(#<EM>do</EM> getOrder <EM>-></EM> JobPool.put #)
     #);
   S1,S2, ...: @ | Salesman;
   JobPool: @ monitor
     (# jobs: @ register(# type::&lt; order #);
        put: entry(# ord: ^ order <EM>enter</EM> ord[] <EM>do</EM> ord[]<EM> -></EM>jobs.insert #);
        get: entry(# ord: ^ order <EM>do</EM> jobs.remove<EM> -></EM> ord[] <EM>exit</EM> ord[] #)
     #);
   Worker: Employee
     (# processJob: (# ...<EM> enter</EM> anOrder[] <EM>do</EM> ... <EM>exit</EM> anItem[] #)
     <EM>do</EM> cycle(#<EM>do</EM> JobPool.get <EM>-></EM> processJob <EM>-></EM> ItemPool.put #)
     #);
   W1,W2,...: @ | Worker;
   ItemPool: 					@ monitor(# ... #);
   Carrier: Employee
     (# DeliverItem: (# <EM>enter</EM> anItem[] <EM>do</EM> ... #)
     <EM>do</EM> cycle(#<EM>do</EM> ItemPool.get <EM>-></EM>DeliverItem #)
     #);
   C1,C2, ...: @ | Carrier;
   <EM>do</EM> 		JobPool.init; ItemPool.init; 
   conc(#<EM>do</EM> S1.start; ... W1.start; ... C1.start; ... #)
#)
</PRE>
<DL>
<DT><DD>The procedure pattern <CODE>conc</CODE> is another example of a high-level concurrency pattern from the Mj&oslash;lner BETA library. It corresponds to the parbegin/parend imperative of Dijkstra [Dij68] in the sense that it does not terminate execution until execution of components being started (by <CODE>S1.start</CODE>, etc.) have terminated their execution.
</DL>







<!-- TOC -->



<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>An Overview of BETA</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=BetaOverview-16.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=BetaOverview-14.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=BetaOverview-14.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=contents.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>


</BODY>
</HTML>
