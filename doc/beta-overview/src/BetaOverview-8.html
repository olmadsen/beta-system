<H1>6  Nested Patterns</H1>
<DL>
<DT><DD>One of the characteristics of Algol-like languages is block-structure, which allows for arbitrary nesting of procedures. In Simula it is in addition possible to nest classes although there are some restrictions when using nesting. The possibility of nesting has been carried over to BETA where patterns can be arbitrarily nested. Block structure is a powerful mechanism that extends the modeling capabilities of languages. However, besides Simula and BETA, none of the main stream object-oriented languages supports block-structure. In most object-oriented languages, an object may be characterized by data attributes (instance variables) and procedure attributes. In Simula and BETA, an object may in addition be characterized by class pattern attributes. 
</DL>
<P> In the examples presented so far, there have been two levels of nesting. The outer level corresponds to class patterns, like <CODE>Employee</CODE> and the inner level corresponds to procedure patterns, like <CODE>ComputeSalary</CODE>. In procedural languages like Algol and Pascal it is common practice to define procedures with local procedures. This is of course also possible in BETA.</P>
<P> Nested class patterns</P>
<DL>
<DT><DD>The possibility of nesting classes is a powerful feature which is not possible in languages like Smalltalk, C++ and Eiffel. The following example shows a class pattern that describes a product of our company:
</DL>
<PRE CLASS=beta>
ProductDescription:
  (# name: @ Text;
     price: @ Integer;
     noOfSoldUnits: @ Integer;
     Order:
       (# orderDate: @ Date;
          c: ^ Customer;
          Print:&lt;
          (#
          <EM>do</EM> {print name, price, noOfSoldUnits, orderDate, C}
             <EM>inner</EM> 
          #)
       #) 
  #);
</PRE>
<DL>
<DT><DD>One of the attributes of a <CODE>productDescription</CODE> object is the class pattern <CODE>Order</CODE>. An instance of <CODE>Order</CODE> describes an order made on this product by some customer. The attributes of an <CODE>Order</CODE> object include the date of the order, the no. of units ordered, the customer ordering the product, and a <CODE>Print</CODE> operation. Consider the objects:
</DL>
<PRE CLASS=beta>
P1: @ Product;
P2: @ Product;
o1,o2: @ P1.Order;
o3,o4: @ P2.Order
  </PRE>

<DL> <DT><DD>The objects <CODE>o1</CODE> and <CODE>o2</CODE> are
instances of <CODE>P1.Order</CODE> whereas <CODE>o3</CODE> and
<CODE>o4</CODE> are instances of <CODE>P2.Order</CODE>. The block
structure makes it possible to refer to global names in enclosing
objects. In the above example, the print operation refers to names in
the enclosing <CODE>Order</CODE> object. This is like in most object
oriented languages where one inside a procedure refers to names in the
enclosing object. The <CODE>Print</CODE> operation, however, also
refers to names in the surrounding <CODE>ProductDescription</CODE>
object. Execution of say <CODE>o1.print</CODE> will thus print the
values of <CODE>P1.name</CODE>, <CODE>P1.price</CODE>,
<CODE>P1.noOfSoldUnits</CODE>, <CODE>o1.orderDate,</CODE> and
<CODE>o1.c</CODE>.  </DL>







<!-- TOC -->




