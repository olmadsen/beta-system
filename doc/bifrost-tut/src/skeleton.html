<H1> <A NAME="LINK-bifrost-tut-_Toc402456564"><A NAME=MARKER-9-30></A>The Program Skeleton</A></H1>
<P> As described in <A HREF="../bibliography/index.html#mia91-13">[MIA 91-13]</A> every program using Bifrost must have ORIGIN in or INCLUDE the fragment called Bifrost<A NAME=MARKER-2-32></A>, and execute an instance of the pattern called bifrost. The following program skeleton subway1.bet<A NAME=MARKER-2-33></A> will be the starting point:</P>

<H4 class=betacaption>subway1.bet</H4>

<PRE CLASS=beta>
ORIGIN '~beta/bifrost/Bifrost';
-- PROGRAM: descriptor --
bifrost
(# theWindow: @window
     (# myCanvas: @BifrostCanvas
          (# open:: 
               (# do (300, 300)-&gt;Size-&gt;theWindow.size #);
             eventhandler:: 
               (# onOpen:: (# (* ... *) #);
                  onMouseDown:: (# (* ... *) #);
                  onKeyDown:: 
                    (# do (if ch='Q' then Terminate if) #);
               #);
          #);
        open:: (# do myCanvas.open #)
     #) (* theWindow *)
do theWindow.open;
   1-&gt;Arguments-&gt;theWindow.title;
#)
</PRE>
<P> The ORIGIN ~beta/bifrost/Bifrost contains the bifrost fragment. 
Bifrost includes the graphical user interface environment Lidskjalv,
see <A HREF="../bibliography/index.html#mia94-27">[MIA 94-27]</A>, so
we can start by declaring an ordinary Lidskjalv window to contain the
graphics. </P>

<P> In the window a static Canvas<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-1">[1]</A></EM><A NAME=MARKER-2-34></A> is declared, in which further binding of various virtuals have been prepared. </P>
<P> In init, so far, the Canvas is given an arbitrary size. </P>

<P> The onOpen <A NAME=MARKER-2-35></A>virtual is called when the open
procedure pattern has completed, e.g., when the window containing the
Canvas has become visible in the window system. From within this
virtual pattern, the drawing operations on the Canvas should be
performed. </P>

<P> The virtual pattern onMouseDown <A NAME=MARKER-2-36></A>is called when a button on the pointing device, if any, has been pressed. So far the actions to perform in this case are unspecified. </P>
<P> The virtual pattern onKeyDown <A NAME=MARKER-2-37></A>is called
when a keyboard key has been pressed. In this case, it is checked
whether the user types 'Q' within the Canvas, and if so
the application is stopped. </P>

<P> After theWindow has been opened, it is given the name of the
program as title.</P>







<HR>

<A NAME=FOOTNOTE-1>[1] </A>
 In the current Bifrost version the pattern name BifrostCanvas is used when declaring canvasses. This is because of an overlap in names in Lidskjalv and Bifrost. The naming conflict will probably be solved in a later version of Bifrost and Lidskjalv.  In the rest of this tutorial we will use the original Bifrost term &quot;Canvas&quot; as a synonym for &quot;BifrostCanvas&quot;, but in the coding the latter has to be used for the moment.









<!-- TOC -->




