<H2><INX>Segment Definition Primitives</INX></H2>
<P> Segment primitives can be used directly to construct shapes. A
shape is constructed in this way by generating a number of segments,
and adding these segments to the shape. Segment definition primitives
are only meant for internal use in Bifrost. It is not recommended to
use these primitives, except for defining circular spline segments,
but instead to use the shape definition operations described in <A
HREF="bifrost-ref-13.html">Shape Definition Primitives</A>.</P>

<H3><INX>LineSegment</INX></H3>
<P> A line segment is described by two control points: Begin (= FirstPoint) and End (= LastPoint). A line segment is constructed by assigning values to the Begin and End points:</P>

<TABLE BORDER=0><TR VALIGN=TOP><TD><BETA>
aSeg:@LineSegment
  (#
  do (100,100) -> begin;
     (200,200) -> end;
  #)
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting line segment</P>
<P> </P>
<CENTER><GIF ALIGN=TOP SRC=images/linesegment.gif></CENTER>
</TD></TR></TABLE>

<H3><INX>SplineSegment</INX></H3>
<P> As mentioned earlier there are two different kinds of spline
segments: circular and non-circular splines. A circular spline is
always considered closed, and a non-circular spline is considered
closed if the last operation performed is Close. Non-circular splines
are typically used in construction of shapes consisting of both line
and spline segments, and circular splines are useful for making
circles and ellipses. Spline segments have three operations used for
creating the spline: </P> 

<DL>

<DT><B>Open</B>.
<DD>
Takes one point as argument. The point is the first control point of
the spline, and the spline is prepared to be constructed with further
control points using AddControl.

<DT><B>AddControl</B>. 
<DD>
This operation just adds a specified control point to the spline.

<DT><B>Close</B>.
<DD>
Closes a non-circular spline by adding FirstPoint to the spline
definition. The operation has no effect on a circular spline. Notice,
that it is still possible to add further control points to the spline
definition after the Close operation.

</DL>


<P> The following examples illustrate the use of AddControl and Close
for a non-circular spline:</P>

<TABLE BORDER=0><TR VALIGN=TOP><TD>
<BETA>
aBow: @NonCircularSplineSegment
  (#
  do (  0,100) -> Open;
     (100,100) -> AddControl;
     (100,  0) -> AddControl;
     (  0,  0) -> AddControl;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Open non-circular spline:</P>
<P> </P>
<CENTER><GIF ALIGN=TOP SRC=images/open-noncircular-spline.gif></CENTER>
</TD>
<TR VALIGN=TOP><TD><BETA>
aDrop: @NonCircularSplineSegment
  (# 
  do (  0,100) -> Open;
     (100,100) -> AddControl;
     (100,  0) -> AddControl;
     (  0,  0) -> AddControl;
     close;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Closed non-circular spline:</P>
<P> </P>
<CENTER><GIF ALIGN=TOP SRC=images/closed-noncircular-spline.gif></CENTER>
</TD></TR>
</TABLE>

<P> The next examples illustrate the use of AddControl for circular
splines:</P>

<TABLE BORDER=0><TR VALIGN=TOP>
<TD>
<BETA>
aSpline: @CircularSplineSegment   
  (#    
  do (  0,100) -> Open;   
     (100,100) -> AddControl;   
     (100,  0) -> AddControl;     
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Circular spline with three controlpoints:</P>
<CENTER><GIF ALIGN=TOP SRC=images/circularspline3.gif></CENTER>
</TD></TR>
<TR VALIGN=TOP>
<TR VALIGN=TOP><TD><BETA>
aCircle: @CircularSplineSegment
  (# 
  do (  0,100) -> Open;
     (100,100) -> AddControl;
     (100,  0) -> AddControl;
     (  0,  0) -> AddControl;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Circular spline with four controlpoints:</P>
<CENTER><GIF ALIGN=TOP SRC=images/circularspline4.gif></CENTER>
</TD></TR>
</TABLE>

<P> Notice that a circular spline is inherently closed.</P>


<H3>Adding Segments to Shapes</H3>
<P> When the segment is defined it can be added to a shape with two shape primitives: AddLine and AddSpline.</P>

<DL>

<DT><B><INX>AddLine</INX></B>.
<DD>
Adds a line segment to
the shape. In case where FirstPoint of the line segment does not
coincide with LastPoint of the shape, the line segment is moved to the
appropriate position.

<DT><B><INX>AddSpline</INX></B>.
<DD>
AddSpline adds a spline to the shape in construction. In case where
FirstPoint of the spline segment does not coincide with LastPoint of
the shape, the spline segment is moved to the appropriate position.

</DL>

<P> The following example illustrates the use of AddLine:</P>
<TABLE BORDER=0><TR VALIGN=TOP>
<TD>
<BETA>
aLine: @LineSegment 
  (#
  do (100,100) -> begin;
     (150,150) -> end;
  #);

anotherLine: @LineSegment
  (# 
  do (200,200) -> begin;
     (200,100) -> end;
  #);

aShape: @Shape
  (# 
  do aLine -> AddLine;
     anotherLine -> AddLine;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Two line segments</P>
<CENTER><GIF ALIGN=TOP SRC=images/twolinesegments.gif></CENTER>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting shape:</P>
<CENTER><GIF ALIGN=TOP SRC=images/twolinesegmentsshape.gif></CENTER>
</TD>
</TR>
</TABLE>

<P> The following example illustrates the use of and AddSpline using
the two splines defined previously:</P>

<TABLE BORDER=0>
<TR VALIGN=TOP><TD>
<BETA>
aShape: @Shape
  (# 
  do aCircle -> AddSpline;
     aDrop   -> AddSpline;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting shape:</P>
<CENTER><GIF ALIGN=TOP SRC=images/circledrop.gif></CENTER>
</TD>
</TR>
</TABLE>

<P> In the case where the spline is not closed, i.e. FirstPoint does
not coincide with LastPoint of the shape, the spline is moved to the
appropriate position by AddSpline:</P>

<TABLE BORDER=0><TR VALIGN=TOP>
<TD>
<BETA>
aLine: @LineSegment         
  (#                        
  do (100,100) -> begin;    
     ( 50,150) -> end;      
  #);                       

anotherLine: @LineSegment
  (# 
  do ( 50,150) -> begin;
     (150,200) -> end;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Two lines</P>
<CENTER><GIF ALIGN=TOP SRC=images/twolines.gif></CENTER>
</TD>
</TR>

<TR VALIGN=TOP><TD><BETA>
aSpline: @NonCircularSplineSegment
  (# 
  do (  0,200) -> Open;
     ( 50,250) -> AddControl;
     (100,200) -> AddControl;
     (100,100) -> AddControl;
     ( 50, 50) -> AddControl;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> A Spline</P>
<CENTER><GIF ALIGN=TOP SRC=images/aspline.gif></CENTER>
</TD>
</TR>

<TR VALIGN=TOP><TD><BETA>
aShape: @Shape
  (# 
  do aLine -> AddLine;
     anotherLine -> AddLine;
     aSpline -> AddSpline;
  #);
</BETA>
</TD>
<TD><GIF WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting shape:</P>
<CENTER><GIF ALIGN=TOP SRC=images/twolinesandspline.gif></CENTER>
</TD>
</TR>
</TABLE>

<P> It should be clear from the examples that it is complicated to use
the segment definition primitives for shape construction. Therefore,
for purpose of convenience and to make the graphics system more
powerful, Bifrost also includes the small shape construction language
presented earlier.</P>



