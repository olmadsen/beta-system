<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> 4.5 Stroke</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING14></A>


<P><A HREF=bifrost-ref-15.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=bifrost-ref-13.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=bifrost-ref-9.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 4 The Shape</P>


<A NAME=HEADING14-0></A>
<H1> 4.5 Stroke</H1>
<P> <A NAME=MARKER-2-46></A><A NAME=MARKER-2-47></A><A
NAME=MARKER-2-48></A>A very powerful way of defining shapes is by
applying a stroke to a previously defined shape. The metaphor for
stroke is that a scalpel is moved parallel to the segments of the
shape definition, at a specified distance perpendicular to the
segments:</P>

<TABLE BORDER=0><TR VALIGN=TOP><TD><PRE CLASS=beta>
openStroke: @Shape
  (# 
  do (100, 100) -&gt; open;
     (150,  50) -&gt; lineTo;
     (200, 100) -&gt; lineTo;
     (250,  50) -&gt; lineTo;
     (300, 100) -&gt; splineTo;
     (350,  50) -&gt; splineTo;
     (400, 100) -&gt; splineTo;
     (10, CapButt, JoinMiter) -&gt; stroke;
  #);
</PRE>
</TD>
<TD><IMG WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting Shape:</P>
<P> </P>
<CENTER><IMG ALIGN=TOP SRC=images/strokedshape.gif></CENTER>
</TD></TR></TABLE>
<P>
<CENTER><A NAME=figure_7><STRONG CLASS=figure>Figure 7: Stroke operation applied to an open shape</STRONG></A></CENTER>

<P> In <A HREF="#figure_7">Figure 7</A> the dashed curve is the original shape which consists of three
line segments and one spline segment with four control points (the
control points are not shown). The resulting shape is the outline made
by the scalpel. The scalpel starts (and ends) in the leftmost top
corner. The orientation of the resulting shape is indicated with
arrows along the segments. Notice that the shape is closed after the
operation has been applied.</P>

<P> A closed shape is stroked likewise but with no need to make
special ends:</P>

<TABLE BORDER=0>
<TR VALIGN=TOP>
<TD>
<PRE CLASS=beta>
closedStroke: @Shape
  (# 
  do ( 50, 100) -&gt; open;
     (200, 100) -&gt; lineTo;
     (200,  50) -&gt; lineTo;
     ( 50,  50) -&gt; lineTo;
     close;
     (10, CapButt, JoinMiter) -&gt; stroke;
  #);
</PRE>
</TD>
<TD><IMG WIDTH=50 SRC=../images/trans5x5.gif></TD>
<TD>
<P> Resulting Shape:</P>
<P> </P>
<CENTER><IMG ALIGN=TOP SRC=images/closedstroke.gif></CENTER>
</TD></TR></TABLE>
<CENTER>
<P>
<A NAME=figure_8><STRONG CLASS=figure>Figure 8: The stroke operation applied to a closed shape</STRONG></A></CENTER>

<P> Notice the different orientation of the outer and inner shapes, and that the resulting shape consists of two shapes (or more precisely: the shape consists of four line segments and one shape - also consisting of four line segments)</P>
<P> When the stroke operation has been applied, the original shape is altered and cannot be restored but only the new shape can be manipulated (i.e. the segments of the original shape are irreversibly replaced with the segments that define the new stroked shape). This is different from traditional graphics systems like PostScript, where the original shape (or path in PostScript terms) is unchanged and the stroke only makes a temporary outline which is discharged after having been used for filling an area of the drawing surface. Notice particularly, that the stroke of a spline segment results in two parallel spline segments. This is a completely new idea, since the traditional graphics systems can avoid calculating new spline control points by approximating the spline with a polygon before calculating the temporary outline (the traditional models do not need the new splines since the temporary outline is immediately discarded without giving the user the possibility to transform or modify the stroked spline).</P>
<P> The advantage of altering the shape is that it then becomes possible to further manipulate the shape, and that the shape can be used for other purposes than just drawing it, e.g. clip to the shape, detect mouse clicks within the shape etc.</P>
<A NAME=HEADING14-51></A>

<H1> 4.5.1 Cap and Join Styles</H1>
<P> <A NAME=MARKER-2-49></A><A NAME=MARKER-2-50></A>The Cap parameter
to the Stroke operation determines how the resulting shape looks in
the part of it corresponding to the end point of the original
shape. The Cap parameter is only relevant for open shapes. The Join
parameter determines how the line parts of the shape are joined. In
the example above for an open shape, the Cap parameter is CapButt
specifying a line perpendicular to the shape and the Join parameter in
both examples is JoinMiter. The alternatives are illustrated in 
<A HREF="#figure_9">Figure 9</A>.
</P>

<P> </P>

<CENTER><IMG ALIGN=TOP SRC=images/capjoin.gif></CENTER>
<P> </P>
<CENTER><A NAME=figure_9><STRONG CLASS=figure>Figure 9: Cap and join styles for the Stroke operation</STRONG></A></CENTER>




<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Bifrost - Reference Manual</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=bifrost-ref-15.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=bifrost-ref-13.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=bifrost-ref-9.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
