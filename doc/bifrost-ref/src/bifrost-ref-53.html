<H2><INX>Saving and Loading Specialized Objects</INX></H2>
<P> </P>
<P> It can often be useful to define specializations of the predefined graphical objects, often with additional attributes.  To be able to save these kind of objects you have to tell Bifrost three things:</P>

<OL>
<LI>How to save the user-defined attributes
<LI>How to load the user-defined attributes
<LI>How to instantiate new objects
</OL>


<A NAME=HEADING53-7></A>
<H3>Writing user-data</H3>
<P> A very crude method, far from the more sophisticated persistent
store method, is used for storing user-defined attributes or
user-data. Bifrost simply expects the user to encode the user-data<A
NAME=MARKER-2-198></A> in a one line text string (note: it is
important that only one line is used). Furthermore the one line string
should start with the PostScript comment character<A
NAME=MARKER-2-199></A> % if you want to be able to print the file as a
regular PostScript file. Further bind the writeUserData<A
NAME=MARKER-2-200></A> virtual to write user-data. See
<CODE>squarelib.bet</CODE> in </CODE>~beta/demo/bifrost<CODE> for an
example.</P> 

<A NAME=HEADING53-9></A>
<H3>Reading user-data</H3>
<P> Reading user-data is simply done by further binding the <INX>readUserData</INX> virtual. Reading user-data is the inverse of writing user-data.</P>
<A NAME=HEADING53-11></A>
<H3>Creating New Objects</H3>
<P> To be able to instantiate objects of the proper type, Bifrost uses the name of the pattern as identification. This means that the user should keep the following in mind when defining specialized graphical objects:</P>
<P> Do not use anonymous patterns for your graphical objects. I.e. avoid </P>
<PRE CLASS=beta>
&amp;Rect(# ... init::(# do ... #) ... #)[] -&gt; draw
</PRE>
<P> Use distinct names for all patterns you want to save in a given file.</P>
<P> Keep it simple:  If you plan to save a very complex data structure along with your graphical objects, you should probably consider splitting your objects in to two parts: one for the graphics (some specialization of AbstractGraphicalObject) and one for your datastructure, which you then can save using a persistent store.</P>





