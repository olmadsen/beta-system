<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE> 6.2 Operations</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING24></A>


<P><A HREF=bifrost-ref-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=bifrost-ref-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=bifrost-ref-22.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> 6 The Graphical Object</P>


<A NAME=HEADING24-0></A>
<H2>Operations</H2>
<P> Most of the operations in the graphical object manipulate, or use operations implemented in the shape or the paint. The only exceptions to this fact is manipulation of the transformation matrix and some administration (init and copy) operations.</P>

<DL>
<DT>
<B>Init</B>. <A NAME=MARKER-2-99></A>
<DD>
Initializes the GraphicalObject by instantiating a shape and a
transformation matrix. Init must be called as the first operation on
the graphical object. If the graphical object is evaluated, init is
called automatically. 
</DL>


<P> To manipulate the shape and the paint of the graphical object four operations are given: </P>

<DL>
<DT>
<B>SetShape</B> and <B>GetShape</B>. 
<DD>
Operations to set and get the shape.

<DT>
<B>SetPaint</B> and <B>GetPaint</B>. 
<DD>
Operations to set and get the paint.
</DL>


<A NAME=HEADING24-9></A>
<H3>Geometric Transformations</H3>
<P> <A NAME=MARKER-2-100></A>Six operations support geometric transformations on graphical objects:<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-5">[5]</A></EM></P> 

<DL>
<DT>
<B>Move</B><A NAME="move"></A>.
<DD>
Enters two displacements (tx,ty) and moves the graphical object
relative to its current position. 

<DT>
<B>MoveTo</B>.
<DD>
Enters point and moves the hotspot of the graphical object to the point.

<DT>
<B>Scale</B>.
<DD>
Enters two scaling factors (sx,sy) and scales the graphical object
relative from its current size. 

<DT>
<B>Rotate</B>. 
<DD>
Enters an angle (in degrees) and rotates the graphical object relative
to the origin. 
</DL>


<A NAME=HEADING24-19></A>
<H3>Query Operations</H3>

<DL>
<DT><B>HitControl</B>. <A NAME=MARKER-2-101></A><A NAME=MARKER-2-102></A>
<DD>
Takes a point (in CCS) as argument and returns a reference to the
exact point (in GraphicalObject coordinates), if it is in the
neighborhood<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-6">[6]</A></EM> of a
control point of the shape of the graphical object. Otherwise returns
NONE. 

<DT><B>ContainsPoint</B>: <A NAME=MARKER-2-103></A><A NAME=MARKER-2-104></A>
<DD>
Takes a point (in CCS) as argument and returns true if it is inside
the shape of the graphical object. 
</DL>

<A NAME=HEADING24-24></A>
<H3>Interaction</H3>
<DL>

<DT>
<B>InteractiveCreateShape</B>.<A NAME=MARKER-2-105></A><A NAME=MARKER-2-106></A>
<DD>
Calls InteractiveCreate of the shape, see <A HREF=bifrost-ref-45.html>Chapter 10</A>.

<DT>
<B>InteractiveReshape</B>. <A NAME=MARKER-2-107></A><A NAME=MARKER-2-108></A>
<DD>
Calls InteractiveReshape of the shape, see <A HREF=bifrost-ref-45.html>Chapter 10</A>.

<DT>
<B>InteractiveCombineShape</B>.<A NAME=MARKER-2-109></A><A NAME=MARKER-2-110></A>
<DD>
Calls InteractiveCombine of the shape, see <A HREF=bifrost-ref-45.html>Chapter 10</A>.

<DT>
<B>InteractiveMove</B>.<A NAME=MARKER-2-111></A><A NAME=MARKER-2-112></A>
<DD>
Takes a canvas, a starting point and a modifier description as
argument and interactively moves the graphical object using the
interaction handler of the canvas, see <A HREF=bifrost-ref-45.html>Chapter 10</A>. Calls <A HREF="#move">Move</A> to do the
transformation after the interaction has ended. 

<DT>
<B>Hilite</B>.<A NAME=MARKER-2-113></A><A NAME=MARKER-2-114></A>
<DD>
Makes the graphical object appear highlighted by using the
highlighting operation of the shape. When the graphical object is
redrawn (by canvas updating) the graphical object will be drawn
highlighted. 

<DT>
<B>UnHilite</B>.<A NAME=MARKER-2-115></A><A NAME=MARKER-2-116></A>
<DD>
Unhighlights the graphical object.
</DL>

<P> The Hilite and UnHilite operations changes the Canvas' drawing mode to be XOR<A NAME=MARKER-2-117></A>, to allow for immediate feedback, and invoke an instance of a virtual drawHilite attribute. Thus the feedback may be augmented by further binding this attribute, see <A HREF=bifrost-ref-45.html>Chapter 10</A> for more details.</P>
<A NAME=HEADING24-38></A>
<H3>Drawing Graphical Objects</H3>
<P> <A NAME=MARKER-2-118></A><A NAME=MARKER-2-119></A>A graphical
object is drawn on a canvas by calling the Draw operation of the
canvas, see <A HREF="bifrost-ref-30.html">chapter 8</A>. The graphical
objects then becomes part of the list of graphical objects in the
canvas, and the canvas asks the graphical object to draw itself on the
canvas. The graphical objects uses its Draw operation to do the actual
drawing in the Canvas. </P>

<P> When a Canvas needs to be redrawn, the Canvas knows which graphical
objects are drawn in the Canvas, and can therefore ask the graphical
objects in question to redraw themselves on the Canvas. Likewise a
graphical object is erased by calling the <A NAME=MARKER-2-120></A><A
NAME=MARKER-2-121></A>Erase operation of the Canvas. See <A
HREF="bifrost-ref-30.html">chapter 8</A> for a complete description of
the Canvas and when it must be redrawn.</P> 

<A NAME=HEADING24-41></A>
<H3>Transforming Graphical Objects</H3>
<P> A graphical object can be transformed by manipulating the transformation matrix TM of the graphical object. Such a transformation will affect the appearance of the graphical object, if it is drawn in a Canvas. To simplify transformation of graphical object, the Transform attribute is present:</P>

<DL>
<DT>
<B>Transform</B>. <A NAME=MARKER-2-122></A><A NAME=MARKER-2-123></A>
<DD>
Applies a matrix to the transformation matrix of the graphical object. To be precise, 
<PRE CLASS=beta>
aMatrix[] -&gt; anAbstractGraphicalObject.transform;
</PRE>
is equivalent with 
<PRE CLASS=beta>
(anAbstractGraphicalObject.TM, aMatrix[])
  -&gt; MatrixMul -&gt; anAbstractGraphicalObject.TM;
</PRE>
</DL>

<P> Notice, that in general, only instances of Shape are guarantied to be transformable, in particular some of the Predefined Graphical Objects (see later) will not respond correctly to all transformations. Translations, i.e. linear moving, however, will work for all kinds of graphical objects. Pictures (see below) may also be transformed, but if they contain Predefined Graphical Objects, the restrictions mentioned above apply to the Picture itself too.</P>






<HR>

<A NAME=FOOTNOTE-5>[5] </A>
 Geometric transformations are described in <A HREF=bifrost-ref-5.html>Chapter 3</A>.
<HR>

<A NAME=FOOTNOTE-6>[6] </A>
 See <A HREF="bifrost-ref-48.html">section 10.3.1 </A>for a definition of the concept neighborhood.






<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Bifrost - Reference Manual</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=bifrost-ref-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=bifrost-ref-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=bifrost-ref-22.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
