<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML><!-- Generated by Harlequin WebMaker 3.0.3 (Beta 10, 20-May-1997 experimental) --><HEAD><LINK REL=TOP HREF=bifrost-ref-1.html><LINK REL=UP HREF=bifrost-ref-22.html><LINK REL=PREV HREF=bifrost-ref-23.html><LINK REL=NEXT HREF=bifrost-ref-25.html><TITLE> 6.2 Operations</TITLE><META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.3 (Beta 10, 20-May-1997 experimental)"></HEAD><BODY><DIV><A NAME=HEADING24></A><DIV><P><A HREF=bifrost-ref-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A><A HREF=bifrost-ref-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A><A HREF=bifrost-ref-22.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A><A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A><A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A><A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P><P> 6 The Graphical Object</P></DIV><A NAME=HEADING24-0></A><H1> 6.2 Operations</H1><P> Most of the operations in the graphical object manipulate, or use operations implemented in the shape or the paint. The only exceptions to this fact is manipulation of the transformation matrix and some administration (init and copy) operations.</P><P> Init. <A NAME=MARKER-2-99></A></P><UL><LI> Initializes the GraphicalObject by instantiating a shape and a transformation matrix. Init must be called as the first operation on the graphical object. If the graphical object is evaluated, init is called automatically.</UL><P> To manipulate the shape and the paint of the graphical object four operations are given: </P><UL><LI>SetShape and GetShape. <LI> Operations to set and get the shape.<LI>SetPaint and GetPaint. <LI> Operations to set and get the paint.</UL><A NAME=HEADING24-9></A><H1> 6.2.1 Geometric Transformations</H1><P> <A NAME=MARKER-2-100></A>Six operations support geometric transformations on graphical objects:<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-5">[5]</A></EM></P><P> Move. </P><UL><LI> Enters two displacements (tx,ty) and moves the graphical object relative to its current position.</UL><P> MoveTo. </P><UL><LI> Enters point and moves the hotspot of the graphical object to the point.</UL><P> Scale. </P><UL><LI> Enters two scaling factors (sx,sy) and scales the graphical object relative from its current size.</UL><P> Rotate. </P><UL><LI> Enters an angle (in degrees) and rotates the graphical object relative from its current position.</UL><A NAME=HEADING24-19></A><H1> 6.2.2 Query Operations</H1><P> HitControl. <A NAME=MARKER-2-101></A><A NAME=MARKER-2-102></A></P><UL><LI> Takes a point (in CCS) as argument and returns a reference to the exact point (in GraphicalObject coordinates), if it is in the neighborhood<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-6">[6]</A></EM> of a control point of the shape of the graphical object. Otherwise returns NONE.</UL><P> ContainsPoint: <A NAME=MARKER-2-103></A><A NAME=MARKER-2-104></A></P><UL><LI> Takes a point (in CCS) as argument and returns true if it is inside the shape of the graphical object.</UL><A NAME=HEADING24-24></A><H1> 6.2.3 Interaction</H1><P> InteractiveCreateShape.<A NAME=MARKER-2-105></A><A NAME=MARKER-2-106></A></P><UL><LI> Calls InteractiveCreate of the shape, see chapter 9.</UL><P> InteractiveReshape. <A NAME=MARKER-2-107></A><A NAME=MARKER-2-108></A></P><UL><LI> Calls InteractiveReshape of the shape, see chapter 9.</UL><P> InteractiveCombineShape.<A NAME=MARKER-2-109></A><A NAME=MARKER-2-110></A></P><UL><LI> Calls InteractiveCombine of the shape, see chapter 9.</UL><P> InteractiveMove.<A NAME=MARKER-2-111></A><A NAME=MARKER-2-112></A></P><UL><LI> Takes a canvas, a starting point and a modifier description as argument and interactively moves the graphical object using the interaction handler of the canvas, see chapter 9. Calls Move to do the transformation after the interaction has ended.</UL><P> Hilite.<A NAME=MARKER-2-113></A><A NAME=MARKER-2-114></A></P><UL><LI> Makes the graphical object appear highlighted by using the highlighting operation of the shape. When the graphical object is redrawn by canvas updating the graphical object will be drawn highlighted.</UL><P> UnHilite.<A NAME=MARKER-2-115></A><A NAME=MARKER-2-116></A></P><UL><LI> Unhighlights the graphical object.</UL><P> The Hilite and UnHilite operations changes the Canvas' drawing mode to be XOR<A NAME=MARKER-2-117></A>, to allow for immediate feedback, and invoke an instance of a virtual drawHilite attribute. Thus the feedback may be augmented by further binding this attribute, see chapter 9 for more details.</P><A NAME=HEADING24-38></A><H1> 6.2.4 Drawing Graphical Objects</H1><P> <A NAME=MARKER-2-118></A><A NAME=MARKER-2-119></A>A graphical object is drawn on a canvas by calling the Draw operation of the canvas, see chapter 7. The graphical objects then becomes part of the list of graphical objects in the canvas, and the canvas asks the graphical object to draw itself on the canvas. The graphical objects uses its Draw operation to do the actual drawing in the Canvas. </P><P> When a canvas must be redrawn, the Canvas knows which graphical objects are drawn in the canvas, and can therefore ask the graphical objects in question to redraw themselves on the canvas. Likewise a graphical object is erased by calling the <A NAME=MARKER-2-120></A><A NAME=MARKER-2-121></A>Erase operation of the canvas. See chapter 7 for a complete description of the Canvas and when it must be redrawn.</P><A NAME=HEADING24-41></A><H1> 6.2.5 Transforming Graphical Objects</H1><P> A graphical object can be transformed by manipulating the transformation matrix TM of the graphical object. Such a transformation will affect the appearance of the graphical object, if it is drawn in a Canvas. To simplify transformation of graphical object, the Transform attribute is present:</P><P> Transform. <A NAME=MARKER-2-122></A><A NAME=MARKER-2-123></A></P><UL><LI> Applies a a matrix to the transformation mantrix of the graphical object. To be precise, </UL><PRE>				aMatrix[] -&gt; anAbstractGraphicalObject.transform;</PRE><UL><LI> is equivalent with </UL><PRE>				(anAbstractGraphicalObject.TM, aMatrix[])			-&gt; MatrixMul -&gt; anAbstractGraphicalObject.TM;</PRE><P> Notice, that in general, only instances of Shape are guarantied to be transformable, in particular some of the Predefined Graphical Objects (see later) will not respond correctly to all transformations. Translations, i.e. linear moving, however, will work for all kinds of graphical objects. Pictures (see below) may also be transformed, but if they contain Predefined Graphical Objects, the restrictions mentioned above apply to the Picture itself too.</P></DIV><DIV><DIV><HR><A NAME=FOOTNOTE-5>[5] </A> Geometric transformations are described in Chapter 2.<HR><A NAME=FOOTNOTE-6>[6] </A> See section 9.3 for a definition of the concept neighborhood.</DIV></DIV><DIV><HR><P><TABLE cols=3 border=0 width=100%><TR><TD width="33%" align="left"><ADDRESS>Bifrost - Reference Manual</ADDRESS></TD><TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD><TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD></TABLE><P><P><A HREF=bifrost-ref-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A><A HREF=bifrost-ref-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A><A HREF=bifrost-ref-22.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A><A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A><A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A><A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P></DIV></BODY></HTML>