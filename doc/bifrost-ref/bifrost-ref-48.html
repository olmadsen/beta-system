<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML><!-- Generated by Harlequin WebMaker 3.0.3 (Beta 10, 20-May-1997 experimental) --><HEAD><LINK REL=TOP HREF=bifrost-ref-1.html><LINK REL=UP HREF=bifrost-ref-45.html><LINK REL=PREV HREF=bifrost-ref-47.html><LINK REL=NEXT HREF=bifrost-ref-49.html><TITLE> 10.3 Interaction Facilities in the Shape</TITLE><META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.3 (Beta 10, 20-May-1997 experimental)"></HEAD><BODY><DIV><A NAME=HEADING48></A><DIV><P><A HREF=bifrost-ref-49.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A><A HREF=bifrost-ref-47.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A><A HREF=bifrost-ref-45.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A><A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A><A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A><A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P><P> 10 Interaction</P></DIV><A NAME=HEADING48-0></A><H1> 10.3 Interaction Facilities in the Shape</H1><P> Since the shape of a graphical object defines the outline of the object, the shape must define how to, interactively, create and modify itself. This is accomplished in the operations InteractiveCreate, InteractiveReshape and interactiveCombine. The operations use the general InteractionHandler and feedback primitives described above. </P><P> InteractiveCreate. </P><UL><LI> <A NAME=MARKER-2-183></A><A NAME=MARKER-2-184></A>Takes a beginning point and a modifier as arguments and starts an interaction loop letting the user define the outline of a shape. When the loop is terminated the control points of the shape are set accordingly. The operation is most commonly used from InteractiveCreateShape of a graphical object.</UL><P> InteractiveReshape. <A NAME=MARKER-2-185></A><A NAME=MARKER-2-186></A></P><UL><LI> Takes a point as argument and starts an interaction loop letting the user reshape the shape at the control point in the neighborhood of the point (obtained by using, say, HitControl). The operation is most commonly used from InteractiveReshape of a graphical object.</UL><P> InteractiveCombine. <A NAME=MARKER-2-187></A><A NAME=MARKER-2-188></A></P><UL><LI> Takes a beginning point and a modifier as argument and starts an interaction loop letting the user create a shape. When the loop is terminated the new shape is combined with the original shape by using the CombineShape operation. The operation is most commonly used from InteractiveCombineShape of a graphical object.</UL><A NAME=HEADING48-8></A><H1> 10.3.1 Neighborhood </H1><P> The concept of neighborhood is used in some of the operations presented. Neighborhood<A NAME=MARKER-2-189></A> is defined as follows: a point P is said to be in the neighborhood of another point Q if P is inside a square with Q as center and a given side length. The length of the sides defaults to 2 mm, but may be changed by the programmer.</P><A NAME=HEADING48-10></A><H1> 10.3.2 Direct changing of Control Points</H1><P> A shape can also be manipulated by adding a new control point to the shape, or by deleting a control point from the shape. The following two operations supports manipulation of control points. They are especially useful in interaction. </P><P> Insert. </P><UL><LI> Takes two points as parameter. If the first point is in the neighborhood of an existing control point, the second point is added as a new control point between the neighbor point and the next control point of the neighbor point.</UL><P> Delete. </P><UL><LI> Takes a point as parameter and, if there is one, deletes a control point in the neighborhood of the parameter point.</UL><A NAME=HEADING48-16></A><H1> 10.3.3 Shape Highlighting </H1><P> <A NAME=MARKER-2-190></A><A NAME=MARKER-2-191></A>Highlighting a graphical object is also part of interaction and interaction feedback, and is handled by the shape of the graphical object by instances of specializations of a special HiliteDesc<A NAME=MARKER-2-192></A> pattern. The HiliteDesc pattern enters three parameters: The canvas to present the feedback in, a boolean indicating whether the feedback is to be drawn or erased<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-9">[9]</A></EM>, and a transformation matrix, which will be applied to the feedback before it is drawn in the canvas. The following three predefined specializations of HiliteDesc define how to highlight and unhighlight the shape in three standard ways. The actual way of highlighting the shape is determined by the variable DrawHilite. It references one of the Hilite operations. The application programmer can easily extend the highlighting scheme by adding new operations.</P><P> HiliteControls. </P><P> An ellipse with highlighted control points:</P><P> </P><P> <IMG ALIGN=TOP SRC=bifrost-ref-48-image-61.gif></P><P> </P><UL><LI> Draws small squares at the locations of the control points. The concept of control points can in this context be a bit different than used earlier. For example, the control points of an ellipse are the four corners of the bounding box of the ellipse. These corners can naturally be manipulated interactively to modify the ellipse, in contrast to the control points that are used to generate the ellipse shape in the earlier sense. </UL><P> HiliteOutline. </P><UL><LI> Highlights the shape by drawing a curve along the shape. Draws by default the thinnest possible line, but another line width may be specified in the parameter HiliteWidth.</UL><P> HiliteBound. </P><UL><LI> Highlights the shape by drawing rectangle along the bounding box. Draws by default the thinnest possible line, but another line width may be specified in the parameter HiliteWidth.</UL><P> DrawHilite. </P><UL><LI> Refers to one of the above Hilite operations, and is the attribute of the shape, which is invoked by the Hilite and Unhilite patterns of Graphical Objects.</UL><A NAME=HEADING48-30></A><H1> 10.3.4 Query Functions</H1><P> Four operations are defined as query functions of the shape.</P><P> HitControl. </P><UL><LI> Enters a point and if this point is in the neighborhood of a control point, the control point is exited. Otherwise NONE is exited.</UL><P> ContainsPoint. </P><UL><LI> Takes a point as argument and reports whether the point is inside the shape or not.<LI>Intersects and Within. <LI> Takes a shape as argument, and reports whether it intersects or is totally inside this shape, respectively.</UL></DIV><DIV><DIV><HR><A NAME=FOOTNOTE-9>[9] </A> You may have noticed some lack of consequence in defining how to draw and erase feedback: The Graphical Object defines both Hilite and UnHilite patterns, whereas the Shape uses a boolean to control this. Also the Canvas defines primitives that allow for XOR drawing, which means, that there is no need for distinguishing between drawing and erasing of feedback. Besides the fact, that the Graphical Object needs to know the &quot;state&quot; of the feedback (drawn or ereased), the reasons for these different views on drawing versus erasing are purely historic.</DIV></DIV><DIV><HR><P><TABLE cols=3 border=0 width=100%><TR><TD width="33%" align="left"><ADDRESS>Bifrost - Reference Manual</ADDRESS></TD><TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD><TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD></TABLE><P><P><A HREF=bifrost-ref-49.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A><A HREF=bifrost-ref-47.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A><A HREF=bifrost-ref-45.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A><A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A><A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A><A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P></DIV></BODY></HTML>