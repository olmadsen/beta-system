<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>Timedate Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<BASE TARGET="_parent">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="timedate">Timedate Interface</A></H1>

<PRE CLASS=interface>
ORIGIN '~beta/basiclib/betaenv';
BODY 'private/timedatebody';

(* This library defines a 'time' (and thereby a date) and a 'period'
 * concept.
 * 
 * The library defines numerous operations on time and period values,
 * and time objects, including operations for comparisons, addition,
 * subtractions, printing and reading times and periods.
 * 
 * Given a time, you can ask for the year, day, etc. components of
 * that time, giving the date-related informations of a time.
 *)

--- lib:attributes ---
<B>time</B><A name="time.1(1098)"></A>:
  (# &lt;&lt;SLOT timeLib:attributes&gt;&gt;;
     
     (* Get and set the individual attributes of the time.
      * 
      * These are normalised, so that you can overflow attributes into
      * each other.  If you e.g. add 23 hours to a time representing
      * 7 o'clock one day, it becomes 6 o'clock the next day!  If you
      * subtract a day from the 1st of a month, you get the last day
      * of the previous month, and so on.
      *)
     
     <B>year</B><A name="time.1.year.2(1099)"></A><A name="year.2(1099)"></A>: (* set/get the year-component of this(time) *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>month</B><A name="time.1.month.2(1100)"></A><A name="month.2(1100)"></A>: (* set/get the month-component of this(time). Range: [1-12] *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>day</B><A name="time.1.day.2(1101)"></A><A name="day.2(1101)"></A>: (* set/get the day-component of this(time). Range: [1-..] *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>hour</B><A name="time.1.hour.2(1102)"></A><A name="hour.2(1102)"></A>: (* set/get the hour-component of this(time) *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>minute</B><A name="time.1.minute.2(1103)"></A><A name="minute.2(1103)"></A>: (* set/get the minute-component of this(time) *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>sec</B><A name="time.1.sec.2(1104)"></A><A name="sec.2(1104)"></A>: (* set/get the sec-component of this(time) *)
       (#
       enter (# value: @integer enter value ... #)
       exit (# value: @integer ... exit value #)
       #);
     <B>weekday</B><A name="time.1.weekday.2(1105)"></A><A name="weekday.2(1105)"></A>:
       (* Returns the weekday of this(time) as an integer.
        *    Sunday=1, Monday=2, Tuesday=3, etc.
        *)
       (#
       exit (# value: @integer ... exit value #)
       #);
     
     <B>timePredicate</B><A name="time.1.timePredicate.2(1106)"></A><A name="timePredicate.2(1106)"></A>: booleanValue(# other: @time enter other do INNER #);
     
     <B>sameYear</B><A name="time.1.sameYear.2(1107)"></A><A name="sameYear.2(1107)"></A>:
       (* returns true, iff this(time).year = other.year *)
       timePredicate(# ... #);
     <B>sameMonth</B><A name="time.1.sameMonth.2(1108)"></A><A name="sameMonth.2(1108)"></A>:
       (* returns true, if sameYear and this(time).month = other.month *)
       timePredicate(# ... #);
     <B>sameDay</B><A name="time.1.sameDay.2(1109)"></A><A name="sameDay.2(1109)"></A>:
       (* returns true, if sameMonth and this(time).day = other.day *)
       timePredicate(# ... #);
     <B>sameHour</B><A name="time.1.sameHour.2(1110)"></A><A name="sameHour.2(1110)"></A>:
       (* returns true, if sameDay and this(time).hour = other.hour *)
       timePredicate(# ... #);
     <B>sameMinute</B><A name="time.1.sameMinute.2(1111)"></A><A name="sameMinute.2(1111)"></A>:
       (* returns true, if sameHour and this(time).minute = other.minute *)
       timePredicate(# ... #);
     <B>sameSec</B><A name="time.1.sameSec.2(1112)"></A><A name="sameSec.2(1112)"></A>:
       (* returns true, if sameMinute and this(time).sec = other.sec *)
       timePredicate(# ... #);
     
     <B>equal</B><A name="time.1.equal.2(1113)"></A><A name="equal.2(1113)"></A>:
       (* returns true, iff this(time) = other *)
       sameSec(# #);
     
     <B>before</B><A name="time.1.before.2(1114)"></A><A name="before.2(1114)"></A>: (* returns true, iff this(time) &lt; other *)
       timePredicate(# ... #);
     <B>after</B><A name="time.1.after.2(1115)"></A><A name="after.2(1115)"></A>: (* returns true, iff this(time) &gt; other *)
       timePredicate(# ... #);

     <B>between</B><A name="time.1.between.2(1116)"></A><A name="between.2(1116)"></A>: booleanValue
       (* returns true, iff d1 &lt;= this(time) &lt;= d2 *)
       (# d1,d2: @time
       enter (d1,d2)
       ...
       #);
     
     <B>add</B><A name="time.1.add.2(1117)"></A><A name="add.2(1117)"></A>: (* moves this(time) forward in time by period 'p' *)
       (# p: @period
       enter p
       ...  
       #);
     
     <B>sub</B><A name="time.1.sub.2(1118)"></A><A name="sub.2(1118)"></A>: (* moves this(time) backwards in time by period 'p' *)
       (# p: @period
       enter p
       ...  
       #);
     
     <B>private</B><A name="time.1.private.2(1119)"></A><A name="private.2(1119)"></A>: @...;

  enter (# year, month, day, hour, minute, sec: @integer;
        enter (year, month, day, hour, minute, sec) 
        ... #)
  exit  (# year, month, day, hour, minute, sec: @integer;
        ...
        exit (year, month, day, hour, minute, sec) 
        #)
  #);

<B>timeNow</B><A name="timeNow.1(1120)"></A>: (* get the time right now! *)
  (# <B>t</B><A name="timeNow.1.t.2(1121)"></A><A name="t.2(1121)"></A>: @time;
  ...
  exit t   
  #);

<B>timeNowRef</B><A name="timeNowRef.1(1122)"></A>:
  (* as timeNow, except that it returns a time object reference *)
  (# <B>t</B><A name="timeNowRef.1.t.2(1123)"></A><A name="t.2(1123)"></A>: ^time
  do &amp;time[]-&gt;t[]; timeNow-&gt;t;
  exit t[]
  #);

<B>timeMin</B><A name="timeMin.1(1124)"></A>: (* Mon Nov 24 12:00:00 -4713 *) 
  (# <B>t</B><A name="timeMin.1.t.2(1125)"></A><A name="t.2(1125)"></A>: @time;
  ... 
  exit t
  #);
                
<B>timeMax</B><A name="timeMax.1(1126)"></A>: (* in principle infinity *)
  (# <B>t</B><A name="timeMax.1.t.2(1127)"></A><A name="t.2(1127)"></A>: @time;
  ... 
  exit t
  #);

<B>timeRange</B><A name="timeRange.1(1128)"></A>: (* the range within which time objects will be normalized *)
  (# exit (timeMin, timeMax) #);

<B>timeDifference</B><A name="timeDifference.1(1129)"></A>:
  (* calculates the time difference (period) between the two times t1 and t2 *)
  (# <B>t1</B><A name="timeDifference.1.t1.2(1130)"></A><A name="t1.2(1130)"></A>,<B> t2</B><A name="timeDifference.1.t2.2(1131)"></A><A name="t2.2(1131)"></A>: @time; <B>d</B><A name="timeDifference.1.d.2(1132)"></A><A name="d.2(1132)"></A>: @period
  enter (t1,t2)
  ...  
  exit d
  #);

<B>period</B><A name="period.1(1133)"></A>:
  (* Periods are used to represent a period of time.
   * 
   * Periods are measured in days, hours, minutes and seconds, and is
   * as such independent of months and years, since these measurements
   * are not time invariant (the length of a year varies, and the same
   * applies for months (28, 29, 30 or 31 days).
   * 
   * Periods can be used to represent the time difference between two
   * times, e.g. between Nov 28 22:45:15 1996 and Dec 3 23:15:30,
   * which is 05#00:30:15.
   * 
   * Periods are also used to represent a duration, e.g. the duration
   * of a standard lecture, 00#00:45:00.
   * 
   * You can add and subtract periods using pAdd and pSub
   * (e.g. '((0,01,30,00),p1)-&gt;pAdd-&gt;p2' adds one hour and 30 minutes
   * to the period 'p1' and returns the result in 'p2').
   * 
   * And you can measure the time difference between two times 't1'
   * and 't2' by '(t1,t2)-&gt;timeDifference-&gt;p'.  Finally, you can move
   * a time 't' forward or backwards in time by a given period 'p' by
   * 'p-&gt;t.add' and' p-&gt;t.sub'.
   *)
  (# &lt;&lt;SLOT periodLib: attributes&gt;&gt;;
     <B>days</B><A name="period.1.days.2(1134)"></A><A name="days.2(1134)"></A>,<B> hours</B><A name="period.1.hours.2(1135)"></A><A name="hours.2(1135)"></A>,<B> minutes</B><A name="period.1.minutes.2(1136)"></A><A name="minutes.2(1136)"></A>,<B> seconds</B><A name="period.1.seconds.2(1137)"></A><A name="seconds.2(1137)"></A>: @integer; 
  enter (days, hours, minutes, seconds)
  exit (days, hours, minutes, seconds)
  #);

<B>pAdd</B><A name="pAdd.1(1138)"></A>: (* adds two periods and returns the result *)
  (# <B>p1</B><A name="pAdd.1.p1.2(1139)"></A><A name="p1.2(1139)"></A>,<B> p2</B><A name="pAdd.1.p2.2(1140)"></A><A name="p2.2(1140)"></A>,<B> p3</B><A name="pAdd.1.p3.2(1141)"></A><A name="p3.2(1141)"></A>: @period
  enter (p1, p2)
  do p1.days+p2.days-&gt;p3.days;
     p1.hours+p2.hours-&gt;p3.hours;
     p1.minutes+p2.minutes-&gt;p3.minutes;
     p1.seconds+p2.seconds-&gt;p3.seconds;
  exit p3
  #);

<B>pSub</B><A name="pSub.1(1142)"></A>: (* subtracts two periods and returns the result *)
  (# <B>p1</B><A name="pSub.1.p1.2(1143)"></A><A name="p1.2(1143)"></A>,<B> p2</B><A name="pSub.1.p2.2(1144)"></A><A name="p2.2(1144)"></A>,<B> p3</B><A name="pSub.1.p3.2(1145)"></A><A name="p3.2(1145)"></A>: @period
  enter (p1, p2)
  do p1.days-p2.days-&gt;p3.days;
     p1.hours-p2.hours-&gt;p3.hours;
     p1.minutes-p2.minutes-&gt;p3.minutes;
     p1.seconds-p2.seconds-&gt;p3.seconds;
  exit p3
  #);

(* Input/Output utilities:
 *
 * Formats:
 *    Time:   Www Mmm Dd Yyyy Hh:Mm:Ss
 *    Date:   Www Mmm Dd Yyyy
 *    Clock:  Hh:Mm:Ss
 *    Period: Dd#Hh:Mm:Ss
 * 
 * where Www  is the weekday (Mon, Tue, etc.)
 *       Mmm  is the month (Jan, Feb, etc.)
 *       Dd   is the date
 *       Hh   is hours
 *       Mm   is minutes
 *       Ss   is seconds
 *       Yyyy is the year
 *)

<B>putTime</B><A name="putTime.1(1146)"></A>: (* prints a time value on screen *)
  screen.putTime(# do INNER #);
<B>getTime</B><A name="getTime.1(1147)"></A>: (* reads a time value from the keyboard *)
  keyboard.getTime(# do INNER #);

<B>putDate</B><A name="putDate.1(1148)"></A>: (* prints the date portion of a time value on screen *)
  screen.putDate(# do INNER #);
<B>getDate</B><A name="getDate.1(1149)"></A>:
  (* reads a date value from the keyboard.  The clock part of the
   * time value will be 00:00:00
   *)
  keyboard.getDate(# do INNER #);

<B>putClock</B><A name="putClock.1(1150)"></A>: (* prints the clock portion of a time value on screen *)
  screen.putClock(# do INNER #);
<B>getClock</B><A name="getClock.1(1151)"></A>:
  (* reads a clock value from the keyboard.  The date part of the
   * time value will be Jan 01, 0000.
   *)
  keyboard.getClock(# do INNER #);

<B>putPeriod</B><A name="putPeriod.1(1152)"></A>: (* prints a period value on screen *)
  screen.putPeriod(# #);
<B>getPeriod</B><A name="getPeriod.1(1153)"></A>: (* reads a period value from the keyboard *)
  keyboard.getPeriod(# #);

--- streamLib:attributes ---

<B>putTime</B><A name="putTime.1(1154)"></A>:  (* prints a time value on this(stream) *)
  (# <B>t</B><A name="putTime.1.t.2(1155)"></A><A name="t.2(1155)"></A>: @time;
  enter t
  ...
  #);
<B>getTime</B><A name="getTime.1(1156)"></A>: (* reads a time value from this(stream) *)
  (# <B>t</B><A name="getTime.1.t.2(1157)"></A><A name="t.2(1157)"></A>: @time;
  ...
  exit t
  #);

<B>putDate</B><A name="putDate.1(1158)"></A>: (* prints the date portion of a time value on screen *)
  (# <B>t</B><A name="putDate.1.t.2(1159)"></A><A name="t.2(1159)"></A>: @time;
  enter t
  ...
  #);
<B>getDate</B><A name="getDate.1(1160)"></A>:
  (* reads a date value from the keyboard.  The clock part of the
   * time value will be 00:00:00
   *)
  (# <B>t</B><A name="getDate.1.t.2(1161)"></A><A name="t.2(1161)"></A>: @time;
  ...
  exit t
  #);

<B>putClock</B><A name="putClock.1(1162)"></A>: (* prints the clock portion of a time value on screen *)
  (# <B>t</B><A name="putClock.1.t.2(1163)"></A><A name="t.2(1163)"></A>: @time;
  enter t
  ...
  #);
<B>getClock</B><A name="getClock.1(1164)"></A>:
  (* reads a clock value from the keyboard.  The date part
   * of the time value will be Jan 01, 0000
   *)
  (# <B>t</B><A name="getClock.1.t.2(1165)"></A><A name="t.2(1165)"></A>: @time;
  ...
  exit t
  #);

<B>putPeriod</B><A name="putPeriod.1(1166)"></A>: (* prints a period value on this(stream) *)
  (# <B>p</B><A name="putPeriod.1.p.2(1167)"></A><A name="p.2(1167)"></A>: @period
  enter p
  ...
  #);
<B>getPeriod</B><A name="getPeriod.1(1168)"></A>: (* prints a period value on this(stream) *)
  (# <B>p</B><A name="getPeriod.1.p.2(1169)"></A><A name="p.2(1169)"></A>: @period
  ...
  exit p
  #)
</PRE>
<TABLE BORDER=0 ALIGN=RIGHT>
<TR>
<TD>
<A HREF="http://validator.w3.org/check/referer">
<IMG BORDER=0 SRC="../../images/vh40.gif" ALT="Valid HTML 4.0!" HEIGHT=31 WIDTH=88>
</A>
</TD>
</TR>
</TABLE>
<BR CLEAR=right>
<P></P>
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<HR>
<P></P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left"><ADDRESS>Timedate Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size=-1>&#169; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT>
</TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
