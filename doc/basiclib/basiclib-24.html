<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>

<HEAD>
<LINK REL=TOP HREF=index.html>
<LINK REL=UP HREF=basiclib-23.html>
<LINK REL=PREV HREF=basiclib-23.html>
<LINK REL=NEXT HREF=basiclib-25.html>
<TITLE> Examples Using Exception</TITLE>
<LINK REL=stylesheet HREF=../style/miadoc.css TYPE=text/css>

</HEAD>
<BODY>


<A NAME=HEADING24></A>


<P><A HREF=basiclib-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=basiclib-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=basiclib-23.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>
<P> Exceptions and Program Termination</P>


<A NAME=HEADING24-0></A>
<H1> Examples Using Exception</H1>
<P> In order to illustrate the use of exceptions, let us return to the previous file exception example. Without using the exception handling facilities an attempt to open a non-existing file will produce the following error messages: </P>
<PRE CLASS=beta>
**** Exception processing
Error in file 'in.bet'
No such file
</PRE>
<P> Now let us see what can be done by using exceptions.</P>
<P> The binding of noSpaceError shows that a message can be added to msg. Msg could also have been overwritten, by first clearing msg (msg.clear). The binding of noSuchFileError shows how to prevent the system from stopping the execution when the program attempts to open a non-existing file. Instead the user is prompted for another file name. In fact there exists a procedure pattern (exists) that tests for the existence of a file, but this has not been used in this example. </P>
<PRE CLASS=beta>
</PRE>
<P> (# outFile: @file</P>
<P> (# noSpaceError::<BR>          (# do 'It is time to delete garbage!'-&gt;msg.putline #)#);     </P>
<P> inFile: @file </P>
<P> (# noSuchFileError:: (# do true-&gt;continue; false-&gt;OK #)#);</P>
<P> OK: @ boolean; </P>
<P> </P>
<P> do 'in.bet' -&gt; inFile.name;</P>
<P> true -&gt; OK;</P>
<P> openFile: </P>
<P> (# </P>
<P> do inFile.openRead;</P>
<P> (if not OK then</P>
<P> 'File does not exist!' -&gt;  screen.putline;</P>
<P> 'Type input file name: ' -&gt;  screen.puttext;</P>
<P> inFile.readFileName;</P>
<P> true -&gt; OK;</P>
<P> restart openFile</P>
<P> if)#);</P>
<P> </P>
<P> 'out.bet' -&gt; outFile.name;</P>
<P> outFile.openWrite;</P>
<P> readFile: </P>
<P> (# </P>
<P> do (if not inFile.eos then </P>
<P> false -&gt; inFile.gettext -&gt; outFile.puttext;</P>
<P> outFile.newline;</P>
<P> restart readFile</P>
<P> else leave readFile</P>
<P> if)#);</P>
<P> inFile.close;</P>
<P> outFile.close;</P>
<P> #)</P>
<P> In case of disk space exhausted, the following message will be printed on the screen before the program execution is stopped: </P>
<PRE CLASS=beta>
**** Exception processing
Error in file 'in.bet'
File system is full
It is time to delete garbage!
</PRE>
<P> The first line is from the general pattern exception, the second and the third lines are from the binding of noSpaceError in file and the fourth line is from the binding above, i.e. at the user level. </P>
<P> An attempt to open a non-existing file will produce the following error messages: </P>
<PRE CLASS=beta>
File does not exist!
Type input file name:
</PRE>
<P> It gives the programmer the possibility to proceed with another file name. </P>










<HR>
<P>
<TABLE cols=3 border=0 width=100%>
<TR>
<TD width="33%" align="left">
<ADDRESS>Basic Libraries - Reference Manual</ADDRESS>
</TD>
<TD width="34%" align="center"><FONT size=-1>&COPY; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="33%" align="right"><FONT size=-1><SCRIPT LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></FONT></TD>
</TABLE>
<P>
<P><A HREF=basiclib-25.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=basiclib-23.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>
<A HREF=basiclib-23.html><IMG ALIGN=BOTTOM SRC="../images/up.gif" ALT=Up BORDER=0></A>
<A HREF=../index.html><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF=index.html><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
