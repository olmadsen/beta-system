<H2> The basicSystemEnv Library</H2>
<P> The systemEnv fragment contains abstract superpattern:s for describing the BETA concepts of concurrent systems. The basic ideas are:</P>
<H3> Basic concepts</H3>
<UL>
<LI>Components (coroutines) can be executed concurrently.
<LI>A primitive <INX>semaphore</INX> pattern is available for synchronization. The operations on a semaphore must be executed as an indivisible unit.
<LI>An abstract pattern Monitor similar to the <INX>monitor</INX> proposed by Hoare and Brinch-Hansen.
<LI>An abstract pattern <INX>System</INX> is defined. System defines communication between systems by means of synchronized <INX>rendezvous</INX>. A concurrency imperative <INX>conc</INX> and an alternation imperative <INX>alt</INX> are defined for system. 
</UL>
<P> Currently an exploratory style is used to experiment with different variants of the abstract patterns. The current version is thus far from any final form of definition and may contain errors. The separation into interface and implementation has not been completely carried out.</P>
<P> The abstractions defined here are based on the ones described in chapter 12 of the BETA book. </P>

<H3> Changes from original design</H3>
<P> The implementation is identical to the design in the BETA book, except for the following changes:</P>
<UL>
<LI>The syntax of <INX>fork</INX> is
</UL>
<BETA>
S[]->fork
</BETA>
<UL>
<LI>and not S.fork.
<LI>The syntax of conc is
</UL>
<BETA>
conc(# do S1[]->start; S2[]->start; S3[]->start #)
</BETA>
<UL>
<LI>and not conc(# do S1.start; S2.start; S3.start #).
<LI>The syntax of alt is
</UL>
<BETA>
alt(#do S1[]->start; S2[]->start; S3[]->start #)
</BETA>
<UL>
<LI>and not alt(# do S1.start; S2.start; S3.start #).
</UL>

<H3> New facilities</H3>
<P> This implementation of systemenv included a few new facilities, not described in the BETA book:</P>
<UL>
<LI>semaphore have an additional attribute: tryP, which is a non-blocking call of P.
<LI>In addition to s[]-&gt;fork, s[]-&gt;kill is now possible, and in addition to pause, 100-&gt;sleep is possible.
<LI>system have a new virtual attribute, onKilled, that is invoked before the system terminates
<LI>systemenv has a new virtual attribute, deadlocked, that is invoked if all processes are deadlocked.
<LI>Finally, systemenv defines three new attributes to cope with event driven user interfaces: windowEnvType, theWindowEnv, and setWindowEnv.  See further details on cooperation with user interface environments below.
</UL>

<H3> The Concurrency is Simulated</H3>
<P> In order to implement real concurrency, an interrupt mechanism must be implemented. This is currently not done. A component/system will thus keep the control until it makes an explicit or implicit SUSPEND. An implicit SUSPEND is made when a component must wait for a semaphore, executes the pause pattern, executes the sleep pattern, or performs a blocking communication using the shellEnv distribution libraries (not described in this manual).</P>

<H3> Concurrency and User Interface Environments</H3>
<P> User interface environments (such as X Window System) are usually event-driven in the sense that actions in the program are executed as a response to user input events. To handle this, a number of separate implementations of SystemEnv exists for the different user interface libraries, such as xtEnv, awEnv, motifEnv, and guiEnv:</P>
<UL>
<LI> Use systemenv.bet as origin for programs not using event-driven user-interface libraries. 
<LI> Use ~beta/Xt/<INX>xsystemenv</INX>.bet as origin for programs using xtEnv, awEnv or motifEnv. 
<LI> Use ~beta/guienv/<INX>guienvsystemenv</INX>.bet as origin for programs using GUIenv.
</UL>
<P> See xsystemenv and guienvsystemenv for a description of using systemenv in conjunction with X and GUIenv programs, respectively.</P>
<P> For examples of using SystemEnv, see the demo directory.</P>
<P> Please note, that programs should only use one of the systemenv, xsystemenv, and guienvsystemenv fragments.  It is a fairly common mistake in systemEnv programs to find more than one of these fragments.</P>





