<H1> The file Library</H1>
<P> The file<A NAME=MARKER-2-90></A> library implements the diskEntry, file, fileRep, patterns, all used to model external storage media such as disk files.</P>
<A NAME=HEADING25-2></A>
<H1> File and diskEntry</H1>
<P> The file library implements the file pattern that is used to represent external storage media such as disk files. File is an abstract subpattern of stream, specifying the machine independent attributes of such media. Specific subpatterns: exists for the different machine types such as UNIX and Macintosh (unixFile, respectively macFile, see later).</P>
<P> The attributes of file are divided into two parts: the disk entry attributes and the contents related attributes. The disk entry attributes are located in the entry attribute of file, whereas the contents related attributes are ordinary attributes of file.</P>
<h2> Disk entry attributes</h2>
<P> The disk entry attributes are defined in the diskEntry<A NAME=MARKER-2-91></A> pattern: path, size, readable, writable, isFile, isDirectory, exists, modtime, touch, and rename. Also related to the disk entry are the following exceptions: diskEntryExistsException, diskEntryModtimeException, diskEntryTouchException, and diskEntryRenameException. These attributes are accessed through the entry attribute of a file, e.g. if aFile is a file object, then aFile.entry.modtime will return the last modification time of the associated disk file.</P>
<h2> File attributes</h2>
<P> The contents related attributes are: entry, name, touch, delete, openRead, openWrite, openAppend, openReadWrite, openReadAppend, flush, and close. Note that file also inherits all the stream attributes (further binding several of them). File also defines the following exceptions: openException, accessError, writeError, readError, noSuchFileError, fileExistsError, noSpaceError, and otherError.</P>
<A NAME=HEADING25-9></A>
<H1>The FileRep Library</H1>
<P> The fileRep<A NAME=MARKER-2-92></A> pattern is consisting of a repetition of integers and operations which makes it possible to save and restore this repetition in one chunk from a file. When saving, the repetition elements [1:top-1] are saved (top is an attribute of fileRep) and when restoring, top will become equal to range of the stored repetition. The repetition is in the R attribute, and save and restore is used for saving and restoring the repetition onto some file.</P>

<A NAME=HEADING25-10></A>
<H1>The BinFile Library</H1>
This fragment declare attributes for direct reading/writing 
of various data sizes to a file. The data is written out exactly
as is:
<PRE CLASS=beta>
   64 -> aBinFile.putLong 
</PRE>
will write the number 0x00000020 to aBinFile, whereas 
<PRE CLASS=beta>
   64 -> aBinFile.putInt
</PRE>
will write the two characters '6' (ascii 54) and '4' (ascii 52)
to the file.
<P>

The operations putBytes and getBytes allow an arbitrary
sequence of bytes to be written/read to/from a file.
E.g. 
<PRE CLASS=beta>
   buffer: [1000]@char;
   putB: @aFile.putBytes;
do ...
   (@@buffer[1],500) -> putB;
</PRE>
This will write the first 500 characters from the buffer
repetition to the file. NOTICE, that you must have a static
instance of putBytes/getBytes when using them, since they require
an address argument. If dynamic instances are used, a garbage-
collection may be triggered, and the address argument would be
illegal.
<P>

These operations are declared in FileLib, e.g. they become
usable for any file, by just including this fragment file.
However, on some platforms, the "binary" virtual of File
MUST be further bound to TrueObject for these operations
to work. The binfile pattern below adds this further binding.
<P>

You should remember this further binding if you are using 
these operations on a file, that is not a binfile.
<P>

Exceptions: 
If any of the put-operations fail, they raise the WriteError 
file-exception. If any of the get-operations fail, they raise 
the ReadError file-exception.



<HR>
<P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left">
<ADDRESS>Basic Libraries</ADDRESS>
</TD>
<TD width="20%" align="center"><FONT SIZE="-1">&#169; <A HREF="http://www.mjolner.com">Mj&oslash;lner Informatics</A></FONT></TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
<P>
<P><A HREF=basiclib-26.html><IMG ALIGN=BOTTOM SRC="../images/next.gif" ALT=Next BORDER=0></A>
<A HREF=basiclib-24.html><IMG ALIGN=BOTTOM SRC="../images/prev.gif" ALT=Previous BORDER=0></A>

<A HREF="../index.html"><IMG ALIGN=BOTTOM SRC="../images/top.gif" ALT=Top BORDER=0></A>
<A HREF="index.html#_toc"><IMG ALIGN=BOTTOM SRC="../images/content.gif" ALT=Contents BORDER=0></A>
<A HREF=inx.html><IMG ALIGN=BOTTOM SRC="../images/index.gif" ALT=Index BORDER=0></A></P>


</BODY>
</HTML>
