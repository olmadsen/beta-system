<H1> Various Other Patterns</H1>
<A NAME=HEADING10-1></A>
<H1> Control Patterns</H1>
<P> Betaenv contains three predefined control patterns: forTo, cycle and loop. They are respectively defined as: </P>

<BETA>
<INX>forTo</INX>: (* for inx in [min,max] do inner *)
  (# min,max,inx: @integer
  enter (min,max) 
  do ... inner;
     ...
  #);

<INX>cycle</INX>: (* executes inner forever *)
  (# do l:(#... inner; ...#) #);

<INX>loop</INX>: (* control pattern for while- and repeat-loop *)
  (# while:&lt; booleanValue(# do ... inner; ... #);
     until:&lt; booleanValue(# do ... inner; ... #);
  do ... inner; ...
  #)
</BETA>

<P> Recall that control patterns are procedure patterns that are to be used as superpattern:s. The first example illustrates the use of forTo in an inserted item: </P>
<BETA>
do ...    
   (3,17) -&gt; forTo(# do inx*inx -&gt; putint; newline #);
   ...</BETA>


<P> It will cause printing of the values 32, 42, ..., 172. The next example illustrates the use of cycle in the definition of another control pattern. </P>
<BETA>
countCycle: cycle 
  (* increments inx and executes inner forever *)
  (# inx: @integer
  do inx + 1 -&gt; inx;
  inner
  #);
</BETA>
<P> Finally, the following loop example reads a sequence of integers from standard input until either a non-positive integer is read or the sum of integers exceeds 1000:</P>
<BETA>
loop(# while::&lt; (# do getint-&gt;i; i&gt;0-&gt;value #);
       until::&lt; (# do sum&gt;1000-&gt;value #);
       sum, i: @integer
    do i+sum-&gt;sum
    #)
</BETA>

<A NAME=HEADING10-35></A>
<H1> Input/Output Patterns</H1>
<H2> Screen and keyboard</H2>
<P> Standard <INX>input/output</INX> is available through dynamic references to objects that are instances of the pattern stream (see later). These streams are automatically opened. Abbreviations for the most often used input/output operations are defined (e.g. put for <INX>screen</INX>.put and get for <INX>keyboard</INX>.get). </P>
<BETA>
(# j: @integer
do (for i: 5 repeat
        '? '-&gt; puttext; getint -&gt; j;
        j*j -&gt; putint; newline
   for) 
#)
</BETA>

<H2> Single character input - iget.bet</H2>
<P> The iget.bet library implements immediate character input (i.e. non-buffered input).  This is through the iget operation, which returns a single character.  iget returns as soon as a character is typed. </P>
<A NAME=HEADING10-47></A>
<H1> Command Line Arguments</H1>
<P> It is possible to let BETA programs access the command line arguments through the noOfArguments<A NAME=MARKER-2-69></A> and arguments<A NAME=MARKER-2-70></A> patterns. NoOfArguments returns the number of text atoms on the command line, including the program name. The text atoms are numbered from 1 to noOfArguments. The program name is obtained by 1 -&gt; arguments, the first argument is obtained by 2 -&gt; arguments, etc. </P>
<P> The following example displays the number of arguments of a command line followed by the arguments. </P>
<BETA>
(# 
do 'This program was called with ' -&gt; puttext;
   noOfArguments -&gt; putint; ' argument(s):' -&gt; putline;
   (for i: noOfArguments repeat
        i -&gt; arguments -&gt; puttext; ' ' -&gt; put;
   for); 
   newline;
#)</BETA>

<A NAME=HEADING10-59></A>
<H1> Object Pool</H1>
<P> The objectPool is for keeping track of unique instances of patterns. A call of the form</P>
<BETA>
<INX>objectPool</INX>.get(# type::&lt; T #) -&gt; obj[]
</BETA>

<P> will return an instance of T. The first call will create an instance of T. Subsequent calls will return this instance again. The objectPool is useful in systems where many fragments must refer to the same unique instance of a pattern T. ObjectPool also defines a scan operation which may be used for scanning the objects in the pool.  For more operations, please consult the interface descriptions later.</P>
<A NAME=HEADING10-64></A>
<H1> Concurrency - SystemEnv</H1>
<P> The current version of the Mj&oslash;lner System includes an experimental implementation of <INX>concurrency</INX>. The complete environment for concurrency is defined in the systemEnv library, described in a later chapter. However, some concurrency facilities are necessarily defined in the betaenv library. Please refer to the later chapter on the systemEnv library for details.</P>
<A NAME=HEADING10-67></A>
<H1> External Language Interface</H1>
<P> External and cStruct</P>
<P> Betaenv contains the shortInt, <INX>external</INX> and <INX>cStruct</INX> patterns for interfacing into facilities written in other languages, such as C and Pascal. Please refer to the later chapter on the external library for details.</P>





