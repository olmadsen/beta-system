<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Beta Compiler Reference Manual</TITLE>
<LINK REV="made" HREF="mailto:pa@mjolner.com">
<LINK REL="stylesheet" HREF="../style/miadoc.css" TYPE="text/css">
</HEAD>
<BODY>

<DIV>
<A NAME=HEADING2></A>

<DIV>
<P><A HREF=mia90-02-INX.html><IMG ALIGN=BOTTOM SRC=../images/next.gif ALT=Next BORDER=0></A> 
<A HREF=mia90-02-TOC.html><IMG ALIGN=BOTTOM SRC=../images/prev.gif ALT=Previous BORDER=0></A> 
<A HREF=index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=mia90-02-TOC.html><IMG ALIGN=BOTTOM SRC=../images/content.gif ALT=Contents BORDER=0></A>
<A HREF=mia90-02-INX.html><IMG ALIGN=BOTTOM SRC=../images/index.gif ALT=Index BORDER=0></A></P>
<P>BETA Compiler Reference Manual</P>
<HR>

</DIV>
<A NAME=HEADING2-0></A>
<H1>Beta Compiler Reference Manual</H1>
<A NAME=HEADING2-1></A>
<H2> <A NAME="LINK-mia90-02.mif-_Toc401563569"><A NAME=MARKER-9-12></A>1  Introduction</A></H2>
<P> This manual describes version 5.4 of the BETA compiler
(corresponding to release 4..2.1 of the Mj&oslash;lner System). The
compiler implements most parts of the BETA language as described in 
<A HREF="../bibliography/#madsen93">[Madsen 93]</A>.

There are, however, some implementation restrictions.</P>
<P> <B>The user should read section 5 for a description of the implementation restrictions and deviations from <A HREF="../bibliography/#madsen93">[Madsen 93]</A></B></P>
<P> See Appendix C for an overview of new features in v5.4 of the
compiler. The BETA compiler is accompanied by a large collection of
libraries and application frameworks. This includes a text concept,
and libraries for input/output on keyboard, screen and files, a user
interface package, a library of well-known datastructures, and a
metaprogramming system. The Mj&oslash;lner System is available for The
Power Macintosh3.2 or later, UNIX workstations such as Sun-4 (SPARC
running SunOS or Solaris), HP-9000 series 400, 700, Silicon Graphics
running IRIX 5.3, and PC&otilde;s running Windows NT, Windows 95 or
Linux.</P>

<P> On Macintosh the user interface system is implemented on top of the Macintosh Toolbox. For Macintosh there is also a library that interfaces directly to the Toolbox. </P>
<P> On UNIX, the user interface system is implemented on top of the X
Window System (X11R3 or later). A number of UNIX facilities can be
accessed via a UNIX library.</P>

<P> On Windows 95 and Windows NT, the user interface system is
implemented on top of WIN32.</P> <P> A general interface to C and
assembly language is part of the libraries/compiler. </P> <P> The rest
of this manual is organized as follows: Section 2 describes the
simplest way of using the compiler. Section 3 describes the
organization of the basic BETA libraries. Section 4 describes the
files generated by the compiler. Section 5 describes various
deviations in the implementation of BETA. Section 6 describes the
implementation of the fragment system. Section 7 describes compile-
and run-time errors. These sections contain useful information for all
users. </P> <P> The remaining sections are only for advanced users. In
section 8, a number of different arguments to the compiler are
described. In section 9, it is described how to instantiate machine
dependent configurations of a program. In section 10 it is described
how code is generated for multiple machines.</P> <A
NAME=HEADING2-11></A>

<H2> 2  Simple Use of the Compiler</H2>

The following is an example of a very small BETA program.

<H4 class=betacaption>hello.bet</H4>
<PRE class=beta>
ORIGIN '~beta/basiclib/betaenv'
--- PROGRAM: descriptor ---
(#
do 'Welcome to Mjolner' -&gt; putLine
#)
</PRE>

<P> Only the part between <CODE>(# ... #)</CODE> is BETA. The <CODE>ORIGIN</CODE> specification:</P>

<PRE class=beta>
ORIGIN '~beta/basiclib/betaenv'
</PRE>

<P> describes that the fragment <CODE>betaenv</CODE> from the BETA basic library (basiclib) is used. </P>
<P> The fragment name and category:</P>

<PRE class=beta>
--- PROGRAM: descriptor ---
</PRE>

<P> describes that the BETA program is filled into a slot in betaenv called PROGRAM. The BETA compiler is integrated with the Mj&oslash;lner fragment system. The above BETA program is an example of a BETA fragment. </P>
<P> Assume that the above BETA fragment is located in the file foo.bet. The BETA fragment may then be compiled by issuing the command </P>

<PRE class=beta>
beta foo.bet
</PRE>

which will compile, assemble<EM><A REL=FOOTNOTE
HREF="#FOOTNOTE-2">[2]</A></EM>  
and link<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-3">[3]</A></EM> the BETA
fragment. 
The final object code will be in the file foo, which may be executed.  </P>
<P> How to invoke the compiler depends on whether Macintosh, PC or
UNIX is used. Details about the different variants of the BETA
compiler may be found in 
<A HREF="../bibliography/#mia90-6">[MIA90-6]</A> for Macintosh, 
<A HREF="../bibliography/#mia90-6">[MIA94-32]</A> for Windows,  and in 
<A HREF="../bibliography/#mia90-6">[MIA90-4]</A> for UNIX. </P>
<A NAME=HEADING2-28></A>

<H2> 3 The BETA Library</H2> <P> The BETA library is a collection of
patterns and objects that include input/output, a text concept, the
user interface toolkit, the metaprogramming system, a container
library, a system library, etc. The library is organized as
fragments. </P> <P> One part of the library contains the basic
patterns and objects which are used by most programs. This basic BETA
library is called basiclib and is described in 
<A HREF="../bibliography/#mia90-8">[MIA90-8]</A>,
which also
describes the interface to C and assembly language. </P> <P> The
library basiclib contains a number of different fragments groups
containing basic patterns, a text concept, various functions and
control patterns, a file concept, etc. One of these fragment groups is
betaenv, which contains the basic patterns, the text concept, other
basic patterns and objects representing the screen and the
keyboard. All BETA programs must use betaenv, which has the form: </P>

<PRE class=beta>
(# ...
   (* A lot of useful patterns *)
   ...
   &lt;&lt;SLOT LIB: attributes&gt;&gt;
   ...
   program: &lt;&lt;SLOT program: descriptor&gt;&gt;
   theProgram: ^|program;
do ...
   &amp;|program[] -&gt; theProgram[];
   theProgram;
   ...
#)
</PRE>

The LIB slot describes where most libraries are inserted. The program
slot describes where an ordinary user program is inserted (see section
6 for more explanation of this). </P> <P> On UNIX, the BETA library is
often located in the directory <CODE>/usr/local/lib/beta</CODE>. </P>
<P> For Macintosh, the convention is that the BETA library is located
in a folder called <CODE>beta</CODE>. </P> <P> In the rest of this
manual, we assume that the basic library is located in
<CODE>/usr/local/lib/beta</CODE>. 

We also use the UNIX convention for denoting
directories with the character <CODE>/</CODE> to separate directory and file
names.</P> 

<P> The Mj&oslash;lner System contains directories for the
various libraries. The basic library basiclib is e.g. located in the
directory: </P>

<CODE> /usr/local/lib/beta/basiclib</CODE>

<P> This directory contains the fragment groups constituting
basiclib. Instead of referring to a specific version, it is possible
to refer to the current official version by means of the name
current. (This is not possible on Windows and Macintosh). </P> <P> The
Mj&oslash;lner System accepts the following abbreviation for the BETA
library:</P> <P> ~beta denotes /usr/local/lib/beta</P>

<P> The meaning of ~beta can be changed by using the
<CODE>BETALIB</CODE> environment variable, see 
<A HREF="../bibliography/#mia90-4">[MIA90-4]</A>.</P>

<P> To sum up, the file containing the current version of betaenv may be referred to by: </P>

<CODE>~beta/basiclib/betaenv</CODE>.

A user-program using betaenv may then look as follows:

<H4 class=betacaption>hello.bet</H4>
<PRE class=beta>
ORIGIN '~beta/basiclib/current/betaenv'
--- PROGRAM: descriptor ---
(#
do 'Welcome to Mjolner' -&gt; PutLine
#)
</PRE>


<P> Please note, that on Windows and Macintosh the separator in ORIGIN specifications is also /. See section 6.2.</P>
<P> Assume that the above program resides on the file foo.bet. The program may then be compiled by issuing the command: </P>
<P> </P>
<P> beta foo.bet</P>
<P> The file foo will now contain an executable version of foo.bet. </P>
<P> When developing the program,  it may be an advantage to invoke the compiler as</P>
<P> </P>

<PRE>
beta -r foo.bet
</PRE>

<P> This will run the compiler in repeating mode. After having
translated the fragments specified in the argument list, if in
repeating mode, the compiler prompts the user for the name of another
fragment to be translated. Hitting &lt;RETURN&gt; in this case will
recompiler the program last compiled. See section 8 for a survey of
the legal command line options.<EM><A REL=FOOTNOTE
HREF="#FOOTNOTE-4">[4]</A></EM></P>

<P> Please consult the BETA tutorial 
<A HREF="../bibliography/#mia90-24">[MIA90-24]</A>
 for a quick survey of
the BETA language and the basic libraries.</P>

<A NAME=HEADING2-75></A>
<H2> 4  Files Generated by the Compiler<A NAME=MARKER-2-14></A></H2>

<P> For each fragment file, a number of other files may be produced by
the compiler; let foo.bet be a BETA fragment. 
Then </P>
<DL>


<DT>foo.lst 
<DD>contains information about possible syntactic and
static semantic errors. If such errors occur, then the file contains a
pretty-print of the fragment with an indication of the error(s). See
section 7 for further information about error handling. Possible
semantic error messages are listed in appendix A.</P>

<DT>foo.ast or foo.astL 
<DD>contains the abstract syntax tree
representation of the compiled source code for big-endian and
little-endian architectures, respectively. The AST files are used by
many tools in  the Mj&oslash;lner System.</P>

<DT>foo..s 
<DD>contains the generated assembly code for the
compiled source code<EM><A REL=FOOTNOTE
HREF="#FOOTNOTE-5">[5]</A></EM>. Assembly files are located in
subdirectories named according to the machine type, to which the
source code has been compiled. Currently, the directories  sun4,
sun4s, hpux9mc, hpux9pa, nti, linux, sgi, and ppcmac can be
created. These directories are automatically created by the compiler,
if not present already. The assembly file is usually deleted by the
compiler after assembly.</P>

<DT>foo.o
<DD> contains the object code generated by the
assembler. Like foo..s, this file is placed in a subdirectory.</P>

<DT>foo.db 
<DD>contains information used by the debugger
Valhalla when debugging the foo fragment. See 
<A HREF="../bibliography/#mia90-12">[MIA90-12]</A>. 
Like
foo..s, this file is placed in a subdirectory.</P>

<DT>foo..gs and foo..go 
<DD>are generated instead of foo..s and foo..o if foo is compiled with
debug info on. This is a temporary solution and these files will not
be generated in a future release of the compiler.</P>
</DL>

<P> The above list of files is generated for each fragment group that
is included in a program. In addition, the following two files are
generated for each program:</P>

<DL>

<DT>foo 
<DD>containing the executable code for the program. </P>

<DT>foo..job 
<DD>containing directives for assembly and
linking. Like foo..s, this file is placed in a subdirectory. This file
is usually deleted by the compiler after linking.</P>
</DL>

<!---datpete: hereto -->

<P> For some implementations (e.g. Windows NT) other extensions than ..s and .o may be used. </P>
<A NAME=HEADING2-87></A>
<H2> 5  Implementation Deviations<A NAME=MARKER-2-15></A></H2>
<A NAME=HEADING2-88></A>
<H3> 5.1 The BETA Book</H3>
<P> The BETA language is described thoroughly in 
<A HREF="../bibliography/#madsen93">[Madsen 93]</A>.
</P>

<P> <B>It is prerequisite to be familiar with <A
HREF="../bibliography/#madsen93">[Madsen 93]</A> in order to use the
Mj&oslash;lner System.</B></P>

<P> This book is currently the only definition of the BETA language, but a precise language definition is being worked on.</P>
<P> A short introduction to BETA and the Mj&oslash;lner System may also be found in the Mj&oslash;lner Tutorial [MIA 94-24] and in [Knudsen94].</P>
<P> The BETA grammar is given in appendix B. </P>
<P> There are a few of deviations from [MMN93Madsen93] in the current implementation of BETA. These deviations are described below. </P>
<A NAME=HEADING2-95></A>
<H3> 5.2 Restrictions</H3>
<P> 1. The integer operations +, -, *, div, mod, =, &lt;&gt;, etc. will work on 32 bits. </P>
<P> 2. Assignment between instances of integer, and real is allowed. In assignments of reals to integers the values are truncated.</P>
<P>  Assignment between instances of integer and char is allowed. Character constants have their ASCII char value.  Assignment of an arbitrary integer value to char  instances may thus give meaningless results. </P>
<P>  Assignment between instances of integer and boolean is allowed, but will give a warning. In a future release these assignments will not be allowed and will give an error. The patterns true and false have the values 1 and 0 respectively. Assignment of an arbitrary integer value to boolean instances may thus give meaningless results. </P>
<P>  The following table shows legal combinations of operands and the result type. </P>
<P>  Entries not shown are illegal. Entries marked with <B>*</B> are illegal. Entries marked with <B>! </B>will give a warning, and will become illegal in a future release.</P>
<P> <I> Abbreviations: </I></P>
<P>   <B>int </B>means  <B>integer</B></P>
<P>   <B>bool</B> means <B>boolean</B></P>
<P>   <B>iref </B>means  <B>item reference</B></P>
<P>   <B>cref </B>means <B>component reference</B></P>
<P>   <B>sref </B>means <B>structure reference</B></P>
<P>  NONE is both an <B>iref</B>, a <B>cref</B> and an <B>sref</B>.</P>
<P>  For assignment and binary operators, the rows and columns of the tables show left and right operands respectively, and the elements of the tables show the result type.</P>
<P>  <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>iref</B></P>
</TD><TD><P> <B>cref</B></P>
</TD><TD><P> <B>sref</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>!</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>real</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>bool</B></P>
</TD><TD><P> <B>!</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>iref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>iref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>cref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>cref</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>sref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>sref</B></P>
</TD></TR></TABLE><P> 3. The relational operators =, &lt;&gt;, &lt;, etc. do only work for the basic patterns integer, real, boolean, and char and for references (only =, &lt;&gt;) I.e. E1 = E2, where E1 and E2 are instances of some user-defined pattern will not work. </P>
<P>  The following tables show legal combinations of operands and the result type.  The notation is explained in item 2 above.</P>
<P>  <B>Binary operators:  = ,</B>  <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>iref</B></P>
</TD><TD><P> <B>cref</B></P>
</TD><TD><P> <B>sref</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>!</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>real</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>bool</B></P>
</TD><TD><P> <B>!</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>iref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>cref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>sref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD></TR></TABLE><P> <B> Binary operators: &lt;,</B>  <B>&lt;=,</B>  <B>&gt;,</B>  <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>sref</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>real</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>sref</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>bool</B></P>
</TD></TR></TABLE><P> 4.  Arithmetic/logical operators.</P>
<P> <A NAME=MARKER-2-16></A> The following tables show legal combinations of operands and the result type.  The notation is explained in item 2 above.</P>
<P> <B> Binary operators:  +,</B>  <B> -,</B>  <B>*,</B>  <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>real</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR></TABLE><P> <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>int</B></P>
</TD></TR></TABLE><P> <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>int</B></P>
</TD><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>int</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>char</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>*</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>real</B></P>
</TD><TD><P> <B>real</B></P>
</TD><TD><P> <B>*</B></P>
</TD><TD><P> <B>real</B></P>
</TD></TR></TABLE><P>  <B>char</B> is likely to be eliminated as a legal operand for <B>/</B> in a future version.</P>
<P>   </P>
<P> <B> Binary operators:  and,</B>  <B>or,</B>  <B></B></P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> </P>
</TD><TD><P> <B>bool</B></P>
</TD></TR><TR VALIGN=TOP><TD><P> <B>bool</B></P>
</TD><TD><P> <B>bool</B></P>
</TD></TR></TABLE><P> <B> Unary operators:  +  -</B></P>
<P>  <B>int</B>, <B>char</B>, <B>real</B> result type is the same as operand type</P>
<P> </P>
<P> <B> Unary operator:  not</B></P>
<P>  <B>bool</B> result type is  <B>bool</B></P>
<P>  </P>
<P> 5. In if-imperatives </P>
<P>   (if E0 // E1 then ... // E2 then ... if)</P>
<P>  the exit-lists of E0, E1, E2, ... must consist of exactly one integer, real, char, boolean or reference. </P>
<P> 6. Inserted items, i.e., </P>
<P> </P>
<P>   do ...; P; ...</P>
<P>  ([MMN93Madsen93], section 5.10.2) are implemented as dynamic items (&amp;P). However, the user is urged to use dynamic items for recursion in order to ensure compatability with future releases.</P>
<P> 7. Inserted components, i.e., </P>
<P> </P>
<P>   do ...; |(# ... #); ...</P>
<P>  ([MMN93Madsen93], section 5.10.3) have not been implemented. </P>
<P> 8. Virtual superpatterns, i.e., </P>
<P>  </P>
<P>   A::&lt; (# ... #); (* Where A is some virtual *)</P>
<P>   B: A(# ... #)</P>
<P>  have not been implemented. </P>
<P>  By using a <I>final binding</I>, this problem may often be overcome like this:</P>
<P> </P>
<P>   A:: (# ... #); (* A is no longer virtual *)</P>
<P>   B: A(# ... #)</P>
<P>  The situation may also occur in a more indirect way: </P>
<P>      </P>
<P>     graph:</P>
<P>        (# node:&lt; (# ... #);</P>
<P>           nodeList: @list(# element::&lt; node #);</P>
<P>           ...</P>
<P>        #);</P>
<P> </P>
<P>    Here the virtual further binding of element in list is not allowed, since node is itself virtual. </P>
<P>    The current version of the compiler will allow final binding using a pattern that is itself virtual. That is, you can do this: </P>
<P> </P>
<P>      graph:</P>
<P>        (# node:&lt; (# ... #);</P>
<P>           nodeList: @list(# element:: node #);</P>
<P>           ...</P>
<P>        #);</P>
<P>  General virtual prefixes behave much like multiple inheritance and will not be implemented in the near future. </P>
<P> 9. The labelled compound imperative </P>
<P>   A: (L: imp1; imp2; ...; impN :L)</P>
<P>  has been eliminated from the language. Instead the following construct may be used:</P>
<P> </P>
<P>   A: (# do imp1; imp2; ... ; impN; #)</P>
<P>  Inserted items with no declarations and no superpattern will be inlined in the enclosing code. There will thus be no execution overhead compared to the old (never implemented) labelled compound imperative statement.</P>
<P> 10. Consider the following example: </P>
<P>   A: (# X: ^P; (* reference to item qualified by P *)</P>
<P>         B: ^|P (* reference to component qualified by P *)</P>
<P>      do ...</P>
<P>         this(P)[] -&gt; X[];   (* legal use of this(P)[] *) </P>
<P>         this(P)[] -&gt; R[];   (* illegal use of this(P)[] *)</P>
<P>      #)</P>
<P>  The illegal use is due to the fact that this(p)[] is considered a reference to an item object and not a component object. </P>
<P> 11. In declarations like:</P>
<P>   </P>
<P>   P: &lt;AD&gt;(# ... #);</P>
<P>   X: @&lt;AD&gt;;</P>
<P>   Y: ^&lt;AD&gt;;</P>
<P>  it is checked that &lt;AD&gt; is a <I>static</I> denotation, where <I>static</I> is defined as follows:</P>
<P>  &middot; A name A is always static</P>
<P>  &middot; In a remote-name R.A, R must be a static object</P>
<P>  &middot; Use of THIS(A).T is static</P>
<P>  &middot; Only in Y: ^P.T, can P be a pattern</P>
<P>  &middot; Denotations using R[e], and (foo).bar are <I>not</I> static</P>
<P>  This means that e.g. descriptors like:</P>
<P>   </P>
<P>   R[e].A(# ... #)</P>
<P>   (foo).bar(# ... #)</P>
<P>   R.P(# ... #) where 'R' is a dynamic ref.</P>
<P>  are only allowed in <I>imperatives</I>.</P>
<P>  For Y: ^R.P where R is a dynamic reference, the compiler will currently report a warning and suggest to use</P>
<P>   </P>
<P>   Y: ^A.P where A is the qualification of R.</P>
<P>  Note: that when using --noWarnQua, this warning will <I>not</I> be printed. A future release may change the warning to an error.</P>
<P> 12. There are some deviations with respect to the implementation of concurrency. Please consult [MIA90-8] before using the concurrency. </P>
<P> 13. It is in general not possible to use leave P or restart P where P is a pattern. P must in general be a label.  <I>However</I>, the following has been implemented:</P>
<P> </P>
<P>   P: (#</P>
<P>      do </P>
<P>      ...</P>
<P>      leave P;</P>
<P>      ... </P>
<P>      restart P;</P>
<P>      ...</P>
<P>      #)</P>
<P>  Leave/restart from an inserted item, however, is <I>not</I> supported by the current version of the compiler:</P>
<P> </P>
<P>   P: (#</P>
<P>      do </P>
<P>      ...</P>
<P>         (#</P>
<P>         do </P>
<P>            ...</P>
<P>            leave P; (* ILLEGAL *)</P>
<P>         ... </P>
<P>            restart P; (* ILLEGAL *)</P>
<P>            ...</P>
<P>         #)</P>
<P>      ...</P>
<P>      #)</P>
<P> 14. A pattern where the object descriptor is described as a slot cannot be used as a super-pattern. I.e. the following is illegal: </P>
<P>   A: &lt;&lt;SLOT Pdesc: descriptor&gt;&gt;;</P>
<P>   B: P(# ... #);  (* illegal *)</P>
<P>  Instead the following can often be used: </P>
<P>   C: (# do &lt;&lt;SLOT Pdesc: descriptor&gt;&gt; #)</P>
<P>   D: P(# ... #); (* legal *)</P>
<P> 15. The Program pattern as described in the chapter on exception handling in [MMN93Madsen93] has not been implemented. </P>
<P> 16. There are some restrictions on the use of fragments as described in section 6 below. </P>
<A NAME=HEADING2-967></A>
<H3> 5.3  Extensions</H3>
<A NAME=HEADING2-968></A>
<H4> 5.3.1  String Literals as References</H4>
<P> The pattern Text enters and exits a char-repetition. This means, that a text may be initialized using constant strings as follows:</P>
<P>      t: @text;</P>
<P>   do 'hello' -&gt; t;</P>
<P> Many operations involving texts, however, takes <I>references</I> to texts as enter/exit parameters. This is mainly for efficiency reasons.</P>
<P> To allow easy invocation of such operations on string literals, the following is <I>also</I> allowed:</P>
<P>      t: ^text;</P>
<P>   do 'hello' -&gt; t[];</P>
<P> The semantics of this is, that a text object is instantiated, initialized by the constant string, and finally assigned to the text reference.</P>
<A NAME=HEADING2-977></A>
<H4> 5.3.2  Special Ccharacters in Sstring Lliterals<A NAME=MARKER-2-17></A></H4>
<P> The following special characters are allowed in BETA string literals.</P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> \a alert (bell) character</P>
<P> \b backspace<A NAME=MARKER-2-1></A></P>
<P> \f formfeed<A NAME=MARKER-2-2></A></P>
<P> \n newline<A NAME=MARKER-2-3></A></P>
<P> \r carriage return<A NAME=MARKER-2-4></A></P>
<P> \t horizontal tab<A NAME=MARKER-2-5></A></P>
</TD><TD><P> \v vertical tab<A NAME=MARKER-2-6></A></P>
<P> \\ backslash<A NAME=MARKER-2-7></A></P>
<P> \? question mark<A NAME=MARKER-2-8></A></P>
<P> \' single quote<A NAME=MARKER-2-9></A></P>
<P> \&quot; double quote<A NAME=MARKER-2-10></A></P>
<P> \ooo octal number<A NAME=MARKER-2-11></A></P>
</TD></TR></TABLE><P> Notice that you may now use \' as an alternative to '' to include a literal quote in a string. E.g.: 'Tom\'s Cottage'.  This has the consequence, though, that to type the backslash character, you must do it as: '\\'.</P>
<P> \ooo can also be \o or \oo, provided that the character immediately following it is not a digit.</P>
<P> </P>
<A NAME=HEADING2-1005></A>
<H4> 5.3.2  Simple If<A NAME=MARKER-2-18></A></H4>
<P> Often the following If statement is used:</P>
<P> </P>
<P> b: @boolean;</P>
<P> do (if b//TRUE </P>
<P>     then ...</P>
<P>     else ...</P>
<P>    if);</P>
<P> The current version of the compiler supports an extension to the BETA language called Simple If. This extension means, that the case-selector // may be omitted, if the evaluation on the left hand side exits a boolean. That is, the above may be written</P>
<P> </P>
<P> b: @boolean;</P>
<P> do (if b </P>
<P>     then ...</P>
<P>     else ...</P>
<P>    if);</P>
<P> Like in the general if-statement, the else part if optional.</P>
<A NAME=HEADING2-1021></A>
<H4> 5.3.3  Xor Primitive</H4>
<P> An xor primitive is supported as a basic operation on booleans. That is</P>
<P> </P>
<P> b1, b2, b3: @boolean</P>
<P> do b1 xor b2 -&gt; b3</P>
<P> is possible.</P>
<A NAME=HEADING2-1027></A>
<H4> 5.4.4  Short-circuit Boolean Expressions<A NAME=MARKER-2-19></A></H4>
<P> Boolean  expressions are implemented as short-circuit.</P>
<P> That is, in</P>
<P>  B1 or B2  B2 is <I>not</I> evaluated if B1 is true</P>
<P>  B1 and B2  B2 is <I>not</I> evaluated if B1 is false</P>
<A NAME=HEADING2-1032></A>
<H4> 5.4.5  ## for Oobjects</H4>
<P> You may now use P## as an alternative to P._struc, when P is an <I>object</I>. Previously ## was only allowed for <I>patterns</I>.</P>
<P> </P>
<A NAME=HEADING2-1035></A>
<H2> 6  The Fragment System</H2>
<P> The Mj&oslash;lner System is based on the notion of fragment. The fragment system must be used for splitting a large program into smaller units (fragments). The fragment system is used to support modularization, separation of interface and implementation parts, variant control and separate compilation. It is highly recommended to use the fragment system, since this may improve the structure of the program. </P>
<P> The principles of the fragment system are described in [MMN93Madsen93]. In the following it is assumed that the reader is familiar with this description.</P>
<P> The description in [MMN93Madsen93] is slightly more idealized than the actual implementation in the Mj&oslash;lner System: </P>
<P> In [MMN93Madsen93], the syntax of the fragment language is given in terms of diagrams. The fragment language implemented by the Mj&oslash;lner System has a textual syntax. </P>
<P> In the Mj&oslash;lner System, slots have only been implemented for the syntactic categories &lt;&lt;DoPart&gt;&gt;, &lt;&lt;object and &lt;&lt;attributes&gt;&gt;. </P>
<P> A fragment form of the category &lt;&lt;attributes&gt;&gt;, may only contain pattern declarations. It cannot contain any other kind of declarations, including virtual pattern declarations, virtual pattern bindings, static or dynamic declarations.</P>
<P> The alias descriptor can be used instead of objectDescriptor. </P>
<P> In the rest of this section, details of the Mj&oslash;lner System implementation of fragments are given. </P>
<P> In the current system, fragments are organized in groups. A group is stored as a file. The BETA compiler accepts a BETA program in the form of one or more files. Each file must contain a group of fragments (i.e. one or more fragments). </P>
<A NAME=HEADING2-1045></A>
<H3> 6.1  Fragment Language Syntax</H3>
<P> In the following some of the examples of fragments from [MMN93Madsen93] will be given followed by the syntax used by the Mj&oslash;lner System. The first example shows the simplest possible BETA fragment-group: </P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME 'mini1'</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN 'betaenv'</P>
</TD></TR><TR VALIGN=TOP><TD><P> PROGRAM: descriptor</P>
</TD></TR><TR VALIGN=TOP><TD><P> (#</P>
<P> do 'Hello world!' -&gt; PutLine</P>
<P> #)</P>
</TD></TR></TABLE><P> The fragment-group is stored in the file mini1.bet, which is also the name of the fragment-group. The following syntax is is used by the Mj&oslash;lner System: </P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv'</P>
<P> -- program: descriptor --</P>
<P> (#</P>
<P> do 'Hello world!'-&gt;PutLine</P>
<P> #)</P>
<P> The origin betaenv has been expanded into a complete file name for betaenv. </P>
<P> The next example is an example defining a library fragment:</P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME 'mylib'</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN 'betaenv'</P>
</TD></TR><TR VALIGN=TOP><TD><P> LIB: attributes</P>
</TD></TR><TR VALIGN=TOP><TD><P> Hello: (# do 'Hello' -&gt; PutText #);</P>
<P> World: (# do 'World' -&gt; PutText #)</P>
</TD></TR></TABLE><P> This fragment is stored in a file mylib.bet and the corresponding syntax in the Mj&oslash;lner System is: </P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv'</P>
<P> -- LIB: attributes --</P>
<P> Hello: (# do 'Hello' -&gt; PutText #);</P>
<P> World: (# do 'World' -&gt; PutText #) </P>
<P> The following fragments is an example of a fragment including the above defined library: </P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME 'mini2'</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN 'betaenv'</P>
</TD></TR><TR VALIGN=TOP><TD><P> INCLUDE 'mylib'</P>
</TD></TR><TR VALIGN=TOP><TD><P> PROGRAM: descriptor</P>
</TD></TR><TR VALIGN=TOP><TD><P> (#</P>
<P> do Hello; World; newLine</P>
<P> #)</P>
</TD></TR></TABLE><P> This fragment is stored in a file mini2.bet and has the following syntax:</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> INCLUDE 'mylib';</P>
<P> -- program: descriptor --</P>
<P> (#</P>
<P> do Hello; World; newLine</P>
<P> #)</P>
<P> The following example shows a fragment with a body: </P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME 'textlib'</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN 'betaenv'</P>
</TD></TR><TR VALIGN=TOP><TD><P> INCLUDE 'mylib'</P>
</TD></TR><TR VALIGN=TOP><TD><P> LIB: attributes</P>
</TD></TR><TR VALIGN=TOP><TD><P> SpreadText:</P>
<P>    {A blank is inserted between all chars in the text 'T'}</P>
<P>    (# T: @text</P>
<P>    enter T</P>
<P>    &lt;&lt;SLOT SpreadText:DoPart&gt;&gt;</P>
<P>    exit T</P>
<P>    #);</P>
<P> BreakIntoLines:</P>
<P>    {'T' refers to a text which is to be split into lines.}</P>
<P>    {'w' is the width of the lines.}</P>
<P>    (# T: ^ Text; w: @ Integer</P>
<P>    enter(T[],w)</P>
<P>    &lt;&lt;SLOT BreakIntoLines: DoPart&gt;&gt;</P>
<P>    #)</P>
</TD></TR></TABLE><P> It is stored in a file textlib.bet and has the following syntax:</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> BODY 'textlibbody';</P>
<P> ---LIB: attributes---</P>
<P> SpreadText:</P>
<P>   (* A blank is inserted between all chars in the text 'T' *)</P>
<P>   (# T: @text</P>
<P>   enter T</P>
<P>   &lt;&lt;SLOT SpreadText: DoPart&gt;&gt;</P>
<P>   exit T</P>
<P>   #);</P>
<P> BreakIntoLines:</P>
<P>   (* 'T' refers to the text to be split into lines. *)</P>
<P>   (* 'w' is the width of the lines. *)</P>
<P>   (# T: ^ Text; w: @ Integer</P>
<P>   enter(T[],w)</P>
<P>   &lt;&lt;SLOT BreakIntoLines: DoPart&gt;&gt;</P>
<P>   #)</P>
<P> The body of textlib is shown in the next example:</P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME 'textlibbody'</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN 'textlib'</P>
</TD></TR><TR VALIGN=TOP><TD><P> SpreadText: DoPart</P>
</TD></TR><TR VALIGN=TOP><TD><P> do (# L: @integer</P>
<P>    do (for i: (T.length-&gt;L)-1 repeat</P>
<P>            (' ',L-i+1) -&gt; T.InsertCh</P>
<P>       for)</P>
<P>    #)</P>
</TD></TR><TR VALIGN=TOP><TD><P> BreakIntoLines: DoPart</P>
</TD></TR><TR VALIGN=TOP><TD><P> do T.scan</P>
<P>    (# sepInx,i,l: @integer;</P>
<P>    do i+1-&gt;i; l+1-&gt;l;</P>
<P>       (if (ch&lt;=' ' ) then i-&gt;sepInx if);</P>
<P>       (if l=w then</P>
<P>           (nl,sepInx)-&gt;T.InxPut;</P>
<P>           i-sepInx-&gt;l</P>
<P>       if);</P>
<P>    #);</P>
<P>    T.newline;</P>
</TD></TR></TABLE><P> This fragment is stored in a file textlibbody.bet. The corresponding syntax is:</P>
<P> ORIGIN 'textlib'</P>
<P> -- Spreadtext: DoPart --</P>
<P> do (# L: @Integer</P>
<P>    do ...</P>
<P>    #)</P>
<P> --BreakIntoLines: DoPart --</P>
<P> do ...</P>
<P> Notice, that when local variables are needed in a DoPart slot, it may be necessary to make an inserted item in the DoPart. Alternatively a Private descriptor slot may be declared in the interface, and the L attribute moved to the Private fragment, which should then be placed in textlibbody.bet too.</P>
<P> Finally a general outline of a fragment group with several include, body and fragments is shown in the next example:</P>
<TABLE BORDER=1><CAPTION><P> </P>
</CAPTION><TR VALIGN=TOP><TD><P> NAME F</P>
</TD></TR><TR VALIGN=TOP><TD><P> ORIGIN G</P>
</TD></TR><TR VALIGN=TOP><TD><P> INCLUDE A1</P>
</TD></TR><TR VALIGN=TOP><TD><P> INCLUDE A2</P>
</TD></TR><TR VALIGN=TOP><TD><P> ...</P>
</TD></TR><TR VALIGN=TOP><TD><P> INCLUDE Am</P>
</TD></TR><TR VALIGN=TOP><TD><P> BODY B1</P>
</TD></TR><TR VALIGN=TOP><TD><P> BODY B2</P>
</TD></TR><TR VALIGN=TOP><TD><P> ...</P>
</TD></TR><TR VALIGN=TOP><TD><P> BODY Bk</P>
</TD></TR><TR VALIGN=TOP><TD><P> F1: S1</P>
</TD></TR><TR VALIGN=TOP><TD><P> ff1</P>
</TD></TR><TR VALIGN=TOP><TD><P> F2: S2</P>
</TD></TR><TR VALIGN=TOP><TD><P> ff2</P>
</TD></TR><TR VALIGN=TOP><TD><P> ...</P>
</TD></TR><TR VALIGN=TOP><TD><P> Fn: Sn</P>
</TD></TR><TR VALIGN=TOP><TD><P> ffn</P>
</TD></TR></TABLE><P> This fragment group is stored in a file F.bet and the syntax is:</P>
<P> ORIGIN 'G';</P>
<P> INCLUDE 'A1' 'A2'... 'Am;</P>
<P> BODY 'B1' 'B2' ...  'Bk';</P>
<P> Prop1; Prop2; ... Propl</P>
<P> -- F1: S1 --</P>
<P> ff1</P>
<P> -- F2: S2 --</P>
<P> ff2</P>
<P> ...</P>
<P> -- Fn: Sn --</P>
<P> ffn</P>
<P> Prop1, Prop2, ..., Propl are <I>properties</I> that may be defined for a fragment. Formally the ORIGIN, INCLUDE, and BODY parts are also properties. In section 6.3 a list of possible properties is given. </P>
<A NAME=HEADING2-1377></A>
<H3> 6.2 Fragment Denotations<A NAME=MARKER-2-20></A></H3>
<P> In the examples above, terms like</P>
<P> </P>
<P> INCLUDE '~beta/basiclib/v1.61.5/betaenv'</P>
<P> were used. Below we will use the term FragmentDenotation for the 'fragment path' given in, e.g., the INCLUDE property. The other properties, that accept FragmentDenotations as arguments are explained in section 6.3.</P>
<P> Notice that a FragmentDenotation is <I>not</I> the same as a file name, although it resembles a UNIX file path, and although it normally corresponds directly to a (set of) file(s):</P>
<P> 1.  The separator in the FragmentDenotation is always the &ocirc;/&otilde; character, e.g., also for BETA programs on the Macintosh, where &ocirc;:&otilde; is used for <I>file</I> paths.</P>
<P> 2. As explained in section 3, the notation &ocirc;~beta&otilde; is legal in FragmentDenotations on all platforms, and simply means 'the place BETA is installed'. As mentioned, the meaning of &ocirc;~beta&otilde; can be controlled by using the BETALIB environment variable, please consult [MIA 90-04], [MIA 94-34], and [MIA 90-06] for details.</P>
<P> 3. The notation &ocirc;.&otilde; means &ocirc;current directory/folder&otilde; on all platforms, and the notation &ocirc;..&otilde; means &ocirc;father directory/folder&otilde;, i.e. the directory containing a given directory.</P>
<P> 4.  It is not allowed to specify an extension (e.g. &ocirc;.bet&otilde; or &ocirc;.ast&otilde;) in a FragmentDenotation.</P>
<P> There are some restrictions in the legal fragment <I>file</I> names, which also apply to the FragmentDenotations, please see section 6.6.</P>
<A NAME=HEADING2-1388></A>
<H3> 6.3  Fragment Properties </H3>
<P> The fragment system allows arbitrary properties to be associated with fragments. The BETA compiler recognizes the following properties: For most users, only ORIGIN, INCLUDE, and BODY are relevant. </P>
<P> <B>ORIGIN <I>&lt;TextConst&gt;</I></B></P>
<P>  The origin of a fragment is a fragment which is used when binding fragment-forms to slots.</P>
<P> <B>INCLUDE <I>&lt;StringList&gt;</I></B></P>
<P>  Specifies one or more fragments that are always included when using this fragment.</P>
<P> <B>BODY <I>&lt;StringList&gt;</I></B></P>
<P>  Specifies one or more fragments that fills the slots in this fragment file, but are not visible.</P>
<P> <B>MDBODY <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  Specifies one or more machine dependent fragments that fills the slots in this fragment file dependent on the machine type. See section 9 for further description.</P>
<P> <B>BUILD <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  The BUILD property is used to specify rules for keeping external (i.e. non-BETA) sources up to date, and to include the external files in the link directive. The BUILD property unifies the OBJFILE and MAKE properties. ???????See also section 9.</P>
<P> <B>OBJFILE <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  The object file is included in the linker-directive. This is typically an External library which is interfaced to via the External interface described in [MIA90-8]. See also BUILD and section 9.</P>
<P> <B>BETARUN <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  The standard BETA run-time system is replaced with the one in the object-file. See also section 9. </P>
<P> <B>MAKE <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  Specifies one or more makefiles to be executed before linking. See also section 9. The Makefile is executed relative to the directory, where the file containing the MAKE property is placed. See also BUILD</P>
<P> <B>RESOURCE <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  Specifies one or more resource files to be included in the applicatiiton. Only used on Macintosh and Windows NT platforms. See also section 9.</P>
<P> <B>LIBFILE <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  Is similar to OBJFILE, but specifies inclusion of a library. See also section 9.</P>
<P> <B>LINKOPT <I>&lt;MachineSpecificationList&gt;</I></B></P>
<P>  Machine dependent options to append to link directive for programs using the fragment. Only used on UNIX platforms. See also section 9.</P>
<P> <B>ON <I>n1 n2 ... nk</I></B></P>
<P>  The compiler switches n1 n2 ... nk (positive numbers) are set. See also section 8. </P>
<P> <B>OFF <I>n1 n2 ... nk</I></B></P>
<P>  The compiler switches n1 n2 ... nk (positive numbers) are cleared. See also section 8.</P>
<P> The terms <I>&lt;MachineSpecificationList&gt;</I>, <I>&lt;StringList&gt;</I>, and <I>&lt;TextConst&gt;</I> are syntactically explained in section 6.5.</P>
<A NAME=HEADING2-1417></A>
<H3> 6.4  Modularization of Data Structures<A NAME=MARKER-2-21></A></H3>
<P> This section gives some advices that can be used when modularizing data structures. Consider the following program library (stack.bet): </P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv' </P>
<P> --- Lib: attributes ---</P>
<P> stack:</P>
<P>  (# element:&lt; object;</P>
<P>     A: [100] ^element;</P>
<P>     top: @integer;</P>
<P>     push: </P>
<P>       (# e: ^element;</P>
<P>       enter e[]</P>
<P>       do top+1-&gt;top;</P>
<P>          e[] -&gt; A[top][];</P>
<P>       #);</P>
<P>     pop: </P>
<P>       (# e: ^element;</P>
<P>       do A[top][] -&gt; e[];</P>
<P>          top-1-&gt;top;</P>
<P>       exit e[] </P>
<P>       #);</P>
<P>     top: </P>
<P>       (# e: ^element;</P>
<P>       do A[top][]-&gt;e[];</P>
<P>       exit e[] </P>
<P>       #);</P>
<P>  #) </P>
<P> If we want to separate the interface and the implementation, this can be modularized in the following way:</P>
<P> <A NAME=MARKER-2-22></A><I>Introduce the following SLOTs:</I></P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> BODY 'stackImpl'</P>
<P> --- Lib: attributes ---</P>
<P> stack:  </P>
<P>  (# element:&lt; object;</P>
<P>     private: @&lt;&lt;SLOT private: descriptor&gt;&gt;;</P>
<P>     push: </P>
<P>      (# e: ^element;</P>
<P>      enter e[]</P>
<P>      &lt;&lt;SLOT pushBody: DoPart&gt;&gt; </P>
<P>      #);</P>
<P>     pop: </P>
<P>      (# e: ^element;</P>
<P>      &lt;&lt;SLOT popBody: DoPart&gt;&gt; </P>
<P>      exit e[] </P>
<P>      #);</P>
<P>     top: </P>
<P>      (# e: ^element;</P>
<P>      &lt;&lt;SLOT topBody: DoPart&gt;&gt; </P>
<P>      exit e[] </P>
<P>      #);</P>
<P>  #) </P>
<P> </P>
<P> <I>Create a new fragment file stackImpl.bet:</I></P>
<P> ORIGIN 'stack';</P>
<P> -- private: descriptor -- </P>
<P> (# A: [100] ^element;</P>
<P>    top: @integer;</P>
<P> #)</P>
<P> -- pushBody: DoPart -- </P>
<P> do private.top+1-&gt;private.top;</P>
<P>    e[] -&gt; private.A[private.top][];</P>
<P> -- popBody: DoPart -- </P>
<P> do private.A[private.top][] -&gt; e[];</P>
<P>    private.top-1-&gt;private.top;</P>
<P> -- topBody: DoPart -- </P>
<P> do private.A[private.top][]-&gt;e[]</P>
<P> The reason why the data representation (A and Top) is put into a descriptor slot instead of an attributes slot is that attributes slots may only contain patterns, no static items (objects) or object references. This is due to the implementation of separate compilation. Therefore it is necessary to put static items into an attribute (in this case private) that is declared by means of a descriptor slot. Because of this all accesses to the representation must be done via the private variable (see pushBody, popBody and topBody). Notice that the parameters are visible in the interface. If the operations had local variables they should not be shown in the interface. </P>
<A NAME=HEADING2-1483></A>
<H3> 6.4  Modularization with INNER</H3>
<P> Programs fragments with do-parts that contain an INNER imperative e.g.:</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> --- lib: attributes ---</P>
<P> A: (# do imp1; imp2; INNER; imp3 #)</P>
<P> can be modularized in the following two ways depending on whether the INNER imperative should be visible in the interface or not. </P>
<P> If the INNER is preferred visible in the interface, the interface fragment could look like (fooLib1.bet):</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> BODY 'fooImpl1'</P>
<P> -- lib: attributes --</P>
<P> A: (# </P>
<P>    do &lt;&lt;SLOT imp12slot: descriptor&gt;&gt;;</P>
<P>       INNER;</P>
<P>       &lt;&lt;SLOT imp3slot: descriptor&gt;&gt;</P>
<P>    #) </P>
<P> and the implementation fragment (fooImpl1.bet):</P>
<P> ORIGIN 'fooLib1'</P>
<P> -- imp12slot: descriptor --</P>
<P> (# do imp1; imp2 #)</P>
<P> -- imp3slot: descriptor --</P>
<P> (# do imp3 #)</P>
<P> In this case a DoPart slot might be used instead (fooLib2.bet):</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> BODY 'fooImpl2'</P>
<P> -- lib: attributes --</P>
<P> A: (# &lt;&lt;SLOT imp12slot: DoPart&gt;&gt; #) </P>
<P> with the implementation fragment (fooImpl2.bet):</P>
<P> ORIGIN 'fooLib2'</P>
<P> -- imp12slot: DoPart --</P>
<P> do imp1; imp2; INNER; imp3</P>
<P> Using do-parts like this, then although the INNER is not visible in the interface, the A pattern may still be specialized and behave as if the INNER was in the interface. Notice, that when specializing a pattern with no INNER in the do-part, the compiler will normally complain about this. But when the pattern being specialized contains a SLOT, the compiler will assume, that the SLOT contains an INNER. Thus it is possible to specialize the A pattern in foolib2.</P>
<P> But if the INNER imperative is placed 'inside' some structure e.g.: </P>
<P> A: (# </P>
<P>    do (if E1 </P>
<P>        // E2 then INNER</P>
<P>        // E3 then imp</P>
<P>       if)</P>
<P>    #)</P>
<P> you might not want to show the if imperative in the interface. In this case a variant of the INNER construct may be used, in which case the interface fragment could be (fooLib3.bet):</P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv';</P>
<P> BODY 'fooImpl3'</P>
<P> --- lib: attributes ---</P>
<P> A: (# do &lt;&lt;SLOT Abody: descriptor&gt;&gt; #);</P>
<P> and the implementation fragment (fooImpl3.bet):</P>
<P> ORIGIN 'fooLib3'</P>
<P> --- Abody: descriptor ---</P>
<P> (# </P>
<P> do (if E1 </P>
<P>     // E2 then INNER A</P>
<P>     // E3 then imp</P>
<P>    if)</P>
<P> #)</P>
<P> If a 'normal' INNER had been used instead of INNER A, it would mean that specializations of the pattern containing the INNER in the do-part combine the actions at this point. But the pattern containing the INNER in the do-part, in this case would be the anonymous pattern in the ABody descriptor fragment. By using INNER A, it is ensured, that the control flow descents to the specialization of A although the INNER is inside the ABody descriptor.</P>
<P> A DoPart slot could also be used here, as in the previous example.</P>
<A NAME=HEADING2-1537></A>
<H3> 6.5  Formal Syntax of Fragment Language</H3>
<P> The formal syntax of the BETA fragment-system is: </P>
<P> </P>
<P> &lt;TranslationUnit&gt; ::= &lt;Properties&gt; &lt;FormPart&gt; </P>
<P> &lt;FormPart&gt; ::* &lt;FormDef&gt;</P>
<P> &lt;FormDef&gt; ::= -- &lt;FormDefinition&gt;</P>
<P> &lt;FormDefinition&gt; ::| &lt;DescriptorForm&gt; | &lt;AttributesForm&gt; | &lt;dopart_form&gt;</P>
<P> &lt;DescriptorForm&gt; ::= &lt;NameDcl&gt; : descriptor -- &lt;ObjectDescriptor&gt; </P>
<P> &lt;AttributesForm&gt; ::= &lt;NameDcl&gt; : attributes -- &lt;Attributes&gt; </P>
<P> &lt;DopartForm&gt; ::= &lt;NameDcl&gt; : dopart -- &lt;DoPart&gt; </P>
<P> </P>
<P> &lt;Properties&gt; ::= &lt;PropertyList&gt;</P>
<P> &lt;PropertyList&gt; ::+ &lt;PropertyOpt&gt; ';' </P>
<P> &lt;PropertyOpt&gt; ::? &lt;Property&gt;</P>
<P> &lt;Property&gt;  ::| &lt;ORIGIN&gt; </P>
<P>               | &lt;INCLUDE&gt; </P>
<P>               | &lt;BODY&gt; </P>
<P>               | &lt;MDBODY&gt;</P>
<P>                | &lt;BUILD&gt; </P>
<P>               | &lt;OBJFILE&gt; </P>
<P>               | &lt;LIBFILE&gt; </P>
<P>               | &lt;LINKOPT&gt;</P>
<P>               | &lt;BETARUN&gt;</P>
<P>               | &lt;MAKE&gt;</P>
<P>               | &lt;RESOURCE&gt;</P>
<P>               | &lt;ON&gt;</P>
<P>               | &lt;OFF&gt;</P>
<P>               | &lt;Other&gt;</P>
<P> &lt;ORIGIN&gt; ::= 'ORIGIN' &lt;TextConst&gt; </P>
<P> &lt;INCLUDE&gt; ::= 'INCLUDE' &lt;StringList&gt; </P>
<P> &lt;BODY&gt; ::= 'BODY' &lt;StringList&gt; </P>
<P> &lt;MDBODY&gt; ::= 'MDBODY' &lt;MachineSpecificationList&gt; </P>
<P> &lt;BUILDOBJFILE&gt; ::= 'BUILDOBJFILE' &lt;MachineSpecificationList&gt;</P>
<P> &lt;OBJFILE&gt; ::= 'OBJFILE' &lt;MachineSpecificationList&gt; </P>
<P> &lt;LIBFILE&gt; ::= 'LIBFILE' &lt;MachineSpecificationList&gt; </P>
<P> &lt;LINKOPT&gt; ::= 'LINKOPT' &lt;MachineSpecificationList&gt; </P>
<P> &lt;BETARUN&gt; ::= 'BETARUN' &lt;MachineSpecificationList&gt; </P>
<P> &lt;MAKE&gt; ::= 'MAKE' &lt;MachineSpecificationList&gt; </P>
<P> &lt;RESOURCE&gt; ::= 'RESOURCE' &lt;MachineSpecificationList&gt; </P>
<P> &lt;ON&gt; ::= 'ON' &lt;IntegerList&gt;</P>
<P> &lt;OFF&gt; ::= 'OFF' &lt;IntegerList&gt;</P>
<P> &lt;StringList&gt;::+ &lt;TextConst&gt; </P>
<P> &lt;IntegerList&gt;::+ &lt;IntegerConst&gt; </P>
<P> &lt;MachineSpecificationList&gt;::+ &lt;MachineSpecification&gt;</P>
<P> &lt;MachineSpecification&gt; ::= &lt;Machine&gt; &lt;StringList&gt;</P>
<P> &lt;Machine&gt; ::| &lt;NameApl&gt; | &lt;Default&gt; </P>
<P> &lt;Default&gt; ::= 'default' </P>
<P> &lt;Other&gt; ::= &lt;NameDcl&gt; &lt;PropertyValueList&gt; </P>
<P> &lt;PropertyValueList&gt; ::* &lt;PropertyValue&gt; </P>
<P> &lt;PropertyValue&gt; ::= &lt;Value&gt; </P>
<P> &lt;Value&gt; ::| &lt;NameDcl&gt; | &lt;IntegerConst&gt; | &lt;TextConst&gt; </P>
<P> &lt;NameDcl&gt; ::= &lt;NameDecl&gt;</P>
<P> &lt;NameApl&gt; ::= &lt;NameAppl&gt;</P>
<P> &lt;TextConst&gt; ::= &lt;String&gt;</P>
<P> &lt;IntegerConst&gt; ::= &lt;Const&gt;</P>
<P> </P>
<P> Note that the symbol -- may consist of two or more dashes (-), and that the old style INCLUDE and fragment syntax (--INCLUDE fragment) are not described by this grammar. This old-style INCLUDE syntax is no longer supported.likely to be removed in a future release.</P>
<A NAME=HEADING2-1594></A>
<H3> 6.6 File Name Restrictions<A NAME=MARKER-2-23></A></H3>
<P> Because of implementations details, the current version of the fragment system imposes the following restrictions on file names used for BETA programs.</P>
<P> 1. It is not allowed for a program to use two files with the same name, say foo.bet (ignoring case), which both contains fragments of category Attributes.</P>
<P> 2. It is not allowed for a program to use a file named, say, foo.bet, if foo.bet contains a fragment of category Attributes, and if there is a SLOT of category ObjectDescriptor/Descriptor or DoPart named foo in any of the files involved in the program. Again case is irrelevant.</P>
<P> 3. It is not allowed to use the '-' (dash) character in fragment file names.</P>
<P> 4.  Because the FragmentDenotation separator character is &ocirc;/&otilde; it is not allowed to use the &ocirc;/&otilde; in fragment file names, not even on platforms where the file system would allow it.</P>
<P> 5.  In general, it is advisable to restrict the characters used in the fragment file names to be: a-z, A-Z, 0-9, and &ocirc;_&otilde;.  If other characters are used in the fragment file names, there is a danger, that the supporting tools (such as linkers) will complain.</P>
<P> The symptom on breaking rule 1 or 2 is typically a 'Multiple defined symbol M1FOO' and the like, in the linking phase, the symptom for breaking rule 3 is that the compiler / Valhalla [MIA 92-12] / Sif [MIA 90-11] may become confused. Finally the symptom on breaking rule 5 may be a complaint from the assembler about illegal characters.</P>
<P> Except for rule 3, these restrictions only apply to the <I>file</I> names. The <I>directories / Folders</I> containing the files, may be freely named.</P>
<A NAME=HEADING2-1603></A>
<H2> 7  Error Handling</H2>
<P> BETA programs containing errors will cause error messages during compilation. Error messages may appear during syntax analysis, static semantic analysis, code generation and assembly/linking. In addition various forms of system errors may occur. </P>
<A NAME=HEADING2-1605></A>
<H3> 7.1  Syntax Errors<A NAME=MARKER-2-24></A></H3>
<P> A syntax error is given when there are errors in the context free syntax of the BETA program. These includes missing semicolons, non-matching brackets, etc. Such errors are printed on the screen and may look as follows: </P>
<P> </P>
<P> Parse errors </P>
<P> #   1 ORIGIN '~beta/basiclib/v1.61.5/betaenv'</P>
<P> #   2 --PROGRAM: descriptor--</P>
<P> #   3 (# T: (# #);</P>
<P> #   4    X: [100) @integer;</P>
<P> # ************* ^</P>
<P> #  Expected symbols: &gt;= mod &lt; &lt;= = % &lt;&gt; &gt; -&gt; * ] div +  / </P>
<P>    xor or and</P>
<P>  File &quot;syntaxerror.bet&quot;; Line 4</P>
<P> #   3 (# T: (# #);</P>
<P> #   4    X: [100) @integer;</P>
<P> #   5 do (for i: X.range repeat</P>
<P> #   6         3-&gt;X[i];</P>
<P> #   7    if)</P>
<P> # ******* ^</P>
<P> #  Expected symbols: _NAME_ _KONST_ _STRING_ none not @@ </P>
<P>    restart leave ; (# % &amp; ( this +  inner for tos suspend</P>
<P>  File &quot;syntaxerror.bet&quot;; Line 7</P>
<P> The error message shows that there are syntax errors in lines 4 and 7. In line 4 the arrow(^) points at the place where an illegal symbol is met. The compiler gives a list of acceptable symbols. In this case ) should have been a ]. In line 7, the if should have been a for. </P>
<A NAME=HEADING2-1627></A>
<H3> 7.2  Static Semantic Errors<A NAME=MARKER-2-25></A></H3>
<P> Static semantic errors appear in situations where a name is used without being declared, where a pattern name is used as an object, etc. Each error found is printed on the screen with a small indication of the context. After the checking, a pretty print of the fragment including a precise indication of the error is generated on the lst-file (see section 4)<EM><A REL=FOOTNOTE HREF="#FOOTNOTE-6">[6]</A></EM></P>
<P> In appendix A, the semantic error messages that may be reported by the compiler are listed.  </P>
<A NAME=HEADING2-1630></A>
<H3> 7.3 Check for bound SLOTs.</H3>
<P> In general the compiler will only attempt to link, if a PROGRAM slot has been found in the dependency graph. </P>
<P> If SLOTs of category DoPart or Descriptor in the dependency graph are not bound, and linking would otherwise have happened, the compiler issues a warning, and does not attempt to link.</P>
<P> Likewise, if two or more fragments tries to bind the same SLOT, the compiler will give a warning.</P>
<A NAME=HEADING2-1634></A>
<H3> 7.43  Assembler and Linker Errors</H3>
<P> Errors may also appear during assembling and linking. The following type of errors may appear: </P>
<P> &middot; The assembler/linker complains about a corrupt ..s or .o file. This may happen if the compilation/assembly has been interrupted for some reason leaving an incomplete file. This can usually be handled by forcing a recompilation of the corresponding BETA file. (Delete the ..s <I>and</I> .o files in question)</P>
<P> &middot; The linker may report errors such as &quot;Undefined Reference&quot; or &quot;Multiply Defined Symbol&quot;. This may be due to violations of the restrictions mentioned in section 6. </P>
<P> &middot; The disk may run full during assembling or linking. Restart compilation after having obtained more disk space.</P>
<P> See also section 6.6.</P>
<A NAME=HEADING2-1640></A>
<H3> 7.54  System Errors</H3>
<P> Two kinds of system errors may appear: (1) Errors in the compiler, and (2) error situations in the operating systems. Most times a meaningful error message is given in these situations, but due to the nature of these errors this is not always the case.</P>
<P> Compiler errors should be reported to Mj&oslash;lner Informatics ApS. This can be done in one of three ways:</P>
<P> 1. Via electronic mail using the Internet address <BR>support@mjolner.dk </P>
<P> 2. By sending a fax to Mj&oslash;lner Informatics ApS at <BR>+45 86 20 12 22 </P>
<P> 3.  By issuing an ordinary mail to the address<BR>Mj&oslash;lner Informatics<BR>Science Park Aarhus,<BR>Gustav Wieds Vej 10<BR>DK-8000 <BR>Denmark</P>
<P> Operating system errors are often due to local problems. Examples of such errors may be: insufficient access to files, no more disc space, file server inaccessible, etc. </P>
<A NAME=HEADING2-1647></A>
<H3> 7.65  Run-time Errors</H3>
<P> Run-time errors are errors in the program detected during its execution. In this case an error message is given and a dump of the call stack of objects is generated on the file foo.dump if the program is named foo.</P>
<P> Consider the following fragments (note that the name of the fragments are complete UNIX file paths) </P>
<P> /usr/smith/mylib.bet:</P>
<P> </P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv'</P>
<P> --LIB: attributes--</P>
<P> lib1: (# do INNER #);</P>
<P> lib2: lib1 </P>
<P>   (# T: (# x: @integer #);</P>
<P>      R: ^T</P>
<P>   do (* &amp;T[]-&gt;R[] *) </P>
<P>      111-&gt;R.x; (* R[] is NONE *)</P>
<P>      INNER</P>
<P>   #);</P>
<P> lib3: lib2(# do 'hello'-&gt;putLine #) </P>
<P> /usr/smith/runtimeerr.bet:</P>
<P> </P>
<P> ORIGIN '~beta/basiclib/v1.61.5/betaenv'; </P>
<P> INCLUDE 'mylib' </P>
<P> --PROGRAM: descriptor--</P>
<P> (# foo1: (# do foo2 #);</P>
<P>    foo2: (# do foo.foo3 #);</P>
<P>    foo: @(# foo3: (# do lib3 #)#)</P>
<P> do foo1</P>
<P> #)</P>
<P> Execution of this program on a sun4 machine will result in the following runtimeerr.dump file: </P>
<P> </P>
<P> Beta execution aborted: Reference is none.</P>
<P> </P>
<P> Call chain: (sun4)</P>
<P> </P>
<P>   item lib3#&lt;lib2#&gt;lib1# in /usr/smith/mylib</P>
<P>     -- BETAENV-~ in ~beta/basiclib/v1.61.5/betaenv</P>
<P>   item &lt;foo3#&gt; in /usr/smith/runtimeerr</P>
<P>     -- foo# in /usr/smith/runtimeerr</P>
<P>   item &lt;foo2#&gt; in /usr/smith/runtimeerr</P>
<P>     -- PROGRAM-~ in /usr/smith/runtimeerr</P>
<P>   item &lt;foo1#&gt; in /usr/smith/runtimeerr</P>
<P>     -- PROGRAM-~ in /usr/smith/runtimeerr</P>
<P>   comp &lt;PROGRAM-~&gt; in /usr/smith/runtimeerr</P>
<P> </P>
<P>   basic component in ~beta/basiclib/v1.61.5/betaenv</P>
<P> The information in runtimeerr.dump has the following meaning: </P>
<P> &middot; The activation stack of invoked objects is shown. Each element of the stack is shown as two lines. The object and its statically enclosing object.</P>
<P> &middot; For each object, the name of the file where it is defined is also shown.</P>
<P> &middot; From the above file it can be seen that the error occurred in an instance of lib3. The description lib3#&lt;lib2#&gt;lib1 shows the superpattern chain of lib3. The braces (&lt;,&gt;) indicates that the error occurred in the do-part of lib2.</P>
<P> &middot; The symbol immediately after the name of an object shows its kind. The different possibilities are:</P>
<P> # The descriptor belongs to a pattern, e.g. P: (#...#)</P>
<P> ~ Singular named descriptor, e.g. X: @(# ... #)</P>
<P> * Singular unnamed descriptor, e.g.  ...; (# ... #);...</P>
<P> - Descriptor SLOT.</P>
<P>  Notice that, e.g. the PROGRAM SLOT is marked with both - and ~ since a descriptor SLOT gives rise to a singular named descriptor.</P>
<P> &middot; It can be seen that lib3 was called from foo3, which was called from foo2, which was called from foo1, etc. The bottom most objects are defined in betaenv</P>
<P> &middot; For each active object its enclosing object is shown, on a line starting with '--' The encloser of e.g. foo3 is foo. The rest of the objects have enclosers, which are slots.</P>
<P> &middot; For each object, the corresponding fragment file is shown. The pattern lib3 is defined in the file </P>
<P>     /usr/smith/mylib</P>
<A NAME=HEADING2-1704></A>
<H2> 8  Compiler Arguments</H2>
<P> When activating the BETA compiler, the following command line arguments are valid. </P>
<P> Most options have both a &quot;--&lt;name&gt;&quot; and a &quot;--no&lt;name&gt;&quot; form: Activate the option using  &quot;--&lt;name&gt;&quot;; deactivate the option using &quot;--no&lt;name&gt;&quot;. In the listing below, the activating form is shown first (and explained), if both exist for an option.</P>
<P> For most options, there is a short (one-character) option for the non-default form. One-character options allow multiple option characters after the &quot;-&quot; (e.g. &quot;-qwd&quot;).</P>
<P> Long option names are case insensitive, whereas one-character options are case sensitive.</P>
<P> A star (<B>*</B>) in the listings below indicates the <I>default</I> option.</P>
<P> <B>--help</B> <B>-h</B> Show a brief overview of the legal command line options</P>
<P> </P>
<P> <B>--repeat</B>  <B>-r </B> Run compiler in repeating mode. After having translated the fragments specified in the argument list, if in repeating mode, the compiler prompts the user for the name of another fragment to be translated: </P>
<P> </P>
<P>        Type Fragment File Name:</P>
<P> </P>
<P>   This interaction is continued until the compiler is explicitly killed, e.g. by sending a control-C or the end-of-stream character to the compiler process. </P>
<P>   The compiler may also be given additional options at the prompt, e.g. you may type --nolink foo.bet to translate foo.bet, but avoid linking of it.</P>
<P>   If no new fragments are specified at the prompt, the compiler will retranslate the last fragment it has translated when &lt;RETURN&gt; it typed.</P>
<P>   By using repeating mode, the compiler saves time when analyzing dependencies between fragments, since fragments are saved in memory between compilations. </P>
<P> <B>--noRepeat</B>  <B>*</B></P>
<P> </P>
<P> <B>--link</B>  <B>*</B>  Link program</P>
<P> <B>--noLink</B>  <B>-x</B> </P>
<P> </P>
<P> <B>--static</B>   Use static linking<A NAME=MARKER-2-26></A></P>
<P> <B>--dynamic</B>  <B>*</B>  Use dynamic linking<A NAME=MARKER-2-27></A></P>
<P> </P>
<P> <B>--list</B>  <B>*</B>  Generate .lst file, if semantic errors</P>
<P> <B>--noList</B>  <B>-l</B> </P>
<P> </P>
<P> <B>--debug</B>  <B>*</B>  Generate debug info to enable debugging. Include debugging information<A NAME=MARKER-2-28></A> in the generated code. This is used by the BETA debugger&Ntilde;Vvalhalla. On the other hand, using --noDebug forces the linker to strip the application , which reduces the size of the executable files by 30-50%, and also speeds up linking time. The actual machinelevel code generated for the BETA program is identical with or without debug info.???</P>
<P> <B>--noDebug</B>  <B>-d</B> </P>
<P> </P>
<P> <B>--code</B>  <B>*</B>  Generate code</P>
<P> <B>--noCode</B>  <B>-c</B> </P>
<P> </P>
<P> <B>--checkQua</B>  <B>*</B>  Generate runtime checks for QUA errors<A NAME=MARKER-2-29></A></P>
<P> <B>--noCheckQua</B>  <B>-Q</B> </P>
<P> </P>
<P> <B>--checkNone</B>  <B>*</B>  Generate runtime checks for NONE references<A NAME=MARKER-2-30></A></P>
<P> <B>--noCheckNone</B>  <B>-N</B> </P>
<P> </P>
<P> <B>--checkIndex</B>  <B>*</B>  Generate runtime checks for repetition index out of range</P>
<P> <B>--noCheckIndex</B>  <B>-I</B> </P>
<P> </P>
<P> <B>--warn</B>  <B>*</B>  Generate warnings<A NAME=MARKER-2-31></A></P>
<P> <B>--noWarn</B>  <B>-w</B> </P>
<P>  </P>
<P> <B>--warnQua</B>  <B>*</B>  Generate warnings about runtime QUA checks<A NAME=MARKER-2-32></A></P>
<P> <B>--noWarnQua</B>  <B>-q</B> </P>
<P> </P>
<P> <B>--verbose</B>   Verbose compiler info output<A NAME=MARKER-2-33></A></P>
<P> <B>--quiet</B>  <B>*</B>  Only compiler info on parse, check, etc.</P>
<P> <B>--mute</B>   No compiler info output</P>
<P> </P>
<P> <B>--traceCheck</B>   Trace the compiler during semantic checking</P>
<P> <B>--noTraceCheck</B></P>
<P> </P>
<P> <B>--traceCode</B>   Trace the compiler during code generation</P>
<P> <B>--noTraceCode</B> </P>
<P> </P>
<P> <B>--out</B>  <B>-o</B>  Specify name to use for resulting executable image</P>
<P> </P>
<P> <B>--preserve</B>  <B>-p</B>  Preserve generated .job and assembly files</P>
<P> <B>--noPreserve</B>  <B>*</B></P>
<P> </P>
<P> <B>--job</B>  <B>*</B>  Execute the ..job file</P>
<P> <B>--noJob</B>  <B>-j</B> </P>
<P> </P>
<P> <B>--switch</B>  <B>-s</B>  Set/unset one or more compiler switches. The -s option makes it possible to define one or more so-called compiler switches. Switches are specified as integers on the command line after --switch or -s, possibly terminated by a 0 (zero). Switches are used for a number of purposes: parameterization of the compiler, debugging, testing etc. The most interesting switches with respect to parameterization are listed below; notice that some of them may also be set as ordinary options.</P>
<P> &middot; <B>5</B>: Suppress code generation. I.e. only semantic checking is performed. This switch will also set switch 33. Same as <B>-c</B>.</P>
<P> &middot; <B>6</B>: Suppress linking. Same as <B>-x</B>.</P>
<P> &middot;  <B>14</B>: Do not generate run-time checks for NONE-references. Same as <B>-N</B></P>
<P> &middot;  <B>15</B>: Do not generate run-time checks for index-errors. Same as <B>-I</B>.</P>
<P> &middot;  <B>18</B>: Preserve assembly- and job-files. Same as <B>-p</B>.</P>
<P> &middot;  <B>19</B>: Suppress notification of insertion of run-time checks for qualification errors in reference assignment. Same as <B>-q</B>.</P>
<P> &middot;  <B>21</B>: Continue translation after semantic errors.</P>
<P> &middot; <B>23</B>: Preserve job-files.</P>
<P> &middot;  <B>32</B>: Do not produce .lst file in case of semantic errors. Same as <B>-l</B>.</P>
<P> &middot;  <B>33</B>: Do not execute .job file. Same as <B>-j</B>.</P>
<P> &middot;  <B>37</B>: Do not generate debugging information. Same as <B>-d</B>.</P>
<P> &middot; <B>42</B>: Do not generate run-time checks for qualification errors in reference assignment. Same as <B>-Q.</B></P>
<P> &middot;  <B>191</B>: Print each descriptor just before it is checked.</P>
<P> &middot;  <B>192</B>: Print each declaration just before it is checked.</P>
<P> &middot;  <B>193</B>: Print each imperative just before it is checked.</P>
<P> &middot; <B>308</B>: Print each declaration just before code is generated for it.</P>
<P> &middot; <B>311</B>: Print each imperative just before code is generated for it.</P>
<P> </P>
<P> <B>--linkOpts</B>   Specify text string to be appended to the link directive</P>
<P> </P>
<P> <I>fragment1 ... fragmentN<B> <BR></B></I>Arguments other than the above mentioned options are treated as the names of fragments to be translated by the compiler. It should be noted that for an option to take effect in the translation of a fragment whose name is passed as argument to the compiler, the option must appear <I>before</I> the fragment name in the argument list. </P>
<A NAME=HEADING2-1792></A>
<H2> 9 Machine Dependent Configurations</H2>
<P> In this section, the terminology of the fragment system is used freely without further explanation. The fragment system has been extended to support generic software descriptions. The same generic software description may be used to instantiate configurations for different machines. The term 'machine' covers a CPU and an operating system running on that CPU. </P>
<P> The concept of generic software descriptions is implemented by means of special 'generic properties'. Normally, a property has exactly <I>one</I> associated set of values. A generic property has <I>a number of</I> such value-sets. The idea is that the programmer can specify a value-set for each machine. These value-sets are the ones termed <I>&lt;MachineSpecificationList&gt;</I> in the formal specification of properties in section 6.3 and 6.5. As an example: </P>
<P>     OBJFILE  sun4s    'xlib.o'</P>
<P>              linux   'zlib.o'</P>
<P>              default 'wlib.o'</P>
<P> <A NAME=MARKER-2-34></A>OBJFILE is the name of a generic property. The OBJFILE property is used for inclusion in the linkage phase of external object files, e.g. produced by a C compiler. A generic property specification should be seen as a kind of 'switch/case' statement. The semantics of the above OBJFILE property is that when instantiating a configuration for the machine sun4s, the value  xlib.o is chosen. This means that the object file xlib.o  is included when linking a configuration for a sun4s machine. Similarly for linux machines. The default literal indicates that when instantiating configurations for machines <I>other</I> than sun4s  or linux , the object file wlib.o should be included. </P>
<P> Besides OBJFILE, there are the following generic properties: MAKE, BETARUN, LIBFILE, LINKOPT, RESOURCE, and MDBODY. For all of these properties, the relation between machine symbols and value-sets are specified in the same manner as described above. To be precise, the following algorithm is used when instantiating a configuration for a specific machine type, say A.</P>
<P> 1. If A matches any of the machine symbols of the generic property, the value-set associated with that particular machine symbol is chosen. If no match is possible, proceed with step 2. </P>
<P> 2. If the symbol default is specified as machine symbol, the associated value-set is chosen. If not, a warning is issued. </P>
<P> The only distinction between the different generic properties is in the interpretation of the elements of the chosen value-set. For OBJFILE, the value-set is interpreted as external object files. MAKE is meant to point out a number of so-called makefiles. These are executed just prior to the linkage phase. A makefile is often used to keep the included object files up to date with respect to the source files from which they originate. For BETARUN, the value-sets must contain exactly one element, and this element denotes the runtime system to be used in the resulting configuration. With respect to LIBFILE, the elements of the value-sets are interpreted as external libraries, e.g. the X11 library, to be included in the linkage phase. The chosen value-set in an MDBODY property denotes ordinary BETA fragments to be treated as if they had been specified by means of a normal BODY property. The MDBODY property may thus be used to specify that a fragment appears in a number of machine dependent variants. Finally, the LINKOPT property denotes arguments to append to the link-directive in the linking phase of compilations. Finally, the RESOURCE property is used (only on PC and Macintosh) to specify a set of resource files to add to the application.</P>
<P> Configurations are instantiated by the compiler, by default for the machine on which the compilation takes place. It is possible to instantiate a configuration for a machine other than the one, on which the compilation is performed ('cross-compilation'). This requires extensions to the Mj&oslash;lner System; please contact Mj&oslash;lner Informatics if this is needed.</P>
<A NAME=HEADING2-1804></A>
<H3> 9.1 BUILD Property</H3>
<P> The BUILD property unifies the OBJFILE and MAKE properties. The BUILD property is used to specify rules for keeping external (i.e. non-BETA) sources up to date, and to include the external files in the link directive.</P>
<A NAME=HEADING2-1806></A>
<H4> Syntax:</H4>
<P> BUILD &lt;machine&gt; '&lt;objectfile&gt;' </P>
<P>                 '&lt;dep1&gt;' '&lt;dep2&gt;' ... '&lt;depN&gt;' </P>
<P>                 '&lt;command&gt;';</P>
<P> where</P>
<P> &lt;machine&gt; is the target machine specification (see MDBODY description)</P>
<P> &lt;objectfile&gt; is the external objectfile to include and possibly maintain. A $$ in this specification is expanded to the machine type. This is unlike other properties, like MDBODY, where a single $ is expanded to the machine type. If a backslash (\) or a newline must be included literally in the specification, it must be quoted with backslash.</P>
<P> &lt;dep1&gt;</P>
<P> &lt;dep2&gt;</P>
<P> ...</P>
<P> &lt;depN&gt;  Are source files, that the &lt;objectfile&gt; depends on. </P>
<P> &lt;command&gt; is a command (sequence) that is executed by the compiler as it is, except for the following substitutions:</P>
<P>  $$ is expanded to the machine type, as explained above.</P>
<P>  $0 is expanded to &lt;objectfile&gt;</P>
<P>  $1 is expanded to &lt;dep1&gt;</P>
<P>  $2 is expanded to &lt;dep2&gt;</P>
<P>  ...</P>
<P>  $N is expanded to &lt;depN&gt;</P>
<P>  If a backslash (\) or a newline must be included literally in the commands, it must be quoted with backslash.</P>
<A NAME=HEADING2-1825></A>
<H4> Functionality</H4>
<P> The &lt;objectfile&gt; is included in the link directive. The compiler will execute &lt;commands&gt; if and only if</P>
<P> a.  &lt;objectfile&gt; does not exist</P>
<P> or </P>
<P> b.  any of the files &lt;dep1&gt;, &lt;dep2&gt;, ... &lt;depN&gt; are newer than an existing &lt;objectfile&gt;</P>
<P> The compiler will execute &lt;commands&gt; from the directory in which the file containing the BUILD property resides.</P>
<A NAME=HEADING2-1831></A>
<H4> Example</H4>
<P> If the object file foo.o (foo.obj) is to be generated from the foo.c file in the external directory, but also depends on the foo.h file in the external directory, you could specify this as:</P>
<P> BUILD nti     '$$/foo.obj' 'external/foo.c' 'external/foo.h' </P>
<P>               'cl -c $1 -Fo$0 -nologo -w -O2 -Zd -Zp4'</P>
<P>       macppcmac  ':$$:foo.obj' ':external:foo.c' ':external:foo.h' </P>
<P>               'MrC -D MAC -o $0 $1'</P>
<P>       default '$$/foo.o'   'external/foo.c' 'external/foo.h' </P>
<P>               '$CC -o $1 $2';</P>
<P> Notice, that regular environment variables may be used in the &lt;commands&gt; specification, e.g. in the default (UNIX) specification, the variable CC are used (on UNIX, this is always set to an appropriate value in the job-file).</P>
<A NAME=HEADING2-1840></A>
<H4> More than one build pr. fragment</H4>
<P> In general, more than one build pr. fragment will not work. The reason is that the meta-programming system combines all build directives into one directive (property). This means that:</P>
<P>  BUILD sun4s 'cc1' default 'cc2';</P>
<P>  BUILD sun4s 'cc3' default 'cc4'</P>
<P> means the same as:</P>
<P>  BUILD sun4s 'cc1' default 'cc2' sun4s 'cc3' default 'cc4'</P>
<P> BUILD 'executes' all entries for a given plaform. This means that the 2 sun4s entries will be executed for sun4s. The 2 default entries will be executed for all other platforms.</P>
<P> If the following two build entries are used:</P>
<P>  BUILD sun4s 'cc1' default 'cc2';</P>
<P>  BUILD sgi   'cc3' default 'cc4'</P>
<P> ONLY cc1 will be executed for sun4s and ONLY cc3 for sgi, and the 2 default entries for all other platforms. This is probably not what is intedended: For sun4s you would expect cc1 and cc4 to be executed and sgi, cc2 and cc3.</P>
<P> To fix this, changes in the meaning of properties in MPS must be changed.</P>
<P> Summary: more than one build directive in a fragment file will work if they have the same structure with respect to platform.</P>
<P> Alternative</P>
<P> It would be easy to implementa build directives on the form:</P>
<P>  BUILD1 sun4s 'cc1' default 'cc2';</P>
<P>  BUILD2 sgi   'cc3' default 'cc4'</P>
<P>    </P>
<P> This will give different properties and the compiler can be made to handle this. It is, however, not an ideal solution.</P>
<A NAME=HEADING2-1859></A>
<H2> 10 Code Generation for Multiple Machines</H2>
<P> When instantiating a configuration for some machine, a number of object files are produced by the compiler - one for each fragment contributing to the configuration. On most architectures, the compiler actually generates symbolic assembly code, and this code is turned into object files by means of the native assembler. The native linker is used to produce an executable image for the machine in question on basis of these object files. </P>
<A NAME=HEADING2-1861></A>
<H3> 10.1 Placement of Object Code </H3>
<P> Different machines normally use different formats for object files. The files containing object code and symbolic assembly code are always placed in a sub-directory relative to the directory containing the common source code. A sub-directory is created for each special object file format. Currently the following subdirectories are used: </P>
<P>    </P>
<P>    sun4s    SUN-4 (SPARC) running Solaris 2.x</P>
<P>    hpux9pa  HP 9000/700 running HP-UX 9.x</P>
<P>    sgi      Silicon Graphics (MIPS) running IRIX 5.3</P>
<P>    linux    PC running Linux 1.0 or later</P>
<P>    nti      PC running Windows NT or Windows 95</P>
<P>    ppcmac   Power   Macintosh 3.2 or later</P>
<P> For executable images to be activated directly, without prefixing their name with the name of a sub-directory, executable images are placed in the same directory as the common source files. It is however possible to control the naming of the executable images. This is done by means of the -o option to the compiler. </P>
<A NAME=HEADING2-1871></A>
<H3> 10.2 Macro Expansion<A NAME=MARKER-2-35></A></H3>
<P> Consider this use of the MDBODY property:</P>
<P>       MDBODY default './$/betaenvbody_$'</P>
<P> The symbol $ is expanded by the compiler. It is expanded to the name of the subdirectory into which the generated code will be placed. That is, if code is generated for a ppcmac (Macintosh) machine, the above expands to ./ppcmac/betaenvbody_mac. This may be a convenient short-hand, but may also make is possible to instantiate configurations for new machines without changing the original source code. </P>
<A NAME=HEADING2-1875></A>
<H2> Bibliography</H2>

See <A HREF="../bibliography">Mjlner System - Bibliography</A>.

<A NAME=HEADING2-1885></A>
<H2> Appendix A. Semantic Errors and Warnings</H2>
<A NAME=HEADING2-1886></A>
<H3> A.1 Semantic Errors<A NAME=MARKER-2-36></A></H3>
<P> The following is a list of semantic error messages that may be reported by the compiler. See also section 7.2.</P>
<P> 1. Name is declared more than once</P>
<P> 2. Name is not declared</P>
<P> 3. Attribute is not declared</P>
<P> 4. A pattern is expected here</P>
<P> 5. An item is expected here</P>
<P> 6. A repetition is expected here </P>
<P> 7. A simple evaluation cannot be assigned</P>
<P> 8. The lists have different lengths</P>
<P> 9. The lists have different lengths</P>
<P> 10. In &quot;leave P&quot; or &quot; restart P&quot;, &quot;P&quot; must be an enclosing label</P>
<P>  or enclosing pattern</P>
<P> 11. Illegal assignment/comparison of value, reference or repetition</P>
<P> 12. Only a single name is allowed here</P>
<P> 13. Attempt to bind V which is not virtual ( V ::&lt; T)</P>
<P> 14. In V ::&lt; T, T does not have a correct qualification</P>
<P> 15. An object is expected here</P>
<P> 16. A basic pattern cannot be used as a super-pattern</P>
<P> 17. A virtual pattern or a pattern defined as a descriptor slot cannot</P>
<P>  be used as super-pattern</P>
<P> 18. A string of length 1 is a char - NOT a text</P>
<P> 19. Illegal recursion in the definition of a pattern.</P>
<P>  One of the following type of errors have occurred:</P>
<P>  (1) There may be a circle in the super-pattern chain:</P>
<P>   A: C(# ... #); B: A(# ... #); C: B(# ... #)</P>
<P> </P>
<P>  (2) The pattern may direct or indirectly contain a static instance</P>
<P>  of itself:</P>
<P>   P: (# ...; X: @P; ... do ... #)</P>
<P> </P>
<P>  (3) The pattern may directly or indirectly contain an inserted</P>
<P>  instance of itself:</P>
<P>   P: (# ... do ...; P(# ... #); ... #) or</P>
<P>   A: (# ... P: (# R: ^A; ... do ...; R.P(# ... #); ... #) ... #)</P>
<P> </P>
<P> 20. Incompatible qualifications in assignment/comparison</P>
<P> 21. Only simple values or references may be compared</P>
<P> 22. Only simple values may appear in unary expressions</P>
<P> 23. Fatal error: virtual binding not found</P>
<P> 27. The descriptor is both used as item and component</P>
<P> 28. Static size of descriptor is larger than 32760 bytes</P>
<P> 29. Illegal recursion in object-description</P>
<P> 30. Illegal assignment to constant value/reference or repetition</P>
<P> 31. Only pattern-declarations may appear in a fragment of category 'attributes'</P>
<P> 32. A virtual qualification must be a pattern name or a descriptor</P>
<P> 33. A virtual pattern or descriptor-slot cannot be used as a component</P>
<P> 34. An enter/exit parameter of an &quot;external&quot; must be one of:</P>
<P>  integer,char,real,integer-repetitions,char-repetition,</P>
<P>  subpattern of cstruct,variable-subpattern of external</P>
<P> 35. An &quot;external&quot; can only have one exit parameter</P>
<P> 36. A sub-pattern of &quot;external&quot; cannot be used as super-pattern</P>
<P> 37. The DO-part of an &quot;external&quot; should be empty</P>
<P> 38. A repetition/for-imp range must be an integer, char or boolean evaluation</P>
<P> 39. A simple pattern cannot be used here</P>
<P> 40. Unknown inline primitive</P>
<P> 41. The superpattern of this descriptor has no INNER</P>
<P> 42. Attempt to bind a virtual in a descriptor with no superpattern</P>
<P> 43. The qualification of a variable pattern must be a pattern</P>
<P> 44. A pattern-, virtual-, variable-pattern, or reference is expected here</P>
<P> 45. A repetition name is expected here</P>
<P> 46. In &quot;this(P)&quot; or &quot;inner P&quot;, P must be the name of an enclosing pattern</P>
<P> 47. An unexpanded nonterminal must be a SLOT</P>
<P> 48. A super-pattern must be a simple pattern or a simple</P>
<P>  pattern attribute of a static object</P>
<P> 49. A simple pattern or virtual pattern cannot be assigned</P>
<P>  a structure reference</P>
<P> 50. A structure reference can only be assigned to/compared</P>
<P>  with another structure reference</P>
<P> 51. Only integer,char,boolean, real objects and references can be</P>
<P>  compared in an if-imperative</P>
<P> 52. Rename declaration has NOT been implemented</P>
<P> 53. Syntax error in number</P>
<P> 54. Name not declared. There is no corresponding virtual declaration</P>
<P> 55. A pattern with a do-part slot cannot be used as a super-pattern</P>
<P> 56. The QUA construct has not been implemented</P>
<P> 57. A basic pattern like integer, real, char, boolean, false, and true</P>
<P>  cannot be used as a super-pattern</P>
<P> 58. In a list being assigned to and being assigned from as in</P>
<P>  ...-&gt;(E1,E2,...En)-&gt; ...</P>
<P>  the elements may not be patterns</P>
<P> 59. The enter-parameters of an external call must be supplied</P>
<P> 60. The left-side of the assignment/comparison has no (exit-)list</P>
<P>  or the right-side has no (enter-)list</P>
<P> 61. An element of the left-side/right-side of the assignment/comparison</P>
<P>  has no (exit-)list or (enter-)list</P>
<P> 62. The Left-side of the assignment/comparison has no (exit-)list</P>
<P> 63. An element of the left-side of the assignment/comparison has no (exit-)list</P>
<P> 64. The right-side of the assignment/comparison has no (enter-)list</P>
<P> 65. An element of the right-side of the assignment/comparison has no (enter-)list</P>
<P> 66. A simple value (integer,boolean,char,real) cannot be assigned/compared</P>
<P>  to/with a list</P>
<P> 67. An object with no exit-list is being assigned/compared to a reference.</P>
<P>  The left-side may be missing a &quot;[]&quot; or the right-side may have a superfluous &quot;[]&quot;</P>
<P> 68. An element with no exit-list in the left-side list is being</P>
<P>  assigned/compared to a reference on the right-side</P>
<P>  The left-side may be missing a &quot;[]&quot; or the right-side may have a superfluous &quot;[]&quot;</P>
<P> 69. A reference is being assigned/compared to an object with no enter-list</P>
<P>  The right-side may be missing a &quot;[]&quot; or the left-side may have a superfluous &quot;[]&quot;</P>
<P> 70. A reference is being assigned/compared to an element on the right-side with no enter-list</P>
<P>  The right-side may be missing a &quot;[]&quot; or the left-side may have a superfluous &quot;[]&quot;</P>
<P> 80. &quot;inner P&quot; is only legal in the do-part of the pattern &quot;P&quot;</P>
<P> 81. In a computed-remote, &quot;(EV).X&quot;,&quot;EV&quot; cannot be an evaluation-list</P>
<P> 82. In a computed-remote, &quot;(EV).X&quot;, &quot;EV&quot; must have one exit-element,</P>
<P>  which must be a reference</P>
<P> 83. In a computed-remote, &quot;(EV).X&quot;, &quot;EV&quot; is not a legal evaluation</P>
<P> 84. &quot;Extend&quot; and &quot;new&quot; must have an enter-parameter</P>
<P> 85. &quot;leave P&quot; or &quot;restart P&quot;, where &quot;P&quot; is a pattern,</P>
<P>  is only legal in the do-part of &quot;P&quot;</P>
<P> 87. A repetition index must be an integer-evaluation</P>
<P> 88. The base of this number is too large</P>
<P> 89. A subpattern of &quot;data&quot; may only have declarations of the forms:</P>
<P>  &quot;X: ^T&quot; where &quot;T&quot; is subpattern of &quot;data&quot;, or</P>
<P>  &quot;X: @T&quot; where &quot;T&quot; is integer,shortint,char,boolean,real</P>
<P>   or subpattern of &quot;data&quot;</P>
<P> 90. A subpattern of &quot;data&quot; may not have a do-part</P>
<P> 91. A boolean evaluation is expected here</P>
<P> 92. Primitive operation appears in wrong context</P>
<P> 93. It is not possible to obtain a structure reference for a basic pattern</P>
<P>  like integer, real, char, boolean, false, and true or instances of these</P>
<P> 94. A virtual pattern cannot be bound to a basic pattern like</P>
<P>  integer, real, char, boolean, false, and true</P>
<P> 96. In  &quot;X: ^&lt;AD&gt;.P&quot;, &quot;Y: @&lt;AD&gt;.P&quot;, &quot;&lt;AD&gt;&quot; cannot be:</P>
<P>   a repetition element as in &quot;R[e].P&quot;</P>
<P>   a computed remote as in&quot;(R).P&quot;</P>
<P>  It must be a static object</P>
<P> 98. A sub-pattern of &quot;external&quot; must be defined as a pattern</P>
<P> 100. In &quot;V ::&lt; T&quot;, &quot;T&quot; must be a non-virtual pattern</P>
<P> 101. In &quot;V :: T&quot;, &quot;T&quot; must be a pattern</P>
<P> 102. A cycle has been detected in the super-chain of the virtual/final binding</P>
<P> 103. Incompatible types of binary operator</P>
<P> 104. Incompatible left- and right-side of assignment</P>
<P> 105. Illegal assignment to constant, literal or expression</P>
<P> 107. A virtual cannot be bound to a slot</P>
<P> 108. Illegal use of the &quot;&amp;&quot;-operator</P>
<P> 110. Illegal recursion in exit list: </P>
<P>  a pattern is referred directly or indirectly in its own exit list</P>
<P> 111. Illegal recursion in enter list: </P>
<P>  a pattern is referred directly or indirectly in its own enter list</P>
<P> 112. External entry point has a blank- or control character</P>
<P> 113. There is a circle in the super-pattern chain</P>
<P> 114.  Illegal operator &quot;!&quot;' </P>
<A NAME=HEADING2-2028></A>
<H3> A.2 Semantic Warnings</H3>
<P> 24. A run-time qualification check will be generated here</P>
<P> 25. Repetition of static components is not implemented</P>
<P> 26. Repetition of non simple patterns is not implemented</P>
<P> 86. &quot;leave P&quot; and &quot;restart P&quot;, where &quot;P&quot; is a pattern,</P>
<P>  are currently not allowed in internal descriptors of &quot;P&quot;</P>
<P> 95.  In  &quot;X: ^R.P&quot;, &quot;Y: @R.P&quot;, or &quot;Z: @R.P(#...#),</P>
<P>  &quot;R&quot; should NOT be a dynamic reference!</P>
<P>  For &quot;X: ^R.P&quot;, consider using &quot;X: ^T.P&quot;,</P>
<P>  where &quot;T&quot; is the pattern qualifying &quot;R&quot; (&quot;R: ^T&quot;).</P>
<P>  A future release may consider this to be a semantic error.</P>
<P> 97. An &quot;inner&quot; in a singular object will never be executed</P>
<P> 99. Final binding to a virtual pattern is a new facility</P>
<P>  in this version of the compiler.</P>
<P>  Please report any problems to support@mjolner.dk</P>
<P> 106. Assignment/comparison between boolean and integer</P>
<P> 109. Text has a null-char. All chars after the null-char are ignored</P>
<P> 115. Use of &quot;@@&quot; in combination with object executions in external calls is insecure'</P>
<A NAME=HEADING2-2046></A>
<H2> Appendix B. The BETA Grammar</H2>
<P> </P>
See <A HREF="../grammars/beta.html">BETA Grammar</A>.
<A NAME=HEADING2-2048></A>
<H2> Appendix C. New Features in v5.4</H2>
<P> The following new features have been implemented in version 5.4 of the compiler, compared to version 5.3.</P>
<A NAME=HEADING2-2050></A>
<H2> Index</H2>

</DIV>

<DIV>

<DIV>
<HR>

<A NAME=FOOTNOTE-1>[1] </A>
 The actual version to be used depends on the current release installed at the available hardware.
<HR>

<A NAME=FOOTNOTE-2>[2] </A>
 On mostsome platforms, binary code is generated directly. In this case, the assembly phase is omitted.
<HR>

<A NAME=FOOTNOTE-3>[3] </A>
 On mostsome platforms, binary code is generated directly. On the HP platform, the compiler generates assembly code which is assembled before linking. In this case, the assembly phase is omitted.
<HR>

<A NAME=FOOTNOTE-4>[4] </A>
 This is currently not possible on Windows and Macintosh.
<HR>

<A NAME=FOOTNOTE-5>[5] </A>
 On mostsome platforms, binary machine code is generated directly. In this case, no assembly file is generated.
<HR>

<A NAME=FOOTNOTE-6>[6] </A>
 Some semantic errors may cause the compiler to fail without generating a pretty print. There should however always be an error indication on the screen. In case the compiler fails during checking and it is not obvious for what reason, it is possible to trace the checking of declarations and imperatives using the option --traceCheck (see section 8). However, this may generate a large amount of output on the screen. The compiler may also fail during code generation. These errors may be traced using option --traceCode. However, tracing errors in this way should rarely be needed.

</DIV>

</DIV>

<DIV>


<HR>
<P>
<ADDRESS>BETA Compiler Reference Manual - 9 Jan 1999</ADDRESS>
<P><A HREF=mia90-02-INX.html><IMG ALIGN=BOTTOM SRC=../images/next.gif ALT=Next BORDER=0></A> 
<A HREF=mia90-02-TOC.html><IMG ALIGN=BOTTOM SRC=../images/prev.gif ALT=Previous BORDER=0></A> 
<A HREF=index.html><IMG ALIGN=BOTTOM SRC=../images/top.gif ALT=Top BORDER=0></A> 
<A HREF=mia90-02-TOC.html><IMG ALIGN=BOTTOM SRC=../images/content.gif ALT=Contents BORDER=0></A>
<A HREF=mia90-02-INX.html><IMG ALIGN=BOTTOM SRC=../images/index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
