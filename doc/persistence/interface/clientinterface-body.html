<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd"
>
<HTML>
<!-- Autogenerated file - do not edit -->
<HEAD>
<META http-equiv="Content-Type" CONTENT="text/html; CHARSET=ISO-8859-1">
<TITLE>Clientinterface Interface</TITLE>
<LINK REL="stylesheet" HREF="../../style/miadoc.css" TYPE="text/css">

<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript" SRC="../../javascript/hashfromparent.js"></SCRIPT>
<SCRIPT TYPE="text/javascript" LANGUAGE="JavaScript">
<!--
    CheckParent("clientinterface");
//-->
</SCRIPT>
<BASE TARGET="_parent">
</HEAD>
<BODY onLoad='HashFromParent()'>
<H1><A name="clientinterface">Clientinterface Interface</A></H1>

<PRE CLASS=interface>
(* File clientinterface.bet
 * ========================
 * 
 * PSClient
 * 
 * This file describes the interface to the clients using the 
 * shared PS. The program nonotclient is an example 
 * implementation of this client interface. 
 * The PSClient pattern is subclassed in the notificationlib.bet
 * file in order to yield the NPSClient pattern, used instead 
 * PSClient when the client wants to subscribe to notifications.
 * The program notclient is an example implementation of a client subscribing
 * to UPDATE notifications.
 *)
ORIGIN '~beta/distribution/basicshell';
-- shellEnvLib: Attributes --
<B>clientShell</B><A name="clientShell.1(38)"></A>: remoteAble
  (#
     <B>onClientStart</B><A name="clientShell.1.onClientStart.2(39)"></A><A name="onClientStart.2(39)"></A>:&lt; (# do INNER #);
     <B>getMyEnsemble</B><A name="clientShell.1.getMyEnsemble.2(40)"></A><A name="getMyEnsemble.2(40)"></A>: entry
       (# value: ^ensemble
       do clientShellPrivate.myEnsemble[]-&gt;value[]
       exit value[]
       #);
     <B>start</B><A name="clientShell.1.start.2(41)"></A><A name="start.2(41)"></A>: (#  do clientShellPrivate.start #);
     <B>clientShellPrivate</B><A name="clientShell.1.clientShellPrivate.2(42)"></A><A name="clientShellPrivate.2(42)"></A>: @
       (#
          myEnsemble: ^ensemble;
          started: @Boolean;
          clientShellThread: @|system (#  do onClientStart #);
          start:
            (# 
            do (if not started then
                   true-&gt;started;
                   THIS(shellEnv).theShell.myEnsemble[]
                     -&gt;myEnsemble[];
                   (if myEnsemble[] = none then
                       (failure,'Could not get client ensemble.')-&gt;stop;
                   if);
                   clientShellThread[]-&gt;fork;
                   
                else
                   (failure,'Attempt to restart shell.')-&gt;stop
               if)
            #)
       #)
  #);
<B>PSclient</B><A name="PSclient.1(43)"></A>: clientShell
  (#
     <B>ping</B><A name="PSclient.1.ping.2(44)"></A><A name="ping.2(44)"></A>: entry (#  do pingImpl;  #);
     <B>pingImpl</B><A name="PSclient.1.pingImpl.2(45)"></A><A name="pingImpl.2(45)"></A>:&lt; (#  do INNER ;  #);
     <B>registerClient</B><A name="PSclient.1.registerClient.2(46)"></A><A name="registerClient.2(46)"></A>: entry (#  do registerClientImpl;  #);
     <B>registerClientImpl</B><A name="PSclient.1.registerClientImpl.2(47)"></A><A name="registerClientImpl.2(47)"></A>:&lt;
       (# 
       do (THIS(PSclient)[],THIS(PSclient).ri.shellAdr.astext)
            -&gt;(getMyEnsemble).ns.put
          (# overWrite::  (#  do true-&gt;value #) #);
          INNER
       #)
  #);
<B>write</B><A name="write.1(48)"></A>: (#  exit 1 #);
<B>read</B><A name="read.1(49)"></A>: (#  exit 0 #);
<B>shared</B><A name="shared.1(50)"></A>: (#  exit 1 #);
<B>exclusive</B><A name="exclusive.1(51)"></A>: (#  exit 0 #)
</PRE>
<P></P>
<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
<HR>
<P></P>
<TABLE border=0 width="100%">
<TR>
<TD width="40%" align="left"><ADDRESS>Clientinterface Interface</ADDRESS></TD>
<TD width="20%" align="center"><FONT size="-1">&#169; <A HREF="http://www.mjolner.com" TARGET="_top">Mj&oslash;lner Informatics</A></FONT>
</TD>
<TD width="40%" align="right"><SCRIPT TYPE="text/javascript" LANGUAGE=JavaScript SRC="../../javascript/lastmod.js"></SCRIPT></TD>
</TABLE>
</BODY>
</HTML>
