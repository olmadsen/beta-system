ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/sysutils/errorscreen';
INCLUDE '~beta/sourcebrowser/ymerInterface';
INCLUDE 'knightwindow';
--lib:attributes--
KnightApplication:
  (# 
     (* stderr:@errorscreen; ( *kun for initiel debugging, fjern den!*) 
     gui: ^guienv; (* std. guienv *)
     theFragmentBrowser: ^ymerEnvInterface; (* singulaer sourcebrowser komponent *)
     ymerBrowserInt: ^ymerBrowserInterface; (* sourcebrowser window interface, 
                                             * nonsingular *)
     browserWindow: ^gui.window;            (* just the window reference in browser *)
     frejaExternalInterface: ^frejaInterface;
     theWindow:^guienv.knightWindow;
     init:
       (# 
       enter theFragmentBrowser[]
       do (* 'KnightApplication.init'->stderr.putline; *)
          theFragmentBrowser.gui[]->gui[];
          &gui.knightWindow[]->theWindow[]
       #);
     firstBrowser:
       (# 
       enter ymerBrowserInt[]
       do (* 'KnightApplication.firstBrowser'->stderr.putline; *)
          ymerBrowserInt.ymerBrowser[]->browserWindow[]; 
          ymerBrowserInt.edenv.frejaExternalInterface[]->frejaExternalInterface[];
          theKnightInterface[]->frejaExternalInterface.setKnightInterface
       #);
     theKnightInterface:@knightInterface
       (# openWindow::
            (# do theWindow.open
            #)
       #);
  #)
