(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
ORIGIN '~beta/basiclib/v1.5/betaenv';
BODY 'private/frejamenu'
     'private/frejabody'
     'private/frejaexternalinterfacebody'
     'private/frejafragmentbrowserbody'
     'private/frejaxtbody'
     '~beta/editor/v5.1.1/private/compiler'
     '~beta/editor/v5.1.1/private/nouser';
INCLUDE '~toby/beta/gpp/v2.3/gppinterface'
        '~toby/beta/gpp/v2.3/prettyprintersetup'
        '~toby/beta/gpp/v2.3/private/diagramattributes'
        '~beta/sysutils/v1.5/envstring'
        '~beta/Xt/v1.9/xlib'
        '~beta/editor/v5.1.1/ymersiflib'
        '~beta/guienv/v1.4/utils/designsupport'
        '~beta/editor/v5.1.1/frejasifcomm';
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
(* OBJFILE default '~beta/designOA/v1.0/$/getarg.o';*)
(*'private/display'*)
-- lib: Attributes --
freja:
  (#
     theFragmentBrowser: @FragmentBrowser
       (#
          ymerBrowserWindow::< 
            (#
               browserTitle::  (#  <<SLOT frejaBrowserTitle:DoPart>> #);
               menubarType::< 
                 (#
                    groupFileMenuType:: 
                      (#
                         open:: 
                           (# 
                           <<SLOT frejaGroupFileMenuTypeOpen:DoPart>>
                           #)
                      #);
                    groupPerformMenuType:: 
                      (#
                         open::< 
                           (# 
                           <<SLOT frejaGroupPerformMenuTypeOpen:DoPart>>
                           #)
                      #);
                    open::< 
                      (# 
                      <<SLOT frejaMenubarTypeOpen:DoPart>>
                      #)
                 #);
               open::  (#  <<SLOT frejaYmerBrowserWindowOpen:DoPart>> #)
            #);
          isBETAsif::< 
            (# 
            <<SLOT frejaIsBETAsif:DoPart>>
            #);
          frejaInclude::<  (#  <<SLOT frejaFrejaInclude:DoPart>> #);
          init::< 
            (# 
            <<SLOT frejaFragmentBrowserInit:DoPart>>
            #)
       <<SLOT frejaTheFragmentBrowserDoPart:DoPart>>
       #);
     theExternalInterface:
       @frejaExternalInterface
       (#
          newFragment::< 
            (#  <<SLOT theExternalInterfaceNewFragment:DoPart>> #);
          astReplaced::< 
            (#
               theOADDocument:
                 ^theModel.
                    theGraphicalInterface.theDesignInterface.OADDocument;
               theOADPage: ^theOADDocument.OADPage;
               thePage: ^theOADDocument.Page
            <<SLOT theExternalInterfaceAstReplaced:DoPart>>
            #);
          listElementInserted::<
           
            (#
               theOADDocument:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument;
               theOADPage: ^theOADDocument.OADPage;
               thePage: ^theOADDocument.Page
            <<SLOT theExternalInterfaceListElementInserted:DoPart>>
            #);
          listElementsDeleted::< 
            (#
               theOADDocument:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument;
               theOADPage: ^theOADDocument.OADPage;
               thePage: ^theOADDocument.Page
            <<SLOT theExternalInterfaceListElementsDeleted:DoPart>>
            #);
          listElementsReplaced::< 
            (#
               theOADDocument:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument;
               theOADPage: ^theOADDocument.OADPage;
               thePage: ^theOADDocument.Page
            <<SLOT theExternalInterfaceListElementsReplaced:DoPart>>
            #);
          focusChanged::< 
            (#
               theOADDocument:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument;
               theOADPage: ^theOADDocument.OADPage;
               thePage: ^theOADDocument.Page;
               status: @boolean
            <<SLOT theExternalInterfaceFocusChanged:DoPart>>
            #);
          openForm::< 
            (# 
            <<SLOT theExternalInterfaceOpenForm:DoPart>>
            #);
          groupChecked::< 
            (#
               theOADDoc:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument
            <<SLOT theExternalInterfaceGroupChecked:DoPart>>
            #);
          propertiesChanged::< 
            (#
               theDoc:
                 ^theModel.
                    theGraphicalInterface.theDesignInterface.OADDocument
            <<SLOT theExternalInterfacePropertiesChanged:DoPart>>
            #);
          fragmentChanged::< 
            (#
               theDoc:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument
            <<SLOT theExternalInterfaceFragmentChanged:DoPart>>
            #);
          fragmentInserted::<
           
            (#
               theDoc:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument
            <<SLOT theExternalInterfaceFragmentInserted:DoPart>>
            #);
          fragmentDeleted::<
           
            (#
               theDoc:
                 ^theModel.theGraphicalInterface.theDesignInterface.OADDocument
            <<SLOT theExternalInterfaceFragmentDeleted:DoPart>>
            #)
       #);
     sdeModel:<
       (#
          GraphicalInterface:< gppInterface
            (#
               DesignInterface::< 
                 (#
                    ShowSIFSelection: @Boolean;
                    OADDocument::< 
                      (#
                         OADPage::< 
                           (#
                              canUndo,canPaste,canListInsert: @Boolean;
                              theFragmentNode: ^PatternDiagramNode;
                              SpecializationConnector: Connector
                                (#
                                   onInit::< 
                                     (# node1,node2: ^node
                                     do
                                        <<SLOT SpecializationConnectorOnInit:Descriptor>>;
                                        
                                     #)
                                #);
                              BindingConnector: Connector
                                (#
                                   onInit::< 
                                     (# node1,node2: ^node
                                     do
                                        <<SLOT BindingConnectorOnInit:Descriptor>>;
                                        
                                     #)
                                #);
                              FinalBindingConnector: Connector
                                (#
                                   onInit::< 
                                     (# node1,node2: ^node
                                     do
                                        <<SLOT FinalBindingConnectorOnInit:Descriptor>>;
                                        
                                     #)
                                #);
                              PatternVariableConnector: Connector
                                (#
                                   onInit::< 
                                     (# node1,node2: ^node
                                     do
                                        <<SLOT PatternVariableConnectorOnInit:Descriptor>>;
                                        
                                     #)
                                #);
                              getStatus:
                                (# theObject: ^DesignObject; 
                                enter theObject[]
                                do <<SLOT GetStatusFromSif:Descriptor>>; 
                                #);
                              doExpand:
                                (#
                                   synCatNo:
                                     @Integer;
                                   normal: @Boolean;
                                   
                                enter (synCatNo,normal)
                                do <<SLOT DoExpand:Descriptor>>; 
                                #);
                              doExpandLexem:
                                (# name: @Text; 
                                enter name
                                do
                                   <<SLOT DoExpandLexem:Descriptor>>;
                                   
                                #);
                              changedFocus::< 
                                (#  do <<SLOT ChangedFocus:Descriptor>> #);
                              declarationTextChanged::< 
                                (# 
                                do <<SLOT declarationTextChanged:Descriptor>>
                                #);
                              openFormInSif::< 
                                (#  do <<SLOT openFormInSif:Descriptor>> #);
                              copy::<  (#  do <<SLOT copy:Descriptor>> #);
                              onFocusChange:<
                                (#
                                   node: ^mps.ast;
                                   length: @Integer;
                                   status: @Boolean;
                                   
                                enter (node[],length)
                                do
                                   <<SLOT onFocusChange:Descriptor>>
                                exit status
                                #);
                              private: @<<SLOT FrejaOADPagePrivate:Descriptor>>
                           #);
                         readOnlyModeOn: @boolean;
                         doOADPaste,doObjectPaste,pasteGroupWithOAD: @boolean;
                         setReadOnly::< 
                           (#  <<SLOT frejaSetReadOnly:DoPart>> #);
                         unsetReadOnly::< 
                           (# 
                           <<SLOT frejaUnsetReadOnly:DoPart>>
                           #);
                         checkEditMenuTextEdit::< 
                           (#  <<SLOT FrejaCheckEditMenuTextEdit:DoPart>> #);
                         openAggregationDialog::< 
                           (#  <<SLOT openAggregationDialog:DoPart>> #);
                         FrejaEditMenu:
                           @UserMenu
                           (#
                              myItem: item
                                (#
                                   myDisable:
                                     (#  do true->doNotEnable; disable #);
                                   myEnable:
                                     (#  do false->doNotEnable; enable #)
                                #);
                              iUndo: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaUndoItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iUndoGraphicalOperation: @item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaUndoGraphicalOperationItem:Descriptor>>;
                                        
                                     #)
                                #);
                              iCut: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaCutItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iCopy: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaCopyItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iPasteBefore: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaPasteBeforeItem:Descriptor>>
                                     #)
                                #);
                              iPaste: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaPasteItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iPasteAfter:
                                @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT FrejaPasteAfterItem:Descriptor>>
                                     #)
                                #);
                              iClear: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaClearItem:Descriptor>>;
                                        INNER
                                          ;
                                        
                                     #);
                                   init::< 
                                     (# 
                                     do
                                        disable
                                     #)
                                #);
                              sep1,sep2,sep3,sep4,sep5: @Item;
                              insertBeforeItem: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT InsertBeforeHit:Descriptor>>
                                     #)
                                #);
                              insertAfter:
                                @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT InsertAfterHit:Descriptor>>
                                     #)
                                #);
                              TextModeOn:
                                @Boolean;
                              iEditName: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     <<SLOT FrejaEditMenuIEditName:DoPart>>
                                     #)
                                #);
                              iTextEdit:
                                @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaEditMenuITextEdit:Descriptor>>
                                     #)
                                #);
                              iEditOtherText: @item
                                (#
                                   hit::< 
                                     (#  <<SLOT iEditOtherText:DoPart>> #)
                                #);
                              iRevertTextEdit:
                                @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT iRevertTextEdit:Descriptor>>
                                     #)
                                #);
                              iRemoveOptionals: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaRemoveOptionalsItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iShowOptionals: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT FrejaShowOptionalsItem:Descriptor>>;
                                        INNER
                                     #)
                                #);
                              iCheck: @myItem
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT FrejaCheckItem:Descriptor>>; 
                                     #)
                                #);
                              init::< 
                                (# 
                                do
                                   <<SLOT EditMenuInit:Descriptor>>
                                #);
                              
                           #);
                         ViewMenuDesc::< 
                           (#
                              SearchItemDesc::< 
                                (#
                                   hit::< 
                                     (#
                                        thePage: ^Page;
                                        theOADPage: ^OADPage;
                                        theDesObj: ^theOADPage.DesignObject;
                                        theObject:
                                          ^theOADPage.PatternDiagramNode
                                     <<SLOT frejaSearchItemDesc:DoPart>>
                                     #)
                                #);
                              LayoutPreferencesDesc::< 
                                (#
                                   hit::< 
                                     (# 
                                     <<SLOT FrejaLayputPreferencesDesc:DoPart>>
                                     #)
                                #);
                              TraceItemDesc::< 
                                (#
                                   hit::< 
                                     (#  <<SLOT ViewMenuTraceItem:DoPart>> #)
                                #);
                              init::< 
                                (# 
                                do <<SLOT FrejaViewMenuInit:Descriptor>>; 
                                #)
                           #);
                         AttributeKindMenu:
                           @UserMenu
                           (#
                              NewPattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuNewPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              sep: @Item;
                              LocalPattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuLocalPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              PartObject: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuPartObject:Descriptor>>;
                                        
                                     #)
                                #);
                              DynamicReference: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuDynamicReference:Descriptor>>;
                                        
                                     #)
                                #);
                              VirtualPattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuVirtualPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              BindingOfVirtualPattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuBindingOfVirtualPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              FinalBindOfVirtPattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT AttributeKindMenuFinalBindOfVirtPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              init::< 
                                (# 
                                do <<SLOT AttributeKindMenuInit:Descriptor>>; 
                                #)
                           #);
                         RelationsMenu: @UserMenu
                           (#
                              sep,sep1,sep2: @Item;
                              GeneralRelationship: @item
                                (#
                                   hit::< 
                                     (# 
                                     <<SLOT GeneralRelationshipItem:DoPart>>
                                     #)
                                #);
                              Aggregation: @item
                                (#
                                   hit::< 
                                     (# 
                                     <<SLOT RelationsMenuAggregationItem:DoPart>>
                                     #)
                                #);
                              Association: @item
                                (#
                                   hit::< 
                                     (# 
                                     <<SLOT RelationsMenuAssociationItem:DoPart>>
                                     #)
                                #);
                              Specialization: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT RelationsMenuSpecialization:Descriptor>>;
                                        
                                     #)
                                #);
                              bind: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do <<SLOT RelationsMenuBind:Descriptor>>; 
                                     #)
                                #);
                              final: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT RelationsMenuFinal:Descriptor>>; 
                                     #)
                                #);
                              pattern: @Item
                                (#
                                   hit::< 
                                     (# 
                                     do
                                        <<SLOT RelationsMenuPattern:Descriptor>>;
                                        
                                     #)
                                #);
                              selfAssociate: @Item
                                (#
                                   hit::< 
                                     (# theWindow: ^selfAssociateWindow
                                     <<SLOT RealtionsMenuSelfAssociateHit:DoPart>>
                                     #)
                                #);
                              init::< 
                                (# 
                                do <<SLOT RelationsMenuInit:Descriptor>>; 
                                #)
                           #);
                         ExpandMenu:
                          UserMenu
                           (#
                              theItems: [noOfItems] ^ExpandItem;
                              noOfItems: (#  exit 12 #);
                              ExpandItem: Item
                                (#
                                   synCatNo: @Integer;
                                   syncatName: ^Text;
                                   hit::< 
                                     (# 
                                     do <<SLOT ExpandItemHit:Descriptor>>
                                     #);
                                   create:
                                     (# i: @Integer; 
                                     enter (i,syncatno,syncatname[])
                                     do <<SLOT ExpandItemCreate:Descriptor>>
                                     #);
                                   
                                #);
                              CreateItems:
                                (#
                                   list:
                                     ^Text;
                                   
                                enter list[]
                                do <<SLOT ExpandMenuCreateItems:Descriptor>>
                                #);
                              deleteMenu:
                                (# 
                                do <<SLOT ExpandMenuDelete:Descriptor>>; 
                                #);
                              init::< 
                                (# 
                                do <<SLOT ExpandMenuInit:Descriptor>>; 
                                #);
                              
                           #);
                         theExpandMenu:
                           @ExpandMenu;
                         associationDialog:
                          <<SLOT associationDialog:Descriptor>>;
                         aggregationDialog:
                          <<SLOT aggregationDialog:Descriptor>>;
                         selfAssociateWindow:
                          <<SLOT selfAssociateWindow:Descriptor>>;
                         layoutPreferencesDialog:
                           @<<SLOT layoutPreferencesDialog:Descriptor>>;
                         onInit::< 
                           (# 
                           do <<SLOT FrejaOADDocumentOnInit:Descriptor>>; 
                           #)
                      #);
                    FileMenuDesc::< 
                      (#
                         NewBETAProgramDesc::< 
                           (#
                              hit::< 
                                (# 
                                do
                                   <<SLOT FrejaFileMenuNewBETAProgram:Descriptor>>
                                #)
                           #);
                         NewBETALibraryDesc::< 
                           (#
                              hit::< 
                                (# 
                                do
                                   <<SLOT FrejaFileMenuNewBETALibrary:Descriptor>>
                                #)
                           #);
                         hideShowSifItemDesc::< 
                           (#
                              hit::< 
                                (#  <<SLOT frejaHideShowSifItem:DoPart>> #)
                           #);
                         QuitDesc::< 
                           (#
                              hit::< 
                                (# 
                                do
                                   <<SLOT FrejaFileMenuQuit:Descriptor>>
                                #)
                           #)
                      #);
                    callBack::< 
                      (#
                         Abort::<  (#  <<SLOT FrejaAbort:DoPart>> #);
                         ConnEndsGrammar::< 
                           (# 
                           do
                              <<SLOT FrejaConnEndsGrammar:Descriptor>>;
                              
                           #);
                         DoubleClick::< 
                           (#  do <<SLOT FrejaDoubleClick:Descriptor>>;  #);
                         KbdEvent::< 
                           (#  do <<SLOT FrejaKbdEvent:Descriptor>>;  #);
                         MakeRegionGrammar::< 
                           (# 
                           <<SLOT frejaMakeRegionGrammar:DoPart>>
                           #);
                         MenuEvent::<  (#  <<SLOT FrejaMenuEvent:DoPart>> #);
                         MouseDown::< 
                           (#  do <<SLOT FrejaMouseDown:Descriptor>>;  #);
                         PostMenuEvent::< 
                           (# 
                           <<SLOT frejaPostMenuEvent:DoPart>>
                           #);
                         TitleBarClicked::< 
                           (#  <<SLOT FrejaTitleBarClicked:DoPart>> #)
                      #);
                    onInit::< 
                      (# 
                      do
                         <<SLOT FrejaDesignInterfaceOnInit:Descriptor>>;
                         
                      #);
                    
                 <<SLOT FrejaDesignInterfaceDoPart:DoPart>>
                 #);
               sifEditor::< 
                 (#
                    fe:
                      ^theFragmentBrowser.ymerBrowser.codeEditor;
                    undo::<  (#  <<SLOT SifEditorUndo:DoPart>> #);
                    cut::< 
                      (# 
                      <<SLOT sifEditorCut:DoPart>>
                      #);
                    copy::<  (#  <<SLOT sifEditorCopy:DoPart>> #);
                    paste::< 
                      (# 
                      <<SLOT sifEditorPaste:DoPart>>
                      #);
                    before::<  (#  <<SLOT sifEditorBefore:DoPart>> #);
                    after::<  (#  <<SLOT sifEditorAfter:DoPart>> #);
                    changeFocus::< 
                      (# 
                      <<SLOT sifEditorChangeFocus:DoPart>>
                      #);
                    getStatus::<  (#  <<SLOT sifEditorGetStatus:DoPart>> #);
                    expandNormal::< 
                      (#
                         theOADDocument: ^theDesignInterface.OADDocument;
                         theOADPage: ^theOADDocument.OADPage
                      <<SLOT sifEditorExpandNormal:DoPart>>
                      #);
                    expandOptional::< 
                      (#
                         theOADDocument:
                           ^theDesignInterface.OADDocument;
                         theOADPage: ^theOADDocument.OADPage
                      <<SLOT sifEditorExpandOptional:DoPart>>
                      #);
                    expandLexem::< 
                      (#
                         theOADDocument:
                           ^theDesignInterface.OADDocument;
                         theOADPage: ^theOADDocument.OADPage
                      <<SLOT sifEditorExpandLexem:DoPart>>
                      #);
                    insertOptionals::< 
                      (# 
                      <<SLOT sifEditorInsertOptionals:DoPart>>
                      #);
                    removeOptionals::< 
                      (#  <<SLOT sifEditorRemoveOptionals:DoPart>> #);
                    parse::< 
                      (#
                         theOADDocument:
                           ^theDesignInterface.OADDocument;
                         theOADPage: ^theOADDocument.OADPage;
                         theObject: ^theOADPage.PatternDiagramNode
                      <<SLOT sifEditorParse:DoPart>>
                      #);
                    search::< 
                      (# 
                      <<SLOT sifEditorSearch:DoPart>>
                      #);
                    isReadOnly::< 
                      (#  <<SLOT SifEditorIsReadOnly:DoPart>> #);
                    init::< 
                      (#  enter fe[] #)
                 #);
               resizeMenubar::< 
                 (# 
                 <<SLOT frejaResizeMenubar:DoPart>>
                 #);
               frejaAssociationsInclude:: 
                 (#  do '~toby/beta/freja/v2.3/associations'->t[] #);
               enableEditName::< 
                 (# theOADDocument: ^theDesignInterface.OADDocument
                 <<SLOT GraphicalInterfaceEnableEditName:DoPart>>
                 #);
               disableEditName::< 
                 (# theOADDocument: ^theDesignInterface.OADDocument
                 <<SLOT theGraphicalInterfaceDisableEditName:DoPart>>
                 #);
               callChecker::< 
                 (#  do fg[]->theController.globalSifCommands.check #);
               sifSaveAndQuit::< 
                 (#  do theController.globalSifCommands.saveAndQuit #);
               sifSave::<  (#  do theController.globalSifCommands.save #);
               sifAutoSave::< 
                 (#  do theController.globalSifCommands.autoSave #);
               sifAddProp::< 
                 (# 
                 do
                    (fg[],propName[],propString[])
                      ->theController.globalSifCommands.addProp
                 #);
               alertUser::< 
                 (# 
                 do (none ,message[],'Alert')->theFragmentBrowser.alertUser
                 #);
               promptForBoolean::< 
                 (#  <<SLOT frejaPromptForBoolean:DoPart>> #);
               
            do
               <<SLOT FrejaDoPart:Descriptor>>
            #);
          theGraphicalInterface: @GraphicalInterface;
          withDexter:
          (* if true then we start sif with dexter hyperlink support *)
            @Boolean;
          
       do theGraphicalInterface; 
       #);
     sdeControl:<
       (#
          globalSifCommands: @
            (#
               openForm:
                 (#
                    name: ^Text; node: ^theModel.theGraphicalInterface.mps.ast
                 enter (name[],node[])
                 <<SLOT globalSifCommandsOpenForm:DoPart>>
                 #);
               getEditorForForm:
                 (#
                    ff: ^theModel.theGraphicalInterface.mps.fragmentForm;
                    node: ^theModel.theGraphicalInterface.mps.ast;
                    se: ^theFragmentBrowser.ymerBrowser.codeEditor
                 enter (ff[],node[])
                 <<SLOT globalSifCommandsGetEditorForForm:DoPart>>
                 exit se[]
                 #);
               newBETAProgram:
                 (# name: ^Text
                 enter name[]
                 <<SLOT globalSifCommandsNewBETAProgram:DoPart>>
                 #);
               newBETALibrary:
                 (# name: ^Text
                 enter name[]
                 <<SLOT globalSifCommandsNewBETALibrary:DoPart>>
                 #);
               saveAndQuit:
                 (# filename: @text
                 <<SLOT globalSifCommandsSaveAndQuit:DoPart>>
                 #);
               save:
                 (#
                    filename: @text
                 <<SLOT globalSifCommandsSave:DoPart>>
                 #);
               autoSave:
                 (# filename: @text
                 <<SLOT globalSifCommandsAutoSave:DoPart>>
                 #);
               check:
                 (# fg: ^theModel.theGraphicalInterface.mps.fragmentGroup
                 enter fg[]
                 <<SLOT globalSifCommandsCheck:DoPart>>
                 #);
               toggleDebug:
                 (# 
                 <<SLOT globalSifCommandsToggleDedug:DoPart>>
                 #);
               addProp:
                 (#
                    fg: ^theModel.theGraphicalInterface.mps.fragmentGroup;
                    propName,propString: ^text
                 enter (fg[],propName[],propString[])
                 <<SLOT globalSifCommandsAddProp:DoPart>>
                 #);
               deleteProp:
                 (#
                    fg: ^theModel.theGraphicalInterface.mps.fragmentGroup;
                    propName,propString: ^text
                 enter (fg[],propName[],propString[])
                 <<SLOT globalSifCommandsDeleteProp:DoPart>>
                 #);
               setFrejaMark:
                 (#
                    frejamark: @boolean;
                    fg: ^theModel.theGraphicalInterface.mps.fragmentGroup
                 enter (frejamark,fg[])
                 <<SLOT globalSifCommandsSetFrejaMark:DoPart>>
                 #);
               getFrejaMark:
                 (#
                    frejamark: @boolean;
                    fg: ^theModel.theGraphicalInterface.mps.fragmentGroup
                 enter fg[]
                 <<SLOT globalSifCommandsGetFrejaMark:DoPart>>
                 exit frejamark
                 #)
            #);
          
       #);
     theModel: @sdeModel;
     theController: @sdeControl;
     sifHidden: @boolean;
     FrejaPromptForText:
       (#
          message,defaultText:
            ^text;
          confirm:< (# theText: ^text enter theText[] do INNER #);
          cancel:< object;
          
       enter (message[],defaultText[])
       <<SLOT FrejaPromptForText:DoPart>>
       #);
     
  do theModel; 
  #)  

