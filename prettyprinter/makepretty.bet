ORIGIN '~beta/newmps/astlevel';
INCLUDE '~beta/newmps/betacfl';
INCLUDE '~beta/newmps/grammarinit';
INCLUDE 'unparser';

-- program: descriptor --
(# mps: @astInterface;
   beta: @mps.beta;
   
   theUnparser: @beta.Unparser;
   prepare: @
     (#
     do mps.astLevelInit;
        ('~beta/grammars/beta/beta','beta',screen[])
          ->beta.betagrammarInit
        (#
           MPSerror::
             (# do (failure,msg[])->stop #);
           noParserAvailable:: 
             (# do (failure,msg[])->stop #)
        #); 
        
     #);
   processFile:
     (# name: ^Text;
     enter name[]
     do 'spec.txt' -> theUnparser.init;
        screen[] -> theUnparser.pack;
     #);
do prepare;
   (if NoOfArguments = 2 then
       2 -> arguments -> processFile;
   if);
#)
