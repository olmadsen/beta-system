ORIGIN 'Bifrost';
INCLUDE 'PredefinedGO';
BODY 'private/PS/EPSread'
     'private/PS/EPSmacros';
--- streamLib: attributes ---
startEPSfile:
  (* Writes PostScript headers to out.  This function should be called
   * exactly once for each file before you do anything else
   *)
  (# 
  <<SLOT startEPSfile: doPart>>
  #);
endEPSfile:
  (* Write PostScript epilouge to out. This function should be called
   * exactly once, before you close this file.  
   *)
  (# 
  <<SLOT endEPSfile: doPart>>
  #);
skipEPSheaders:
  (* This functions should be called to skip over the PostScript headers
   * (generated with startEPSfile).
   *)
  (# 
     formatException: exception
       (# 
          t: ^text;
       enter t[]
       do t[] -> msg.putText; INNER
       #);
     formatError:< formatException;
     inFile: ^stream;
  enter inFile[]
     <<SLOT skipEPSheaders: doPart>>
  #);
eoe: booleanValue
  (* End of EPS file *)
  (# 
  <<SLOT eoe: doPart>>
  #);
--- BifrostAttributes: attributes ---
loadPicture:
  (# 
     parseException: exception
       (# 
          t: ^text;
       enter t[]
       do 'parse error: ' -> msg.putText; t[] -> msg.putText; INNER
       #);
     parseError:< parseException;
     loadGO:
       (# 
          aGO: ^AbstractGraphicalObject
       <<SLOT loadPictureLoadGO: doPart>>
       exit aGO[]
       #);
     createGO:<
       (* Should be specialized to create user defined patterns *)
       (#
          GO: ^AbstractGraphicalObject;
          patternName: ^text;
       enter patternName[]
	  <<SLOT loadPicturecreateGO: doPart>>
       exit GO[]
       #);
     aPicture: ^Picture;
     inFile: ^stream;
     private: @<<SLOT loadPicturePrivate: descriptor>>;
  enter inFile[]
     <<SLOT loadPictureReadEPS: doPart >>
  exit aPicture[]
  #);
