ORIGIN 'MacBifrostEnv';

[[

-- INCLUDE 'CanvasWindow' 

-- ConnectToCanvasWindow: descriptor --
  (# theWindow: ^CanvasWindow;
     found: @Boolean;
  do 
     (if currentWindow[]//NONE then
	     (* no window made:
		  * theCanvas determine the size of the window
		  *)
		 &CanvasWindow[] -> theWindow[] -> currentWindow[];
		 theCanvas.size -> theWindow.size;
		 theCanvas.position -> theWindow.position;
		 theCanvas[] -> theWindow.theCanvas[];
		 theWindow.init;
		 true -> theWindow.createdByCanvas;
	 else
		 currentWindow[] -> theWindow[];
		 scanner:theWindow.theCanvases.scan
		 (# 
		 do (if thisElm[]//theCanvas[] then 
				true -> found;
				leave scanner;
			if);
		 #);
		 (if found//false then
			 theCanvas[] -> theWindow.theCanvases.append;
		 if);
	 if);
  #)

-- OpenCanvasWindow: descriptor --
  (# theWindow: ^CanvasWindow;
  do currentWindow[] -> theWindow[];
     (if theWindow.createdByCanvas//true then theWindow.open if);
  #)

--]]
