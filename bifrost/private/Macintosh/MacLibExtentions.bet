ORIGIN '~beta/macintosh/v2.2/maclib'

-- LIB: ATTRIBUTES --

(* maclib additions (by kjm) *)


(* Events *)

  everyEvent    : (# exit -1 #);
  NullEvent     : (# exit  0 #);
  mouseDown     : (# exit  1 #);
  mouseUp       : (# exit  2 #);
  keyDown       : (# exit  3 #);
  keyUp         : (# exit  4 #);
  autoKey       : (# exit  5 #);
  updateEvt     : (# exit  6 #);
  diskEvt       : (# exit  7 #);
  activateEvt   : (# exit  8 #);
  networkEvt    : (# exit  10 #);
  driverEvt     : (# exit  11 #);
  app1Evt       : (# exit  12 #);
  app2Evt       : (# exit  13 #);
  app3Evt       : (# exit  14 #);
  app4Evt       : (# exit  15 #);


(* QuickDraw *)

BitMapPtr: RecordPeek
(# baseAddr: Long (# pos ::< (# do 0 -> value #)#);
   rowBytes: Short(# pos ::< (# do 4 -> value #)#);
   bounds:   Rect (# pos ::< (# do 6 -> value #)#);
#);

PolyPtr: RecordPeek
(# polySize:Short (# pos ::< (# do 0 -> value #)#);
   polyBBox: Rect (# pos ::< (# do 2 -> value #)#);
   polyPoints: (# index: @Integer enter index exit 6+index*4 -> getLong #);
#);

RgnPtr: RecordPeek
(# rgnSize: Short (# pos ::< (# do 0 -> value #)#);
   rgnBBox: Rect  (# pos ::< (# do 2 -> value #)#);
   (* more data if not rectangular *)
#);

StringWidth : external(# s:[1] @char; l: @ShortInt enter s  do '$A88C' -> pascalTrap exit l#);

CGrafPortPtr : (* offsets found in Inside Mac Vol V. pp. 170 *) recordPeek
	(# device : readOnlyShort(# pos ::< (# do 0 -> value #)#);
	   
	   portPixMap : readOnlyLong(# pos ::< (# do 2 -> value #)#);
	   portVersion : readOnlyShort(# pos ::< (# do 6 -> value #)#);
	   grafVars : readOnlyLong(# pos ::< (# do 8 -> value #)#);
	   chExtra : readOnlyShort(# pos ::< (# do 12 -> value #)#);
	   pnLocHFrac : readOnlyShort(# pos ::< (# do 14 -> value #)#);
	   
	   PortRect : readOnlyRect (# pos ::< (# do 16 -> value #)#);

	   PortRectTL :(# exit (# exit (16 -> getShort,18 -> getShort) #)#);
	   
	   visRgn : readOnlyLong(# pos ::< (# do 24 -> value #)#);
	   clipRgn : readOnlyLong(# pos ::< (# do 28 -> value #)#);
	   bkPixPat : readOnlyLong(# pos ::< (# do 32 -> value #)#);
	   
	   rgbFgColor : (# exit (36 -> getShort,38 -> getShort,40 -> getShort)#);
	   rgbBkColor : (# exit (42 -> getShort,44 -> getShort,46 -> getShort)#);
	   
	   pnLoc : readOnlyLong(# pos ::< (# do 48 -> value #)#);
	   pnSize : readOnlyLong(# pos ::< (# do 52 -> value #)#);
	   pnMode : readOnlyShort(# pos ::< (# do 56 -> value #)#);
	   pnPixPat : readOnlyLong(# pos ::< (# do 58 -> value #)#);
	   pnFillPixPat : readOnlyLong(# pos ::< (# do 62 -> value #)#);
	   pnVis : readOnlyShort(# pos ::< (# do 66 -> value #)#);
	   
	   txFont :readOnlyShort(# pos ::< (# do 68 -> value #)#);
	   txFace :readOnlyShort(# pos ::< (# do 70 -> value #)#);
	   txMode :readOnlyShort(# pos ::< (# do 72 -> value #)#);
	   txSize :readOnlyShort(# pos ::< (# do 74 -> value #)#);
	   spExtra : readOnlyLong(# pos ::< (# do 76 -> value #)#);
	   fgColor : readOnlyLong(# pos ::< (# do 80 -> value #)#);
	   bkColor : readOnlyLong(# pos ::< (# do 84 -> value #)#);
	   colrBit :readOnlyLong(# pos ::< (# do 88 -> value #)#);
	#);
	
CWindowPtr : CGrafPortPtr (* OFFSETS found in MACINTOSH Revealed, Volume 2, page 112 *)
(#
  windowKind : readOnlySignedShort(# pos ::< (# do 108 -> value #)#);
  visible: readOnlyByte(# pos ::< (# do 110 -> value #)#);
  hilited : readOnlyByte(# pos ::< (# do 111 -> value #)#);
  goAwayFlag : readOnlyByte(# pos ::< (# do 112 -> value #)#);
  spareFlag : readOnlyByte(# pos ::< (# do 113 -> value #)#);
  strucRgn : readOnlyLong(# pos ::< (# do 114 -> value #)#);
  contRgn : readOnlyLong(# pos ::< (# do 118 -> value #)#);
  updateRgn : readOnlyLong(# pos ::< (# do 122 -> value #)#);
  windowDefProc : readOnlyLong(# pos ::< (# do 126 -> value #)#);
  dataHandle : readOnlyLong(# pos ::< (# do 130 -> value #)#);
  titleHandle : readOnlyLong(# pos ::< (# do 134 -> value #)#);
  titleWidth : readOnlyShort(# pos ::< (# do 138 -> value #)#);
  controlList : readOnlyLong(# pos ::< (# do 140 -> value #)#);
  nextWindow : readOnlyLong(# pos ::< (# do 144 -> value #)#);
  windowPic : readOnlyLong(# pos ::< (# do 148 -> value #)#);
  refCon : readOnlyLong(# pos ::< (# do 152 -> value #)#);
#);

(* Color manager *)

Color2Index: external (# c: ^RGBColor; index: @Integer enter c[] do '$AA33' -> pascalTrap exit index #);
Index2Color: external (# index: @Integer; c: ^RGBColor enter (index,c[]) do '$AA34' -> pascalTrap #);


NEWPTR : external(# byteCount,thePtr : @integer enter byteCount do pascal exit thePtr #);
