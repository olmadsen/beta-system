(* ORIGIN '~beta/bifrost/PredefinedGO';
 * INCLUDE '~beta/bifrost/ColorNames';
 *)
ORIGIN '../PredefinedGO';
INCLUDE '../ColorNames';
INCLUDE '~beta/basiclib/file';

-- PROGRAM: descriptor --

bifrost
(# 
    
   theWindow: @window
     (# canvasbackgroundcolor: @SolidColor; (* The sky *)
        myCanvas: @BifrostCanvas
          (# go1, go2: @Rect;
             aTiledSolidColor: @TiledSolidColor;
             aSolidColor: @SolidColor;
             
             ferp: @bitMap
               (*
                * 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
                * 0 1 1 1 1 0 0 1 1 1 1 0 0 1 1 1 1 0 0 1 1 1 1 0
                * 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 1 0 0 1 0 0 1 0
                * 0 1 1 1 0 0 0 1 1 1 0 0 0 1 1 1 1 0 0 1 1 1 1 0
                * 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0 1 0 0 0 1 0 0 0 0
                * 0 1 0 0 0 0 0 1 1 1 1 0 0 1 0 0 1 0 0 1 0 0 0 0
                * 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
                * 
                * static unsigned char Bifrost.bitmap_bits[] = {
                *    0x00, 0x00, 0x00, 
                *    0x9e, 0xe7, 0x79, 
                *    0x82, 0x20, 0x48, 
                *    0x8e, 0xe3, 0x78,
                *    0x82, 0x20, 0x08, 
                *    0x82, 0xe7, 0x09, 
                *    0x00, 0x00, 0x00};
                * 
                * after BitmapConvertPBMrow:
                * 0x000000-9e 0xe779-8220 0x48-8ee378 0x822008-82 0xe709-0000 0x00-000000
                *)
               (# mybit: @pixel;
               do (24,7)->init;
                  true->mybit; 
                  (2, 2, mybit[])->PutPixel;
                  (2, 3, mybit[])->PutPixel;
                  (2, 4, mybit[])->PutPixel;
                  (2, 5, mybit[])->PutPixel;
                  (2, 6, mybit[])->PutPixel;
                  
                  (3, 4, mybit[])->PutPixel;
                  (3, 6, mybit[])->PutPixel;
                  
                  (4, 4, mybit[])->PutPixel;
                  (4, 6, mybit[])->PutPixel;
                  
                  (5, 6, mybit[])->PutPixel;
                  
                  (8, 2, mybit[])->PutPixel;
                  (8, 3, mybit[])->PutPixel;
                  (8, 4, mybit[])->PutPixel;
                  (8, 5, mybit[])->PutPixel;
                  (8, 6, mybit[])->PutPixel;
                  
                  (9, 2, mybit[])->PutPixel;
                  (9, 4, mybit[])->PutPixel;
                  (9, 6, mybit[])->PutPixel;
                   
                  (10, 2, mybit[])->PutPixel;
                  (10, 4, mybit[])->PutPixel;
                  (10, 6, mybit[])->PutPixel;
                   
                  (11, 2, mybit[])->PutPixel;
                  (11, 6, mybit[])->PutPixel;
                   
                  (14, 2, mybit[])->PutPixel;
                  (14, 3, mybit[])->PutPixel;
                  (14, 4, mybit[])->PutPixel;
                  (14, 5, mybit[])->PutPixel;
                  (14, 6, mybit[])->PutPixel;
                  
                  (15, 4, mybit[])->PutPixel;
                  (15, 6, mybit[])->PutPixel;
                  
                  (16, 3, mybit[])->PutPixel;
                  (16, 4, mybit[])->PutPixel;
                  (16, 6, mybit[])->PutPixel;
                   
                  (17, 2, mybit[])->PutPixel;
                  (17, 4, mybit[])->PutPixel;
                  (17, 5, mybit[])->PutPixel;
                  (17, 6, mybit[])->PutPixel;
                  
                  (20, 2, mybit[])->PutPixel;
                  (20, 3, mybit[])->PutPixel;
                  (20, 4, mybit[])->PutPixel;
                  (20, 5, mybit[])->PutPixel;
                  (20, 6, mybit[])->PutPixel;
                  
                  (21, 4, mybit[])->PutPixel;
                  (21, 6, mybit[])->PutPixel;
                  
                  (22, 4, mybit[])->PutPixel;
                  (22, 6, mybit[])->PutPixel;
                  
                  (23, 4, mybit[])->PutPixel;
                  (23, 5, mybit[])->PutPixel;
                  (23, 6, mybit[])->PutPixel;
                  
               #);
             
             feep: @bitMap
               (# 
               do '~beta/bifrost/bitmaps/feep.pbm'->readFromPBMfile;
               #);
             open:: 
               (# 
               do aSolidColor.init;
                  orange->aSolidColor.Name;
                  
                  go1.init;
                  ((10,17),(34,10))->go1.corners;
                  aSolidColor[]->go1.setPaint;
                  
                  aTiledSolidColor.init;
                  black->aTiledSolidColor.Name;
                  feep->aTiledSolidColor.theTile;
                  (*ferp->aTiledSolidColor.theTile;*)
                  
                  go2.init; 
                  ((10,17),(34,10))->go2.corners;
                  aTiledSolidColor[]->go2.setPaint;
               #);
             eventhandler:: 
               (# onOpen:: (# do go1->draw; go2[]->draw; #);
                  onMouseDown:: (# do terminate #);
                  onKeyDown::
                    (# out: @file;
                       A4: (# exit (0, 0, 595, 822) #);
                    do (if ch='p' then
                           'feep.eps' -> out.name;
                           'Writing EPS to feep.eps ... ' -> puttext;
                           out.openwrite;
                           (A4, true, 1, out[]) -> myCanvas.writeEPS;
                           out.close;
                           'done' -> putline;
                        else
                           terminate
                       if);
                    #);
               #) (* eventhandler *);
          #) (* myCanvas *);
        open:: 
          (# 
          do myCanvas.open;
             (250,250)->myCanvas.Size->size;
          #);
     #) (* theWindow *)
do (*true->debuggraphic;*)
   theWindow.open;
   1->Arguments->theWindow.title;
#)

