ORIGIN 'ntitypes';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1994
 *       All rights reserved.
 *)

INCLUDE 'rectanglesupport';

-- Lib: Attributes --

(****** Window class management *********************************************)
WNDCLASS: cstruct
  (# bytesize::< (# do 40 -> value; #);
     style: @long (# pos::< (# do 0 -> value; #); #); (* UINT style *)
     lpfnWndProc: @long (# pos::< (# do 4 -> value; #); #); (* WNDPROC lpfnWndProc *)
     cbClsExtra: @long (# pos::< (# do 8 -> value; #); #);  (* int cbClsExtra *)
     cbWndExtra: @long (# pos::< (# do 12 -> value; #); #);  (* int cbWndExtra*)
     hInstance: @long (# pos::< (# do 16 -> value; #); #);   (* HINSTANCE hInstance *)
     hIcon: @long (# pos::< (# do 20 -> value; #); #);       (* HICON hIcon *)
     hCursor: @long (# pos::< (# do 24 -> value; #); #);       (* HCURSOR hCursor *)
     hbrBackground: @long (# pos::< (# do 28 -> value; #); #); (* HBRUSH hbrBackground *)
     lpszMenuName: @long (# pos::< (# do 32 -> value; #); #); (* LPCSTR lpszClassName *)
     lpszClassName: @long (# pos::< (# do 36 -> value; #); #); (* LPCSTR lpszClassName *)
  #);


(* ATOM    WINAPI RegisterClass(const WNDCLASS FAR* ); *)
RegisterClass: external
(* Registers a window class for subsequent use in calls to CreateWindow
 * or CreateWindowEx. *)
(#
  windowClass: ^WNDCLASS; (* Points to a WNDCLASS structure. const WNDCLASS FAR* *)
  out: @integer; 
  (* If the function succeedes, the return value is an atom that
   * uniquely identifies the class being registered; otherwise,
   * it is zero. ATOM *)
enter windowClass[]
do 'RegisterClassA' -> callStd;
exit out
#);

(* BOOL    WINAPI UnregisterClass(LPCSTR, HINSTANCE); *)
UnregisterClass: external
(* Removes a window class, freeing the storage required for the class. *)
(#
  className: [1] @char; (* LPCSTR *)
  hinst: @integer; (* HINSTANCE *)
  out: @integer; (* BOOL *)
enter (className,hinst)
do 'UnregisterClassA' -> callStd;
exit out
#);

(* BOOL    WINAPI GetClassInfo(HINSTANCE, LPCSTR, WNDCLASS FAR* ); *)
GetClassInfo: external
(#
  in0: @integer; (* HINSTANCE *)
  in1: [1] @char; (* LPCSTR *)
  in2: @integer; (* WNDCLASS FAR* *)
  out: @integer; (* BOOL *)
enter (in0,in1,in2)
do 'GetClassInfoA' -> callStd;
exit out
#);

(* int     WINAPI GetClassName(HWND, LPSTR, int); *)
GetClassName: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* LPSTR *)
  in2: @integer; (* int *)
  out: @integer; (* int *)
enter (in0,in1,in2)
do 'GetClassNameA' -> callStd;
exit out
#);

(* WORD    WINAPI GetClassWord(HWND, int); *)
GetClassWord: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  out: @ShortInt; (* WORD *)
enter (in0,in1)
do callStd;
exit out
#);

(* WORD    WINAPI SetClassWord(HWND, int, WORD); *)
SetClassWord: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  in2: @ShortInt; (* WORD *)
  out: @ShortInt; (* WORD *)
enter (in0,in1,in2)
do callStd;
exit out
#);

(* LONG    WINAPI GetClassLong(HWND, int); *)
GetClassLong: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  out: @integer; (* LONG *)
enter (in0,in1)
do 'GetClassLongA' -> callStd;
exit out
#);

(* LONG    WINAPI SetClassLong(HWND, int, LONG); *)
SetClassLong: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  in2: @integer; (* LONG *)
  out: @integer; (* LONG *)
enter (in0,in1,in2)
do 'SetClassLongA' -> callStd;
exit out
#);

(****** Window creation/destroy *********************************************)

(* BOOL    WINAPI IsWindow(HWND); *)
IsWindow: external
  (# in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(* HWND    WINAPI CreateWindowEx(DWORD, LPCSTR, LPCSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, void FAR* ); *)
CreateWindowEx: external
  (* Creates an overlapped, pop-up, or child window with an extended styel;
   * otherwise, this function is identical to the CreateWindow function. *)
  (# dwExStyle: @integer; (* DWORD *)
     lpzsClass: [1] @char; (* specifies the window class name. LPCSTR *)
     lpszWindowName: [1] @char; (* the window name. LPCSTR *)
     dwStyle: @integer; (* window style. DWORD *)
     x: @integer; (* horizontal position of window. int *)
     y: @integer; (* vertical position of window. int *)
     width: @integer; (* window width. int *)
     height: @integer; (* window height. int *)
     hwndParent: @integer; (* handle of parent or owner window. HWND *)
     hmenu: @integer; (* handle of menu or child-window identifier. HMENU *)
     hinst: @integer; (* handle of application instance. HINSTANCE *)
     lpvParam: @integer; (* address of window-creation data. void FAR* *)
     wHandle: @integer; (* identifies the new window if the function is
                         * successful, otherwise, it is 0 (NULL). HWND 
                         *)
  enter (dwExStyle,lpzsClass,lpszWindowName,dwStyle,x,y,width,height,hwndParent,hmenu,hinst,lpvParam)
  do 'CreateWindowExA' -> callStd;
  exit wHandle
  #);

(* HWND    WINAPI CreateWindow(LPCSTR, LPCSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, void FAR* ); *)
CreateWindow: 
  (* The CreateWindow function creates an overlapped, pop-up, or child
   * window. The CreateWindow function specifies the window class, window
   * title, window style, and (optionally) the initial position and size
   * of the window. The CreateWindow function also specifies the window's
   * parent (if any) and menu.
  *)
  (#
     lpzsClass: [1] @char; (* specifies the window class name. LPCSTR *)
     lpszWindowName: [1] @char; (* the window name. LPCSTR *)
     dwStyle: @integer; (* window style. DWORD *)
     x: @integer; (* horizontal position of window. int *)
     y: @integer; (* vertical position of window. int *)
     width: @integer; (* window width. int *)
     height: @integer; (* window height. int *)
     hwndParent: @integer; (* handle of parent or owner window. HWND *)
     hmenu: @integer; (* handle of menu or child-window identifier. HMENU *)
     hinst: @integer; (* handle of application instance. HINSTANCE *)
     lpvParam: @integer; (* address of window-creation data. void FAR* *)
     wHandle: @integer; (* identifies the new window if the function is
                         * successful, otherwise, it is 0 (NULL). HWND 
                         *)
  enter (lpzsClass,lpszWindowName,dwStyle,x,y,width,height,hwndParent,hmenu,hinst,lpvParam)
  do (0,lpzsClass,lpszWindowName,dwStyle,x,y,width,height,hwndParent,hmenu,hinst,lpvParam)
      -> CreateWindowEx -> wHandle;
  exit wHandle
  #);

(* BOOL    WINAPI DestroyWindow(HWND); *)
DestroyWindow: external
  (# hWnd: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter hWnd
  do callStd;
  exit out
  #);

(* HTASK   WINAPI GetWindowTask(HWND); *)
(* #define GetWindowTask(hWnd)  ((HANDLE)GetWindowThreadProcessId(hWnd, NULL)) *)
GetWindowTask: 
  (# hWnd: @integer; (* HWND *)
     hTask: @integer; (* HTASK *)
  enter hWnd
  do (hWnd,0) -> GetWindowThreadProcessId -> hTask;
  exit hTask
  #);

(* DWORD WINAPI  GetWindowThreadProcessId(HWND hWnd, LPDWORD lpdwProcessId); *)
GetWindowThreadProcessId: external
  (# hWnd: @integer; 
     lpdwProcessId: @integer;
     out: @integer;
  enter(hWnd, lpdwProcessId)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI IsChild(HWND, HWND); *)
IsChild: external
  (# hWndParent: @integer; (* HWND *)
     hWnd: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter (hWndParent,hWnd)
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetParent(HWND); *)
GetParent: external
(# hWnd: @integer; (* HWND *)
   out: @integer; (* HWND *)
enter hWnd
do callStd;
exit out
#);

(* HWND    WINAPI SetParent(HWND, HWND); *)
SetParent: external
(# hWndChild: @integer; (* HWND *)
   hWndNewParent: @integer; (* HWND *)
   out: @integer; (* HWND *)
enter (hWndChild,hWndNewParent)
do callStd;
exit out
#);

(* BOOL    WINAPI IsWindowVisible(HWND); *)
IsWindowVisible: external
(#
  in0: @integer; (* HWND *)
  out: @integer; (* BOOL *)
enter in0
do callStd;
exit out
#);

(* BOOL    WINAPI ShowWindow(HWND, int); *)
ShowWindow: external
  (# hWnd: @integer; (* HWND *)
     in1: @integer; (* int *)
     out: @integer; (* BOOL *)
  enter (hWnd,in1)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI EnableWindow(HWND,BOOL); *)
EnableWindow: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* BOOL *)
  out: @integer; (* BOOL *)
enter (in0,in1)
do callStd;
exit out
#);

(* BOOL    WINAPI IsWindowEnabled(HWND); *)
IsWindowEnabled: external
(#
  in0: @integer; (* HWND *)
  out: @integer; (* BOOL *)
enter in0
do callStd;
exit out
#);

(* BOOL WINAPI SetWindowTextA(HWND hWnd, LPCSTR lpString); *)
SetWindowText: external
  (#
     hWnd: @integer; (* HWND *)
     t: [1] @char; (* LPCSTR *)
     out: @integer;
  enter (hWnd, t)
  do 'SetWindowTextA' -> callStd;
  exit out
  #);

(* int     WINAPI GetWindowText(HWND, LPSTR, int); *)
GetWindowText: external
  (# hWnd: @integer; (* HWND *)
     t: @integer; (* LPSTR *)
     cch: @integer; (* int *)
     out: @integer; (* int *)
  enter (hWnd,t,cch)
  do 'GetWindowTextA' -> callStd;
  exit out
  #);

(* int     WINAPI GetWindowTextLength(HWND); *)
GetWindowTextLength: external
  (# hWnd: @integer; (* HWND *)
     out: @integer; (* int *)
  enter hWnd
  do 'GetWindowTextLengthA' -> callStd;
  exit out
  #);

(* WORD    WINAPI GetWindowWord(HWND, int); *)
GetWindowWord: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  out: @ShortInt; (* WORD *)
enter (in0,in1)
do callStd;
exit out
#);

(* WORD    WINAPI SetWindowWord(HWND, int, WORD); *)
SetWindowWord: external
(#
  in0: @integer; (* HWND *)
  in1: @integer; (* int *)
  in2: @ShortInt; (* WORD *)
  out: @ShortInt; (* WORD *)
enter (in0,in1,in2)
do callStd;
exit out
#);

(* LONG    WINAPI GetWindowLong(HWND, int); *)
GetWindowLong: external
  (# hwnd: @integer; (* handle of window *)
     offset: @integer; (* offset of value to retrieve *)
     out: @integer; (* LONG *)
  enter (hwnd,offset)
  do 'GetWindowLongA' -> callStd;
  exit out
  #);

(* LONG    WINAPI SetWindowLong(HWND, int, LONG); *)
SetWindowLong: external
  (# hwnd: @integer; (* handle of widow *)
     index: @integer; (* offset of value to set *)
     newValue: @integer; (* new value *)
     out: @integer; (* LONG *)
  enter (hwnd,index,newValue)
  do 'SetWindowLongA' -> callStd;
  exit out
  #);

(****** Window message support ***********************************************)

(* UINT WINAPI RegisterWindowMessage(LPCSTR); *)
RegisterWindowMessage: external
(#
  in0: [1] @char; (* LPCSTR *)
  out: @integer; (* UINT *)
enter in0
do callStd;
exit out
#);

MSG: cstruct
  (# bytesize::< (# do 28 -> value; #);
     hwnd: @long (# pos::< (# do 0 -> value; #); #); (* HWND hwnd; *)
     message: @long (# pos::< (# do 4 -> value; #); #); (* UINT message *)
     wParam: @long (# pos::< (# do 8 -> value; #); #); (* WPARAM wParam *)
     lParam: @long (# pos::< (# do 12 -> value; #); #); (* LPARAM lParam *)
     time: @long (# pos::< (# do 16 -> value; #); #); (* DWORD time; *)
     pt: @
       (# x: @long (# pos::< (# do 20 -> value #); #);
          y: @long (# pos::< (# do 24 -> value #); #);
       enter (x,y)
       exit (x,y)
       #);
  #);

(* BOOL    WINAPI GetMessage(MSG FAR*, HWND, UINT, UINT); *)
GetMessage: external
(#
  theMesage: @integer; (* address of structure with message,  MSG FAR* *) 
  hwnd: @integer; (* handle of the window, HWND *)
  wMsgFilterMin: @integer; (* first message, UINT *)
  wMsgFilterMax: @integer; (* last message, UINT *)
  out: @integer; (* BOOL *)
enter (theMesage,hwnd,wMsgFilterMin,wMsgFilterMax)
do 'GetMessageA' -> callStd;
exit out
#);

(* BOOL    WINAPI PeekMessage(MSG FAR*, HWND, UINT, UINT, UINT); *)
PeekMessage: external
(#
  theMesage: ^MSG; (* address of structure with message,  MSG FAR* *)
  hwnd: @integer; (* handle of the window, HWND *)
  wMsgFilterMin: @integer; (* first message, UINT *)
  wMsgFilterMax: @integer; (* last message, UINT *)
  fulRemoveMsg: @integer; (* removal flags UINT *)
  out: @integer; (* BOOL *)
enter (theMesage[],hwnd,wMsgFilterMin,wMsgFilterMax,fulRemoveMsg)
do 'PeekMessageA' -> callStd;
exit out
#);

(* void    WINAPI WaitMessage(void); *)
WaitMessage: external
(#
do callStd;
#);

(* DWORD   WINAPI GetMessagePos(void); *)
GetMessagePos: external
(#
  out: @integer; (* DWORD *)
do callStd;
exit out
#);

(* LONG    WINAPI GetMessageTime(void); *)
GetMessageTime: external
(#
  out: @integer; (* LONG *)
do callStd;
exit out
#);

(* LPARAM  WINAPI GetMessageExtraInfo(void); *)
GetMessageExtraInfo: external
(#
  out: @integer; (* LPARAM *)
do callStd;
exit out
#);

(* BOOL    WINAPI TranslateMessage(const MSG FAR* ); *)
TranslateMessage: external
(# theMsg: @integer; (* address of structure with message. const MSG FAR* *)
   out: @integer; (* BOOL *)
enter theMsg
do callStd;
exit out
#);

(* LONG    WINAPI DispatchMessage(const MSG FAR* ); *)
DispatchMessage: external
  (# theMsg: @integer; (* address of structure with message. const MSG FAR* *)
     out: @integer; (* LONG *)
  enter theMsg
  do 'DispatchMessageA' -> callStd;
  exit out
  #);

(* BOOL    WINAPI SetMessageQueue(int); *)
SetMessageQueue: external
(#
  in0: @integer; (* int *)
  out: @integer; (* BOOL *)
enter in0
do callStd;
exit out
#);

(* BOOL    WINAPI GetInputState(void); *)
GetInputState: external
(#
  out: @integer; (* BOOL *)
do callStd;
exit out
#);

(* DWORD   WINAPI GetQueueStatus(UINT flags); *)
GetQueueStatus: external
(#
  in0: @integer; (* UINT *)
  out: @integer; (* DWORD *)
enter in0
do callStd;
exit out
#);

(* BOOL    WINAPI PostMessage(HWND, UINT, WPARAM, LPARAM); *)
PostMessage: external
  (* The PostMessage function posts (places) a message in the message queue 
   * associated with the thread that created the given window and then returns 
   * without waiting for the thread to process the message. Messages in a message 
   * queue are retrieved by calls to the GetMessage or PeekMessage function.
   *)
  (# hwnd: @integer; (* Identifies the window whose window procedure will receive the
                      * message. If this parameter is 16xFFFFFFFF, the message will be
                      * posted to all overlapped or pop-up windows in the system. The
                      * message is not posted to child windows. HWND *)
     uMsg: @integer; (* Specifies the message to be posted. UINT *)
     wParam: @integer; (* Specifies additional message-dependent information. WPARAM *)
     lParam: @integer; (* Specifies additional message-dependent information. LPARAM *)
     out: @integer; (* BOOL *)
  enter (hwnd,uMsg,wParam,lParam)
  do callStd;
  exit out
  #);

(* LRESULT WINAPI SendMessage(HWND, UINT, WPARAM, LPARAM); *)
SendMessage: external
  (* The SendMessage function sends the specified message to the given window
   * or windows. The function calls the window procedure for the given window
   * and does not return until the window procedure has processed the message.
   * This is in contrast to the PostMessage function, which posts a message to a
   * thread's  message queue and returns immediately.
   *)
  (# hwnd: @integer; (* Identifies the window whose window procedure will receive the
                      * message. If this parameter is 16xFFFFFFFF, the message is sent 
                      * to all top-level windows in the system, including disabled or
                      * invisible unowned windows.  HWND *)
     uMsg: @integer; (* Specifies the message to be sent. UINT *)
     wParam: @integer; (* Specifies additional message-dependent information.  WPARAM *)
     lParam: @integer; (* second message parameter, LPARAM *)
     out: @integer; (* LRESULT *)
  enter (hwnd,uMsg,wParam,lParam)
  do 'SendMessageA' -> callStd;
  exit out
  #);

(* BOOL    WINAPI PostAppMessage(HTASK, UINT, WPARAM, LPARAM); *)
PostAppMessage: external
  (#
     in0: @integer; (* HTASK *)
  in1: @integer; (* UINT *)
  in2: @integer; (* WPARAM *)
  in3: @integer; (* LPARAM *)
  out: @integer; (* BOOL *)
enter (in0,in1,in2,in3)
do callStd;
exit out
#);

(* void    WINAPI ReplyMessage(LRESULT); *)
ReplyMessage: external
(#
  in0: @integer; (* LRESULT *)
enter in0
do callStd;
#);

(* BOOL    WINAPI InSendMessage(void); *)
InSendMessage: external
(#
  out: @integer; (* BOOL *)
do callStd;
exit out
#);

(* BOOL WINAPI CallMsgFilter(MSG FAR*, int); *)
CallMsgFilter: external
(#
  in0: @integer; (* MSG FAR* *)
  in1: @integer; (* int *)
  out: @integer; (* BOOL *)
enter (in0,in1)
do callStd;
exit out
#);

(****** Window size, position, Z-order, and visibility **********************) 

(* BOOL  WINAPI GetClientRect(HWND, NTRECT FAR* ); *)
GetClientRect: external
  (# hwnd: @integer; (* HWND *)
     ntr: @integer; (* RECT FAR* *)
     result: @integer;
  enter (hwnd,ntr)
  do callStd;
  exit result
  #);

(* void    WINAPI GetWindowRect(HWND, RECT FAR* ); *)
GetWindowRect: external
  (# hWnd: @integer; (* HWND *)
     aRect: @integer; (* RECT FAR* *)
     result: @integer;
  enter (hWnd,aRect)
  do callStd;
  exit result
  #);

(* BOOL    WINAPI GetWindowPlacement(HWND, WINDOWPLACEMENT FAR* ); *)
GetWindowPlacement: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* WINDOWPLACEMENT FAR* *)
     out: @integer; (* BOOL *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI SetWindowPlacement(HWND, const WINDOWPLACEMENT FAR* ); *)
SetWindowPlacement: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* const WINDOWPLACEMENT FAR* *)
     out: @integer; (* BOOL *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI SetWindowPos(HWND, HWND, int, int, int, int, UINT); *)
SetWindowPos: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HWND *)
     in2: @integer; (* int *)
     in3: @integer; (* int *)
     in4: @integer; (* int *)
     in5: @integer; (* int *)
     in6: @integer; (* UINT *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2,in3,in4,in5,in6)
  do callStd;
  exit out
  #);

(* HDWP    WINAPI BeginDeferWindowPos(int); *)
BeginDeferWindowPos: external
  (#
     in0: @integer; (* int *)
     out: @integer; (* HDWP *)
  enter in0
  do callStd;
  exit out
  #);

(* HDWP    WINAPI DeferWindowPos(HDWP, HWND, HWND, int, int, int, int, UINT); *)
DeferWindowPos: external
  (#
     in0: @integer; (* HDWP *)
     in1: @integer; (* HWND *)
     in2: @integer; (* HWND *)
     in3: @integer; (* int *)
     in4: @integer; (* int *)
     in5: @integer; (* int *)
     in6: @integer; (* int *)
     in7: @integer; (* UINT *)
     out: @integer; (* HDWP *)
  enter (in0,in1,in2,in3,in4,in5,in6,in7)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI EndDeferWindowPos(HDWP); *)
EndDeferWindowPos: external
  (#
     in0: @integer; (* HDWP *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(* BOOL    WINAPI MoveWindow(HWND, int, int, int, int, BOOL); *)
MoveWindow: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* int *)
     in2: @integer; (* int *)
     in3: @integer; (* int *)
     in4: @integer; (* int *)
     in5: @integer; (* BOOL *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2,in3,in4,in5)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI BringWindowToTop(HWND); *)
BringWindowToTop: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(* BOOL WINAPI SetForegroundWindow(HWND hWnd); *)
SetForegroundWindow: external
  (# hWnd: @integer; result: @integer;
  enter hWnd
  do callStd
  exit result
  #);

(****** Window proc implementation & subclassing support *********************)

(* LRESULT WINAPI DefWindowProc(HWND, UINT, WPARAM, LPARAM); *)
DefWindowProc: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* UINT *)
     in2: @integer; (* WPARAM *)
     in3: @integer; (* LPARAM *)
     out: @integer; (* LRESULT *)
  enter (in0,in1,in2,in3)
  do 'DefWindowProcA' -> callStd;
  exit out
  #);

(* LRESULT WINAPI CallWindowProc(WNDPROC, HWND, UINT, WPARAM, LPARAM); *)
CallWindowProc: external
  (* This is the STRICT version *)
  (#
     in0: ##external; (* WNDPROC *)
     in1: @integer; (* HWND *)
     in2: @integer; (* UINT *)
     in3: @integer; (* WPARAM *)
     in4: @integer; (* LPARAM *)
     out: @integer; (* LRESULT *)
  enter (in0##,in1,in2,in3,in4)
  do callStd;
  exit out
  #);

(* LRESULT WINAPI CallWindowProc(FARPROC, HWND, UINT, WPARAM, LPARAM); *)
(* CallWindowProc: external
 *   {* This is the non STRICT version *}
 *   (#
 *      in0: ##external; {* FARPROC *}
 *      in1: @integer; {* HWND *}
 *      in2: @integer; {* UINT *}
 *      in3: @integer; {* WPARAM *}
 *      in4: @integer; {* LPARAM *}
 *      out: @integer; {* LRESULT *}
 *   enter (in0##,in1,in2,in3,in4)
 *   do callStd;
 *   exit out
 *   #);
 *)

(****** Main window support **************************************************)

(* void    WINAPI AdjustWindowRect(RECT FAR*, DWORD, BOOL); *)
AdjustWindowRect: external
  (#
     in0: @integer; (* RECT FAR* *)
     in1: @integer; (* DWORD *)
     in2: @integer; (* BOOL *)
  enter (in0,in1,in2)
  do callStd;
  #);

(* void    WINAPI AdjustWindowRectEx(RECT FAR*, DWORD, BOOL, DWORD); *)
AdjustWindowRectEx: external
  (#
     in0: @integer; (* RECT FAR* *)
     in1: @integer; (* DWORD *)
     in2: @integer; (* BOOL *)
     in3: @integer; (* DWORD *)
  enter (in0,in1,in2,in3)
  do callStd;
  #);


(* BOOL    WINAPI FlashWindow(HWND, BOOL); *)
FlashWindow: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* BOOL *)
     out: @integer; (* BOOL *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* void    WINAPI ShowOwnedPopups(HWND, BOOL); *)
ShowOwnedPopups: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* BOOL *)
  enter (in0,in1)
  do callStd;
  #);

(* BOOL    WINAPI OpenIcon(HWND); *)
OpenIcon: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;  
exit out
  #);

(* void    WINAPI CloseWindow(HWND); *)
CloseWindow: external
  (#
     in0: @integer; (* HWND *)
  enter in0
  do callStd;
  #);

(* BOOL    WINAPI AnyPopup(void); *)
AnyPopup: external
  (#
     out: @integer; (* BOOL *)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI IsIconic(HWND); *)
IsIconic: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(* BOOL    WINAPI IsZoomed(HWND); *)
IsZoomed: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(****** Window coordinate mapping and hit-testing ***************************)

(* BOOL  WINAPI ClientToScreen(HWND, LPPOINT lpPoint ); *)
ClientToScreen: external
  (# hwnd: @integer; (* HWND *)
     ntPt: @integer; (* LPPOINT lpPoint *)
     result: @integer;
  enter (hwnd,ntPt)
  do callStd;
  exit result
  #);

(* BOOL WINAPI ScreenToClient(HWND, LPPOINT lpPoint ); *)
ScreenToClient: external
  (# hwnd: @integer; (* HWND *)
     ntPt: @integer; (* LPPOINT lpPoint *)
     result: @integer;
  enter (hwnd,ntPt)
  do callStd;
  exit result
  #);

(* void    WINAPI MapWindowPoints(HWND hwndFrom, HWND hwndTo, POINT FAR* lppt, UINT cpt); *)
MapWindowPoints: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HWND *)
     in2: ^ntPOINT; (* POINT FAR* *)
     in3: @integer; (* UINT *)
  enter (in0,in1,in2,in3)
  do callStd;
  #);

(* HWND    WINAPI WindowFromPoint(POINT); *)
WindowFromPoint: external
  (#
     in0: ^ntPOINT; (* POINT *)
     out: @integer; (* HWND *)
  enter in0[]
  do callStd;
  exit out
  #);

(* HWND    WINAPI ChildWindowFromPoint(HWND, POINT); *)
ChildWindowFromPoint: external
  (#
     in0: @integer; (* HWND *)
     in1: ^ntPOINT; (* POINT *)
     out: @integer; (* HWND *)
  enter (in0,in1[])
  do callStd;
  exit out
  #);

(****** Window query and enumeration ****************************************)

(* HWND    WINAPI GetDesktopWindow(void); *)
GetDesktopWindow: external
  (#
     out: @integer; (* HWND *)
  do callStd;
  exit out
  #);

(* HWND    WINAPI FindWindow(LPCSTR, LPCSTR); *)
FindWindow: external
  (#
     in0: @integer; (* LPCSTR *)
     in1: @integer; (* LPCSTR *)
     out: @integer; (* HWND *)
  enter (in0,in1)
  do 'FindWindowA' -> callStd;
  exit out
  #);

(* BOOL    WINAPI EnumWindows(WNDENUMPROC, LPARAM); *)
EnumWindows: external
  (# hWnd: @integer; (* WNDENUMPROC *)
     lParam: @integer; (* LPARAM *)
     out: @integer; (* BOOL *)
  enter (hWnd,lParam)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI EnumChildWindows(HWND, WNDENUMPROC, LPARAM); *)
EnumChildWindows: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* WNDENUMPROC *)
     in2: @integer; (* LPARAM *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI EnumTaskWindows(HTASK, WNDENUMPROC, LPARAM); *)
EnumTaskWindows: external
  (#
     in0: @integer; (* HTASK *)
     in1: ##external; (* WNDENUMPROC *)
     in2: @integer; (* LPARAM *)
     out: @integer; (* BOOL *)
  enter (in0,in1##,in2)
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetTopWindow(HWND); *)
GetTopWindow: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* HWND *)
  enter in0
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetWindow(HWND, UINT); *)
GetWindow: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* UINT *)
     out: @integer; (* HWND *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetNextWindow(HWND, UINT); *)
GetNextWindow: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* UINT *)
     out: @integer; (* HWND *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(****** Window property support *********************************************)

(* BOOL    WINAPI SetProp(HWND, LPCSTR, HANDLE); *)
SetProp: external
  (#
     in0: @integer; (* HWND *)
     in1: [1] @char; (* LPCSTR *)
     in2: @integer; (* HANDLE *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* HANDLE  WINAPI GetProp(HWND, LPCSTR); *)
GetProp: external
  (#
     in0: @integer; (* HWND *)
     in1: [1] @char; (* LPCSTR *)
     out: @integer; (* HANDLE *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* HANDLE  WINAPI RemoveProp(HWND, LPCSTR); *)
RemoveProp: external
  (#
     in0: @integer; (* HWND *)
     in1: [1] @char; (* LPCSTR *)
     out: @integer; (* HANDLE *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* int     WINAPI EnumProps(HWND, PROPENUMPROC); *)
EnumProps: external
  (#
     in0: @integer; (* HWND *)
     in1: ##external; (* PROPENUMPROC *)
     out: @integer; (* int *)
  enter (in0,in1##)
  do callStd;
  exit out
  #);

(****** Window drawing support **********************************************)

(* HDC     WINAPI GetDC(HWND); *)
GetDC: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* HDC *)
  enter in0
  do callStd;
  exit out
  #);

(* int     WINAPI ReleaseDC(HWND, HDC); *)
ReleaseDC: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HDC *)
     out: @integer; (* int *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* HDC     WINAPI GetWindowDC(HWND); *)
GetWindowDC: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* HDC *)
  enter in0
  do callStd;
  exit out
  #);

(* HDC     WINAPI GetDCEx(register HWND hwnd, HRGN hrgnClip, DWORD flags); *)
GetDCEx: external
  (#
     in0: @integer; (* register HWND *)
     in1: @integer; (* HRGN *)
     in2: @integer; (* DWORD *)
     out: @integer; (* HDC *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);



(****** Window repainting ***************************************************)

PAINTSTRUCT: cstruct
  (# bytesize::< (# do 64 -> value; #);
     hdc: @long (# pos::< (# do 0 -> value; #); #); (* HDC hdc *)
     fErase: @long (# pos::< (# do 4 -> value; #); #); (* BOOL fErase *)
     rcPaint: @  (* RECT rcPaint *)
     (# left: @long (# pos::< (# do 8 -> value; #); #);  
        top: @long (# pos::< (# do 12 -> value; #); #);  
        right: @long (# pos::< (# do 16 -> value; #); #);  
        bottom: @long (# pos::< (# do 20 -> value; #); #);  
     enter(left, top, right, bottom)
     exit(left, top, right, bottom)
     #); 
  #);


(* HDC     WINAPI BeginPaint(HWND, PAINTSTRUCT FAR* ); *)
BeginPaint: external
  (# hWnd: @integer; (* HWND *)
     ps: @integer; (* PAINTSTRUCT FAR* *)
     out: @integer; (* HDC *)
  enter (hWnd,ps)
  do callStd;
  exit out
  #);

(* void    WINAPI EndPaint(HWND, const PAINTSTRUCT FAR* ); *)
EndPaint: external
  (# hWnd: @integer; (* HWND *)
     ps: @integer; (* const PAINTSTRUCT FAR* *)
  enter (hWnd,ps)
  do callStd;
  #);

(* BOOL  WINAPI UpdateWindow(HWND); *)
UpdateWindow: external
  (# hwnd: @integer; (* HWND *)
     result: @integer;
  enter hwnd
  do callStd;
  exit result
  #);

(* int     WINAPI ExcludeUpdateRgn(HDC, HWND); *)
ExcludeUpdateRgn: external
  (#
     in0: @integer; (* HDC *)
     in1: @integer; (* HWND *)
     out: @integer; (* int *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* BOOL    WINAPI LockWindowUpdate(HWND hwndLock); *)
LockWindowUpdate: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* BOOL *)
  enter in0
  do callStd;
  exit out
  #);

(* BOOL    WINAPI GetUpdateRect(HWND, RECT FAR*, BOOL); *)
GetUpdateRect: external
  (# hwnd: @integer; (* HWND *)
     theRect: @integer; (* RECT FAR* *)
     erase: @integer; (* BOOL *)
     out: @integer; (* BOOL *)
  enter (hwnd,theRect,erase)
  do callStd;
  exit out
  #);

(* int     WINAPI GetUpdateRgn(HWND, HRGN, BOOL); *)
GetUpdateRgn: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HRGN *)
     in2: @integer; (* BOOL *)
     out: @integer; (* int *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* BOOL WINAPI InvalidateRect(HWND, const RECT FAR*, BOOL); *)
InvalidateRect: external
  (# hwnd: @integer; (* HWND *)
     ntr: @integer; (* const RECT FAR* *)
     erase: @integer; (* BOOL *)
     result: @integer;
  enter (hwnd,ntr,erase)
  do callStd;
  exit result
  #);

(* BOOL    WINAPI ValidateRect(HWND, const RECT FAR* ); *)
ValidateRect: external
  (# hwnd: @integer; (* HWND *)
     theRect: @integer; (* const RECT FAR* *)
     res: @integer;
  enter (hwnd,theRect)
  do callStd;
  exit res
  #);

(* BOOL  WINAPI InvalidateRgn(HWND, HRGN, BOOL); *)
InvalidateRgn: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HRGN *)
     in2: @integer; (* BOOL *)
     res: @integer;
  enter (in0,in1,in2)
  do callStd;
  exit res
  #);

(* void    WINAPI ValidateRgn(HWND, HRGN); *)
ValidateRgn: external
  (#
     in0: @integer; (* HWND *)
     in1: @integer; (* HRGN *)
  enter (in0,in1)
  do callStd;
  #);

(* BOOL    WINAPI RedrawWindow(HWND hwnd, const RECT FAR* lprcUpdate, HRGN hrgnUpdate, UINT flags); *)
RedrawWindow: external
  (#
     in0: @integer; (* HWND *)
     in1: ^ntRECT; (* const RECT FAR* *)
     in2: @integer; (* HRGN *)
     in3: @integer; (* UINT *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2,in3)
  do callStd;
  exit out
  #);

(****** Window scrolling ****************************************************)

(* BOOL  WINAPI ScrollWindow(HWND, int, int, const RECT FAR*, const RECT FAR* ); *)
ScrollWindow: external
  (# hwnd: @integer; (* HWND *)
     dx: @integer; (* int *)
     dy: @integer; (* int *)
     rcScroll: ^ntRECT; (* const RECT FAR* *)
     rcClip: ^ntRECT; (* const RECT FAR* *)
     result: @integer;
  enter (hwnd,dx,dy,rcScroll[],rcClip[])
  do callStd;
  exit result
  #);

(* BOOL    WINAPI ScrollDC(HDC, int, int, const RECT FAR*, const RECT FAR*, HRGN, RECT FAR* ); *)
ScrollDC: external
  (#
     in0: @integer; (* HDC *)
     in1: @integer; (* int *)
     in2: @integer; (* int *)
     in3: ^ntRECT; (* const RECT FAR* *)
     in4: ^ntRECT; (* const RECT FAR* *)
     in5: @integer; (* HRGN *)
     in6: @integer; (* RECT FAR* *)
     out: @integer; (* BOOL *)
  enter (in0,in1,in2,in3,in4,in5,in6)
  do callStd;
  exit out
  #);

(* int WINAPI ScrollWindowEx(HWND hwnd, int dx, int dy,
 const RECT FAR* prcScroll, const RECT FAR* prcClip,
 HRGN hrgnUpdate, RECT FAR* prcUpdate, UINT flags); 
 *)
ScrollWindowEx: external
  (# hwnd: @integer; (* HWND *)
     dx: @integer; (* int *)
     dy: @integer; (* int *)
     prcScroll: ^ntRECT; (* const RECT FAR* *)
     prcClip: ^ntRECT; (* const RECT FAR* *)
     hrgnUpdate: @integer; (* HRGN *)
     prcUpdate: ^ntRECT; (* const RECT FAR* *)
     flags: @integer;
     out: @integer; (* int *)
  enter (hwnd,dx,dy,prcScroll[],prcClip[],hrgnUpdate,prcUpdate[],flags)
  do callStd;
  exit out
  #);

(****** Non-client window area management ************************************)


(****** Window activation ***************************************************)

(* HWND    WINAPI SetActiveWindow(HWND); *)
SetActiveWindow: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* HWND *)
  enter in0
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetActiveWindow(void); *)
GetActiveWindow: external
  (#
     out: @integer; (* HWND *)
  do callStd;
  exit out
  #);

(* HWND    WINAPI GetLastActivePopup(HWND); *)
GetLastActivePopup: external
  (#
     in0: @integer; (* HWND *)
     out: @integer; (* HWND *)
  enter in0
  do callStd;
  exit out
  #);
