ORIGIN 'ntiTypes';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1994-95
 *       All rights reserved.
 *)

-- Lib: Attributes --

(****** File I/O ************************************************************)
OF_READ: (# exit 16x00000000 #);
OF_WRITE: (# exit 16x00000001 #);
OF_READWRITE: (# exit 16x00000002 #);
OF_SHARE_COMPAT: (# exit 16x00000000 #);
OF_SHARE_EXCLUSIVE: (# exit 16x00000010 #);
OF_SHARE_DENY_WRITE: (# exit 16x00000020 #);
OF_SHARE_DENY_READ: (# exit 16x00000030 #);
OF_SHARE_DENY_NONE: (# exit 16x00000040 #);
OF_PARSE: (# exit 16x00000100 #);
OF_DELETE: (# exit 16x00000200 #);
OF_VERIFY: (# exit 16x00000400 #);
OF_CANCEL: (# exit 16x00000800 #);
OF_CREATE: (# exit 16x00001000 #);
OF_PROMPT: (# exit 16x00002000 #);
OF_EXIST: (# exit 16x00004000 #);
OF_REOPEN: (# exit 16x00008000 #);

OFS_MAXPATHNAME: (# exit 128 #);

HFILE_ERROR: (# exit -1 #);

ofstructBytesOffset: (# exit 0 #);
ofstructFixedDiskOffset: (# exit 1 #);
ofstructErrorCodeOffset: (# exit 2 #);
ofstructPathNameCodeOffset: (# exit 8 #);

ofstructSize: (# exit 136 #);

(* OpenFile() Structure *)
OFSTRUCT: cstruct
  (# bytesize::< (# do 136 -> value; #);
     cBytes: @byte (# pos::< (# do 0 -> value; #); #);      (* BYTE cBytes; *)
     fFixedDisk: @byte (# pos::< (# do 1 -> value; #); #);  (* BYTE fFixedDisk; *)
     nErrCode: @short (# pos::< (# do 2 -> value; #); #)     (* WORD nErrCode; *)
     (* WORD Reserved1;
        WORD Reserved2;
        CHAR szPathName[OFS_MAXPATHNAME];
      *)
  #);

(* HFILE   WINAPI OpenFile(LPCSTR, OFSTRUCT FAR*, UINT); *)
OpenFile: external
  (#
     filename: [1] @char; (* LPCSTR *)
     ofstructPtr: ^ofstruct; (* OFSTRUCT FAR* *)
     mode: @integer; (* UINT *)
     hFile: @integer; (* HFILE *)
  enter (filename,ofstructPtr[],mode)
  do 'OpenFile' -> callStd;
  exit hFile
  #);

OpenFilePtr: external
  (#
     filename: [1] @char; (* LPCSTR *)
     ofstructPtr: @integer; (* OFSTRUCT FAR* *)
     mode: @integer; (* UINT *)
     hFile: @integer; (* HFILE *)
  enter (filename,ofstructPtr,mode)
  do 'OpenFile' -> callStd;
  exit hFile
  #);

(* HFILE   WINAPI _lopen(LPCSTR, int); *)
_lopen: external
  (#
     in0: [1] @char; (* LPCSTR *)
     in1: @integer; (* int *)
     out: @integer; (* HFILE *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* HFILE   WINAPI _lcreat(LPCSTR, int); *)
_lcreat: external
  (#
     in0: [1] @char; (* LPCSTR *)
     in1: @integer; (* int *)
     out: @integer; (* HFILE *)
  enter (in0,in1)
  do callStd;
  exit out
  #);

(* HFILE   WINAPI _lclose(HFILE); *)
_lclose: external
  (#
     in0: @integer; (* HFILE *)
     out: @integer; (* HFILE *)
  enter in0
  do callStd;
  exit out
  #);

(* LONG    WINAPI _llseek(HFILE, LONG, int); *)
_llseek: external
  (#
     in0: @integer; (* HFILE *)
     in1: @integer; (* LONG *)
     in2: @integer; (* int *)
     out: @integer; (* LONG *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* UINT    WINAPI _lread(HFILE, void _huge*, UINT); *)
_lread: external
  (#
     in0: @integer; (* HFILE *)
     in1: @integer; (* void _huge* *)
     in2: @integer; (* UINT *)
     out: @integer; (* UINT *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* UINT    WINAPI _lwrite(HFILE, const void _huge*, UINT); *)
_lwrite: external
  (#
     in0: @integer; (* HFILE *)
     in1: @integer; (* const void _huge* *)
     in2: @integer; (* UINT *)
     out: @integer; (* UINT *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* long    WINAPI _hread(HFILE, void _huge*, long); *)
_hread: external
  (#
     in0: @integer; (* HFILE *)
     in1: @integer; (* void _huge* *)
     in2: @integer; (* long *)
     out: @integer; (* long *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* long    WINAPI _hwrite(HFILE, const void _huge*, long); *)
_hwrite: external
  (#
     in0: @integer; (* HFILE *)
     in1: @integer; (* const void _huge* *)
     in2: @integer; (* long *)
     out: @integer; (* long *)
  enter (in0,in1,in2)
  do callStd;
  exit out
  #);

(* int     WINAPI GetTempFileName(BYTE, LPCSTR, UINT, LPSTR); *)
GetTempFileName: external
  (#
     in0: @char; (* BYTE *)
     in1: [1] @char; (* LPCSTR *)
     in2: @integer; (* UINT *)
     in3: [1] @char; (* LPSTR *)
     out: @integer; (* int *)
  enter (in0,in1,in2,in3)
  do callStd;
  exit out
  #);

(* BYTE    WINAPI GetTempDrive(char); *)
GetTempDrive: external
  (#
     in0: @char; (* char *)
     out: @char; (* BYTE *)
  enter in0
  do callStd;
  exit out
  #);

(* UINT    WINAPI GetDriveType(int); *)
GetDriveType: external
  (#
     in0: @integer; (* int *)
     out: @integer; (* UINT *)
  enter in0
  do callStd;
  exit out
  #);

(* UINT    WINAPI SetHandleCount(UINT); *)
SetHandleCount: external
  (#
     in0: @integer; (* UINT *)
     out: @integer; (* UINT *)
  enter in0
  do callStd;
  exit out
  #);
