ORIGIN 'ntitypes';
(*
 * COPYRIGHT
 *       Copyright (C) Aarhus University
 *       All rights reserved.
 *)

-- Lib: Attributes --

STATUS_TIMEOUT: (# exit 16x00000102 #);
WAIT_TIMEOUT: (# exit STATUS_TIMEOUT #);

FILE_SHARE_READ: (# exit 0x00000001 #);  
FILE_SHARE_WRITE: (# exit 0x00000002 #);  
FILE_ATTRIBUTE_READONLY: (# exit 0x00000001 #);  
FILE_ATTRIBUTE_HIDDEN: (# exit 0x00000002 #);  
FILE_ATTRIBUTE_SYSTEM: (# exit 0x00000004 #);  
FILE_ATTRIBUTE_DIRECTORY: (# exit 0x00000010 #);  
FILE_ATTRIBUTE_ARCHIVE: (# exit 0x00000020 #);  
FILE_ATTRIBUTE_NORMAL: (# exit 0x00000080 #);  
FILE_ATTRIBUTE_TEMPORARY: (# exit 0x00000100 #);  
FILE_ATTRIBUTE_COMPRESSED: (# exit 0x00000800 #);  
FILE_NOTIFY_CHANGE_FILE_NAME: (# exit 0x00000001 #);   
FILE_NOTIFY_CHANGE_DIR_NAME: (# exit 0x00000002 #);   
FILE_NOTIFY_CHANGE_ATTRIBUTES: (# exit 0x00000004 #);   
FILE_NOTIFY_CHANGE_SIZE: (# exit 0x00000008 #);   
FILE_NOTIFY_CHANGE_LAST_WRITE: (# exit 0x00000010 #);   
FILE_NOTIFY_CHANGE_SECURITY: (# exit 0x00000100 #);   

(*
 //
 //  A language ID is a 16 bit value which is the combination of a
 //  primary language ID and a secondary language ID.  The bits are
 //  allocated as follows:
 //
 //       +-----------------------+-------------------------+
 //       |     Sublanguage ID    |   Primary Language ID   |
 //       +-----------------------+-------------------------+
 //        15                   10 9                       0   bit
 //
 //
 //  Language ID creation/extraction macros:
 //
 //    MAKELANGID    - construct language id from a primary language id and
 //                    a sublanguage id.
 //    PRIMARYLANGID - extract primary language id from a language id.
 //    SUBLANGID     - extract sublanguage id from a language id.
 //
 *)

LANG_NEUTRAL:        (# exit 0x00 #);
SUBLANG_NEUTRAL:     (# exit 0x00 #);
SUBLANG_DEFAULT:     (# exit 0x01 #);
SUBLANG_SYS_DEFAULT: (# exit 0x02 #);
SORT_DEFAULT:        (# exit 0x0 #);

MAKELANGID:
  (# s,p: @shortInt;
  enter (p,s)
  exit ((s %sla 10) %Bor p)
  #);

PRIMARYLANGID:
  (# lgid: @shortInt;
  enter lgid
  exit (lgid %Band 0x3ff)
  #);

SUBLANGID:
  (# lgid: @shortInt;
  enter lgid
  exit (lgid %sra 10)
  #);

(*
 //
 //  A locale ID is a 32 bit value which is the combination of a
 //  language ID, a sort ID, and a reserved area.  The bits are
 //  allocated as follows:
 //
 //       +-------------+---------+-------------------------+
 //       |   Reserved  | Sort ID |      Language ID        |
 //       +-------------+---------+-------------------------+
 //        31         20 19     16 15                      0   bit
 //
 //
 //  Locale ID creation/extraction macros:
 //
 //    MAKELCID            - construct the locale id from a language id and a sort id.
 //    MAKESORTLCID        - construct the locale id from a language id, sort id, and sort version.
 //    LANGIDFROMLCID      - extract the language id from a locale id.
 //    SORTIDFROMLCID      - extract the sort id from a locale id.
 //    SORTVERSIONFROMLCID - extract the sort version from a locale id.
 //
 *)

NLS_VALID_LOCALE_MASK: (# exit 0x000fffff #);

MAKELCID:
  (# lgid, srtid: @shortInt;
     l, s: @int32;
  enter (lgid, srtid)
  exit ((srtid->s) %sla 16) %Bor (lgid->l)
  #);

MAKESORTLCID:
  (# lgid, srtid, ver: @shortint;
     v: @int32;
  enter (lgid, srtid, ver)
  exit ((lgid, srtid)->MAKELCID) %Bor ((ver->v) %sla 20)
  #);

LANGIDFROMLCID:
  (# lcid: @int32;
     l: @int16;
  enter (lcid)
  exit lcid->l
  #);

SORTIDFROMLCID:
  (# lcid: @int32;
     l: @int16;
  enter (lcid)
  exit (((lcid->l) %sra 16) %Band 0xf)
  #);

SORTVERSIONFROMLCID:
  (# lcid: @int32;
     l: @int16;
  enter (lcid)
  exit (((lcid->l) %sra 20) %Band 0xf)
  #);

(*
 //
 //  Default System and User IDs for language and locale.
 //
 *)

LANG_SYSTEM_DEFAULT:
  (# exit (LANG_NEUTRAL, SUBLANG_SYS_DEFAULT)->MAKELANGID #);
LANG_USER_DEFAULT:
  (# exit (LANG_NEUTRAL, SUBLANG_DEFAULT)->MAKELANGID #);

LOCALE_SYSTEM_DEFAULT:
  (# exit (LANG_SYSTEM_DEFAULT, SORT_DEFAULT)->MAKELCID #);
LOCALE_USER_DEFAULT:
  (# exit (LANG_USER_DEFAULT, SORT_DEFAULT)->MAKELCID #);

LOCALE_NEUTRAL:
  (# exit ((LANG_NEUTRAL, SUBLANG_NEUTRAL)->MAKELANGID, SORT_DEFAULT)->MAKELCID #);


