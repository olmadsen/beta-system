ORIGIN 'objectcode'
---classDef:doPart---
do
---pushConst:descriptor---
(#
do (if true 
    // cst <= 255 then
       codes.pushc -> emit;
       cst -> emit
    // cst <= 255 * 255  then
       codes.pushc2 -> emit;
       cst -> emit2
    else 
       'OBS! Constant >= 2^16 is not implemented' -> comment
   if)
#)
---rpushg:descriptor---
(#
do codes.rpushg -> emit; off -> emit;
#)
---jmp:doPart---
do ' jmp L' -> out.puttext; lab -> out.putint; out.newline;
   codes.jmp -> emit;
   0 -> emit2;
   lab -> labs.mark;
---jmpFalse:descriptor---
(#
do codes.jmpFalse -> emit;
   0 -> emit2;
   Flab -> labs.mark
#)
---callPrim:descriptor---
(#
do codes.prim -> emit; op -> emit;
   (if op 
    // prim.attach then 
       ' ' -> out.put;
       'D' -> out.put;
       'D' -> emit 
    // prim.fork // prim.cmpAndSwap // prim.thisCore then
       (* perhaps more prims require C-mode, 
        * but we are probably shure with the above ones
        *)
       true -> descs.onlyCinterpreter;
   if);
#)
   
