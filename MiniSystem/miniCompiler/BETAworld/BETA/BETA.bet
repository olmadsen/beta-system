BETA: @
  (# %OSDvisibility=disguised %
     integer: 
       (# %simple=32 %  
          cmpAndSwap: (#  %prim % V,res: @integer enter V  exit res #);
       #);
     char: (# %simple=16 %  #);
     boolean: (# %simple=8 %  #);
     False: (#  exit 0 #);
     True: (#  exit 1 #);
     object: 
       (# %simple %
          attach: (# %prim %  #);
          suspend: (# %simple %  #)
       #);
     repetition: 
       (# %simple %
          index: (# %simple %  #);
          range: (# %simple %  #)
       #);
     structureRef: (# %basic % structureRefXX: @ boolean #);
     put: (# %prim %  #);
     get: (# %prim %  #);
     sendMsg: (# %simple %  #);
     disable: (# %simple %  #);
     enable: (# %simple %  #);
     fork: (# %simple % #);
     sleep: (# %simple % #);
     thisCore: (# %simple % #);
     _break: (# %simple %  #);
     error: (# %simple %  #);
     (* For use in subpattern restrictions *)
     immutable: (# %simple% #);
     method: (# %simple% #);
     static: (# %simple% #);
     dynamic: (# %simple% #);
     super: (# %simple% #);
     
     BooleanValue: (# value: @ boolean do inner exit value #);
     FalseValue: BooleanValue(#  do false -> value #);
     TrueValue: BooleanValue(#  do true -> value #);
     cycle: 
       (# 
       do Loop:
            (if 1 then 
               inner;
               restart Loop
            if)
       #);
     putInt: 
       (# V: @ integer;
          ch: @ char;
          isNegative: @ boolean;
          top: @ integer;
          R:[12] @ char
       enter V
       do (if V = 0 then
              1 -> top; 0 -> R[top]
           else
              (if V < 0 then
                  (*true*) 
                  1 -> isNegative; - V -> V
              if);
              L:
                (if V > 0 then
                    top + 1 -> top;
                    V mod 10 -> R[top];
                    V div 10 -> V;
                    restart L
                if)
          if);
          (if isNegative then
              '-' -> put
          if);
          (for i: top repeat
               R[top - i + 1] + '0' -> put
          for)
       #);
     newline: (#  do 10 -> put #)
  #)
