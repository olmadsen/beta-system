Text:Stream
  (# %basic,OSDvisibility=disguised %
    length: (# L: @ integer do T[0] -> L exit L #);
    putx::< 
       (# R: ^text
       do pos + 1 -> pos;
          (if pos <=  T[0] then
              ch -> T[pos]
          if)
       #);
    print::< 
       (# 
       do (for i: pos repeat
               T[i] -> put
          for)
       #);
    putText::< 
       (# 
       do (if T[] <>  none then
              T.scan(#  do currentCh -> putx #)
          if)
       #);
    getx::< (#  do pos + 1 -> pos; T[pos] -> ch #);
    inxGet: 
      (# inx: @ integer; ch: @ char
      enter inx
      do T[inx] -> ch
      exit ch
      #);
    setPos: (# V: @ integer enter V do V -> pos #);
    clear: (#  do setPos #);
    scan: 
      (# currentCh: (#  enter T[inx] do  exit T[inx] #);
        inx: @ integer
      do (for i: pos repeat
              i -> inx; inner
         for)
      #);
    dump: 
      (# 
      do 10 -> put;
         'P' -> put;
         ':' -> put;
         pos -> BETA.putint;
         ' ' -> put;
         'I' -> put;
         ':' -> put;
         T[1] -> BETA.putint;
         ' ' -> put;
         'R' -> put;
         ':' -> put;
         T[0] -> BETA.putint;
         ' ' -> put;
         '"' -> put;
         (for i: pos repeat
              T[i] -> put
         for);
         '"' -> put;
         10 -> put
      #);
    pos: @ integer;
    T:[100] @ char
  #)