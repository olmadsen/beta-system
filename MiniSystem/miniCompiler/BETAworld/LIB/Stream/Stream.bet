Stream:
  (# putx:<(# ch: @ char enter ch do inner #);
     putText:< (# T: ^text enter T[] do inner #);
     getx:< (# ch: @char do inner exit ch #);
     
     putint: 
       (# V: @ integer;
          ch: @ char;
          top: @ integer;
          R:[12] @ char;
       enter V
       do (if V < 0 then
              '-' -> put; - V -> V
          if);
          (if V = 0 then
              1 -> top; 0 -> R[top]
           else 
              L:
            (if V > 0 then
                top + 1 -> top;
                V mod 10 -> R[top];
                V div 10 -> V;
                restart L
            if)
          if);
          (for i: top repeat R[top - i + 1] + '0' -> putx for)
       #);
     getInt:
       (# V: @integer; ch: @char; 
          gotDigit: @boolean;
          T: ^text
       do getx -> ch;
          Loop:
            (if ('0' <= ch) and (ch <= '9') then
                1 -> gotDigit;
                V * 10 -> V;
                V + ch -> V;
                V - '0' -> V; 
                getx -> ch; 
                restart Loop
             else
                (*
                (if not gotDigit then 
                    'getInt: no valid integer' -> T[];
                    T.print
                if);*)
            if);
       exit V
       #);
     newline: (# do 10 -> putx #);
     print:<(#  do inner #);
  #)
