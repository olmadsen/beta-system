MessagePassingSystem: @xBasicSystem
  (# 
     System: BasicSystem
       (# Message: (# do inner #);
          Process: BasicProcess
            (# start::< 
                 (# 
                 do this(Process)[] -> SQS.insert;
                    inner 
                 #);          
               SendMessage:
                 (# M: ^Message
                 enter M[]
                 do L.get; M[] -> Q.insert; L.free; 
                 #);
               GetMessage:
                 (# M: ^Message
                 do Q.removeNext -> M[]
                 exit M[]
                 #);
               
               Q: @ProcessQueue;
               L: @Lock 
            do P_status.ACTIVE -> status; 'Qqq'-> L.init;
               inner;
               P_status.TERMINATED -> status  
            #);

       do '\nMessage Passing System\n'.print;
          inner;
       #)
  #)

