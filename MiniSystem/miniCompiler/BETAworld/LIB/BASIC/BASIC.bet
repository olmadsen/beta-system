BASIC: @
  (# int:
       (# v: @integer;
          add: (# x: ^int enter x[] do v + x.v -> v exit this(int)[] #);
          sub: (# x: ^int enter x[] do v - x.v -> v exit this(int)[] #);
          eq: 
            (# x: ^int; B: ^Bool
            enter x[] 
            do (if V = X.v then &TT[] -> B[] else &FF[] -> B[]if)
            exit B[]
            #);
          timesRepeat:
            (# range,inx: @integer
            do 1 -> inx;
               v -> range;
               loop:
                 (if inx <= range then
                     inner;
                     inx + 1 -> inx;
                     restart loop
                 if)
            #)
       enter v
       do 
       exit this(int)[]
       #);
     bool:
       (# B: @boolean;
          iff:< 
            (# thenn:< (# do 'A'->put; inner; 'B'->put #);
               elsee:< (# do inner #);
            do 'Z'->put;  inner
            #);
          doIf:<
            (# thenn,elsee: ##object
            enter(thenn##,elsee##)
            do inner
            #)
       #);
     TT: bool
       (# iff::< 
            (# thenn::< (# do 'C'->put; inner; 'D'-> put #);
            do 'Y'->put; thenn
            #) 
          doIf::< (# do thenn #);
       #);
     FF: bool 
       (# iff::<(# do elsee #);
          doIf::< (# do elsee #)
       #);
     
     main: @
       (#    
          go:
            (# A,B,C: @int; D,T: ^int; 
               boo: @TT;
               doIt: @ TT
                 (# iff::
                    (# thenn:: (#do 'Q' -> put#);
                       elsee:: (# do 'W' -> put#)
                    #)
                 #);
               fisk: @FF;
            do 3 -> A.v;
               6 -> B.v;
               12 -> C.v;
               C[] -> (B[] -> A.add).sub-> D[];  (* A + B - C -> D *)
               D.v -> putint; (* D = -3 *)
               10 -> put;
               doIt.iff
               (*fisk.iff(# thenn::(# do '?' -> put #);
                          elsee:: (# do 'V' -> put #)
                       #)*)
            #);
          go2:
            (# A,B: ^Int;
               AA: (# do 'A' -> put #);
               BB: (# do 'B' -> put #);
               bbb: ^bool
            do 
               &TT[] -> bbb[];
               (AA##,BB##) -> bbb.doIf;
               &FF[] -> bbb[];
               (AA##,BB##) -> bbb.doIf;
               10 -> put;
               13 -> Int -> A[]; 
               17 -> Int -> B[]; 
               (AA##,BB##) -> (A[] -> B.eq).doIf;
               
               (* (if (A+4) = B then '!' -> put else '?' -> put if) *)
               ((# do '!' -> put#)##,(# q,e: ^int do '?' -> put #)##)
                 -> (4->int->A.add->B.eq).doIf;
               4 -> int->A[]; 
               '&'->put;
               A.timesRepeat(#do '*' -> put #);
               (*(4 -> int).timesRepeat(#do '*' -> put #)*)
            #)
       #);
  do main.go;
     10 -> put;
     main.go2;
     10->put
  #)
