Reader: @
  (# %OSDvisibility=SkipInternal %
     T: ^text;
     pos: @integer;
    init: 
      (# 
      do 'Hello! $Here we go!%' -> T[];
         0 -> T.setPos
      #);
    nextCh: 
       (# ch: @ char
       do get -> ch;
          pos + 1 -> pos;
          (if pos < T.length then
              pos -> T.inxGet -> ch
           else '.' -> ch
          if)
      exit ch
       #);
    SkipWhiteSpace: 
      { n: @ integer
      do Loop:
           (if ch <=  ' ' then
               n + 1 -> n;
               nextCh -> ch;
               restart Loop
           if);
         (if n > 0 then
             Breaker.addSep
         if)
      };
    ch: @ char;
start: 
  (# callAdd: (# elsePart:< object  do elsePart #)
  do Loop:
       (if true then
           nextCh -> ch;
           SkipWhiteSpace;
           (if ch
            // '$' then
               Breaker.addPar;
               restart Loop
            // '%' then
               Breaker.clear
            else
               callAddX
               (# elsepart::
                    (#
                    do ch -> breaker.add
                    #)
               #);
               restart Loop
           if)
       if)
  #)
}
