ActorDemo: @ ActorSystem.System
  (# MyMessage: Message (# V, fac: @integer enter(V,fac) #)
     A1: @ Actor
       (# fac: 
            (# V,res: @integer
            enter V 
            do (if V = 1 then V -> res else (V - 1 -> fac) * V -> res if)
            exit res
            #)
       do (for i: 10 repeat
              (i,i,i -> fac)  -> MyMessage
                 -> A2.send; 
          for);
          (0,0,0) -> MyMessage -> A2.send
       #);
     A2: @ Actor
       (#
       do waitMessage:
            receive
            (# MM: ^MyMessage
            do M[] -> MM[]; 
               console.display
               (#
               do '>'->put; MM.id -> putint; ' '-> put; 
                  'factoral('.print;
                  MM.V -> putint; 
                  ') = '.print;
                  MM.fac -> putint;
                  '\n'.print
               #);
               (if M.id = 0 then leave waitMessage if)
            #)
       #)     
  do 'ActorSystem demo\n'.print;
    10 -> A1.start; 11 -> A2.start;
  #)

