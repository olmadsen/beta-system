MonitorDemo: @MonitorSystem.System
  (# P1: @ Process
       (# 
       do (for i: 10 repeat 'P' -> put; '1'->put;
               1000 + i  -> M.putItem
          for)
       #);
     M: @ Monitor
       (# putItem: entry
            (# itm: @integer
            enter itm
            do '<'->put; itm -> putint; '>'->put
            #)
          getItem: entry
            (#
            do
            #);
          item: @integer
       #);
     P2: @ Process
       (# 
       do (for i: 10 repeat 'P' -> put; '2' -> put;
               2000 + i -> M.putItem
          for)
       #);
     P3: @ Process 
       (# foo: (# do ':foo is here'.print; newline #);
       do (for i:10 repeat 'P'->put; '3' -> put;
               3000 + i -> M.putitem;
               foo
          for)
       #);
     tstQ:
       (#
       do 101 -> P1.start;
          102 -> P2.start;
          103 -> P3.start;
          SQS.display;
          P3[] -> SQS.remove;
          SQS.display;
          newline
       #);
     
  do 'MonitorSystem demo:'.print; 
     M.init; 
     (*tstQ;*)
     M[] -> theM[];
     101 -> P1.start; 102 -> P2.start; 103 ->  P3.start
  #)
