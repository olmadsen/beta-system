test: @
  (# Account: (# go: (#  do 'I' -> put #) #);
     doIt: 
       (# lisa: ^Account; S: ^text
       do '2' -> put;
          &Account[] -> lisa[];
          lisa.go;
          '3' -> put;
          '4' -> put
       #);
     joe: ^Account;
     T: ^text;
     fileX: 
       (# open: (# nm: ^text enter nm[] do  #);
          put: 
            (# ch: @ char
            enter ch
            do (1,handle,ch) -> sendMsg
            #);
          puttext: 
            (# T: ^text
            enter T[]
            do (1,handle,T[]) -> sendMsg
            #);
          fun: (#  do (1,handle,'hello') -> sendMsg #);
          handle: @ integer
       #);
     F: @ file;
     hest: 
       (# a,b,qqq: @ integer;
          show: (#  do qqq -> putint #)
       #);
     xhest: hest
       (# zzz: @ integer;
          zshow: (#  do zzz -> putint #)
       #);
     foo: 
       (# a,b,c: @ integer; T: ^hest
       enter (a,b,c)
       do &hest[] -> T[]; a + b + c -> T.qqq
       exit T[]
       #);
     bar: 
       (# x,y,v: @ integer
       enter (x,y)
       do x + y -> v
       exit v
       #);
     fisk: (#  do  exit 117 #);
     abe: @ 
       (# age: (#  do  exit 17 #);
          height: (# z: @ integer do 34 -> z exit z #)
       #);
     kat: @ 
       (# put: 
            (# V,W: @ integer
            enter (V,W)
            do V + W -> V
            exit V
            #)
       #);
     H: ^hest;
     X: @ integer;
     nestedSubs: @ 
       (# x0: @ char;
          abe: (# x1: @ char #);
          abex: abe(# y: @ char #);
          gox: @ 
            (# kat: abex(# x2: @ char #);
               goy: @ 
                 (# dyr: kat
                      (# x3: @ char;
                         goz: 
                           (# 
                           do 'a' -> x0;
                              'b' -> x1;
                              'c' -> x2;
                              'd' -> x3
                           #)
                      #);
                    bloddyr: dyr(# y2: @ char #);
                    d: ^dyr
                 do &bloddyr[] -> d[];
                    x0 -> put;
                    d.x1 -> put;
                    d.x2 -> put;
                    d.x3 -> put
                 #)
            do goy
            #)
       #);
     P: ^nestedSubs.abe;
     TT: ^text;
     ch: @ char;
     ex1: 
       (# T: ^text
       do 'Hello' -> T[];
          T.scan(#  do currentCh -> put #)
       #);
     ex2: 
       (# 
       do '<' -> put;
          L:
            
            (# 
            do (for i: 5 repeat
                    '.' -> put;
                    (if i = 3 then
                        '!' -> put; leave L
                    if)
               for)
            #);
          '>' -> put
       #);
     ex3: 
       (# 
       do 'hello'.print;
          'world'.print;
          inner;
          'today'.print
       #);
     ex4: ex3(#  do 'How are you?'.print #);
     ex5: 
       (# ping: (# go: (#  do 'hello'.print #) #);
          R,S: ^ping;
          show: (#  exit R[] #)
       do &ping[] -> R[];
          (for i: 3 repeat
               R.go; (show).go
          for)
       #);
     ex6: 
       (# ex6_foo: 
            (# fool_6:< 
                 (# 
                 do 'q' -> put; inner; 'e' -> put
                 #)
            do fool_6
            #);
          ex6_fisk: ex6_foo
            (# fool_6:: (#  do 'w' -> put #)
            #)
       do '*' -> put; ex6_fisk
       #);
     vehicle: (# show:< (#  do 'a' -> put; inner #) #);
     car: vehicle(#  #);
     bus: vehicle(#  #);
     v: ^vehicle;
     c: ^car;
     b: ^bus;
     ex7: @ 
       (# 
       do &car[] -> c[];
          c[] -> v[];
          v[] -> c[];
          c[] -> b[]
       #);
     example: 
       (# person: (# init: (#  do  #) #);
          thePerson: ^Person
       do thePerson.init
       #);
     ex8: 
       (# isEmpty: 
            (# n: @ integer; value: @ boolean
            enter n
            do inner
            exit value
            #);
          isE: isEmpty
            (# 
            do n < 10 -> value;
               n -> putint;
               ' ' -> put;
               newline
            #)
       do (for i: 11 repeat
               (if (i -> isE) then
                   'E' -> put
                else
                   'X' -> put
               if)
          for)
       #);
     ex9: 
       (# seven: (#  exit 7 #);
          hej: (#  do ':hej:'.print #)
       do '?' -> put;
          hej;
          'syv:'.print;
          seven -> putint;
          newline
       #);
     ex10: 
       (# R: @ 
            (# sjov: 
                 (# a,b,c,x: @ integer
                 enter (a,b,c)
                 do a + b + c -> x
                 exit x
                 #)
            #);
          Q: @ integer
       do (10,11,22) -> R.sjov -> Q;
          Q -> putint;
          newline
       #);
     ex11:
       (# S1,S2: ^text;
       do none -> S1[];
         (* &text(100)[] -> S1[];*) 'Hello' -> S1[];
          (if S1[] = none then
              'A' -> put;
           else
              'B'-> put
          if);
          '>'->put;
       #)
          
  do 'Q' -> put;
     ex11;
     'W'->put; newline;
     (if 0 then
         ex9
     if);
     (if 0 then
         ex8; ex6
     if);
     (if 0 then
         ex5
     if);
     (if 0 then
         ex4
     if);
     (if 0 then
         ex1
     if);
     (if 0 then
         (for i: 10 repeat
              get -> ch; ch -> put
         for)
     if);
     (if 0 then
         ex2
     if);
     (if 0 then
         10 -> put;
         'World' -> 'Hello '.puttext -> TT[];
         TT.print
     if);
     (1,2,3) -> foo -> H[];
     H.show;
     (7,8) -> bar -> X;
     X -> putint;
     fisk -> putint;
     (abe.age,abe.height) -> kat.put -> X;
     ',' -> put;
     X -> putint;
     &Account[] -> joe[];
     Joe.go
  #)
