banking: @
  (# 
     with dk.au.cs.Collections;

     Person:
       (# name: ^Text;
          init:
            (# value: ^Text;
            enter value[]
            do value[] -> name[];
            #);
       #);
     
     bank: @
       (# 
          transfer:
            (# from: ^Account;
               to: ^Account;
               amount: @integer;
            enter (from[], to[], amount)
            do amount -> from.withdraw;
               amount -> to.deposit;
            #);
          Account:
            (# owner: ^Person;
               balance: @integer;
               
               init:
                 (# aPerson: ^Person;
                 enter aPerson[]
                 do aPerson[] -> owner[];
                 #);
               
               deposit:
                 (# amount: @integer;
                 enter amount
                 do balance + amount -> setBalance;
                 #);
               withdraw:
                 (# amount: @integer;
                 enter amount
                 do balance - amount -> setBalance;
                 #);
               setBalance:
                 (# value: @integer;
                 enter value
                 do value -> balance;
                 #);
            #);
       #);
     
     joe: ^Person;
     account1: ^bank.Account;
     jane: ^Person;
     account2: ^bank.Account;
  do &Person[] -> joe[];
     'Joe Smith' -> joe.init;
     &bank.Account[] -> account1[];
     joe[] -> account1.init;
     100 -> account1.deposit;
     
     &Person[] -> jane[];
     'Jane Doe' -> jane.init;
     &bank.Account[] -> account2[];
     jane[] -> account2.init;
     300 -> account2.deposit;
     
     (account1[], account2[], 50) -> bank.transfer;
  #)
