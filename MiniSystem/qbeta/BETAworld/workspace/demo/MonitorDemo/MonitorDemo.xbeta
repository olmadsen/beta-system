MonitorDemo: = LIB.MonitorSystem.System
   %include LIB.String
   P1: = Process("PP1")
      fac(V: ?integer) -> res: ?integer:
         %if V = 1 %then%
             res := 1
         %else%
             res := V * fac(V - 1)
      P1.suspend
      M.print("P1 resumed\n")
      %for 1 %to% 5 %do%
         M.putItem("Fac: ",inx,fac(inx))
   M: = Monitor
     print(S: ?String): entry
         S.print
     putItem(msg: ? String,V: ?integer,res: ?integer): entry
         put(10)
         put('<')
         msg.print
         putint(V)
         " = ".print
         putint(res)
         put('>')
   P2: = Process("PP2")
      sum(V: ?integer) -> res: ?integer:
         %for 1 %to% 10 %do%
              res := res + V
      P2.suspend
      M.print("P2 resumed\n")
      %for 1 %to% 6 %do%
          M.putItem("Sum: ",inx,sum(inx))
   M.init
   P1.start
   P2.start



            
   
