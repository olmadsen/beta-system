ORIGIN '~beta/basiclib/betaenv'
---lib:attributes---
chdir: external
  (# dir: [0] @char; res: @integer
  enter dir
  do callC
  exit res
  #);
system: external
  (# cmd: [0] @char; res: @integer
  enter cmd
  do callC
  exit res
  #);
_popen: external
  (# cmd,mode: [0]@char; res: @integer
  enter(cmd,mode)
  do callC
  exit res
  #);
fgetc: external
  (# F: @integer; ch: @char
  enter F
  do callC
  exit ch
  #);
--- program:descriptor ---
(# WS: ^text;
   exe:
     (# cmd,subPath,input,T: ^text; usingC,background: @boolean
     enter(cmd[],subPath[], usingC,background,input[])
     do subPath[] -> (WS.copy).append -> T[]; 
        cmd[] -> (T.copy).append -> T[]; 
        T -> chdir;
        'xcompiler ' -> T[];
        (if usingC then ' -c ' -> T.append if);
        cmd[] -> T.append;
        (if background then '&' -> T.append if);
        T -> system;
        WS -> chdir;
     #); 
   T: [10000] @char; S: @text;
   FFF: @integer
do 
   'c:/beta/r5.5/MiniSystem/qbeta/BETAworld/workspace/' -> WS[];
   WS -> chdir;
   (if false then
       ('ls','r') -> _popen -> FFF;
       (for i: 200 repeat
            FFF -> fgetc -> put;
   for)if);
   ('TST','',false,false,none)-> exe;
   ('Bank','demo/',false,false,none) -> exe;
   ('ComplexEx','demo/',false,false,none) -> exe;
   ('BinTree','demo/',false,false,none) -> exe;
   ('CoArg','demo/',false,false,none) -> exe;
   ('ContainerEx','demo/',false,false,none) -> exe;
   ('Static','demo/',false,false,none) -> exe;
   ('ArrayExperiment','demo/ArrayDemos/',false,false,none) -> exe;
   ('EMC2arrayEx','demo/ArrayDemos/',false,false,none) -> exe;
   ('SimpleThreadEx','demo/',true,false,none) -> exe;
   ('ForkJoinEx','demo/',true,false,none) -> exe;
   ('MonitorDemo','demo/',true,false,none) -> exe;
   (* '***** done'->putline;
    * ('TST','',false,true,none) -> exe;
    * 'printenv&' -> system;
    *)
#)

   
