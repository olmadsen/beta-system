ORIGIN '~beta/basiclib/betaenv';
INCLUDE 'testlib'
--- program:descriptor ---
(# sys: @SysEnv
     (# init:: (# do '-F -X ' -> args[] #);
     #);
   checkStuff:
     (#
     do 
        'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/workspace/' -> sys.WS[];
        ('TST','',true,false,false) -> sys.run; 
        ('tinyS','',true,false,false) -> sys.run; 
        ('tinyB','',true,false,false) -> sys.run;
        ('ValueEx','',true,false,false) -> sys.run;
     #);
   arg: ^Text; resetLog: @boolean;
   testDir,log: ^text
do 'qBeta test run: Compiler_test: ' -> puttext;
   (if noOfArguments > 1 then
       2 -> arguments -> arg[];
       (if '-r' -> arg.equalNCS then
           true -> resetLog;
           'Log file is reset' -> puttext
       if)
    else
       'test against masterlog.txt: ' -> puttext           
   if);
   newline;
   'pwd' -> system;
   'C:/beta/r5.5/MiniSystem/qbeta/test/' -> testDir[];
   (if resetLog then
       'C_mastertrace.txt' -> (testDir.copy).append -> log[]
    else
       'new_trace.txt' -> (testDir.copy).append -> log[]
   if);
   ('C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/',log[]) 
     -> sys.init;   
   sys.WS -> chdir;
   checkStuff;
   'Done:testrun4'->putline;
   

#)

   
