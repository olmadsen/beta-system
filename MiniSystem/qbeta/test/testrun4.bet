ORIGIN '~beta/basiclib/betaenv';
INCLUDE 'testlib'
--- program:descriptor ---
Tester
(# sys: @SysEnv; 
   checkOOPMstuff:
     (#
     do 
        'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/' -> sys.WS[];
        (*('SubjectObserver','',true,false,false) -> sys.run;*)
        ('TextProcessingSystem','',true,false,false) -> sys.run;
        ('LottoExII'           ,'',false,true,false) -> sys.run;
        'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/GrammarLib/demo/'
          -> sys.WS[];
        ('ExpressionGrammar','',true,false,false) -> sys.run;    
        'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/ObserverPattern/demo/'
          -> sys.WS[];
        ('AlarmEx','',true,false,false) -> sys.run; 
        ('BankSysEx','',true,false,false) -> sys.run; 
     #);
   checkOOPMpar:
     (#
     do 'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/ParallelActivities/demo/'
          -> sys.WS[];
        ('aSimpleSearcher','',false,true,false) -> sys.run; 
        ('aSafeSearcher','',false,true,false) -> sys.run; 
     #);
   checkDemoStuff:
     (#
     do 'C:/beta/r5.5/MiniSystem/qbeta/BETAworld/workspace/demo/' -> sys.WS[];
        ('ISoLA2022','',false,true,false) -> sys.run; 
     #);
   arg: ^Text; resetLog: @boolean;
   testDir,log: ^text
do 'qBeta test run: Compiler_test: ' -> puttext;
   (if false then
       (if noOfArguments > 1 then
           2 -> arguments -> arg[];
           (if '-r' -> arg.equalNCS then
               true -> resetLog;
               'Log file is reset' -> puttext
           if)
        else
           'test against masterlog.txt: ' -> puttext           
   if)if);
   newline;
   'pwd' -> system;
   'C:/beta/r5.5/MiniSystem/qbeta/test/' -> testDir[];
   (if resetLog then
       'C_mastertrace.txt' -> (testDir.copy).append -> log[]
    else
       'D_trace.txt' -> (testDir.copy).append -> log[]
   if);
   ('C:/beta/r5.5/MiniSystem/qbeta/BETAworld/OOPM/',log[]) 
     -> sys.init;   
   sys.WS -> chdir;
   checkOOPMstuff;
   checkOOPMpar;
   checkDemoStuff;
   'Done:testrun4'->putline;
   (if not resetLog then
       testDir -> chdir;
       'diff -a C_mastertrace.txt D_trace.txt' -> putline;
       'diff -a C_mastertrace.txt D_trace.txt' -> System
   if);
#)

   
