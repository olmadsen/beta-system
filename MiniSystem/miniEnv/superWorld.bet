ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/scrolllists';
INCLUDE '~beta/guienv/fields';
INCLUDE '~beta/guienv/stddialogs';
INCLUDE '~beta/guienv/utils/prompts';
INCLUDE 'tableview';
INCLUDE 'subwindow';
INCLUDE 'objectContent';
INCLUDE 'sequencecanvas';
INCLUDE 'newAttributeBox';
INCLUDE 'prompt';
INCLUDE '../compiler_IF/compiler_IF';
INCLUDE '../VM/betaVM';
INCLUDE '~beta/guienv/guienvsystemenv';
INCLUDE '~beta/guienv/utils/guienvadds';
INCLUDE 'auxiliary';
---guienvlib:attributes---
SuperWorld:
  (# UserYes: (# exit 1 #);
     UserNo: (# exit 2 #);
     UserCancel: (# exit 3 #);
     
     defaults: @
       (# headH: (# exit 20 #);
          worldWindowW: (# exit 1420 #);
          worldWindowH: (# exit 760 #);
          componentW: (# exit 480 #);
          componentH: (# exit 800 #);
          mainBrowserW: (# exit 380 #);
          mainBrowserH: (# exit 120 #);
          browserW: (# exit 92 #);
          browserH: (# exit 160 - 11 #); (* - 2 * borderWidth *)
          textEditW: (# exit 201 #);
          textEditH: (# exit 650 - 11 #);
       #);
     mkTextStyle:
       (# aTextStyle: ^textStyle
       do &textStyle[] -> aTextStyle[];
          'Times' -> aTextStyle.name;
          11 -> aTextStyle.size;
          inner
       exit aTextStyle[]
       #);
     mkPlainStyle: mkTextStyle
       (#
       do textFaces.plain -> aTextStyle.face;
       #);
     mkItalicStyle: mkTextStyle
       (#
       do textFaces.italic->aTextStyle.face;
       #);
     mkBoldStyle: mkTextStyle
       (#
       do textFaces.bold -> aTextStyle.face;
       #);

     promptUser:
       (# dialog: @PromptDialog
            (# onYes::
                 (#
                 do UserYes -> result;
                    dialog.close;
                 #);
               onNo::
                 (#
                 do UserNo -> result;
                    dialog.close;
                 #);
               onCancel::
                 (#
                 do UserCancel -> result;
                    dialog.close;
                 #);
            #);
          left, top: @integer;
          mainWidth, mainHeight: @integer;
          dialogWidth, dialogHeight: @integer;
          
          message: ^Text;
          title: ^Text;
          result: @integer;
          parent: ^Window;
       enter (parent[], title[], message[])
       do dialog.open;
          parent.position -> (left, top);
          parent.size -> (mainWidth, mainHeight);
          dialog.size -> (dialogWidth, dialogHeight);
          (left + (mainWidth - dialogWidth) div 2, top + 60) -> dialog.position;
          message[] -> dialog.changeLabel;
          title[] -> dialog.title;
          dialog.showModal;
       exit result
       #);
     getIcon:
       (# kind: @char; visibility: @integer;
          icon: ^RichPixMap
       enter(kind,visibility)
       do (if kind 
           // '*' then 
              cogwheel[] -> icon[]
           // '/' // '#' then 
              (if visibility
               //OSDvisibility_Open then
                  publicpackageIcon[] -> icon[]
               //OSDvisibility_SkipInternal then
                  packageIcon[]-> icon[]
               //OSDvisibility_Disguised then
                  privatepackageIcon[] -> icon[]
              if);
           // ' ' then
              patternIcon[] -> icon[]
           // ':'// '<' then
              virtualIcon[] -> icon[]
           // '^' then
              lightrefIcon[] -> icon[]
           // '@' then
              referenceIcon[]-> icon[]
           // '=' then
              simpleIcon[] -> icon[]
           // ']' then
              arrayIcon[] -> icon[]
          if);
       exit icon[]
       #);
     errorIcon: ^RichPixmap;
     patternIcon: ^RichPixmap;
     virtualIcon: ^RichPixmap;
     packageIcon: ^RichPixmap;
     publicpackageIcon: ^RichPixmap;
     privatepackageIcon: ^RichPixmap;
     simpleIcon: ^RichPixmap;
     arrayIcon: ^RichPixmap;
     referenceIcon: ^RichPixmap;
     lightrefIcon: ^RichPixmap;
     cogwheel: ^RichPixmap;
     
  do inner
  #)

