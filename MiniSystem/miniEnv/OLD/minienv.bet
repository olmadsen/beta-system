ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/scrolllists';
INCLUDE 'content'
--- program: descriptor ---
guienv
(# theWindow: @window
    (# eventHandler::
        (# onAboutToClose:: (# do terminate #)
        #);

       mW: @ windowItem
         (# eventHandler::
             (# 
                onActivate::
                  (# do 'activate' -> putline #);
                onDeactivate::
                  (# do 'deactivate' -> putline #)
             #);
           theTextScrollList1: @textScrollList
             (# eventHandler::
                  (# onMouseDown::
                    (#
                    do (if doubleClick then
                           selection.first -> gettext -> putline
                       if)
                    #)
               #);
             open::
               (# v: @point;
                  noOfItems: @integer
               do (5,5) -> position;
                  theWindow.size -> v;
                  (10,10) -> v.subtract;
                  (100,200) -> size;
                  true -> bindBottom;
                  true -> bindRight;
                  5 -> append;
                  theTextScrollList1.numberOfItems -> noOfItems;
                  (noOfItems-4,'Lincoln 1') -> settext;
                  (noOfItems-3,'Lincoln 2') -> settext;
                  (noOfItems-2,'Lincoln 3') -> settext;
                  (noOfItems-1,'Lincoln 4') -> settext;
                  (noOfItems,'Abraham Lincoln 5') -> settext
               #)
          #);
       theTextScrollList2: @textScrollList
         (# eventHandler::
              (# onMouseUp::
                   (# n: @integer;
                      L1,L2: @text 
                   do (if doubleClick or true then
                          selection.first -> gettext -> puttext;
                          ':' -> put; selection.first -> n -> putint;
                          newline;
                          'Surayya-'-> L1;
                          'Marlene-'-> L2;
                          n -> L1.putint; n -> L2.putint;
                          (if it[] <> none then it.close if);
                          &items[] -> it[];
                          (this(textScrollList)[],1,(L1[],L2[])) -> it.setUp;
                          it[] -> target
                      if)
                   #)
              #);
            it: ^items;
            open::
              (# v: @point;
                 noOfItems: @integer
              do (105,5) -> position;
                 theWindow.size -> v;
                 (10,10) -> v.subtract;
                 (100,200) -> size;
                 true -> bindBottom;
                 true -> bindRight;
                 5 -> append;
                 theTextScrollList2.numberOfItems -> noOfItems;
                 (noOfItems-4,'Abraham 1') -> settext;
                 (noOfItems-3,'Abraham 2') -> settext;
                 (noOfItems-2,'Abraham 3') -> settext;
                 (noOfItems-1,'Abraham 4') -> settext;
                 (noOfItems,'Abraham Lincoln 5') -> settext
              #)
         #);          
      items: textScrollList
         (# eventHandler::
              (# onMouseDown::
                   (# it: ^items
                   do (if doubleClick then 
                          selection.first -> gettext -> putline
                      if);
                      &items[] -> it[];
                      (this(items)[],index,(index,selection.first) 
                      -> cont.get) 
                      -> it.setup
                   #)
              #);
            setup:
              (# elm: [1] ^text; pred: ^textScrollList; p: @point; 
                 pinx: @integer
              enter(pred[],pinx,elm )
              do pred[] -> left[];
                 pinx + 1 -> index;
                 open;
	         elm.range -> append; 
                 (for i: elm.range repeat (i,elm[i][]) -> settext for)
              #);
            open::
              (# v: @point; h: @integer;
              do (if left[] <> none then
                     left.position -> v;
                     v.h -> h
                 if);
                 (h+100,5) -> position;
                 (100,200) -> size;
                 true -> bindBottom;
                 true -> bindRight;
                 5 -> append;
              #);
            left: ^textScrollList;
	    index: @integer
         #);

        open:: 
          (# 
          do (30,30) -> position;
             (400,400) -> size;
             theTextScrollList1.open;
             theTextScrollList1[] -> target;
             theTextScrollList2.open;
             theTextScrollList2[] -> target;
	  #)
     #);
    open:: 
      (# 
      do (440,440) -> size;
          MW.open
      #)
  #);
  cont: @content
do theWindow.open
#)
