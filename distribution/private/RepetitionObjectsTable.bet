ORIGIN '~beta/basiclib/betaenv';
(* 
 * COPYRIGHT
 *       Copyright (C) Aarhus University
 *       All rights reserved.
 *)
INCLUDE '~beta/sysutils/RepetitionObject';

--- lib:attributes ---
RepetitionObjectsTable:
  (# table: [2]^RepetitionObject;
     last: @Integer;
     append: @
       (# ro: ^RepetitionObject;
       enter ro[]
       do
          (if (last+1 -> last) > table.range //true then
              table.range -> table.extend;
          if);
          ro[] -> table[last][];
       exit last
       #);
     scan:
       (# current: ^RepetitionObject;
       do (for i:last repeat
               table[i][] -> current[]; INNER;
          for);
       #);
     get: @
       (# inx: @Integer;
       enter inx
       exit table[inx][]
       #);
     reInit: @ 
       (# 
       do (if last //0 then else
              2 -> table.new;
              0 -> last;
          if);
       #);
  #);
