#!/bin/sh

## Script used by ensemble.createShell. The script checks the machine
## type and calls the machine specific startAsDeamon, in turn executing 
## the Shell to be started.

## "$1 $2 $3 $4 $5" ## distributionDir appPath environment params

DISTRDIR="$1"
APPPATH="$2"
ENVIRON="$3"
PARAMS="$4"

uname=`uname -m`
case $uname in
	sun4*)
		case "`uname -r`" in
		4.1*)
			objdir=sun4
			;;
		5.*)
			objdir=sun4s
			;;
		esac
		;;
	sun3*)
		objdir=sun3
		;;
	9000/[34]??)
		if [ "`uname -r`" = "7.0" ] ; then
			objdir=hp
		else
			objdir=hpux8 
		fi
		;;
	9000/7??)
		objdir=snake
		;;
	i?86)
		if [ "`uname`" = "Linux" ] ; then
			objdir=linux
		else
			## unknown architechture
			echo ""; echo "##betadistr##error"; echo ""
			exit 0
		fi
		;;	
	*)
		## unknown architechture
		echo ""; echo "##betadistr##error"; echo ""
		exit 0
		;;
esac

startad="$DISTRDIR$objdir/startAsDeamon"

if [ -f $startad ] ; then
	$startad "$objdir" "$APPPATH" "$ENVIRON" "$PARAMS"
	case $? in
	0)
		echo ""; echo "##betadistr##ok"; echo ""
		;;
	1)
		echo ""; echo "##betadistr##notfound"; echo ""
		;;
	*)
		echo ""; echo "##betadistr##error"; echo ""
		;;
	esac

else
	echo ""; echo "##betadistr##notfound"; echo ""
fi
			
