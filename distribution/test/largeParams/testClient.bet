ORIGIN '~beta/distribution/v1.0/shell';
INCLUDE 'testServerLib';

--- program:descriptor ---
shellEnv
(# shellType::<
     (# server: ^testServer;
        io: ^IntegerObject;
        l: ^IntList;
     do
        (testServer##,'largeParams') -> myEnsemble.ns.get -> server[];
        
        &IntList[] -> l[];
        
        (for i:500 repeat
             &IntegerObject[] -> io[] -> l.append;
             i -> io;
        for);
        
        'calling printList...' -> putText;
        l[] -> server.printList;
        'done' -> putLine;
        
        'calling getList...' -> putText;
        server.getList -> l[];
        'done' -> putLine;
        
        (for i:500 repeat
             &IntegerObject[] -> io[] -> l.append;
             i+500 -> io
        for);
        
        'calling printList...' -> putText;
        l[] -> server.printList;
        'done' -> putLine;
        
        server.kill;
        kill;
     #);
   
    
#)
