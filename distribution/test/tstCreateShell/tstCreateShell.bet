ORIGIN '~beta/distribution/v1.3/shell';
INCLUDE '~beta/distribution/v1.3/demo/timeServer/timeLib';

--- program:descriptor ---
shellEnv
(# globalErrorHandler::<
     (# timeOutValue::< (# do 10 -> sec #);
     #);
   
   te: ^ensemble;
   ensembleName: ^Text;
do 
   'Start timeClient on ensemble: ' -> putText;
   
   (ensemble##,getLine) -> theShell.myEnsemble.ns.get -> te[];
   
   doCreate: (timeClient##,'timeClient') -> te.createShell
   (# appsDir::<
        (#
        do '/usr/local/lib/beta/distribution/v1.1/demo/timeServer/$' 
             -> dir[]
        #);
      environment::<
        (# 
        do 'X display for timeClient: ' -> putText;
           ('DISPLAY',getLine) -> addEnvVar;
           ('LD_LIBRARY_PATH','/usr/local/lib/X11/Xm') -> addEnvVar;
        #);
      parameters::<
        (# 
        do 'Use timeServer on ensemble: ' -> putText;
           getLine -> addParam;
        #);
   #);
   
   theShell.kill;
#)
