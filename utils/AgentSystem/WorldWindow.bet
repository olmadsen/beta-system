ORIGIN '~beta/guienv/guienv';
include '~beta/guienv/graphicscanvas';
INCLUDE '~beta/guienv/utils/colorTable';
INCLUDE '~beta/guienv/figureitems'
-- guienvLib:attributes---
WorldWindow: window
  (# green: (# exit (0,maxInt,0) #);
     purple: (# exit (40960,8192,61440) #);
     gold1: (# exit (65280,55040,0) #);
     red: (# exit(50000,0,0) #);     
     grey: (# exit(32000,32000,32000) #);
     
     open::<
       (#
       enter(world_width,world_height,patch_size)
       do '****  worldWindow:open: ' -> puttext;
          world_width -> putint; ' ' -> put; world_height  -> putint;  newline;
          (world_width * patch_size,world_height * patch_size) -> size;
          (* Set up background colors *)
          purple->backgroundcolor;
       #);
     eventhandler:: (# onMouseDown::(##)#);
     
     tCanvas: Canvas
       (# open::<
            (# x,y: @integer; c: @color
            enter(x,y,c)
            do inner;
               c -> backGroundColor;
               (x,y) -> position
            #)
       #);
     
     tLine: Line
       (# open::            
            (# sx,sy,ex,ey: @integer; c: @color
            enter(sx,sy,ex,ey,c)
            do (sx,sy) -> start;
               (ex,ey) -> end;
               penSize -> pen.size; 
               c -> pen.backGroundColor;
               c -> pen.foreGroundColor;
               (*patterns.gray[] -> lx.pen.stipple;*)
               true -> visible;
               (*true -> hilite;*) (*lx.drag*) show
            #)
       #);
     world_width,world_height,patch_size,penSize: @integer;
  #);

