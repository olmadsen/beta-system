ORIGIN '~beta/guienv/guienv';
include '~beta/guienv/graphicscanvas';
INCLUDE '~beta/guienv/utils/colorTable';
INCLUDE '~beta/guienv/figureitems'
-- guienvLib:attributes---
WorldWindow: window
  (#
     green: (#  exit (0,maxInt,0) #);
     purple: (#  exit (40960,8192,61440) #);
     gold1: (#  exit (65280,55040,0) #);
     C: canvas (# open::< (#  do (4,4)->size;  #);  #);
     open::<
       (# 
       do (* Set up background colors *)
          green->backgroundcolor;
          (*c1.open;
          (40,40)->c1.position;
          purple->c1.backgroundcolor;
          c2.open;
          (100,100)->c2.position;
          gold1->c2.backgroundcolor;*)
       #);
     eventhandler::
       (# onMouseDown::
            (# dist: (# exit 80 #)
            do (*(for i: dist repeat
                    (100 + i,100 + i)->c2.position;
                    2 -> guienvWait;
               for);
               (for i: dist repeat
                    (100 + dist - i,100 + dist - i)->c2.position;
                    2 -> guienvWait;
               for);*)
            #)
       #);   
     blue: @Color;
     gray: @Color;
     tLine: Line
       (# open::            
            (# sx,sy,ex,ey: @integer; c: @color
            enter(sx,sy,ex,ey,c)
            do 
               (sx,sy) -> start;
               (ex,ey) -> end;
               2 -> pen.size; 
               c -> pen.backGroundColor;
               c -> pen.foreGroundColor;
               (*patterns.gray[] -> lx.pen.stipple;*)
               (* true -> Lx.hilite;*) (*lx.drag;*)
            #)
       #);
     LineCanvas: GraphicsCanvas
       (#
          CreateLine:
            (# x1, y1, x2, y2: @real;
               width: @integer;
               theLine: ^Line;
            enter (x1, y1, x2, y2, width)
            do &Line[] -> theLine[];
               theLine.init;
               &Point2d[] -> theLine.start[];
               (x1, y1) -> theLine.start;
               &Point2d[] -> theLine.end[];
               (x2, y2) -> theLine.end;
               width -> theLine.strokewidth;
               blue[] -> theLine.stroke[];
               (*theLine[] -> thePicture.add;*)
            #);
          open::
            (#
            do 0.1 * 0xFFFF -> blue.red;
                  0.2 * 0xFFFF -> blue.green;
                  0.5 * 0xFFFF -> blue.blue;
                  
                  0.8 * 0xFFFF -> gray.red;
                  0.8 * 0xFFFF -> gray.green;
                  0.85 * 0xFFFF -> gray.blue;
                  
                  (0xFFFF, 0xFFFF, 0xFFFF) -> backgroundColor;
                  (800, 600) -> size;
            #)
       #)
  #);

