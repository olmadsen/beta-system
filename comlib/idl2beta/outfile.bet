ORIGIN '~beta/basiclib/v1.6/file';
BODY 'private/betaoutfilebody' (* For now, it's a .bet text file *);
-- Lib:Attributes --

debug: (# exit false #);

OutputFile: file
  (#
     Identification:
       (# IdlFileName: ^text 
       enter IdlFileName[]  
       <<SLOT OutfileIdentification:dopart>> 
       #);
     Origin:
       (#  
       <<SLOT OutfileOrigin:dopart>> 
       #);
     
     Lib:
       (#  
       <<SLOT OutfileLib:dopart>> 
       #);
     
     Epilog:
       (# 
       <<SLOT OutfileEpilog:dopart>>
       #);
     
     Indent: @
       (# indentlevel: @integer;
          inc: 
            (# i: @integer;
            enter i
            do indentlevel+i -> indentlevel;
               (if debug then
                   commentbegin;
                   '+'->put;
                   i->putint;
                   '='->put;
                   indentlevel->putint;
                   commentend;
               if)
            #);
          dec:
            (# i: @integer
            enter i
            do indentlevel-i -> indentlevel;
               (if debug then
                   commentbegin;
                   '-'->put;
                   i->putint;
                   '='->put;
                   indentlevel->putint;
                   commentend;
               if)
            #);
       do (for i:indentlevel repeat ' '->put for);
       #);
     
     PatternBegin:
       (# <<SLOT OutFilePatternBegin: dopart>> #);
     
     PatternEnd:
       (# <<SLOT OutFilePatternEnd: dopart>> #);
     
     CommentBegin:
       (# <<SLOT OutFileCommentBegin: dopart>> #);
     
     CommentEnd:
       (# <<SLOT OutFileCommentEnd: dopart>> #);
     
     Comment: 
       (# c: ^text;
       enter c[]
       <<SLOT OutFileComment: dopart>>
       #);
     CommentLine: 
       (# c: ^text;
       enter c[]
       <<SLOT OutFileCommentLine: dopart>>
       #);
                     
  #)
