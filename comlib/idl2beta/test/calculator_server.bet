ORIGIN 'Deep_Thought';
INCLUDE '~beta/basiclib/numberio';
(*INCLUDE '~beta/win32lib/winerror';*)
--PROGRAM: descriptor--
(# ICalc_Impl: ICalc
     (# QueryInterface::
          (# 
          #);
        AddRef::
          (# 
          #);
        Release::
          (# 
          #);
        Add::
          (# do (v1 + v2) -> res #);
        Subtract::
          (# do (v1 - v2) -> res #);
        Multiply::
          (# do (v1 * v2) -> res #);
        Divide::
          (# 
          do (if v2 = 0 then 
                 0 -> res;
                 (*E_FAIL -> result;*)
              else
                 (v1 div v2) -> res;
             if);
          #);
        Modulus::
          (# 
          do (if v2 = 0 then 
                 0 -> res;
                 (*E_FAIL -> result;*)
              else
                 (v1 div v2) -> res;
             if);
          #);
     #);
   IConv_Impl: IConv
     (# QueryInterface::
          (# 
          #);
        AddRef::
          (# 
          #);
        Release::
          (# 
          #);
        Hex2Dec::
          (# b: @BSTR; hex: ^text;
          do v -> b;
             b.gettext -> hex[];
             (if '0' -> hex.equal then
                 0 -> res;
              else
                 hex.reset;
                 hex.getHex -> res;
             if);
         #);
       Dec2Hex::
          (# hex: ^text;
          do '' -> hex[];
             (* PutHex uses zeropadding. We do not want that.
              * v -> hex.putHex;
              *)
             (16,v)->hex.putRadix(# do true->uppercase #);
          #);
     #);
do 
#)

