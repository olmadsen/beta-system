ORIGIN 'mactypes';


LINKOPT ppcmac '-weaklib QuickTimeLib';
LINKOPT ppcmac '-weaklib ObjectSupportLib';


LINKOPT ppcmac '{SharedLibraries}QuickTimeLib';


LINKOPT ppcmac '{SharedLibraries}ObjectSupportLib';


		
INCLUDE 	'imagecompression'
			'quickdraw'
			'events';

-- lib: attributes --

kFix1: (# exit 65536 #); (* (0x00010000) *)

gestaltQuickTime: (# exit 'qtim' #);

MovieFileType:	  (# exit 'MooV' #);

MediaHandlerType: (# exit 'mhlr' #);
DataHandlerType:  (# exit 'dhlr' #);

VideoMediaType:	  (# exit 'vide' #);
SoundMediaType:	  (# exit 'soun' #);
TextMediaType:	  (# exit 'text' #);
BaseMediaType:	  (# exit 'gnrc' #);

VisualMediaCharacteristic: (# exit 'eyes' #);
AudioMediaCharacteristic:  (# exit 'ears' #);

DoTheRightThing: (# exit 0 #);

kFullVolume: (# exit 256 #); (* 0x100; 8.8 format *)
kNoVolume:   (# exit   0 #);


SampleDescription: toolboxRecord
  (# descSize:     @long(# pos::< (# do 0 -> value #) #);
     dataFormat:   @long(# pos::< (# do 4 -> value #) #);
     (* resvd1:    @long(# pos::< (# do 8 -> value #) #); *)
     (* resvd2:    @signedShort (# pos::< (# do 12 -> value #) #); *)
     dataRefIndex: @signedShort (# pos::< (# do 14 -> value #) #);
  #);


SoundDescription: cStruct
  (#
    byteSize::<(# do 36 -> value #);
	descSize:      @long       (# pos::< (# do 0 -> value #) #);
					     (* total size of SoundDescription including extra data *)
    dataFormat:    @long       (# pos::< (# do 4 -> value #) #);
    (* resvd1:     @long       (# pos::< (# do 8 -> value #) #);
													  (* reserved for apple use *)
    (* resvd2:     @signedShort(# pos::< (# do 12 -> value #) #); *)
    dataRefIndex:  @signedShort(# pos::< (# do 14 -> value #) #);
    version:       @signedShort(# pos::< (# do 16 -> value #) #);
            									  (* which version is this data *)
    revlevel:      @signedShort(# pos::< (# do 18 -> value #) #);
									     (* what version of that codec did this *)
    vendor:        @long       (# pos::< (# do 20 -> value #) #);
								           (* whose  codec compressed this data *)
    numChannels:   @signedShort(# pos::< (# do 24 -> value #) #);
												 (* number of channels of sound *)
    sampleSize:    @signedShort(# pos::< (# do 26 -> value #) #);
												   (* number of bits per sample *)
    compressionID: @signedShort(# pos::< (# do 28 -> value #) #);
										   (* sound compression used, 0 if none *)
    packetSize:    @signedShort(# pos::< (# do 30 -> value #) #);
						    (* packet size for compression, 0 if no compression *)
    sampleRate:    @long	   (# pos::< (# do 32 -> value #) #);
									 (* fixed; sample rate sound is captured at *)
  #);

TextDescription: cStruct
  (# byteSize::< (# do 64 -> value #);
  	   (* Approximately right Ñ please check it if you use TextDescription /ovv *)
     size:		   long(# pos::< (# do 0 -> value #) #); (* Total size of TextDescription *)
     type:		   long(# pos::< (# do 4 -> value #) #); (* 'text' *)
     (* resvd1:	   long(# pos::< (# do 8 -> value #) #); *)
     (* resvd2:	   signedShort(# pos::< (# do 12 -> value #) #); *)
     dataRefIndex: signedShort(# pos::< (# do 14 -> value #) #);
     displayFlags: long(# pos::< (# do 16 -> value #) #); (* see enum below for flag values *)
     textJustification: long(# pos::< (# do 20 -> value #) #); (* Can be: teCenter,teFlush -Default,-Right,-Left *)
     (* RGBColor bgColor; (* Background color (RGBColor takes up 6 bytes /ovv) *)
	 bgRed:		   short(# pos::< (# do 24 -> value #) #);
	 bgGreen:	   short(# pos::< (# do 26 -> value #) #);
	 bgBlue:	   short(# pos::< (# do 28 -> value #) #);
     (* Rect defaultTextBox;     (* Location to place the text within the track bounds *)
								   (* 8 bytes /ovv *)
     (* ScrpSTElement defaultStyle; (* Default style (struct defined in TextEdit.h) *)
								   (* 24 bytes /ovv *)
  #);

dfDontDisplay:		  (# exit 1 #); (* Don't display the text *)
dfDontAutoScale:	  (# exit 2 #); (* Don't scale text as track bounds grows or shrinks *)
dfClipToTextBox:	  (# exit 4 #); (* Clip update to the textbox *)
dfUseMovieBGColor:	  (# exit 8 #); (* Set text background to movie's background color *)
dfShrinkTextBoxToFit: (# exit 16 #); (* Compute minimum box to fit the sample *)
dfScrollIn:			  (# exit 32 #); (* Scroll text in until last of text is in view *)
dfScrollOut:		  (# exit 64 #);  (* Scroll text out until last of text is gone (if both set, scroll in then out) *)
dfHorizScroll:		  (# exit 128 #); (* Scroll text horizontally (otherwise it's vertical) *)
dfReverseScroll:	  (# exit 256 #); (* vert: scroll down rather than up; horiz: scroll backwards (justfication dependent) *)


(* progress messages *)

movieProgressOpen:			(# exit 0 #);
movieProgressUpdatePercent: (# exit 1 #);
movieProgressClose:			(# exit 2 #);

(* progress operations *)
progressOpFlatten:			  (# exit 1 #);
progressOpInsertTrackSegment: (# exit 2 #);
progressOpInsertMovieSegment: (# exit 3 #);
progressOpPaste:			  (# exit 4 #);
progressOpAddMovieSelection:  (# exit 5 #);
progressOpCopy:				  (# exit 6 #);
progressOpCut:				  (# exit 7 #);
progressOpLoadMovieIntoRam:	  (# exit 8 #);
progressOpLoadTrackIntoRam:	  (# exit 9 #);
progressOpLoadMediaIntoRam:	 (# exit 10 #);
progressOpImportMovie:		 (# exit 11 #);
progressOpExportMovie:		 (# exit 12 #);

mediaQualityDraft:	(# exit   0 #); (* 0x0000 *)
mediaQualityNormal: (# exit  64 #); (* 0x0040 *)
mediaQualityBetter: (# exit 128 #); (* 0x0080 *)
mediaQualityBest:	(# exit 192 #); (* 0x00C0 *)

MovieRgnCoverProc: external
  (# theMovie: @integer;
     changedRgn: @integer (* RgnHandle *);
     refcon: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMovie, changedRgn, refcon)
  do pascalExternalEntry; inner;
  exit result
  #);

MovieProgressProc: external
  (# theMovie: @integer;
     message: @shortInt (* short *);
     whatOperation: @shortInt (* short *);
     percentDone: @integer (* Fixed *);
     refcon: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMovie, message, whatOperation, percentDone, refcon)
  do pascalExternalEntry; inner;
  exit result
  #);


(* typedef ComponentInstance MediaHandler,DataHandler;
typedef Component MediaHandlerComponent,DataHandlerComponent;
typedef ComponentResult HandlerError; *)

kSmallestArray: (# exit 1 #);

(* TimeBase equates *)

Int64: cStruct
  (# byteSize::<(# do 8 -> value #);
     hi: @long(# pos::< (# do 0 -> value #) #);
	 lo: @long(# pos::< (# do 4 -> value #) #);
  #);


(* typedef Int64 CompTimeValue; *)

loopTimeBase:			(# exit 1 #);
palindromeLoopTimeBase: (# exit 2 #);

TimeRecord: cStruct
  (# byteSize::<(# do 36 -> value #);
     valueHi: @long(# pos::< (# do  0 -> value #) #);
						 (* CompTimeValue value; units. CompTimeValue is Int64. *)
     valueLo: @long(# pos::< (# do  4 -> value #) #);
     scale:   @long(# pos::< (# do  8 -> value #) #);
												 (* TimeScale; units per second *)
     base:    @long(# pos::< (# do 12 -> value #) #) (* TimeBase *);
  #);

(* CallBack equates *)

triggerTimeFwd:		 (# exit 1 #); (* 0x0001; when curTime exceeds triggerTime going forward *)
triggerTimeBwd:		 (# exit 2 #); (* 0x0002; when curTime exceeds triggerTime going backwards *)
triggerTimeEither:	 (# exit 3 #); (* 0x0003; when curTime exceeds triggerTime going either direction *)
triggerRateLT:		 (# exit 4 #); (* 0x0004; when rate changes to less than trigger value *)
triggerRateGT:		 (# exit 8 #); (* 0x0008; when rate changes to greater than trigger value *)
triggerRateEqual:	 (# exit 16 #); (* 0x0010; when rate changes to equal trigger value *)
triggerRateLTE:		 (# exit 20 #); (* triggerRateLT | triggerRateEqual *)
triggerRateGTE:		 (# exit 24 #); (* triggerRateGT | triggerRateEqual *)
triggerRateNotEqual: (# exit 28 #); (* triggerRateGT | triggerRateEqual | triggerRateLT *)
                              (* not logical, but consistent with the doc. /ovv *)
triggerRateChange: (# exit 0 #);
triggerAtStart:	   (# exit 1 #); (* 0x0001 *)
triggerAtStop:	   (# exit 2 #); (* 0x0002 *)

timeBaseBeforeStartTime: (# exit 1 #);
timeBaseAfterStopTime:	 (# exit 2 #);

callBackAtTime:		 (# exit 1 #);
callBackAtRate:		 (# exit 2 #);
callBackAtTimeJump:	 (# exit 3 #);
callBackAtExtremes:	 (# exit 4 #);
callBackAtInterrupt: (# exit 32768 #); (* 0x8000 *)

QTCallBackProc: external
  (#  cb: @integer;
     refCon: @integer (* long *);
  enter (cb, refCon)
  do pascalExternalEntry; inner;
  #);

qtcbNeedsRateChanges:	   (# exit 1 #); (* wants to know about rate changes *)
qtcbNeedsTimeChanges:	   (# exit 2 #); (* wants to know about time changes *)
qtcbNeedsStartStopChanges: (# exit 4 #); (* wants to know when TimeBase start/stop is changed *)

QTCallBackHeader: cStruct
  (# byteSize::< (# do 48 (* or 12 ?? *) -> value #);
	 (* in calculating the size, regard the array as a pointer, taking 4 bytes? *)
	 callBackFlags: @long(# pos::< (# do 0 -> value #) #);
     (* reserved1:  @long(# pos::< (# do 4 -> value #) #); *)
     (* char qtPrivate[40]; *)
  #);


keepInRam:				(# exit 1 #); (* 1<<0; load and make non-purgable *)
unkeepInRam:			(# exit 2 #); (* mark as purgable *)
flushFromRam:			(# exit 4 #); (* empty those handles *)
loadForwardTrackEdits:	(# exit 8 #); (* load track edits into ram for playing forward *)
loadBackwardTrackEdits: (# exit 16 #); (* load track edits into ram for playing in reverse *)

MoviePreviewCallOutProc: external
  (# refcon: @integer (* long *);
     result: @Boolean;
  enter refcon
  do pascalExternalEntry; inner;
  exit result
  #);

newMovieActive:					   (# exit 1 #);
newMovieDontResolveDataRefs:	   (# exit 2 #);
newMovieDontAskUnresolvedDataRefs: (# exit 4 #);
newMovieDontAutoAlternates:		   (# exit 8 #);
                        (* track usage bits *)
trackUsageInMovie:	 (# exit 2 #);
trackUsageInPreview: (# exit 4 #);
trackUsageInPoster:	 (# exit 8 #);
            (* Add/GetMediaSample flags *)
mediaSampleNotSync:	   (# exit 1 #); (* sample is not a sync sample (eg. is frame differenced *)
mediaSampleShadowSync: (# exit 2 #); (* sample is a shadow sync *)

pasteInParallel: (# exit 1 #);

nextTimeMediaSample:		 (# exit 1 #);
nextTimeMediaEdit:			 (# exit 2 #);
nextTimeTrackEdit:			 (# exit 4 #);
nextTimeSyncSample:			 (# exit 8 #);
nextTimeEdgeOK:				 (# exit 16384 #); (* 1<<14 *)
nextTimeIgnoreActiveSegment: (# exit 32768 #); (* 1<<15 *)

createMovieFileDeleteCurFile:	(# exit -2147483648 #); (* 1<<31 *)
createMovieFileDontCreateMovie: (# exit	 1073741824 #);	(* 1<<30 *)
createMovieFileDontOpenFile:	(# exit	  536870912 #);	(* 1<<29 *)

flattenAddMovieToDataFork:	  (# exit 1 #); (* 1L<<0 *)
flattenActiveTracksOnly:	  (# exit 4 #); (* 1L<<2 *)
flattenDontInterleaveFlatten: (# exit 8 #); (* 1L<<3 *)

movieInDataForkResID: (# exit -1 #); (* magic res ID *)

mcTopLeftMovie:	   (# exit 1 #); (* usually centered *)
mcScaleMovieToFit: (# exit 2 #); (* usually only scales down *)
mcWithBadge:	   (# exit 4 #); (* give me a badge *)
mcNotVisible:	   (# exit 8 #); (* don't show controller *)
mcWithFrame:	  (# exit 16 #); (* gimme a frame *)

movieScrapDontZeroScrap: (# exit 1 #);
movieScrapOnlyPutMovie:	 (# exit 2 #);

dataRefSelfReference:  (# exit 1 #);
dataRefWasNotResolved: (# exit 2 #);

hintsScrubMode:		  (# exit  1 #); (* mask == && (if flags == scrub on, flags != scrub off) *)
hintsUseScreenBuffer: (# exit 32 #);
hintsAllowInterlace:  (# exit 64 #);
hintsUseSoundInterp: (# exit 128 #);

mediaHandlerFlagGenericClient: (# exit 1 #);


(**************************
 * Initialization Routines
 **************************)

EnterMovies: external
  (# result: @shortInt (* OSErr *);
  do '{$7001,$AAAA}' -> pascalTrap;
  exit result
  #);

ExitMovies: external
  (# do '{$7002,$AAAA}' -> pascalTrap; #);

(**************************
 * Error Routines
 **************************)

ErrorProc: external
  (# theErr: @shortInt (* OSErr *);
     refcon: @integer (* long *);
  enter (theErr, refcon)
  do pascalExternalEntry; inner;
  #);


GetMoviesError: external
  (# result: @shortInt (* OSErr *);
  do '{$7003,$AAAA}' -> pascalTrap;
  exit result
  #);

ClearMoviesStickyError: external
  (# do '{$303C,$DE,$AAAA}' -> pascalTrap; #);

GetMoviesStickyError: external
  (# result: @shortInt (* OSErr *);
  do '{$7004,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMoviesErrorProc: external
  (# errProc: ##ErrorProc;
     refcon: @integer (* long *);
  enter (errProc##, refcon)
  do '{$303C,$EF,$AAAA}' -> pascalTrap;
  #);

(**************************
 * Idle Routines
 **************************)


MoviesTask: external
  (# theMovie: @integer;
     maxMilliSecToUse: @integer (* long *);
  enter (theMovie, maxMilliSecToUse)
  do '{$7005,$AAAA}' -> pascalTrap;
  #);

PrerollMovie: external
  (# theMovie: @integer;
     time: @integer (* TimeValue *);
     Rate: @integer (* Fixed *);
     result: @shortInt (* OSErr *);
  enter (theMovie, time, Rate)
  do '{$7006,$AAAA}' -> pascalTrap;
  exit result
  #);


LoadMovieIntoRam: external
  (# theMovie: @integer;
     time: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     flags: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMovie, time, duration, flags)
  do '{$7007,$AAAA}' -> pascalTrap;
  exit result
  #);

LoadTrackIntoRam: external
  (# theTrack: @integer;
     time: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     flags: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theTrack, time, duration, flags)
  do '{$303C,$16E,$AAAA}' -> pascalTrap;
  exit result
  #);

LoadMediaIntoRam: external
  (# theMedia: @integer;
     time: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     flags: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMedia, time, duration, flags)
  do '{$7008,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMovieActive: external
  (# theMovie: @integer;
     active: @Boolean;
  enter (theMovie, active)
  do '{$7009,$AAAA}' -> pascalTrap;
  #);

GetMovieActive: external
  (# theMovie: @integer;
     result: @Boolean;
  enter theMovie
  do '{$700A,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * calls for playing movies, previews, posters
 **************************)


StartMovie: external
  (# theMovie: @integer;
  enter theMovie
  do '{$700B,$AAAA}' -> pascalTrap;
  #);

StopMovie: external
  (# theMovie: @integer;
  enter theMovie
  do '{$700C,$AAAA}' -> pascalTrap;
  #);

GoToBeginningOfMovie: external
  (# theMovie: @integer;
  enter theMovie
  do '{$700D,$AAAA}' -> pascalTrap;
  #);

GoToEndOfMovie: external
  (# theMovie: @integer;
  enter theMovie
  do '{$700E,$AAAA}' -> pascalTrap;
  #);

IsMovieDone: external
  (# theMovie: @integer;
     result: @Boolean;
  enter theMovie
  do '{$303C,$DD,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMoviePreviewMode: external
  (# theMovie: @integer;
     result: @Boolean;
  enter theMovie
  do '{$700F,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMoviePreviewMode: external
  (# theMovie: @integer;
     usePreview: @Boolean;
  enter (theMovie, usePreview)
  do '{$7010,$AAAA}' -> pascalTrap;
  #);

ShowMoviePoster: external
  (# theMovie: @integer;
  enter theMovie
  do '{$7011,$AAAA}' -> pascalTrap;
  #);


PlayMoviePreview: external
  (# theMovie: @integer;
     callOutProc: ##MoviePreviewCallOutProc;
     refcon: @integer (* long *);
  enter (theMovie, callOutProc##, refcon)
  do '{$303C,$F2,$AAAA}' -> pascalTrap;
  #);

(**************************
 * calls for controlling movies & tracks which are playing
 **************************)


GetMovieTimeBase: external
  (# theMovie: @integer;
     result: @integer;
  enter theMovie
  do '{$7012,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMovieMasterTimeBase: external
  (# theMovie: @integer;
     tb: @integer;
     slaveZero: ^TimeRecord;
  enter (theMovie, tb, slaveZero[])
  do '{$303C,$167,$AAAA}' -> pascalTrap;
  #);

SetMovieMasterClock: external
  (# theMovie: @integer;
     clockMeister: @integer (* Component *);
     slaveZero: ^TimeRecord;
  enter (theMovie, clockMeister, slaveZero[])
  do '{$303C,$168,$AAAA}' -> pascalTrap;
  #);


GetMovieGWorld: external
  (# theMovie: @integer;
     port: ^longInt (* CGrafPtr *);
     gdh: ^longInt (* GDHandle *);
  enter (theMovie, port[], gdh[])
  do '{$7015,$AAAA}' -> pascalTrap;
  #);

SetMovieGWorld: external
  (# theMovie: @integer;
     port: @integer (* CGrafPtr *);
     gdh: @integer (* GDHandle *);
  enter (theMovie, port, gdh)
  do '{$7016,$AAAA}' -> pascalTrap;
  #);


GetMoviePict: external
  (# theMovie: @integer;
     time: @integer (* TimeValue *);
     result: @integer (* PicHandle *);
  enter (theMovie, time)
  do '{$701D,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackPict: external
  (# theTrack: @integer;
     time: @integer (* TimeValue *);
     result: @integer (* PicHandle *);
  enter (theTrack, time)
  do '{$701E,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMoviePosterPict: external
  (# theMovie: @integer;
     result: @integer (* PicHandle *);
  enter theMovie
  do '{$303C,$F7,$AAAA}' -> pascalTrap;
  exit result
  #);


UpdateMovie: external
  (# theMovie: @integer;
     result: @shortInt (* OSErr *);
  enter theMovie
  do '{$701F,$AAAA}' -> pascalTrap;
  exit result
  #);    (* called between Begin & EndUpdate *)


(**** spatial movie routines ****)


GetMovieBox: external
  (# theMovie: @integer;
     boxRect: ^macRect;
  enter (theMovie, boxRect[])
  do '{$303C,$F9,$AAAA}' -> pascalTrap;
  #);

SetMovieBox: external
  (# theMovie: @integer;
     boxRect: ^macRect;
  enter (theMovie, boxRect[])
  do '{$303C,$FA,$AAAA}' -> pascalTrap;
  #);

(** movie display clip *)

GetMovieDisplayClipRgn: external
  (# theMovie: @integer;
     result: @integer (* RgnHandle *);
  enter theMovie
  do '{$303C,$FC,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMovieDisplayClipRgn: external
  (# theMovie: @integer;
     theClip: @integer (* RgnHandle *);
  enter (theMovie, theClip)
  do '{$303C,$FD,$AAAA}' -> pascalTrap;
  #);

(** movie src clip *)

GetMovieClipRgn: external
  (# theMovie: @integer;
     result: @integer (* RgnHandle *);
  enter theMovie
  do '{$303C,$100,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMovieClipRgn: external
  (# theMovie: @integer;
     theClip: @integer (* RgnHandle *);
  enter (theMovie, theClip)
  do '{$303C,$101,$AAAA}' -> pascalTrap;
  #);

(** track src clip *)

GetTrackClipRgn: external
  (# theTrack: @integer;
     result: @integer (* RgnHandle *);
  enter theTrack
  do '{$303C,$102,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackClipRgn: external
  (# theTrack: @integer;
     theClip: @integer (* RgnHandle *);
  enter (theTrack, theClip)
  do '{$303C,$103,$AAAA}' -> pascalTrap;
  #);

(** bounds in display space (not clipped by display clip) *)

GetMovieDisplayBoundsRgn: external
  (# theMovie: @integer;
     result: @integer (* RgnHandle *);
  enter theMovie
  do '{$303C,$FB,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackDisplayBoundsRgn: external
  (# theTrack: @integer;
     result: @integer (* RgnHandle *);
  enter theTrack
  do '{$303C,$112,$AAAA}' -> pascalTrap;
  exit result
  #);

(** bounds in movie space *)

GetMovieBoundsRgn: external
  (# theMovie: @integer;
     result: @integer (* RgnHandle *);
  enter theMovie
  do '{$303C,$FE,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackMovieBoundsRgn: external
  (# theTrack: @integer;
     result: @integer (* RgnHandle *);
  enter theTrack
  do '{$303C,$FF,$AAAA}' -> pascalTrap;
  exit result
  #);

(** bounds in track space *)

GetTrackBoundsRgn: external
  (# theTrack: @integer;
     result: @integer (* RgnHandle *);
  enter theTrack
  do '{$303C,$111,$AAAA}' -> pascalTrap;
  exit result
  #);

(** mattes - always in track space *)

GetTrackMatte: external
  (# theTrack: @integer;
     result: @integer (* PixMapHandle *);
  enter theTrack
  do '{$303C,$115,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackMatte: external
  (# theTrack: @integer;
     theMatte: @integer (* PixMapHandle *);
  enter (theTrack, theMatte)
  do '{$303C,$116,$AAAA}' -> pascalTrap;
  #);

DisposeMatte: external
  (# theMatte: @integer (* PixMapHandle *);
  enter theMatte
  do '{$303C,$14A,$AAAA}' -> pascalTrap;
  #);

(**************************
 * calls for getting/saving movies
 **************************)


NewMovie: external
  (# flags: @integer (* long *);
     result: @integer;
  enter flags
  do '{$303C,$187,$AAAA}' -> pascalTrap;
  exit result
  #);


PutMovieIntoHandle: external
  (# theMovie: @integer;
     publicMovie: @integer (* Handle *);
     result: @shortInt (* OSErr *);
  enter (theMovie, publicMovie)
  do '{$7022,$AAAA}' -> pascalTrap;
  exit result
  #);


PutMovieIntoDataFork: external
  (# theMovie: @integer;
     fRefNum: @shortInt (* short *);
     offset: @integer (* long *);
     maxSize: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMovie, fRefNum, offset, maxSize)
  do '{$303C,$1B4,$AAAA}' -> pascalTrap;
  exit result
  #);


DisposeMovie: external
  (# theMovie: @integer;
  enter theMovie
  do '{$7023,$AAAA}' -> pascalTrap;
  #);

(**************************
 * Movie State Routines
 **************************)


GetMovieCreationTime: external
  (# theMovie: @integer;
     result: @integer (* long *);
  enter theMovie
  do '{$7026,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMovieModificationTime: external
  (# theMovie: @integer;
     result: @integer (* long *);
  enter theMovie
  do '{$7027,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMovieTimeScale: external
  (# theMovie: @integer;
     result: @integer (* TimeScale *);
  enter theMovie
  do '{$7029,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMovieTimeScale: external
  (# theMovie: @integer;
     timeScale: @integer (* TimeScale *);
  enter (theMovie, timeScale)
  do '{$702A,$AAAA}' -> pascalTrap;
  #);


GetMovieDuration: external
  (# theMovie: @integer;
     result: @integer (* TimeValue *);
  enter theMovie
  do '{$702B,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMovieRate: external
  (# theMovie: @integer;
     result: @integer (* Fixed *);
  enter theMovie
  do '{$702C,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMovieRate: external
  (# theMovie: @integer;
     rate: @integer (* Fixed *);
  enter (theMovie, rate)
  do '{$702D,$AAAA}' -> pascalTrap;
  #);


GetMoviePreferredRate: external
  (# theMovie: @integer;
     result: @integer (* Fixed *);
  enter theMovie
  do '{$303C,$F3,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMoviePreferredRate: external
  (# theMovie: @integer;
     rate: @integer (* Fixed *);
  enter (theMovie, rate)
  do '{$303C,$F4,$AAAA}' -> pascalTrap;
  #);


GetMoviePreferredVolume: external
  (# theMovie: @integer;
     result: @shortInt (* short *);
  enter theMovie
  do '{$303C,$F5,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMoviePreferredVolume: external
  (# theMovie: @integer;
     volume: @shortInt (* short *);
  enter (theMovie, volume)
  do '{$303C,$F6,$AAAA}' -> pascalTrap;
  #);


GetMovieVolume: external
  (# theMovie: @integer;
     result: @shortInt (* short *);
  enter theMovie
  do '{$702E,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMovieVolume: external
  (# theMovie: @integer;
     volume: @shortInt (* short *);
  enter (theMovie, volume)
  do '{$702F,$AAAA}' -> pascalTrap;
  #);


GetMovieMatrix: external
  (# theMovie: @integer;
     matrix: ^MatrixRecord;
  enter (theMovie, matrix[])
  do '{$7031,$AAAA}' -> pascalTrap;
  #);

SetMovieMatrix: external
  (# theMovie: @integer;
     matrix: ^MatrixRecord;
  enter (theMovie, matrix[])
  do '{$7032,$AAAA}' -> pascalTrap;
  #);


GetMoviePreviewTime: external
  (# theMovie: @integer;
     previewTime: ^longInt (* TimeValue *);
     previewDuration: ^longInt (* TimeValue *);
  enter (theMovie, previewTime[], previewDuration[])
  do '{$7033,$AAAA}' -> pascalTrap;
  #);

SetMoviePreviewTime: external
  (# theMovie: @integer;
     previewTime: @integer (* TimeValue *);
     previewDuration: @integer (* TimeValue *);
  enter (theMovie, previewTime, previewDuration)
  do '{$7034,$AAAA}' -> pascalTrap;
  #);


GetMoviePosterTime: external
  (# theMovie: @integer;
     result: @integer (* TimeValue *);
  enter theMovie
  do '{$7035,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMoviePosterTime: external
  (# theMovie: @integer;
     posterTime: @integer (* TimeValue *);
  enter (theMovie, posterTime)
  do '{$7036,$AAAA}' -> pascalTrap;
  #);


GetMovieSelection: external
  (# theMovie: @integer;
     selectionTime: ^longInt (* TimeValue *);
     selectionDuration: ^longInt (* TimeValue *);
  enter (theMovie, selectionTime[], selectionDuration[])
  do '{$7037,$AAAA}' -> pascalTrap;
  #);

SetMovieSelection: external
  (# theMovie: @integer;
     selectionTime: @integer (* TimeValue *);
     selectionDuration: @integer (* TimeValue *);
  enter (theMovie, selectionTime, selectionDuration)
  do '{$7038,$AAAA}' -> pascalTrap;
  #);


SetMovieActiveSegment: external
  (# theMovie: @integer;
     startTime: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
  enter (theMovie, startTime, duration)
  do '{$303C,$15C,$AAAA}' -> pascalTrap;
  #);

GetMovieActiveSegment: external
  (# theMovie: @integer;
     startTime: ^longInt (* TimeValue *);
     duration: ^longInt (* TimeValue *);
  enter (theMovie, startTime[], duration[])
  do '{$303C,$15D,$AAAA}' -> pascalTrap;
  #);


GetMovieTime: external
  (# theMovie: @integer;
     currentTime: ^TimeRecord;
     result: @integer (* TimeValue *);
  enter (theMovie, currentTime[])
  do '{$7039,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMovieTime: external
  (# theMovie: @integer;
     newtime: ^TimeRecord;
  enter (theMovie, newtime[])
  do '{$703C,$AAAA}' -> pascalTrap;
  #);

SetMovieTimeValue: external
  (# theMovie: @integer;
     newtime: @integer (* TimeValue *);
  enter (theMovie, newtime)
  do '{$703D,$AAAA}' -> pascalTrap;
  #);



GetMovieUserData: external
  (# theMovie: @integer;
     result: @integer;
  enter theMovie
  do '{$703E,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Track/Media finding routines
 **************************)


GetMovieTrackCount: external
  (# theMovie: @integer;
     result: @integer (* long *);
  enter theMovie
  do '{$703F,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMovieTrack: external
  (# theMovie: @integer;
     trackID: @integer (* long *);
     result: @integer;
  enter (theMovie, trackID)
  do '{$7040,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMovieIndTrack: external
  (# theMovie: @integer;
     index: @integer (* long *);
     result: @integer;
  enter (theMovie, index)
  do '{$303C,$117,$AAAA}' -> pascalTrap;
  exit result
  #);


GetTrackID: external
  (# theTrack: @integer;
     result: @integer (* long *);
  enter theTrack
  do '{$303C,$127,$AAAA}' -> pascalTrap;
  exit result
  #);


GetTrackMovie: external
  (# theTrack: @integer;
     result: @integer;
  enter theTrack
  do '{$303C,$D0,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * Track creation routines
 **************************)


NewMovieTrack: external
  (# theMovie: @integer;
     width: @integer (* Fixed *);
     height: @integer (* Fixed *);
     trackVolume: @shortInt (* short *);
     result: @integer;
  enter (theMovie, width, height, trackVolume)
  do '{$303C,$188,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeMovieTrack: external
  (# theTrack: @integer;
  enter theTrack
  do '{$7042,$AAAA}' -> pascalTrap;
  #);

(**************************
 * Track State routines
 **************************)


GetTrackCreationTime: external
  (# theTrack: @integer;
     result: @integer (* long *);
  enter theTrack
  do '{$7043,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackModificationTime: external
  (# theTrack: @integer;
     result: @integer (* long *);
  enter theTrack
  do '{$7044,$AAAA}' -> pascalTrap;
  exit result
  #);



GetTrackEnabled: external
  (# theTrack: @integer;
     result: @Boolean;
  enter theTrack
  do '{$7045,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackEnabled: external
  (# theTrack: @integer;
     isEnabled: @Boolean;
  enter (theTrack, isEnabled)
  do '{$7046,$AAAA}' -> pascalTrap;
  #);


GetTrackUsage: external
  (# theTrack: @integer;
     result: @integer (* long *);
  enter theTrack
  do '{$7047,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackUsage: external
  (# theTrack: @integer;
     usage: @integer (* long *);
  enter (theTrack, usage)
  do '{$7048,$AAAA}' -> pascalTrap;
  #);


GetTrackDuration: external
  (# theTrack: @integer;
     result: @integer (* TimeValue *);
  enter theTrack
  do '{$704B,$AAAA}' -> pascalTrap;
  exit result
  #);


GetTrackOffset: external
  (# theTrack: @integer;
     result: @integer (* TimeValue *);
  enter theTrack
  do '{$704C,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackOffset: external
  (# theTrack: @integer;
     movieOffsetTime: @integer (* TimeValue *);
  enter (theTrack, movieOffsetTime)
  do '{$704D,$AAAA}' -> pascalTrap;
  #);


GetTrackLayer: external
  (# theTrack: @integer;
     result: @shortInt (* short *);
  enter theTrack
  do '{$7050,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackLayer: external
  (# theTrack: @integer;
     layer: @shortInt (* short *);
  enter (theTrack, layer)
  do '{$7051,$AAAA}' -> pascalTrap;
  #);


GetTrackAlternate: external
  (# theTrack: @integer;
     result: @integer;
  enter theTrack
  do '{$7052,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackAlternate: external
  (# theTrack: @integer;
     alternateT: @integer;
  enter (theTrack, alternateT)
  do '{$7053,$AAAA}' -> pascalTrap;
  #);


SetAutoTrackAlternatesEnabled: external
  (# theMovie: @integer;
     enable: @Boolean;
  enter (theMovie, enable)
  do '{$303C,$15E,$AAAA}' -> pascalTrap;
  #);

SelectMovieAlternates: external
  (# theMovie: @integer;
  enter theMovie
  do '{$303C,$15F,$AAAA}' -> pascalTrap;
  #);


GetTrackVolume: external
  (# theTrack: @integer;
     result: @shortInt (* short *);
  enter theTrack
  do '{$7054,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTrackVolume: external
  (# theTrack: @integer;
     volume: @shortInt (* short *);
  enter (theTrack, volume)
  do '{$7055,$AAAA}' -> pascalTrap;
  #);


GetTrackMatrix: external
  (# theTrack: @integer;
     matrix: ^MatrixRecord;
  enter (theTrack, matrix[])
  do '{$7056,$AAAA}' -> pascalTrap;
  #);

SetTrackMatrix: external
  (# theTrack: @integer;
     matrix: ^MatrixRecord;
  enter (theTrack, matrix[])
  do '{$7057,$AAAA}' -> pascalTrap;
  #);


GetTrackDimensions: external
  (# theTrack: @integer;
     width: ^longInt (* Fixed *);
     height: ^longInt (* Fixed *);
  enter (theTrack, width[], height[])
  do '{$705D,$AAAA}' -> pascalTrap;
  #);

SetTrackDimensions: external
  (# theTrack: @integer;
     width: @integer (* Fixed *);
     height: @integer (* Fixed *);
  enter (theTrack, width, height)
  do '{$705E,$AAAA}' -> pascalTrap;
  #);


GetTrackUserData: external
  (# theTrack: @integer;
     result: @integer;
  enter theTrack
  do '{$705F,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * get Media routines
 **************************)


NewTrackMedia: external
  (# theTrack: @integer;
     mediaType: @integer (* OSType *);
     timeScale: @integer (* TimeScale *);
     dataRef: @integer (* Handle *);
     dataRefType: @integer (* OSType *);
     result: @integer;
  enter (theTrack, mediaType, timeScale, dataRef, dataRefType)
  do '{$303C,$18E,$AAAA}' -> pascalTrap;
  exit result
  #);


DisposeTrackMedia: external
  (# theMedia: @integer;
  enter theMedia
  do '{$7061,$AAAA}' -> pascalTrap;
  #);


GetTrackMedia: external
  (# theTrack: @integer;
     result: @integer;
  enter theTrack
  do '{$7062,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMediaTrack: external
  (# theMedia: @integer;
     result: @integer;
  enter theMedia
  do '{$303C,$C5,$AAAA}' -> pascalTrap;
  exit result
  #);



(**************************
 * Media State routines
 **************************)


GetMediaCreationTime: external
  (# theMedia: @integer;
     result: @integer (* long *);
  enter theMedia
  do '{$7066,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMediaModificationTime: external
  (# theMedia: @integer;
     result: @integer (* long *);
  enter theMedia
  do '{$7067,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaTimeScale: external
  (# theMedia: @integer;
     result: @integer (* TimeScale *);
  enter theMedia
  do '{$7068,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaTimeScale: external
  (# theMedia: @integer;
     timeScale: @integer (* TimeScale *);
  enter (theMedia, timeScale)
  do '{$7069,$AAAA}' -> pascalTrap;
  #);


GetMediaDuration: external
  (# theMedia: @integer;
     result: @integer (* TimeValue *);
  enter theMedia
  do '{$706A,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaLanguage: external
  (# theMedia: @integer;
     result: @shortInt (* short *);
  enter theMedia
  do '{$706B,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaLanguage: external
  (# theMedia: @integer;
     language: @shortInt (* short *);
  enter (theMedia, language)
  do '{$706C,$AAAA}' -> pascalTrap;
  #);


GetMediaQuality: external
  (# theMedia: @integer;
     result: @shortInt (* short *);
  enter theMedia
  do '{$706D,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaQuality: external
  (# theMedia: @integer;
     quality: @shortInt (* short *);
  enter (theMedia, quality)
  do '{$706E,$AAAA}' -> pascalTrap;
  #);


GetMediaHandlerDescription: external
  (# theMedia: @integer;
     mediaType: ^longInt (* OSType *);
     creatorName: [1] @ char (* Str255 *);
     creatorManufacturer: ^longInt (* OSType *);
  enter (theMedia, mediaType[], creatorName, creatorManufacturer[])
  do '{$706F,$AAAA}' -> pascalTrap;
  #);


GetMediaUserData: external
  (# theMedia: @integer;
     result: @integer;
  enter theMedia
  do '{$7070,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Media Handler routines
 **************************)


GetMediaHandler: external
  (# theMedia: @integer;
     result: @integer (* MediaHandler *);
  enter theMedia
  do '{$7071,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMediaHandler: external
  (# theMedia: @integer;
     mH: @integer (* MediaHandlerComponent *);
     result: @shortInt (* OSErr *);
  enter (theMedia, mH)
  do '{$303C,$190,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Media's Data routines
 **************************)


BeginMediaEdits: external
  (# theMedia: @integer;
     result: @shortInt (* OSErr *);
  enter theMedia
  do '{$7072,$AAAA}' -> pascalTrap;
  exit result
  #);

EndMediaEdits: external
  (# theMedia: @integer;
     result: @shortInt (* OSErr *);
  enter theMedia
  do '{$7073,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaDataHandlerDescription: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     dhType: ^longInt (* OSType *);
     creatorName: [1] @ char (* Str255 *);
     creatorManufacturer: ^longInt (* OSType *);
  enter (theMedia, index, dhType[], creatorName, creatorManufacturer[])
  do '{$303C,$19E,$AAAA}' -> pascalTrap;
  #);


GetMediaDataHandler: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     result: @integer (* DataHandler *);
  enter (theMedia, index)
  do '{$303C,$19F,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaDataHandler: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     dataHandler: @integer (* DataHandlerComponent *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index, dataHandler)
  do '{$303C,$1A0,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Media Sample Table Routines
 **************************)


GetMediaSampleDescriptionCount: external
  (# theMedia: @integer;
     result: @integer (* long *);
  enter theMedia
  do '{$7077,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMediaSampleDescription: external
  (# theMedia: @integer;
     index: @integer (* long *);
     descH: @integer (* SampleDescriptionHandle *);
  enter (theMedia, index, descH)
  do '{$7078,$AAAA}' -> pascalTrap;
  #);

SetMediaSampleDescription: external
  (# theMedia: @integer;
     index: @integer (* long *);
     descH: @integer (* SampleDescriptionHandle *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index, descH)
  do '{$303C,$1D0,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaSampleCount: external
  (# theMedia: @integer;
     result: @integer (* long *);
  enter theMedia
  do '{$7079,$AAAA}' -> pascalTrap;
  exit result
  #);


SampleNumToMediaTime: external
  (# theMedia: @integer;
     logicalSampleNum: @integer (* long *);
     sampleTime: ^longInt (* TimeValue *);
     sampleDuration: ^longInt (* TimeValue *);
  enter (theMedia, logicalSampleNum, sampleTime[], sampleDuration[])
  do '{$707A,$AAAA}' -> pascalTrap;
  #);


MediaTimeToSampleNum: external
  (# theMedia: @integer;
     time: @integer (* TimeValue *);
     sampleNum: ^longInt (* long *);
     sampleTime: ^longInt (* TimeValue *);
     sampleDuration: ^longInt (* TimeValue *);
  enter (theMedia, time, sampleNum[], sampleTime[], sampleDuration[])
  do '{$707B,$AAAA}' -> pascalTrap;
  #);



AddMediaSample: external
  (# theMedia: @integer;
     dataIn: @integer (* Handle *);
     inOffset: @integer (* long *);
     size: @integer (* long *);
     durationPerSample: @integer (* TimeValue *);
     sampleDescriptionH: @integer (* SampleDescriptionHandle *);
     numberOfSamples: @integer (* long *);
     sampleFlags: @shortInt (* short *);
     sampleTime: ^longInt (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theMedia, dataIn, inOffset, size, durationPerSample,
    sampleDescriptionH, numberOfSamples, sampleFlags, sampleTime[])
  do '{$707C,$AAAA}' -> pascalTrap;
  exit result
  #);


AddMediaSampleReference: external
  (# theMedia: @integer;
     dataOffset: @integer (* long *);
     size: @integer (* long *);
     durationPerSample: @integer (* TimeValue *);
     sampleDescriptionH: @integer (* SampleDescriptionHandle *);
     numberOfSamples: @integer (* long *);
     sampleFlags: @shortInt (* short *);
     sampleTime: ^longInt (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theMedia, dataOffset, size, durationPerSample,
    sampleDescriptionH, numberOfSamples, sampleFlags, sampleTime[])
  do '{$707D,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaSample: external
  (# theMedia: @integer;
     dataOut: @integer (* Handle *);
     maxSizeToGrow: @integer (* long *);
     size: ^longInt (* long *);
     time: @integer (* TimeValue *);
     sampleTime: ^longInt (* TimeValue *);
     durationPerSample: ^longInt (* TimeValue *);
     sampleDescriptionH: @integer (* SampleDescriptionHandle *);
     sampleDescriptionIndex: ^longInt (* long *);
     maxNumberOfSamples: @integer (* long *);
     numberOfSamples: ^longInt (* long *);
     sampleFlags: ^shortRef (* short *);
     result: @shortInt (* OSErr *);
  enter (theMedia, dataOut, maxSizeToGrow, size[],
    time, sampleTime[], durationPerSample[],
    sampleDescriptionH, sampleDescriptionIndex[],
    maxNumberOfSamples, numberOfSamples[], sampleFlags[])
  do '{$707E,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaSampleReference: external
  (# theMedia: @integer;
     dataOffset: ^longInt (* long *);
     size: ^longInt (* long *);
     time: @integer (* TimeValue *);
     sampleTime: ^longInt (* TimeValue *);
     durationPerSample: ^longInt (* TimeValue *);
     sampleDescriptionH: @integer (* SampleDescriptionHandle *);
     sampleDescriptionIndex: ^longInt (* long *);
     maxNumberOfSamples: @integer (* long *);
     numberOfSamples: ^longInt (* long *);
     sampleFlags: ^shortRef (* short *);
     result: @shortInt (* OSErr *);
  enter (theMedia, dataOffset[], size[], time, sampleTime[], durationPerSample[],
    sampleDescriptionH, sampleDescriptionIndex[],
    maxNumberOfSamples, numberOfSamples[], sampleFlags[])
  do '{$707F,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMediaShadowSync: external
  (# theMedia: @integer;
     frameDiffSampleNum: @integer (* long *);
     syncSampleNum: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMedia, frameDiffSampleNum, syncSampleNum)
  do '{$303C,$121,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMediaShadowSync: external
  (# theMedia: @integer;
     frameDiffSampleNum: @integer (* long *);
     syncSampleNum: ^longInt (* long *);
     result: @shortInt (* OSErr *);
  enter (theMedia, frameDiffSampleNum, syncSampleNum[])
  do '{$303C,$122,$AAAA}' -> pascalTrap;
  exit result
  #);





(**************************
 * Editing Routines
 **************************)


InsertMediaIntoTrack: external
  (# theTrack: @integer;
     trackStart: @integer (* TimeValue *);
     mediaTime: @integer (* TimeValue *);
     mediaDuration: @integer (* TimeValue *);
     mediaRate: @integer (* Fixed *);
     result: @shortInt (* OSErr *);
  enter (theTrack, trackStart, mediaTime, mediaDuration, mediaRate)
  do '{$303C,$183,$AAAA}' -> pascalTrap;
  exit result
  #);


InsertTrackSegment: external
  (# srcTrack: @integer;
     dstTrack: @integer;
     srcIn: @integer (* TimeValue *);
     srcDuration: @integer (* TimeValue *);
     dstIn: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (srcTrack, dstTrack, srcIn, srcDuration, dstIn)
  do '{$303C,$85,$AAAA}' -> pascalTrap;
  exit result
  #);

InsertMovieSegment: external
  (# srcMovie: @integer;
     dstMovie: @integer;
     srcIn: @integer (* TimeValue *);
     srcDuration: @integer (* TimeValue *);
     dstIn: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (srcMovie, dstMovie, srcIn, srcDuration, dstIn)
  do '{$303C,$86,$AAAA}' -> pascalTrap;
  exit result
  #);

InsertEmptyTrackSegment: external
  (# dstTrack: @integer;
     dstIn: @integer (* TimeValue *);
     dstDuration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (dstTrack, dstIn, dstDuration)
  do '{$303C,$87,$AAAA}' -> pascalTrap;
  exit result
  #);

InsertEmptyMovieSegment: external
  (# dstMovie: @integer;
     dstIn: @integer (* TimeValue *);
     dstDuration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (dstMovie, dstIn, dstDuration)
  do '{$303C,$88,$AAAA}' -> pascalTrap;
  exit result
  #);

DeleteTrackSegment: external
  (# theTrack: @integer;
     in: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theTrack, in, duration)
  do '{$303C,$89,$AAAA}' -> pascalTrap;
  exit result
  #);

DeleteMovieSegment: external
  (# theMovie: @integer;
     in: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theMovie, in, duration)
  do '{$303C,$8A,$AAAA}' -> pascalTrap;
  exit result
  #);

ScaleTrackSegment: external
  (# theTrack: @integer;
     in: @integer (* TimeValue *);
     oldDuration: @integer (* TimeValue *);
     newDuration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theTrack, in, oldDuration, newDuration)
  do '{$303C,$8B,$AAAA}' -> pascalTrap;
  exit result
  #);

ScaleMovieSegment: external
  (# theMovie: @integer;
     in: @integer (* TimeValue *);
     oldDuration: @integer (* TimeValue *);
     newDuration: @integer (* TimeValue *);
     result: @shortInt (* OSErr *);
  enter (theMovie, in, oldDuration, newDuration)
  do '{$303C,$8C,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Hi-level Editing Routines
 **************************)


CutMovieSelection: external
  (# theMovie: @integer;
     result: @integer;
  enter theMovie
  do '{$303C,$8D,$AAAA}' -> pascalTrap;
  exit result
  #);

CopyMovieSelection: external
  (# theMovie: @integer;
     result: @integer;
  enter theMovie
  do '{$303C,$8E,$AAAA}' -> pascalTrap;
  exit result
  #);

PasteMovieSelection: external
  (# theMovie: @integer;
     src: @integer;
  enter (theMovie, src)
  do '{$303C,$8F,$AAAA}' -> pascalTrap;
  #);

AddMovieSelection: external
  (# theMovie: @integer;
     src: @integer;
  enter (theMovie, src)
  do '{$303C,$152,$AAAA}' -> pascalTrap;
  #);

ClearMovieSelection: external
  (# theMovie: @integer;
  enter theMovie
  do '{$303C,$E1,$AAAA}' -> pascalTrap;
  #);

PasteHandleIntoMovie: external
  (# h: @integer (* Handle *);
     handleType: @integer (* OSType *);
     theMovie: @integer;
     flags: @integer (* long *);
     userComp: @integer (* ComponentInstance *);
     result: @shortInt (* OSErr *);
  enter (h, handleType, theMovie, flags, userComp)
  do '{$303C,$CB,$AAAA}' -> pascalTrap;
  exit result
  #);

PutMovieIntoTypedHandle: external
  (# theMovie: @integer;
     targetTrack: @integer;
     handleType: @integer (* OSType *);
     publicMovie: @integer (* Handle *);
     start: @integer (* TimeValue *);
     dur: @integer (* TimeValue *);
     flags: @integer (* long *);
     userComp: @integer (* ComponentInstance *);
     result: @shortInt (* OSErr *);
  enter (theMovie, targetTrack, handleType, publicMovie, start, dur, flags,
	userComp)
  do '{$303C,$1CD,$AAAA}' -> pascalTrap;
  exit result
  #);

IsScrapMovie: external
  (# targetTrack: @integer;
     result: @integer (* Component *);
  enter targetTrack
  do '{$303C,$CC,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * Middle-level Editing Routines
 **************************)


CopyTrackSettings: external
  (# srcTrack: @integer;
     dstTrack: @integer;
     result: @shortInt (* OSErr *);
  enter (srcTrack, dstTrack)
  do '{$303C,$153,$AAAA}' -> pascalTrap;
  exit result
  #);

CopyMovieSettings: external
  (# srcMovie: @integer;
     dstMovie: @integer;
     result: @shortInt (* OSErr *);
  enter (srcMovie, dstMovie)
  do '{$303C,$154,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * movie & track edit state routines
 **************************)

NewMovieEditState: external
  (# theMovie: @integer;
     result: @integer;
  enter theMovie
  do '{$303C,$104,$AAAA}' -> pascalTrap;
  exit result
  #);

UseMovieEditState: external
  (# theMovie: @integer;
     toState: @integer;
     result: @shortInt (* OSErr *);
  enter (theMovie, toState)
  do '{$303C,$105,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeMovieEditState: external
  (# state: @integer;
     result: @shortInt (* OSErr *);
  enter state
  do '{$303C,$106,$AAAA}' -> pascalTrap;
  exit result
  #);


NewTrackEditState: external
  (# theTrack: @integer;
     result: @integer;
  enter theTrack
  do '{$303C,$107,$AAAA}' -> pascalTrap;
  exit result
  #);

UseTrackEditState: external
  (# theTrack: @integer;
     state: @integer;
     result: @shortInt (* OSErr *);
  enter (theTrack, state)
  do '{$303C,$108,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeTrackEditState: external
  (# state: @integer;
     result: @shortInt (* OSErr *);
  enter state
  do '{$303C,$109,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * high level file conversion routines
 **************************)

ConvertFileToMovieFile: external
  (# inputFile: @integer;
     outputFile: @integer;
     creator: @integer (* OSType *);
     scriptTag: @shortInt (* ScriptCode *);
     resID: ^shortRef (* short *);
     flags: @integer (* long *);
     userComp: @integer (* ComponentInstance *);
     proc: ##MovieProgressProc;
     refCon: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (inputFile, outputFile, creator, scriptTag, resID[], flags, userComp,
        proc##, refCon)
  do '{$303C,$1CB,$AAAA}' -> pascalTrap;
  exit result
  #);

ConvertMovieToFile: external
  (# theMovie: @integer;
     onlyTrack: @integer;
     outputFile: @integer;
     fileType: @integer (* OSType *);
     creator: @integer (* OSType *);
     scriptTag: @shortInt (* ScriptCode *);
     resID: ^shortRef (* short *);
     flags: @integer (* long *);
     userComp: @integer (* ComponentInstance *);
     result: @shortInt (* OSErr *);
  enter (theMovie, onlyTrack, outputFile,
        fileType, creator, scriptTag, resID[], flags, userComp)
  do '{$303C,$1CC,$AAAA}' -> pascalTrap;
  exit result
  #);

(**************************
 * Movie Timebase Conversion Routines
 **************************)


TrackTimeToMediaTime: external
  (# value: @integer (* TimeValue *);
     theTrack: @integer;
     result: @integer (* TimeValue *);
  enter (value, theTrack)
  do '{$303C,$96,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackEditRate: external
  (# theTrack: @integer;
     atTime: @integer (* TimeValue *);
     result: @integer (* Fixed *);
  enter (theTrack, atTime)
  do '{$303C,$123,$AAAA}' -> pascalTrap;
  exit result
  #);


(*************************
 * Miscellaneous Routines
 **************************)



GetMovieDataSize: external
  (# theMovie: @integer;
     startTime: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @integer (* long *);
  enter (theMovie, startTime, duration)
  do '{$303C,$98,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackDataSize: external
  (# theTrack: @integer;
     startTime: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @integer (* long *);
  enter (theTrack, startTime, duration)
  do '{$303C,$149,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMediaDataSize: external
  (# theMedia: @integer;
     startTime: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @integer (* long *);
  enter (theMedia, startTime, duration)
  do '{$303C,$99,$AAAA}' -> pascalTrap;
  exit result
  #);


PtInMovie: external
  (# theMovie: @integer;
     pt: @integer (* point *);
     result: @Boolean;
  enter (theMovie, pt)
  do '{$303C,$9A,$AAAA}' -> pascalTrap;
  exit result
  #);

PtInTrack: external
  (# theTrack: @integer;
     pt: @integer (* point *);
     result: @Boolean;
  enter (theTrack, pt)
  do '{$303C,$9B,$AAAA}' -> pascalTrap;
  exit result
  #);


(**************************
 * Group Selection Routines
 **************************)



SetMovieLanguage: external
  (# theMovie: @integer;
     language: @integer (* long *);
  enter (theMovie, language)
  do '{$303C,$9C,$AAAA}' -> pascalTrap;
  #);





(**************************
 * User Data
 **************************)



GetUserData: external
  (# theUserData: @integer;
     data: @integer (* Handle *);
     udType: @integer (* OSType *);
     index: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data, udType, index)
  do '{$303C,$9E,$AAAA}' -> pascalTrap;
  exit result
  #);

AddUserData: external
  (# theUserData: @integer;
     data: @integer (* Handle *);
     udType: @integer (* OSType *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data, udType)
  do '{$303C,$9F,$AAAA}' -> pascalTrap;
  exit result
  #);

RemoveUserData: external
  (# theUserData: @integer;
     udType: @integer (* OSType *);
     index: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theUserData, udType, index)
  do '{$303C,$A0,$AAAA}' -> pascalTrap;
  exit result
  #);

CountUserDataType: external
  (# theUserData: @integer;
     udType: @integer (* OSType *);
     result: @shortInt (* short *);
  enter (theUserData, udType)
  do '{$303C,$14B,$AAAA}' -> pascalTrap;
  exit result
  #);

GetNextUserDataType: external
  (# theUserData: @integer;
     udType: @integer (* OSType *);
     result: @integer (* long *);
  enter (theUserData, udType)
  do '{$303C,$1A5,$AAAA}' -> pascalTrap;
  exit result
  #);

GetUserDataItem: external
  (# theUserData: @integer;
     data: @integer (* void* *);
     size: @integer (* long *);
     udType: @integer (* OSType *);
     index: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data[], size, udType, index)
  do '{$303C,$126,$AAAA}' -> pascalTrap;
  exit result
  #);

SetUserDataItem: external
  (# theUserData: @integer;
     data: @integer (* void* *);
     size: @integer (* long *);
     udType: @integer (* OSType *);
     index: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data[], size, udType, index)
  do '{$303C,$12E,$AAAA}' -> pascalTrap;
  exit result
  #);


AddUserDataText: external
  (# theUserData: @integer;
     data: @integer (* Handle *);
     udType: @integer (* OSType *);
     index: @integer (* long *);
     itlRegionTag: @shortInt (* short *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data, udType, index, itlRegionTag)
  do '{$303C,$14C,$AAAA}' -> pascalTrap;
  exit result
  #);

GetUserDataText: external
  (# theUserData: @integer;
     data: @integer (* Handle *);
     udType: @integer (* OSType *);
     index: @integer (* long *);
     itlRegionTag: @shortInt (* short *);
     result: @shortInt (* OSErr *);
  enter (theUserData, data, udType, index, itlRegionTag)
  do '{$303C,$14D,$AAAA}' -> pascalTrap;
  exit result
  #);

RemoveUserDataText: external
  (# theUserData: @integer;
     udType: @integer (* OSType *);
     index: @integer (* long *);
     itlRegionTag: @shortInt (* short *);
     result: @shortInt (* OSErr *);
  enter (theUserData, udType, index, itlRegionTag)
  do '{$303C,$14E,$AAAA}' -> pascalTrap;
  exit result
  #);


NewUserData: external
  (# theUserData: ^longInt;
     result: @shortInt (* OSErr *);
  enter theUserData[]
  do '{$303C,$12F,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeUserData: external
  (# theUserData: @integer;
     result: @shortInt (* OSErr *);
  enter theUserData
  do '{$303C,$130,$AAAA}' -> pascalTrap;
  exit result
  #);

NewUserDataFromHandle: external
  (# h: @integer (* Handle *);
     theUserData: ^longInt;
     result: @shortInt (* OSErr *);
  enter (h, theUserData[])
  do '{$303C,$131,$AAAA}' -> pascalTrap;
  exit result
  #);

PutUserDataIntoHandle: external
  (# theUserData: @integer;
     h: @integer (* Handle *);
     result: @shortInt (* OSErr *);
  enter (theUserData, h)
  do '{$303C,$132,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaNextInterestingTime: external
  (# theMedia: @integer;
     interestingTimeFlags: @shortInt (* short *);
     time: @integer (* TimeValue *);
     rate: @integer (* Fixed *);
     interestingTime: ^longInt (* TimeValue *);
     interestingDuration: ^longInt (* TimeValue *);
  enter (theMedia, interestingTimeFlags, time, rate,
        interestingTime[], interestingDuration[])
  do '{$303C,$16D,$AAAA}' -> pascalTrap;
  #);

GetTrackNextInterestingTime: external
  (# theTrack: @integer;
     interestingTimeFlags: @shortInt (* short *);
     time: @integer (* TimeValue *);
     rate: @integer (* Fixed *);
     interestingTime: ^longInt (* TimeValue *);
     interestingDuration: ^longInt (* TimeValue *);
  enter (theTrack, interestingTimeFlags, time, rate,
        interestingTime[], interestingDuration[])
  do '{$303C,$E2,$AAAA}' -> pascalTrap;
  #);

GetMovieNextInterestingTime: external
  (# theMovie: @integer;
     interestingTimeFlags: @shortInt (* short *);
     numMediaTypes: @shortInt (* short *);
     whichMediaTypes: ^longInt (* OSType *);
     time: @integer (* TimeValue *);
     rate: @integer (* Fixed *);
     interestingTime: ^longInt (* TimeValue *);
     interestingDuration: ^longInt (* TimeValue *);
  enter (theMovie, interestingTimeFlags, numMediaTypes, whichMediaTypes[],
        time, rate, interestingTime[], interestingDuration[])
  do '{$303C,$10E,$AAAA}' -> pascalTrap;
  #);



CreateMovieFile: external
  (# fileSpec: @integer;
     creator: @integer (* OSType *);
     scriptTag: @shortInt (* ScriptCode *);
     createMovieFileFlags: @integer (* long *);
     resRefNum: ^shortRef (* short *);
     newmovie: ^longInt;
     result: @shortInt (* OSErr *);
  enter (fileSpec, creator, scriptTag, createMovieFileFlags, resRefNum[],
	newmovie[])
  do '{$303C,$191,$AAAA}' -> pascalTrap;
  exit result
  #);


OpenMovieFile: external
  (# fileSpec: @integer;
     resRefNum: ^shortRef (* short *);
     perms: @char;
     result: @shortInt (* OSErr *);
  enter (fileSpec, resRefNum[], perms)
  do '{$303C,$192,$AAAA}' -> pascalTrap;
  exit result
  #);


CloseMovieFile: external
  (# resRefNum: @shortInt (* short *);
     result: @shortInt (* OSErr *);
  enter resRefNum
  do '{$303C,$D5,$AAAA}' -> pascalTrap;
  exit result
  #);


DeleteMovieFile: external
  (# fileSpec: @integer;
     result: @shortInt (* OSErr *);
  enter fileSpec
  do '{$303C,$175,$AAAA}' -> pascalTrap;
  exit result
  #);


NewMovieFromFile: external
  (# theMovie: ^longInt;
     resRefNum: @shortInt (* short *);
     resId: ^shortRef (* short *);
     resName: ^pascalString (* StringPtr *);
     newMovieFlags: @shortInt (* short *);
     dataRefWasChanged: ^shortRef; (* Boolean * *)
     result: @shortInt (* OSErr *);
  enter (theMovie[], resRefNum, resId[], resName[], newMovieFlags,
    dataRefWasChanged[])
  do '{$303C,$F0,$AAAA}' -> pascalTrap;
  exit result
  #);


NewMovieFromHandle: external
  (# theMovie: ^longInt;
     h: @integer (* Handle *);
     newMovieFlags: @shortInt (* short *);
     dataRefWasChanged: ^shortRef;
     result: @shortInt (* OSErr *);
  enter (theMovie[], h, newMovieFlags, dataRefWasChanged[])
  do '{$303C,$F1,$AAAA}' -> pascalTrap;
  exit result
  #);


NewMovieFromDataFork: external
  (# theMovie: ^longInt;
     fRefNum: @shortInt (* short *);
     fileOffset: @integer (* long *);
     newMovieFlags: @shortInt (* short *);
     dataRefWasChanged: ^shortRef;
     result: @shortInt (* OSErr *);
  enter (theMovie[], fRefNum, fileOffset, newMovieFlags, dataRefWasChanged[])
  do '{$303C,$1B3,$AAAA}' -> pascalTrap;
  exit result
  #);


AddMovieResource: external
  (# theMovie: @integer;
     resRefNum: @shortInt (* short *);
     resId: ^shortRef (* short *);
     resName: ^pascalString (* StringPtr *);
     result: @shortInt (* OSErr *);
  enter (theMovie, resRefNum, resId[], resName[])
  do '{$303C,$D7,$AAAA}' -> pascalTrap;
  exit result
  #);


UpdateMovieResource: external
  (# theMovie: @integer;
     resRefNum: @shortInt (* short *);
     resId: @shortInt (* short *);
     resName: ^pascalString (* StringPtr *);
     result: @shortInt (* OSErr *);
  enter (theMovie, resRefNum, resId, resName[])
  do '{$303C,$D8,$AAAA}' -> pascalTrap;
  exit result
  #);


RemoveMovieResource: external
  (# resRefNum: @shortInt (* short *);
     resId: @shortInt (* short *);
     result: @shortInt (* OSErr *);
  enter (resRefNum, resId)
  do '{$303C,$176,$AAAA}' -> pascalTrap;
  exit result
  #);


HasMovieChanged: external
  (# theMovie: @integer;
     result: @Boolean;
  enter theMovie
  do '{$303C,$D9,$AAAA}' -> pascalTrap;
  exit result
  #);

ClearMovieChanged: external
  (# theMovie: @integer;
  enter theMovie
  do '{$303C,$113,$AAAA}' -> pascalTrap;
  #);


SetMovieDefaultDataRef: external
  (# theMovie: @integer;
     dataRef: @integer (* Handle *);
     dataRefType: @integer (* OSType *);
     result: @shortInt (* OSErr *);
  enter (theMovie, dataRef, dataRefType)
  do '{$303C,$1C1,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMovieDefaultDataRef: external
  (# theMovie: @integer;
     dataRef: ^longInt (* Handle *);
     dataRefType: ^longInt (* OSType *);
     result: @shortInt (* OSErr *);
  enter (theMovie, dataRef[], dataRefType[])
  do '{$303C,$1D2,$AAAA}' -> pascalTrap;
  exit result
  #);


FlattenMovie: external
  (# theMovie: @integer;
     movieFlattenFlags: @integer (* long *);
     theFile: @integer;
     creator: @integer (* OSType *);
     scriptTag: @shortInt (* ScriptCode *);
     createMovieFileFlags: @integer (* long *);
     resId: ^shortRef (* short *);
     resName: ^pascalString (* StringPtr *);
  enter (theMovie, movieFlattenFlags,
            theFile, creator, scriptTag, createMovieFileFlags, resId[], resName[])
  do '{$303C,$19B,$AAAA}' -> pascalTrap;
  #);


FlattenMovieData: external
  (# theMovie: @integer;
     movieFlattenFlags: @integer (* long *);
     theFile: @integer;
     creator: @integer (* OSType *);
     scriptTag: @shortInt (* ScriptCode *);
     createMovieFileFlags: @integer (* long *);
     result: @integer;
  enter (theMovie, movieFlattenFlags, theFile, creator, scriptTag,
	createMovieFileFlags)
  do '{$303C,$19C,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMovieProgressProc: external
  (# theMovie: @integer;
     p: ##MovieProgressProc;
     refcon: @integer (* long *);
  enter (theMovie, p##, refcon)
  do '{$303C,$19A,$AAAA}' -> pascalTrap;
  #);

(**************************
 * Video Media routines
 **************************)

GetVideoMediaGraphicsMode: external
  (# mh: @integer (* MediaHandler *);
     graphicsMode: ^longInt (* long *);
     opColor: ^RGBColor;
     result: @integer (* HandlerError *);
  enter (mh, graphicsMode[], opColor[])
  do '{$2F3C,$8,$101,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

SetVideoMediaGraphicsMode: external
  (# mh: @integer (* MediaHandler *);
     graphicsMode: @integer (* long *);
     opColor: ^RGBColor;
     result: @integer (* HandlerError *);
  enter (mh, graphicsMode, opColor[])
  do '{$2F3C,$8,$102,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(**************************
 * Sound Media routines
 **************************)


GetSoundMediaBalance: external
  (# mh: @integer (* MediaHandler *);
     balance: ^shortRef (* short *);
     result: @integer (* HandlerError *);
  enter (mh, balance[])
  do '{$2F3C,$4,$101,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

SetSoundMediaBalance: external
  (# mh: @integer (* MediaHandler *);
     balance: @shortInt (* short *);
     result: @integer (* HandlerError *);
  enter (mh, balance)
  do '{$2F3C,$2,$102,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


(**************************
 * Text Media routines
 **************************)

(* Return displayFlags for TextProc *)
txtProcDefaultDisplay: (# exit 0 #); (* Use the media's default *)
txtProcDontDisplay:	   (# exit 1 #); (* Don't display the text *)
txtProcDoDisplay:	   (# exit 2 #); (* Do display the text *)


(* TextMediaProc and SetTextProc is commented out, since they provoke
 * the error:
 *    ??NotFound:EntryPoint: "extMediaProc" -TOCmarkDS LIP=0 lastLIP=0
 * in the 
 *    Mj¿lner BETA System version 5.2(3) for PowerMac (native)
 * compiler
 


TextMediaProc: external
  (# theText: @integer;
     theMovie: @integer;
     displayFlag: @integer;
     refcon: @integer;
     result: @shortInt;
  enter (theText, theMovie, displayFlag, refcon)
  do pascalExternalEntry; inner;
  exit result
  #);


SetTextProc: external
  (# mh: @integer;
     TextProc: ##TextMediaProc;
     refcon: @integer;
     result: @integer;
  enter (mh, TextProc##, refcon)
  do '{$2F3C,$8,$101,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

*****************************************************************)

AddTextSample: external
  (# mh: @integer (* MediaHandler *);
     text: [1] @ char (* Ptr *);
     size: @integer (* long *);
     fontNumber: @shortInt (* short *);
     fontSize: @shortInt (* short *);
     textFace: @shortInt; (* Style; typedef unsigned char Style; *)
     textColor: ^RGBColor;
     backColor: ^RGBColor;
     textJustification: @shortInt (* short *);
     textBox: ^macRect;
     displayFlags: @integer (* long *);
     scrollDelay: @integer (* TimeValue *);
     hiliteStart: @shortInt (* short *);
     hiliteEnd: @shortInt (* short *);
     rgbHiliteColor: ^RGBColor;
     duration: @integer (* TimeValue *);
     sampleTime: ^longInt (* TimeValue *);
     result: @integer (* ComponentResult *);
  enter (mh, text, size, fontNumber, fontSize, textFace, textColor[],
    backColor[], textJustification, textBox[], displayFlags,
    scrollDelay, hiliteStart, hiliteEnd, rgbHiliteColor[], duration, sampleTime[])
  do '{$2F3C,$34,$102,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


AddTESample: external
  (# mh: @integer (* MediaHandler *);
     hTE: @integer (* TEHandle *);
     backColor: ^RGBColor;
     textJustification: @shortInt (* short *);
     textBox: ^macRect;
     displayFlags: @integer (* long *);
     scrollDelay: @integer (* TimeValue *);
     hiliteStart: @shortInt (* short *);
     hiliteEnd: @shortInt (* short *);
     rgbHiliteColor: ^RGBColor;
     duration: @integer (* TimeValue *);
     sampleTime: ^longInt (* TimeValue *);
     result: @integer (* ComponentResult *);
  enter (mh, hTE, backColor[], textJustification, textBox[], displayFlags,
	scrollDelay, hiliteStart, hiliteEnd, rgbHiliteColor[], duration, sampleTime[])
  do '{$2F3C,$26,$103,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


AddHiliteSample: external
  (# mh: @integer (* MediaHandler *);
     hiliteStart: @shortInt (* short *);
     hiliteEnd: @shortInt (* short *);
     rgbHiliteColor: ^RGBColor;
     duration: @integer (* TimeValue *);
     sampleTime: ^longInt (* TimeValue *);
     result: @integer (* ComponentResult *);
  enter (mh, hiliteStart, hiliteEnd, rgbHiliteColor[], duration, sampleTime[])
  do '{$2F3C,$10,$104,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

findTextEdgeOK:		   (# exit 1 #); (* Okay to find text at specified sample time *)
findTextCaseSensitive: (# exit 2 #); (* Case sensitive search *)
findTextReverseSearch: (# exit 4 #); (* Search from sampleTime backwards *)
findTextWrapAround:	   (# exit 4 #); (* Wrap search when beginning or end of movie is hit *)


FindNextText: external
  (# mh: @integer (* MediaHandler *);
     text: [1] @ char (* Ptr *);
     size: @integer (* long *);
     findFlags: @shortInt (* short *);
     startTime: @integer (* TimeValue *);
     foundTime: ^longInt (* TimeValue *);
     foundDuration: ^longInt (* TimeValue *);
     offset: ^longInt (* long *);
     result: @integer (* ComponentResult *);
  enter (mh, text, size, findFlags, startTime, foundTime[], foundDuration[],
	offset[])
  do '{$2F3C,$1A,$105,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


HiliteTextSample: external
  (# mh: @integer (* MediaHandler *);
     sampleTime: @integer (* TimeValue *);
     hiliteStart: @shortInt (* short *);
     hiliteEnd: @shortInt (* short *);
     rgbHiliteColor: ^RGBColor;
     result: @integer (* ComponentResult *);
  enter (mh, sampleTime, hiliteStart, hiliteEnd, rgbHiliteColor[])
  do '{$2F3C,$C,$106,$7000,$A82A}' -> pascalTrap;
  exit result
  #);



GetPosterBox: external
  (# theMovie: @integer;
     boxRect: ^macRect;
  enter (theMovie, boxRect[])
  do '{$303C,$16F,$AAAA}' -> pascalTrap;
  #);

SetPosterBox: external
  (# theMovie: @integer;
     boxRect: ^macRect;
  enter (theMovie, boxRect[])
  do '{$303C,$170,$AAAA}' -> pascalTrap;
  #);

GetMovieSegmentDisplayBoundsRgn: external
  (# theMovie: @integer;
     time: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @integer (* RgnHandle *);
  enter (theMovie, time, duration)
  do '{$303C,$16C,$AAAA}' -> pascalTrap;
  exit result
  #);

GetTrackSegmentDisplayBoundsRgn: external
  (# theTrack: @integer;
     time: @integer (* TimeValue *);
     duration: @integer (* TimeValue *);
     result: @integer (* RgnHandle *);
  enter (theTrack, time, duration)
  do '{$303C,$16B,$AAAA}' -> pascalTrap;
  exit result
  #);


SetMovieCoverProcs: external
  (# theMovie: @integer;
     uncoverProc: ##MovieRgnCoverProc;
     coverProc: ##MovieRgnCoverProc;
     refcon: @integer (* long *);
  enter (theMovie, uncoverProc##, coverProc##, refcon)
  do '{$303C,$179,$AAAA}' -> pascalTrap;
  #);


GetTrackStatus: external
  (# theTrack: @integer;
     result: @integer (* ComponentResult *);
  enter theTrack
  do '{$303C,$172,$AAAA}' -> pascalTrap;
  exit result
  #);

GetMovieStatus: external
  (# theMovie: @integer;
     firstProblemTrack: ^longInt;
     result: @integer (* ComponentResult *);
  enter (theMovie, firstProblemTrack[])
  do '{$303C,$173,$AAAA}' -> pascalTrap;
  exit result
  #);

(******
 *    Movie Controller support routines
 *****)


NewMovieController: external
  (# theMovie: @integer;
     movieRect: ^macRect;
     someFlags: @integer (* long *);
     result: @integer (* ComponentInstance *);
  enter (theMovie, movieRect[], someFlags)
  do '{$303C,$18A,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeMovieController: external
  (# mc: @integer (* ComponentInstance *);
  enter mc
  do '{$303C,$18B,$AAAA}' -> pascalTrap;
  #);

(*******
 *    Scrap routines
 ******)


PutMovieOnScrap: external
  (# theMovie: @integer;
     movieScrapFlags: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMovie, movieScrapFlags)
  do '{$303C,$18C,$AAAA}' -> pascalTrap;
  exit result
  #);

NewMovieFromScrap: external
  (# newMovieFlags: @integer (* long *);
     result: @integer;
  enter newMovieFlags
  do '{$303C,$18D,$AAAA}' -> pascalTrap;
  exit result
  #);


(*******
 *    DataRef routines
 ******)



GetMediaDataRef: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     dataRef: ^longInt (* Handle *);
     dataRefType: ^longInt (* OSType *);
     dataRefAttributes: ^longInt (* long *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index, dataRef[], dataRefType[], dataRefAttributes[])
  do '{$303C,$197,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaDataRef: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     dataRef: @integer (* Handle *);
     dataRefType: @integer (* OSType *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index, dataRef, dataRefType)
  do '{$303C,$1C9,$AAAA}' -> pascalTrap;
  exit result
  #);

SetMediaDataRefAttributes: external
  (# theMedia: @integer;
     index: @shortInt (* short *);
     dataRefAttributes: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index, dataRefAttributes)
  do '{$303C,$1CA,$AAAA}' -> pascalTrap;
  exit result
  #);

AddMediaDataRef: external
  (# theMedia: @integer;
     index: ^shortRef (* short *);
     dataRef: @integer (* Handle *);
     dataRefType: @integer (* OSType *);
     result: @shortInt (* OSErr *);
  enter (theMedia, index[], dataRef, dataRefType)
  do '{$303C,$198,$AAAA}' -> pascalTrap;
  exit result
  #);


GetMediaDataRefCount: external
  (# theMedia: @integer;
     count: ^shortRef (* short *);
     result: @shortInt (* OSErr *);
  enter (theMedia, count[])
  do '{$303C,$199,$AAAA}' -> pascalTrap;
  exit result
  #);

(*******
 *    Playback hint routines
 ******)


SetMoviePlayHints: external
  (# theMovie: @integer;
     flags: @integer (* long *);
     flagsMask: @integer (* long *);
  enter (theMovie, flags, flagsMask)
  do '{$303C,$1A1,$AAAA}' -> pascalTrap;
  #);

SetMediaPlayHints: external
  (# theMedia: @integer;
     flags: @integer (* long *);
     flagsMask: @integer (* long *);
  enter (theMedia, flags, flagsMask)
  do '{$303C,$1A2,$AAAA}' -> pascalTrap;
  #);



firstMoviesError: (# exit -2000 #);

couldNotResolveDataRef:	   (# exit -2000 #);
badImageDescription:	   (# exit -2001 #);
badPublicMovieAtom:		   (# exit -2002 #);
cantFindHandler:		   (# exit -2003 #);
cantOpenHandler:		   (# exit -2004 #);
badComponentType:		   (# exit -2005 #);
noMediaHandler:			   (# exit -2006 #);
noDataHandler:			   (# exit -2007 #);
invalidMedia:			   (# exit -2008 #);
invalidTrack:			   (# exit -2009 #);
invalidMovie:			   (# exit -2010 #);
invalidSampleTable:		   (# exit -2011 #);
invalidDataRef:			   (# exit -2012 #);
invalidHandler:			   (# exit -2013 #);
invalidDuration:		   (# exit -2014 #);
invalidTime:			   (# exit -2015 #);
cantPutPublicMovieAtom:	   (# exit -2016 #);
badEditList:			   (# exit -2017 #);
mediaTypesDontMatch:	   (# exit -2018 #);
progressProcAborted:	   (# exit -2019 #);
movieToolboxUninitialized: (# exit -2020 #);
wfFileNotFound:			   (# exit -2021 #);
cantCreateSingleForkFile:  (# exit -2022 #); (* happens when file already exists *)
invalidEditState:		   (# exit -2023 #);
nonMatchingEditState:	   (# exit -2024 #);
staleEditState:			   (# exit -2025 #);
userDataItemNotFound:	   (# exit -2026 #);
maxSizeToGrowTooSmall:	   (# exit -2027 #);
badTrackIndex:			   (# exit -2028 #);
trackIDNotFound:		   (# exit -2029 #);
trackNotInMovie:		   (# exit -2030 #);
timeNotInTrack:			   (# exit -2031 #);
timeNotInMedia:			   (# exit -2032 #);
badEditIndex:			   (# exit -2033 #);
internalQuickTimeError:	   (# exit -2034 #);
cantEnableTrack:		   (# exit -2035 #);
invalidRect:			   (# exit -2036 #);
invalidSampleNum:		   (# exit -2037 #);
invalidChunkNum:		   (# exit -2038 #);
invalidSampleDescIndex:	   (# exit -2039 #);
invalidChunkCache:		   (# exit -2040 #);
invalidSampleDescription:  (# exit -2041 #);

(* this should probably be in its own range for data handlers *)
dataNotOpenForRead:		 (# exit -2042 #);
dataNotOpenForWrite:	 (# exit -2043 #);
dataAlreadyOpenForWrite: (# exit -2044 #);
dataAlreadyClosed:		 (# exit -2045 #);
endOfDataReached:		 (# exit -2046 #);
dataNoDataRef:			 (# exit -2047 #);

(* private errors *)
noMovieFound: (# exit -2048 #);

invalidDataRefContainer: (# exit -2049 #);
badDataRefIndex:		 (# exit -2050 #);
noDefaultDataRef:		 (# exit -2051 #);

couldNotUseAnExistingSample: (# exit -2052 #);

featureUnsupported:				(# exit -2053 #);
unsupportedAuxiliaryImportData: (# exit -2057 #);
(* lastMoviesError:				(# exit -2056 #); (* ?? unsure about the value /ovv *)
noRecordOfApp:					(# exit movieToolboxUninitialized #); (* replica *)




MovieControllerComponentType: (# exit 'play' #);

mcActionIdle:				   (# exit  1 #); (* no param *)
mcActionDraw:				   (# exit  2 #); (* param is WindowPtr *)
mcActionActivate:			   (# exit  3 #); (* no param *)
mcActionDeactivate:			   (# exit  4 #); (* no param *)
mcActionMouseDown:			   (# exit  5 #); (* param is pointer to EventRecord *)
mcActionKey:				   (# exit  6 #); (* param is pointer to EventRecord *)
mcActionPlay:				   (# exit  8 #); (* param is Fixed, play rate *)
mcActionGoToTime:			   (# exit 12 #); (* param is TimeRecord *)
mcActionSetVolume:			   (# exit 14 #); (* param is a short *)
mcActionGetVolume:			   (# exit 15 #); (* param is pointer to a short *)
mcActionStep:				   (# exit 18 #); (* param is number of steps (short) *)
mcActionSetLooping:			   (# exit 21 #); (* param is Boolean *)
mcActionGetLooping:			   (# exit 22 #); (* param is pointer to a Boolean *)
mcActionSetLoopIsPalindrome:   (# exit 23 #); (* param is Boolean *)
mcActionGetLoopIsPalindrome:   (# exit 24 #); (* param is pointer to a Boolean *)
mcActionSetGrowBoxBounds:	   (# exit 25 #); (* param is a Rect *)
mcActionControllerSizeChanged: (# exit 26 #); (* no param *)
mcActionSetSelectionBegin:	   (# exit 29 #); (* param is TimeRecord *)
mcActionSetSelectionDuration:  (# exit 30 #); (* param is TimeRecord, action only taken on set-duration *)
mcActionSetPosterTime:		   (# exit 31 #); (* param is TimeRecord *)
mcActionSetKeysEnabled:		   (# exit 32 #); (* param is Boolean *)
mcActionGetKeysEnabled:		   (# exit 33 #); (* param is pointer to Boolean *)
mcActionSetPlaySelection:	   (# exit 34 #); (* param is Boolean *)
mcActionGetPlaySelection:	   (# exit 35 #); (* param is pointer to Boolean *)
mcActionSetUseBadge:		   (# exit 36 #); (* param is Boolean *)
mcActionGetUseBadge:		   (# exit 37 #); (* param is pointer to Boolean *)
mcActionSetFlags:			   (# exit 38 #); (* param is long of flags *)
mcActionGetFlags:			   (# exit 39 #); (* param is pointer to a long of flags *)
mcActionSetPlayEveryFrame:	   (# exit 40 #); (* param is Boolean *)
mcActionGetPlayEveryFrame:	   (# exit 41 #); (* param is pointer to Boolean *)
mcActionGetPlayRate:		   (# exit 42 #); (* param is pointer to Fixed *)
mcActionShowBalloon:		   (# exit 43 #); (* param is a pointer to a boolean. set to false to stop balloon *)
mcActionBadgeClick:			   (# exit 44 #); (* param is pointer to Boolean. set to false to ignore click *)
mcActionMovieClick:			   (# exit 45 #); (* param is pointer to event record. change ÒwhatÓ to nullEvt to kill click *)
mcActionSuspend:			   (# exit 46 #); (* no param *)
mcActionResume:				   (# exit 47 #); (* no param *)

mcFlagSuppressMovieFrame:	 (# exit 1 #);
mcFlagSuppressStepButtons:	 (# exit 2 #);
mcFlagSuppressSpeakerButton: (# exit 4 #);
mcFlagsUseWindowPalette:	 (# exit 8 #);


mcPositionDontInvalidate: (# exit 32 #);

MCActionFilter: external
  (# mc: @integer (* MovieController *);
     action: @integer (* short * *);
     params: @integer;
     result: @Boolean;
  enter (mc, action[], params[])
  do pascalExternalEntry; inner;
  exit result
  #);

MCActionFilterWithRefCon: external
  (# mc: @integer (* MovieController *);
     action: @shortInt (* short *);
     params: @integer (* void* *);
     refCon: @integer (* long *);
     result: @Boolean;
  enter (mc, action, params[], refCon)
  do pascalExternalEntry; inner;
  exit result
  #);

(***
 *    menu related stuff
 **)
mcInfoUndoAvailable:  (# exit   1 #);
mcInfoCutAvailable:	  (# exit   2 #);
mcInfoCopyAvailable:  (# exit   4 #);
mcInfoPasteAvailable: (# exit   8 #);
mcInfoClearAvailable: (# exit  16 #);
mcInfoHasSound:		  (# exit  32 #);
mcInfoIsPlaying:	  (# exit  64 #);
mcInfoIsLooping:	  (# exit 128 #);
mcInfoIsInPalindrome: (# exit 256 #);
mcInfoEditingEnabled: (# exit 512 #);

(* menu item codes *)
mcMenuUndo:	 (# exit 1 #);
mcMenuCut:	 (# exit 3 #);
mcMenuCopy:	 (# exit 4 #);
mcMenuPaste: (# exit 5 #);
mcMenuClear: (# exit 6 #);

(**** error codes ******)
cannotMoveAttachedController:		(# exit -9999 #);
controllerHasFixedHeight:			(# exit -9998 #);
cannotSetWidthOfAttachedController: (# exit -9997 #);
controllerBoundsNotExact:			(# exit -9996 #);
editingNotAllowed:					(# exit -9995 #);
badControllerHeight:				(# exit -9994 #);


(* target management *)

MCSetMovie: external
  (# mc: @integer (* MovieController *);
     theMovie: @integer;
     movieWindow: @integer (* WindowPtr *);
     where: @integer (* point *);
     result: @integer (* ComponentResult *);
  enter (mc, theMovie, movieWindow, where)
  do '{$2F3C,$C,$2,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetMovie: external
  (# mc: @integer (* MovieController *);
     result: @integer;
  enter mc
  do '{$4267,$2F3C,$2,$5,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCRemoveMovie: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$6,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(* event handling etc. *)

MCIsPlayerEvent: external
  (# mc: @integer (* MovieController *);
     e: @integer; (* ^EventRecord; *)
     result: @integer (* ComponentResult *);
  enter (mc, e (* [] *) )
  do '{$2F3C,$4,$7,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(* obsolete. use MCSetActionFilterWithRefCon instead. *)

MCSetActionFilter: external
  (# mc: @integer (* MovieController *);
     blob: ##MCActionFilter;
     result: @integer (* ComponentResult *);
  enter (mc, blob##)
  do '{$2F3C,$4,$8,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(*  proc is of the form:
 *      Boolean userPlayerFilter(MovieController mc, short *action, void *params) =
 *  proc returns TRUE if it handles the action, FALSE if not
 *  action is passed as a VAR so that it could be changed by filter (ick)
 *  this is consistent with the current dialog manager stuff
 *  params is any potential parameters that go with the action <triple ick>
 *      such as set playback rate to xxx.
 *)

MCDoAction: external
  (# mc: @integer (* MovieController *);
     action: @shortInt (* short *);
     params: @integer (* void* *);
     result: @integer (* ComponentResult *);
  enter (mc, action, params[])
  do '{$2F3C,$6,$9,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(* state type things *)

MCSetControllerAttached: external
  (# mc: @integer (* MovieController *);
     attach: @Boolean;
     result: @integer (* ComponentResult *);
  enter (mc, attach)
  do '{$2F3C,$2,$A,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCIsControllerAttached: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$B,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCSetControllerPort: external
  (# mc: @integer (* MovieController *);
     gp: @integer (* CGrafPtr *);
     result: @integer (* ComponentResult *);
  enter (mc, gp)
  do '{$2F3C,$4,$C,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetControllerPort: external
  (# mc: @integer (* MovieController *);
     result: @integer (* CGrafPtr *);
  enter mc
  do '{$2F3C,0,$D,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCSetVisible: external
  (# mc: @integer (* MovieController *);
     visible: @Boolean;
     result: @integer (* ComponentResult *);
  enter (mc, visible)
  do '{$2F3C,$2,$E,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetVisible: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$F,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetControllerBoundsRect: external
  (# mc: @integer (* MovieController *);
     bounds: ^macRect;
     result: @integer (* ComponentResult *);
  enter (mc, bounds[])
  do '{$2F3C,$4,$10,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCSetControllerBoundsRect: external
  (# mc: @integer (* MovieController *);
     bounds: ^macRect;
     result: @integer (* ComponentResult *);
  enter (mc, bounds[])
  do '{$2F3C,$4,$11,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetControllerBoundsRgn: external
  (# mc: @integer (* MovieController *);
     result: @integer (* RgnHandle *);
  enter mc
  do '{$2F3C,0,$12,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetWindowRgn: external
  (# mc: @integer (* MovieController *);
     w: @integer (* WindowPtr *);
     result: @integer (* RgnHandle *);
  enter (mc, w)
  do '{$2F3C,$4,$13,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


(* other stuff *)

MCMovieChanged: external
  (# mc: @integer (* MovieController *);
     m: @integer;
     result: @integer (* ComponentResult *);
  enter (mc, m)
  do '{$2F3C,$4,$14,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


(*  called when the app has changed thing about the movie (like bounding rect) or rate. So that we
 *      can update our graphical (and internal) state accordingly.
 *)

MCSetDuration: external
  (# mc: @integer (* MovieController *);
     duration: @integer (* TimeValue *);
     result: @integer (* ComponentResult *);
  enter (mc, duration)
  do '{$2F3C,$4,$15,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(*  duration to use for time slider -- will be reset next time MCMovieChanged is called
 *      or MCSetMovie is called
 *)

MCGetCurrentTime: external
  (# mc: @integer (* MovieController *);
     scale: ^longInt (* TimeScale *);
     result: @integer (* TimeValue *);
  enter (mc, scale[])
  do '{$2F3C,$4,$16,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(*  returns the time value and the time scale it is on. if there are no movies, the
 *       time scale is passed back as 0. scale is an optional parameter
 *)

MCNewAttachedController: external
  (# mc: @integer (* MovieController *);
     theMovie: @integer;
     w: @integer (* WindowPtr *);
     where: @integer (* point *);
     result: @integer (* ComponentResult *);
  enter (mc, theMovie, w, where)
  do '{$2F3C,$C,$17,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

(*  makes m the only movie attached to the controller. makes the controller visible.
 *  the window and where parameters are passed a long to MCSetMovie and behave as
 *  described there
 *)

MCDraw: external
  (# mc: @integer (* MovieController *);
     w: @integer (* WindowPtr *);
     result: @integer (* ComponentResult *);
  enter (mc, w)
  do '{$2F3C,$4,$18,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCActivate: external
  (# mc: @integer (* MovieController *);
     w: @integer (* WindowPtr *);
     activate: @Boolean;
     result: @integer (* ComponentResult *);
  enter (mc, w, activate)
  do '{$2F3C,$6,$19,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCIdle: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$1A,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCKey: external
  (# mc: @integer (* MovieController *);
     key: @char;
     modifiers: @integer (* long *);
     result: @integer (* ComponentResult *);
  enter (mc, key, modifiers)
  do '{$2F3C,$6,$1B,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCClick: external
  (# mc: @integer (* MovieController *);
     w: @integer (* WindowPtr *);
     where: @integer (* point *);
     when: @integer (* long *);
     modifiers: @integer (* long *);
     result: @integer (* ComponentResult *);
  enter (mc, w, where, when, modifiers)
  do '{$2F3C,$10,$1C,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


(***
 *    calls for editing
 **)

MCEnableEditing: external
  (# mc: @integer (* MovieController *);
     enabled: @Boolean;
     result: @integer (* ComponentResult *);
  enter (mc, enabled)
  do '{$2F3C,$2,$1D,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCIsEditingEnabled: external
  (# mc: @integer (* MovieController *);
     result: @integer (* long *);
  enter mc
  do '{$2F3C,0,$1E,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCCopy: external
  (# mc: @integer (* MovieController *);
     result: @integer;
  enter mc
  do '{$2F3C,0,$1F,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCCut: external
  (# mc: @integer (* MovieController *);
     result: @integer;
  enter mc
  do '{$2F3C,0,$20,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCPaste: external
  (# mc: @integer (* MovieController *);
     srcMovie: @integer;
     result: @integer (* ComponentResult *);
  enter (mc, srcMovie)
  do '{$2F3C,$4,$21,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCClear: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$22,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCUndo: external
  (# mc: @integer (* MovieController *);
     result: @integer (* ComponentResult *);
  enter mc
  do '{$2F3C,0,$23,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


(*
 *    somewhat special stuff
 *)

MCPositionController: external
  (# mc: @integer (* MovieController *);
     movieRect: ^macRect;
     controllerRect: ^macRect;
     someFlags: @integer (* long *);
     result: @integer (* ComponentResult *);
  enter (mc, movieRect[], controllerRect[], someFlags)
  do '{$2F3C,$C,$24,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


MCGetControllerInfo: external
  (# mc: @integer (* MovieController *);
     someFlags: ^longInt (* long *);
     result: @integer (* ComponentResult *);
  enter (mc, someFlags[])
  do '{$2F3C,$4,$25,$7000,$A82A}' -> pascalTrap;
  exit result
  #);




MCSetClip: external
  (# mc: @integer (* MovieController *);
     theClip: @integer (* RgnHandle *);
     movieClip: @integer (* RgnHandle *);
     result: @integer (* ComponentResult *);
  enter (mc, theClip, movieClip)
  do '{$2F3C,$8,$28,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetClip: external
  (# mc: @integer (* MovieController *);
     theClip: ^longInt (* RgnHandle *);
     movieClip: ^longInt (* RgnHandle *);
     result: @integer (* ComponentResult *);
  enter (mc, theClip[], movieClip[])
  do '{$2F3C,$8,$29,$7000,$A82A}' -> pascalTrap;
  exit result
  #);


MCDrawBadge: external
  (# mc: @integer (* MovieController *);
     movieRgn: @integer (* RgnHandle *);
     badgeRgn: ^longInt (* RgnHandle *);
     result: @integer (* ComponentResult *);
  enter (mc, movieRgn, badgeRgn[])
  do '{$2F3C,$8,$2A,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCSetUpEditMenu: external
  (# mc: @integer (* MovieController *);
     modifiers: @integer (* long *);
     mh: @integer (* MenuHandle *);
     result: @integer (* ComponentResult *);
  enter (mc, modifiers, mh)
  do '{$2F3C,$8,$2B,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCGetMenuString: external
  (# mc: @integer (* MovieController *);
     modifiers: @integer (* long *);
     item: @shortInt (* short *);
     aString: [1] @ char (* Str255 *);
     result: @integer (* ComponentResult *);
  enter (mc, modifiers, item, aString)
  do '{$2F3C,$A,$2C,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

MCSetActionFilterWithRefCon: external
  (# mc: @integer (* MovieController *);
     blob: ##MCActionFilterWithRefCon;
     refCon: @integer (* long *);
     result: @integer (* ComponentResult *);
  enter (mc, blob##, refCon)
  do '{$2F3C,$8,$2D,$7000,$A82A}' -> pascalTrap;
  exit result
  #);

kMCSetMovieSelect:				  (# exit  2 #);
kMCRemoveMovieSelect:			  (# exit  6 #);
kMCIsPlayerEventSelect:			  (# exit  7 #);
kMCSetActionFilterSelect:		  (# exit  8 #);
kMCDoActionSelect:				  (# exit  9 #);
kMCSetControllerAttachedSelect:	  (# exit 10 #); (* 0xA *)
kMCIsControllerAttachedSelect:	  (# exit 11 #); (* 0xB *)
kMCSetControllerPortSelect:		  (# exit 12 #); (* 0xC *)
kMCGetControllerPortSelect:		  (# exit 13 #); (* 0xD *)
kMCSetVisibleSelect:			  (# exit 14 #); (* 0xE *)
kMCGetVisibleSelect:			  (# exit 15 #); (* 0xF *)
kMCGetControllerBoundsRectSelect: (# exit 16 #); (* 0x10 *)
kMCSetControllerBoundsRectSelect: (# exit 17 #); (* 0x11 *)
kMCGetControllerBoundsRgnSelect:  (# exit 18 #); (* 0x12 *)
kMCGetWindowRgnSelect:			  (# exit 19 #); (* 0x13 *)
kMCMovieChangedSelect:			  (# exit 20 #); (* 0x14 *)
kMCSetDurationSelect:			  (# exit 21 #); (* 0x15 *)
kMCGetCurrentTimeSelect:		  (# exit 22 #); (* 0x16 *)
kMCNewAttachedControllerSelect:	  (# exit 23 #); (* 0x17 *)
kMCDrawSelect:					  (# exit 24 #); (* 0x18 *)
kMCActivateSelect:				  (# exit 25 #); (* 0x19 *)
kMCIdleSelect:					  (# exit 26 #); (* 0x1A *)
kMCKeySelect:					  (# exit 27 #); (* 0x1B *)
kMCClickSelect:					  (# exit 28 #); (* 0x1C *)
kMCEnableEditingSelect:			  (# exit 29 #); (* 0x1D *)
kMCIsEditingEnabledSelect:		  (# exit 30 #); (* 0x1E *)
kMCCopySelect:					  (# exit 31 #); (* 0x1F *)
kMCCutSelect:					  (# exit 32 #); (* 0x20 *)
kMCPasteSelect:					  (# exit 33 #); (* 0x21 *)
kMCClearSelect:					  (# exit 34 #); (* 0x22 *)
kMCUndoSelect:					  (# exit 35 #); (* 0x23 *)
kMCPositionControllerSelect:	  (# exit 36 #); (* 0x24 *)
kMCGetControllerInfoSelect:		  (# exit 37 #); (* 0x25 *)
kMCSetClipSelect:				  (# exit 40 #); (* 0x28 *)
kMCGetClipSelect:				  (# exit 41 #); (* 0x29 *)
kMCDrawBadgeSelect:				  (# exit 42 #); (* 0x2A *)
kMCSetUpEditMenuSelect:			  (# exit 43 #); (* 0x2B *)
kMCGetMenuStringSelect:			  (# exit 44 #); (* 0x2C *)
kMCSetActionFilterWithRefConSelect: (# exit 45 #); (* 0x2D *)




(*****************************************
 *                                       *
 *        T  I  M  E  B  A  S  E         *
 *                                       *
 ****************************************)


NewTimeBase: external
  (# result: @integer;
  do '{$303C,$A5,$AAAA}' -> pascalTrap;
  exit result
  #);

DisposeTimeBase: external
  (# tb: @integer;
  enter tb
  do '{$303C,$B6,$AAAA}' -> pascalTrap;
  #);


GetTimeBaseTime: external
  (# tb: @integer;
     s: @integer (* TimeScale *);
     tr: ^TimeRecord;
     result: @integer (* TimeValue *);
  enter (tb,s, tr[])
  do '{$303C,$A6,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseTime: external
  (# tb: @integer;
     tr: ^TimeRecord;
  enter (tb,tr[])
  do '{$303C,$A7,$AAAA}' -> pascalTrap;
  #);

SetTimeBaseValue: external
  (# tb: @integer;
     t: @integer (* TimeValue *);
     s: @integer (* TimeScale *);
  enter (tb,t,s)
  do '{$303C,$A8,$AAAA}' -> pascalTrap;
  #);


GetTimeBaseRate: external
  (# tb: @integer;
     result: @integer (* Fixed *);
  enter tb
  do '{$303C,$A9,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseRate: external
  (# tb: @integer;
     r: @integer (* Fixed *);
  enter (tb, r)
  do '{$303C,$AA,$AAAA}' -> pascalTrap;
  #);


GetTimeBaseStartTime: external
  (# tb: @integer;
     s: @integer (* TimeScale *);
     tr: ^TimeRecord;
     result: @integer (* TimeValue *);
  enter (tb,s,tr[])
  do '{$303C,$AB,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseStartTime: external
  (# tb: @integer;
     tr: ^TimeRecord;
  enter (tb,tr[])
  do '{$303C,$AC,$AAAA}' -> pascalTrap;
  #);

GetTimeBaseStopTime: external
  (# tb: @integer;
     s: @integer (* TimeScale *);
     tr: ^TimeRecord;
     result: @integer (* TimeValue *);
  enter (tb,s,tr[])
  do '{$303C,$AD,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseStopTime: external
  (# tb: @integer;
     tr: ^TimeRecord;
  enter (tb,tr[])
  do '{$303C,$AE,$AAAA}' -> pascalTrap;
  #);


GetTimeBaseFlags: external
  (# tb: @integer;
     result: @integer (* long *);
  enter tb
  do '{$303C,$B1,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseFlags: external
  (# tb: @integer;
     timeBaseFlags: @integer (* long *);
  enter (tb,timeBaseFlags)
  do '{$303C,$B2,$AAAA}' -> pascalTrap;
  #);


SetTimeBaseMasterTimeBase: external
  (# slave: @integer;
     master: @integer;
     
        slaveZero: ^TimeRecord;
  enter (slave,master, slaveZero[])
  do '{$303C,$B4,$AAAA}' -> pascalTrap;
  #);

GetTimeBaseMasterTimeBase: external
  (# tb: @integer;
     result: @integer;
  enter tb
  do '{$303C,$AF,$AAAA}' -> pascalTrap;
  exit result
  #);

SetTimeBaseMasterClock: external
  (# slave: @integer;
     clockMeister: @integer (* Component *);
     
        slaveZero: ^TimeRecord;
  enter (slave,clockMeister, slaveZero[])
  do '{$303C,$B3,$AAAA}' -> pascalTrap;
  #);

GetTimeBaseMasterClock: external
  (# tb: @integer;
     result: @integer (* ComponentInstance *);
  enter tb
  do '{$303C,$B0,$AAAA}' -> pascalTrap;
  exit result
  #);


ConvertTime: external
  (# inout: ^TimeRecord;
     newBase: @integer;
  enter (inout[],newBase)
  do '{$303C,$B5,$AAAA}' -> pascalTrap;
  #);

ConvertTimeScale: external
  (# inout: ^TimeRecord;
     newScale: @integer (* TimeScale *);
  enter (inout[],newScale)
  do '{$303C,$B7,$AAAA}' -> pascalTrap;
  #);

AddTime: external
  (# dst: ^TimeRecord;
     src: ^TimeRecord;
  enter (dst[],src[])
  do '{$303C,$10C,$AAAA}' -> pascalTrap;
  #);

SubtractTime: external
  (# dst: ^TimeRecord;
     src: ^TimeRecord;
  enter (dst[],src[])
  do '{$303C,$10D,$AAAA}' -> pascalTrap;
  #);


GetTimeBaseStatus: external
  (# tb: @integer;
     unpinnedTime: ^TimeRecord;
     result: @integer (* long *);
  enter (tb,unpinnedTime[])
  do '{$303C,$10B,$AAAA}' -> pascalTrap;
  exit result
  #);


SetTimeBaseZero: external
  (# tb: @integer;
     zero: ^TimeRecord;
  enter (tb, zero[])
  do '{$303C,$128,$AAAA}' -> pascalTrap;
  #);

GetTimeBaseEffectiveRate: external
  (# tb: @integer;
     result: @integer (* Fixed *);
  enter tb
  do '{$303C,$124,$AAAA}' -> pascalTrap;
  exit result
  #);


(*****************************************
 *                                       *
 *        C  A  L  L  B  A  C  K         *
 *                                       *
 ****************************************)


NewCallBack: external
  (# tb: @integer;
     cbType: @shortInt (* short *);
     result: @integer;
  enter (tb, cbType)
  do '{$303C,$EB,$AAAA}' -> pascalTrap;
  exit result
  #);


DisposeCallBack: external
  (# cb: @integer;
  enter cb
  do '{$303C,$EC,$AAAA}' -> pascalTrap;
  #);


GetCallBackType: external
  (# cb: @integer;
     result: @shortInt (* short *);
  enter cb
  do '{$303C,$ED,$AAAA}' -> pascalTrap;
  exit result
  #);

GetCallBackTimeBase: external
  (# cb: @integer;
     result: @integer;
  enter cb
  do '{$303C,$EE,$AAAA}' -> pascalTrap;
  exit result
  #);


CallMeWhen: external
  (# cb: @integer;
     callBackProc: ##QTCallBackProc;
     refCon: @integer (* long *);
     param1: @integer (* long *);
     param2: @integer (* long *);
     param3: @integer (* long *);
     result: @shortInt (* OSErr *);
  enter (cb, callBackProc##, refCon, param1, param2, param3)
  do '{$303C,$B8,$AAAA}' -> pascalTrap;
  exit result
  #);


CancelCallBack: external
  (# cb: @integer;
  enter cb
  do '{$303C,$B9,$AAAA}' -> pascalTrap;
  #);


(*****************************************
 *                                       *
 *        C L O C K   C A L L B A C K    *
 *              S U P P O R T            *
 *                                       *
 ****************************************)


AddCallBackToTimeBase: external
  (# cb: @integer;
     result: @shortInt (* OSErr *);
  enter cb
  do '{$303C,$129,$AAAA}' -> pascalTrap;
  exit result
  #);

RemoveCallBackFromTimeBase: external
  (# cb: @integer;
     result: @shortInt (* OSErr *);
  enter cb
  do '{$303C,$12A,$AAAA}' -> pascalTrap;
  exit result
  #);

GetFirstCallBack: external
  (# tb: @integer;
     result: @integer;
  enter tb
  do '{$303C,$12B,$AAAA}' -> pascalTrap;
  exit result
  #);

GetNextCallBack: external
  (# cb: @integer;
     result: @integer;
  enter cb
  do '{$303C,$12C,$AAAA}' -> pascalTrap;
  exit result
  #);

ExecuteCallBack: external
  (# cb: @integer;
  enter cb
  do '{$303C,$12D,$AAAA}' -> pascalTrap;
  #);