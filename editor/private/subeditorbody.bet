ORIGIN '../codeeditor';
-- subeditorOpenSubeditor: DoPart --
do
     (#
        theSubwindow: ^subwindow;
        fe: ^codeeditor;
        subWindow: window
          (#
             editor: @sifTextEditor (# codeViewerType::< codeeditor #);
             sed: ^codeeditor;
             attach:
               (# fe: ^codeEditor
               enter fe[]
               do
                  fe[]->Edit.attach;
                  fe[]->view.attach;
(*                  (fe[],edenv[])->slots.attach*)
               #);
             Edit: @codeEditorEditMenu;
             View: @codeEditorViewMenu;
(*             SLOTs: @codeEditorSLOTsMenu;*)
             menubarType:: 
               (#
                  open:: 
                    (# 
                    do
                       Edit.new;
                       Edit[]->append;
                       View.new;
                       View[]->append;
                       (*SLOTs.new;
                       SLOTs[]->append*)
                    #)
               #);
             open:: 
               (#
                  ff: ^astInterface.fragmentForm;
                  node: ^astInterface.ast;
                  help: ^text
               enter node[]
               do
                  (if node[] <> none then
                      ((node.frag.father).name).copy->help[];
                      help.length->help.pos;
                      '-'->help.put;
                      node.frag.name->help.putText;
                      help[]->title;
                      help[]->putLine;
                      editor.open;
                      (mps[],theGrammar[],node[],node[])->editor.newfragment
                        ->sed[];
                      (if sed[] <> none then
                          fe[]->sed.fatherEditor[];
                          sed[]->fe.subeditors.append;
                          sed[]->theSubWindow.attach;
                          
                       else
                          'no subeditor created!'->putLine
                      if);
                      editor.size->size;
                      true->editor.bindBottom->editor.bindRight
                  if);
                  
               #);
             
          #);
        ;
        
     do
        (if node[] = none then cs.node[]->node[] if);
        THIS(codeeditor)[]->fe[];
        (if node[] <> none then
            &subwindow[]->theSubwindow[]; node[]->theSubwindow.open
         else
            'open subeditor: node is none'->putLine
        if)
     #)  

