ORIGIN '../searchreplace';
INCLUDE '~beta/guienv/fields'
        '~beta/guienv/utils/radiogroup'
        '~beta/guienv/utils/auxcontrols'
        '~beta/guienv/controls'
        '~beta/guienv/figureitems';
LIB_ITEM 'editorsearchreplace';
(*
 * COPYRIGHT
 *   Copyright (C) Aarhus University
 *   All rights reserved.
 *)
-- SRsearchDialogPrivate: Descriptor --
(#
   fatherpos,fathersize,mysize: @point;
   dialogopened: @boolean;
   DialogText: textField
     (#
        eventhandler:: 
          (#
             onBeforeChange:: 
               (# txt: ^text
               do
                  (if length = 1 then
                      theText->txt[];
                      (if 1->txt.inxGet
                       // ascii.nl // ascii.cr then
                          THIS(searchDialog).private.nextButton.theEventhandler.
                            onMouseup;
                          false->allow
                      if);
                      
                  if)
               #);
             onKeyDown:: 
               (# 
               do
                  (if ch = ascii.esc then
                  (*THIS(searchDialog).private.cancelButton.theEventhandler.
                   onMouseup;*)
                      theText.contents->usertext[];
                      cancel;
                      THIS(searchDialog).hide
                   else
                      theText.contents->usertext[]; onUserTextChanged
                  if)
               #);
             
          #);
        
     #);
   theText: @DialogText
     (# open::  (#  do (235,25)->size; (15,15)->position #);  #);
   nextButton: @pushButton
     (#
        eventHandler:: 
          (# onMouseUp::  (#  do theText.contents->usertext[]; next #)
          #);
        open:: 
          (#  do (65,25)->size; (15,55)->position; 'Find next'->label;  #);
        
     #);
   browseHitsButton: @pushButton
     (#
        eventHandler:: 
          (#
             onMouseUp::  (#  do theText.contents->usertext[]; browseHits #)
          #);
        open:: 
          (# 
          do (80,25)->size; (95,55)->position; 'Browse hits'->label; 
          #);
        
     #);
   caseSensitiveCheckBox: @checkBox
     (#
        open:: 
          (# 
          do (85,25)->size; (265,10)->position; 'Match case'->label; 
          #);
        
     #);
   wholeWordCheckBox: @checkBox
     (#
        open:: 
          (# 
          do (85,25)->size; (265,30)->position; 'Match word'->label; 
          #);
        
     #);
   showAllHitsCheckBox: @checkBox
     (#
        open:: 
          (# 
          do (110,25)->size; (265,50)->position; 'Show all hits'->label; 
          #);
        
     #);
   searchAreaRadioGroup: @radioGroup
     (#
        radioType: radio (# no: @integer #);
        areaNo:
          (# no: @integer; theRadio: ^radiotype
          do
             currentRadio->theRadio[];
             (if theRadio[] <> none then theRadio.no->no if)
          exit no
          #);
        csRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (75,17)->size;
                  (30,20)->position;
                  'Selection'->label;
                  searchArea_cs->no
               #);
             
          #);
        ffRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (111,17)->size;
                  (30,41)->position;
                  'Fragment form: '->label;
                  searchArea_ff->no
               #);
             
          #);
        fgRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (57,17)->size;
                  (30,62)->position;
                  'File: '->label;
                  searchArea_fg->no
               #);
             
          #);
        domainRadio: @radioType
          (#
             open:: 
               (# h,v: @integer
               do
                  (60,16)->size;
                  'Domain'->label;
                  searchArea_domain->no;
                  position->(h,v);
                  (50,81)->position
               #);
             
          #);
        extentRadio: @radioType
          (#
             open:: 
               (# h,v: @integer
               do
                  (60,16)->size;
                  'Extent'->label;
                  searchArea_extent->no;
                  position->(h,v);
                  (115,81)->position
               #);
             
          #);
        projectRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (75,17)->size;
                  (30,99)->position;
                  'Project: '->label;
                  searchArea_project->no
               #);
             
          #);
        calculate:
          (# txt: @text
          do
             (if enableFragmentFormScope then
                 csRadio.enable;
                 ffRadio.enable;
                 'Fragment form: \''->txt;
                 ffName[]->txt.append;
                 '\''->txt.append;
                 txt[]->ffRadio.label
              else
                 csRadio.disable; ffRadio.disable
             if);
             (if enableFileScope then
                 fgRadio.enable;
                 domainRadio.enable;
                 extentRadio.enable;
                 'File: \''->txt;
                 fgName[]->txt.append;
                 '\''->txt.append;
                 txt[]->fgRadio.label
              else
                 fgRadio.disable; domainRadio.disable; extentRadio.disable
             if);
             (if enableProjectScope then
                 projectRadio.enable;
                 'Project: \''->txt;
                 projectName[]->txt.append;
                 '\''->txt.append;
                 txt[]->projectRadio.label
              else
                 projectRadio.disable
             if)
          #);
        setCurrent:
          (# theRadio: ^radiotype; keepArea: @boolean
          do
             currentRadio->theRadio[];
             (if theRadio[] <> none then
                 (if theRadio.no
                  // searchArea_cs // searchArea_ff then
                     enableFragmentformScope->keepArea
                  // searchArea_fg // searchArea_domain // searchArea_extent
                  then
                     enableFileScope->keepArea
                  // searchArea_project then
                     enableProjectScope->keepArea
                 if)
             if);
             (if not keepArea then
                 (if enableFragmentformScope then
                     (if currentRadio <> ffRadio[] then
                         ffRadio[]->currentRadio
                     if)
                  else
                     (if enableFileScope then
                         (if currentRadio <> fgRadio[] then
                             fgRadio[]->currentRadio
                         if)
                      else
                         (if enableProjectScope then
                             (if currentRadio <> projectRadio[] then
                                 projectRadio[]->currentRadio
                             if)
                         if)
                     if)
                 if)
             if)
          #);
        recalculate: (#  do calculate; setCurrent #);
        open:: 
          (# 
          do
             'Search in current: '->title;
             csRadio.open;
             ffRadio.open;
             fgRadio.open;
             domainRadio.open;
             extentRadio.open;
             projectRadio.open;
             recalculate;
             (15,90)->position;
             selectionIconbutton.open;
             fragmentFromIconbutton.open;
             FileIconbutton.open;
             ProjectIconbutton.open;
             (380,125)->size;
             
          #);
        ;
        selectionIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (12,20)->position;
                  INNER ;
                  'tv-ffsel'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size;
                  
               #)
          #);
        fragmentFromIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (12,40)->position;
                  INNER ;
                  'tv-ff'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size;
                  
               #)
          #);
        FileIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (10,62)->position;
                  INNER ;
                  'tv-fg'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size
               #)
          #);
        ProjectIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (10,97)->position;
                  INNER ;
                  'tv-prjclosed'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size
               #)
          #)
     #);
   
#)  

-- SRsearchDialogReset: DoPart --
do (*messText[]->private.theMessage.label;*)
   messText[]->title;
   private.caseSensitiveCheckBox.enable;
   private.wholeWordCheckBox.enable;
   false->onlyApplications;
     

-- SRsearchDialogPopup: DoPart --
do
   (if not private.dialogopened then
       open;
       (if father[] <> none then
           father.size->private.fathersize;
           size->private.mysize;
           father.position->private.fatherpos;
           (private.fatherpos.v+(private.fathersize.v-private.mysize.v) div 2,
            private.fatherpos.h+(private.fathersize.h-private.mysize.h) div 2)
             ->position
        else
           mouse.globalPosition->position
       if)
    else
   (* private.searchAreaOptionButton.areaMenu.recalculate;*)
       private.searchAreaRadioGroup.recalculate
   if);
   msgText[]->title;
   (*msgText[]->private.theMessage.label;*)
   (if defaultText[] = none then
       ''->defaultText[];
       private.theText.all->private.theText.selection;
       private.theText.delete;
       defaultText[]->private.theText.insert;
       private.theText.all->private.theText.selection
    else
       (if defaultText.length <> 0 then
           private.theText.all->private.theText.selection;
           private.theText.delete;
           defaultText[]->private.theText.insert;
           private.theText.all->private.theText.selection
        else
       (* keep existing text *)
           
       if)
   if);
   (if onlyApplications then
       private.caseSensitiveCheckBox.disable; private.wholeWordCheckBox.disable
    else
       private.caseSensitiveCheckBox.enable; private.wholeWordCheckBox.enable
   if);
   INNER ;
   show;
     

-- SRsearchDialogOpen: DoPart --
do
   (410,225)->size;
   (if not private.dialogopened then
       true->private.dialogopened;
       hide;
       (*THIS(searchDialog).contents->private.theMessage.open;*)
       THIS(searchDialog).contents->private.theText.open;
       THIS(searchDialog).contents->private.nextButton.open;
       (*THIS(searchDialog).contents->private.previousButton.open;^*)
       THIS(searchDialog).contents->private.browseHitsButton.open;
       (*THIS(searchDialog).contents->private.cancelButton.open;*)
       THIS(searchDialog).contents->private.caseSensitiveCheckBox.open;
       THIS(searchDialog).contents->private.wholeWordCheckBox.open;
       THIS(searchDialog).contents->private.showAllHitsCheckBox.open;
       (*THIS(searchDialog).contents->private.searchAreaOptionButton.open;*)
       THIS(searchDialog).contents->private.searchAreaRadioGroup.open;
       (if onlyApplications then
           private.caseSensitiveCheckBox.disable;
           private.wholeWordCheckBox.disable
        else
           private.caseSensitiveCheckBox.enable;
           private.wholeWordCheckBox.enable
       if);
       (* (360,190+95)->private.mysize->size;^*)
       private.theText[]->target;
       INNER
   if);
     

-- SRsearchDialogClose: DoPart --
do onClose  

-- SRreplaceDialogPrivate: Descriptor --
(#
   fatherpos,fathersize,mysize: @point;
   dialogopened: @boolean;
   DialogText: textField
     (#
        eventhandler::< 
          (#
             onBeforeChange::< 
               (# txt: ^text
               do
                  (if length = 1 then
                      theText->txt[];
                      (if 1->txt.inxGet
                       // ascii.nl // ascii.cr then
                          THIS(replaceDialog).private.nextButton.theEventhandler
                          .onMouseup;
                          false->allow;
                          
                       // ascii.ht then
                          false->allow
                      if);
                      
                  if)
               #)
          #)
     #);
   theSearchTxt: @DialogText
     (#
        eventhandler:: 
          (#
             onKeyDown:: 
               (# 
               do
                  (if ch = ascii.esc then
                      theSearchTxt.contents->theUserSearchText[];
                      cancel;
                      THIS(replaceDialog).hide
                   else
                      theSearchTxt.contents->theUserSearchText[];
                      onUserTextChanged
                  if);
                  (if ch = ascii.ht then theReplaceTxt[]->target;  if)
               #);
             
          #);
        open::  (#  do (235,25)->size; (15,15)->position #);
        
     #);
   theReplaceTxt: @DialogText
     (#
        eventhandler:: 
          (#
             onKeyDown:: 
               (# 
               do
                  (if ch = ascii.esc then
                      theSearchTxt.contents->theUserSearchText[];
                      cancel;
                      THIS(replaceDialog).hide
                  if);
                  (if ch = ascii.ht then theSearchTxt[]->target;  if)
               #)
          #);
        open::  (#  do (235,25)->size; (15,65)->position #);
        
     #);
   replaceButton: @pushButton
     (#
        eventHandler:: 
          (#
             onMouseUp:: 
               (# 
               do
                  theSearchTxt.contents->theUserSearchText[];
                  theReplaceTxt.contents->theUserReplaceText[];
                  replace
               #)
          #);
        open:: 
          (#  do (60,25)->size; (15,105)->position; 'Replace'->label;  #);
        
     #);
   nextButton: @pushButton
     (#
        eventHandler:: 
          (#
             onMouseUp:: 
               (#  do theSearchTxt.contents->theUserSearchText[]; next #)
          #);
        open:: 
          (#  do (60,25)->size; (95,105)->position; 'Find next'->label;  #);
        
     #);
   replaceAllButton: @pushButton
     (#
        eventHandler:: 
          (#
             onMouseUp:: 
               (# 
               do
                  theSearchTxt.contents->theUserSearchText[];
                  theReplaceTxt.contents->theUserReplaceText[];
                  replaceAll
               #)
          #);
        open:: 
          (# 
          do (80,25)->size; (175,105)->position; 'Replace all'->label; 
          #);
        
     #);
   caseSensitiveCheckBox: @checkBox
     (#
        open:: 
          (# 
          do (85,25)->size; (265,10)->position; 'Match case'->label; 
          #);
        
     #);
   wholeWordCheckBox: @checkBox
     (#
        open:: 
          (# 
          do (85,25)->size; (265,30)->position; 'Match word'->label; 
          #);
        
     #);
   replaceDeclarationCheckbox: @checkBox
     (#
        open:: 
          (# 
          do (135,25)->size; (265,50)->position; 'Replace declaration'->label; 
          #);
        
     #);
   searchAreaRadioGroup: @radioGroup
     (#
        radioType: radio (# no: @integer #);
        areaNo:
          (# no: @integer; theRadio: ^radiotype
          do
             currentRadio->theRadio[];
             (if theRadio[] <> none then theRadio.no->no if)
          exit no
          #);
        csRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (75,17)->size;
                  (30,20)->position;
                  'Selection'->label;
                  searchArea_cs->no
               #);
             
          #);
        ffRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (111,17)->size;
                  (30,41)->position;
                  'Fragment form: '->label;
                  searchArea_ff->no
               #);
             
          #);
        fgRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (57,17)->size;
                  (30,62)->position;
                  'File: '->label;
                  searchArea_fg->no
               #);
             
          #);
        domainRadio: @radioType
          (#
             open:: 
               (# h,v: @integer
               do
                  (60,16)->size;
                  'Domain'->label;
                  searchArea_domain->no;
                  position->(h,v);
                  (50,81)->position
               #);
             
          #);
        extentRadio: @radioType
          (#
             open:: 
               (# h,v: @integer
               do
                  (60,16)->size;
                  'Extent'->label;
                  searchArea_extent->no;
                  position->(h,v);
                  (115,81)->position
               #);
             
          #);
        projectRadio: @radioType
          (#
             open:: 
               (# 
               do
                  (75,17)->size;
                  (30,99)->position;
                  'Project: '->label;
                  searchArea_project->no
               #);
             
          #);
        calculate:
          (# txt: @text
          do
             (if enableFragmentFormScope then
                 csRadio.enable;
                 ffRadio.enable;
                 'Fragment form: \''->txt;
                 ffName[]->txt.append;
                 '\''->txt.append;
                 txt[]->ffRadio.label
              else
                 csRadio.disable; ffRadio.disable
             if);
             (if enableFileScope then
                 fgRadio.enable;
                 domainRadio.enable;
                 extentRadio.enable;
                 'File: \''->txt;
                 fgName[]->txt.append;
                 '\''->txt.append;
                 txt[]->fgRadio.label
              else
                 fgRadio.disable; domainRadio.disable; extentRadio.disable
             if);
             (if enableProjectScope then
                 projectRadio.enable;
                 'Project: \''->txt;
                 projectName[]->txt.append;
                 '\''->txt.append;
                 txt[]->projectRadio.label
              else
                 projectRadio.disable
             if)
          #);
        setCurrent:
          (# theRadio: ^radiotype; keepArea: @boolean
          do
             currentRadio->theRadio[];
             (if theRadio[] <> none then
                 (if theRadio.no
                  // searchArea_cs // searchArea_ff then
                     enableFragmentformScope->keepArea
                  // searchArea_fg // searchArea_domain // searchArea_extent
                  then
                     enableFileScope->keepArea
                  // searchArea_project then
                     enableProjectScope->keepArea
                 if)
             if);
             (if not keepArea then
                 (if enableFragmentformScope then
                     (if currentRadio <> ffRadio[] then
                         ffRadio[]->currentRadio
                     if)
                  else
                     (if enableFileScope then
                         (if currentRadio <> fgRadio[] then
                             fgRadio[]->currentRadio
                         if)
                      else
                         (if enableProjectScope then
                             (if currentRadio <> projectRadio[] then
                                 projectRadio[]->currentRadio
                             if)
                         if)
                     if)
                 if)
             if)
          #);
        recalculate: (#  do calculate; setCurrent #);
        open:: 
          (# 
          do
             'Search in current: '->title;
             csRadio.open;
             ffRadio.open;
             fgRadio.open;
             domainRadio.open;
             extentRadio.open;
             projectRadio.open;
             recalculate;
             (15,140)->position;
             selectionIconbutton.open;
             fragmentFromIconbutton.open;
             FileIconbutton.open;
             ProjectIconbutton.open;
             (380,125)->size;
             
          #);
        ;
        selectionIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (12,20)->position;
                  INNER ;
                  'tv-ffsel'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size;
                  
               #)
          #);
        fragmentFromIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (12,40)->position;
                  INNER ;
                  'tv-ff'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size;
                  
               #)
          #);
        FileIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (10,62)->position;
                  INNER ;
                  'tv-fg'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size
               #)
          #);
        ProjectIconbutton: @windowItem
          (#
             thePixmap: @pixmap;
             eventHandler:: 
               (#
                  onRefresh:: 
                    (# 
                    do
                       graphics
                         (# 
                         do
                            (thePixmap[],(0,0),(0,0),thePixmap.width,
                             thePixmap.height)->drawRaster
                         #)
                    #)
               #);
             open::< 
               (# 
               do
                  (15,15)->size;
                  (10,97)->position;
                  INNER ;
                  'tv-prjclosed'->thePixmap.read;
                  (thePixmap.width,thePixmap.height)->size
               #)
          #)
     #);
   ;
   theReplaceMessage: @caption
     (# open::<  (#  do (29,13)->size; (15,45)->position; INNER #) #)
#)  

-- SRsearchDialogOnClose: DoPart --
do false->private.dialogopened; INNER  

-- SRreplaceDialogOnClose: DoPart --
do false->private.dialogopened; INNER  

-- SRreplaceDialogReset: DoPart --
do
   messText[]->title;
   private.caseSensitiveCheckBox.enable;
   private.wholeWordCheckBox.enable;
   private.replaceDeclarationCheckBox.disable;
   false->onlyApplications;
     

-- SRreplaceDialogPopup: DoPart --
do
   (if not private.dialogopened then
       open;
       (if father[] <> none then
           father.size->private.fathersize;
           size->private.mysize;
           father.position->private.fatherpos;
           (private.fatherpos.v+(private.fathersize.v-private.mysize.v) div 2,
            private.fatherpos.h+(private.fathersize.h-private.mysize.h) div 2)
             ->position
        else
           mouse.globalPosition->position
       if)
    else
       private.searchAreaRadioGroup.recalculate
   if);
   msgText[]->title;
   msgText2[]->private.theReplaceMessage.label;
   (if defaultText[] = none then
       ''->defaultText[];
       private.theSearchTxt.all->private.theSearchTxt.selection;
       private.theSearchTxt.delete;
       defaultText[]->private.theSearchTxt.insert;
       private.theSearchTxt.all->private.theSearchTxt.selection
    else
       (if defaultText.length <> 0 then
           private.theSearchTxt.all->private.theSearchTxt.selection;
           private.theSearchTxt.delete;
           defaultText[]->private.theSearchTxt.insert;
           private.theSearchTxt.all->private.theSearchTxt.selection
        else
       (* keep existing text *)
           
       if)
   if);
   (if false then
       private.theReplaceTxt.all->private.theReplaceTxt.selection;
       private.theReplaceTxt.clear
   if);
   (if onlyApplications then
       private.caseSensitiveCheckBox.disable;
       private.wholeWordCheckBox.disable;
       private.replaceDeclarationCheckBox.enable
    else
       private.caseSensitiveCheckBox.enable;
       private.wholeWordCheckBox.enable;
       private.replaceDeclarationCheckBox.disable
   if);
   INNER ;
   show;
     

-- SRreplaceDialogOpen: DoPart --
do
   (410,275)->size;
   (if not private.dialogopened then
       true->private.dialogopened;
       hide;
       THIS(replaceDialog).contents->private.theSearchTxt.open;
       THIS(replaceDialog).contents->private.theReplaceMessage.open;
       THIS(replaceDialog).contents->private.theReplaceTxt.open;
       THIS(replaceDialog).contents->private.replaceButton.open;
       THIS(replaceDialog).contents->private.nextButton.open;
       THIS(replaceDialog).contents->private.replaceAllButton.open;
       THIS(replaceDialog).contents->private.caseSensitiveCheckBox.open;
       THIS(replaceDialog).contents->private.wholeWordCheckBox.open;
       THIS(replaceDialog).contents->private.replaceDeclarationCheckBox.open;
       THIS(replaceDialog).contents->private.searchAreaRadioGroup.open;
       false->private.replaceDeclarationCheckBox.state;
       (if onlyApplications then
           private.caseSensitiveCheckBox.disable;
           private.wholeWordCheckBox.disable;
           private.replaceDeclarationCheckBox.enable
        else
           private.caseSensitiveCheckBox.enable;
           private.wholeWordCheckBox.enable;
           private.replaceDeclarationCheckBox.disable
       if);
       private.theSearchTxt[]->target;
       INNER ;
       
   if);
     

-- SRreplaceDialogClose: DoPart --
do onClose  

-- SRsearchDialogMatchCase: DoPart --
do private.caseSensitiveCheckBox.state->value  

-- SRsearchDialogMatchWord: DoPart --
do private.wholeWordCheckBox.state->value  

-- SRsearchDialogShowAllHits: DoPart --
do private.showAllHitsCheckBox.state->value  

-- SRsearchDialogSearchArea: DoPart --
do (*private.searchAreaOptionButton.areaNo->value;*)
   private.searchAreaRadioGroup.areaNo->value  

-- SRreplaceDialogMatchCase: DoPart --
do private.caseSensitiveCheckBox.state->value  

-- SRreplaceDialogMatchWord: DoPart --
do private.wholeWordCheckBox.state->value  

-- SRreplaceDialogReplaceDeclaration: DoPart --
do private.replaceDeclarationCheckBox.state->value  

-- SRreplaceDialogSearchArea: DoPart --
do private.searchAreaRadioGroup.areaNo->value  

