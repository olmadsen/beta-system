ORIGIN '../codeeditor';
INCLUDE '~beta/pretty/v4.9.1/pplib';
(*
 COPYRIGHT
 Copyright Mjolner Informatics, 1986-94
 All rights reserved.
 *)
-- notificationNewFragment: Descriptor --
(#  do ((* root *) frag.root[],- 1)->astViEw.pp.present;  #)  

-- notificationAstReplaced: Descriptor --
(# exp: ^mps.expanded
do
   (if switch[7] then 'astReplacedEvent'->screen.putLine if);
   INNER astReplacedEvent;
   (oldAst[],newAst[])->astView.pp.update;
   (if not isASubEditor then
       subeditors.scan
       (#
       do (if (newAst[],current.root[])->nodeExists then 
              (* newAST is in the subtree of the subeditor *)
              ' newAST is in the subtree of the subeditor'->putLine;
              (oldAst[],newAst[])->current.astView.pp.update
           else 
              ' newAST is NOT in the subtree of the subeditor'->putLine;
              
          if);
          'then check if the subtree in the subeditor is in newAST'->putLine;
          (if newast.kind=mps.kinds.interior then
              newAst[]->exp[];
              (if (current.root[],exp[])->nodeExists then  
                  (* the subtree in the subeditor is in newAST *)
                  ' the subtree in the subeditor is in newAST'->putLine;
                  current.theSifTexteditor.close
               else
                  ' the subtree in the subeditor is NOT in newAST'->putLine;
              if);
           else
              'newast is not expanded!'->putLine
          if);
          'checking done'->putLine
       #)
   if)
#)  

-- notificationAstReplacedSequence: Descriptor --
(# 
do
   (if switch[7] then 'astReplacedSequencdEvent'->screen.putLine if);
   INNER astReplacedSequenceEvent;
   (rootOfSequence[],rootOfSequence[])->astView.pp.update;
   
#)  

-- notificationListElementInserted: Descriptor --
(# 
do
   (if switch[7] then 'listElementInsertedEvent'->screen.putLine if);
   INNER listElementInsertedEvent;
   (fatherNode[],position,0,1)->astView.pp.updateList;
   (if switch[7] then '(# doReprettyPrint'->putLine;  if);
   ((* root *) frag.root[],- 1)->astView.pp.present;
   
#)  

-- notificationListElementsDeleted: Descriptor --
(# 
do
   (if switch[7] then 'listElementDeletedEvent'->screen.putLine if);
   INNER listElementsDeletedEvent;
   (listNode[],position,length,0)->astView.pp.updateList;
   (if switch[7] then '(# doReprettyPrint'->putLine;  if);
   ((* root *) frag.root[],- 1)->astView.pp.present;
   
#)  

-- notificationListElementsReplaced: Descriptor --
(# 
do
   (if switch[7] then 'listElementsReplacedEvent'->screen.putLIne if);
   INNER listElementsReplacedEvent;
   (listNode[],position,length,newLength)->astView.pp.updateList;
   (if switch[7] then '(# doReprettyPrint'->putLine;  if);
   ((* root *) frag.root[],- 1)->astView.pp.present;
   
#)  

-- notificationFocusChanged: Descriptor --
(#  do updateExpandMenu; updateEditMenu; INNER focusChangedEvent #)  

