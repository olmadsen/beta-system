ORIGIN '~beta/objectbrowser/v2.0/UI/objectview';
INCLUDE '../remotedumper';

--- guienvlib:attributes ---
showStack:
  (# comp: ^remoteBetaObject;
  enter comp[]
  do INNER
  #);

--- moveableObjectViewLib:attributes ---
addObjectViewItems:
  (# show:< showStack;
     si: @movMenu.showStackItem 
       (# getbo:: (# do THIS(moveableObjectView).theBo[]->bo[]#);
          show:: (# do comp[]->THIS(addObjectViewItems).show #);
       #);
  do si.open; si[]->movMenu.append;
  #);


--- menuLib:attributes ---
showStackItem: menuItem
  (# getbo:< (# bo: ^remoteBetaObject; do INNER exit bo[] #);
     show:< showStack;
     open::
       (# 
       do 'Show component stack'->name;
       #);
     eventHandler::
       (# onSelect::
            (# 
            do (if enabled then getbo->show if)
            #);
          onStatus::
            (# 
            do enabled->value;
            #);
          enabled: 
            (# bo: ^remoteBetaObject; value: @Boolean;
            do getbo->bo[];
               (if bo[]<>NONE then bo.iscomp->value if);
            exit value
            #);
       #);
  #);
