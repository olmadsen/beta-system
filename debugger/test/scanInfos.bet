ORIGIN '../processInterface';

--- processInterfaceLib: attributes ---

writeAllInfo: scanObjectFileInfos
  (# fi: ^fragmentInfo;
     dp: ^dopartInfo;
  do 
     current[]->processComm.loadProtoTable;
     
     current.groupName[] -> screen.putText;
     ': protoCount = ' -> screen.putText;
     current.protoCount -> screen.putInt;
     screen.newline;
     
     (current.loadLevel,screen[])->printLoadLevel; newline; newline;
     
     current[]->dbManager.readDB;
     
     (for i:current.fragments.range repeat
          current.fragments[i][] -> fi[];
          'fragment: ' -> putText;
          fi.fragmentName[] -> putLine;
          '(infoFirst,infoLast) = (' -> putText;
          fi.infoFirst -> putInt; ',' -> put;
          fi.infoLast -> putInt; ')' -> putLine; newline;
          (for j:fi.doparts.range repeat
               fi.doparts[j][] -> dp[];
               'dopart ast index = (astRef,fragRef) = (' -> putText;
               dp.astRef -> putInt; ',' -> put; 
               dp.fragRef -> putInt; ')' -> putLine;
               'Imperatives = (impAdr,astRef): ' -> putLine;
               (for k:dp.impAddresses.range repeat
                    '(' -> put; dp.impAddresses[k] -> putInt;
                    ',' -> put; dp.impAstRefs[k] -> putInt;
                    ')' -> putLine;
               for);
          for);
          newline; newline;
     for);
  #);

