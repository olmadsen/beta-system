Noget om, hvordan man indf|rer en ny object/attribute viewer.
Oprindeligt skrevet til at forklare, hviordan man indf|rere viewer til
gererelle repetitions.

----------------------------------------------------------------------
Vi begynder vores rejse i det interface der lyder navnet "attribute":
 
  ~beta/objectbrowser/v2.0/attribute.bet

"attribute" implementerer basal visning af objekter ovenpaa det tidligere
omtalte "objectdumper" interface. Den svarer vel egt. meget til astviewer
(altsaa pretty-printeren), men altsaa paa objekter. Mere praecist
understoetter "attribute" pretty-printning af instanser af det abstrakte 
pattern betaObject fra objectdumper.bet.

Nuvel, "attribute" deler objekt-attributter op som foelger:

(*
 *                       attribute
 *                           |
 *      _____________________|____________________
 *     |                                          |
 * complexAttribute                      repetitionAttribute
 *     |                                          |
 *     |                                          |
 * rootAttribute                                  |
 *                                                |
 *                           _____________________|________
 *                          |                              |
 *                  simpleRepetitionAttribute   complexRepetitionAttribute
 * 
 *)

hvor "complexRepetitionAttribute" svarer til generelle repetitions, som
altsaa ikke er implementeret. Hvor svaert det vil vaere, ved jeg ikke
med sikkerhed, men det er (vist nok) en anelse langhaaret. Statiske
part objects er repraesenteret ved "complexAttribute", og simple attributter,
dvs. Char, Integer, ... og dynamiske referencer er repraesenteret ved
"attribute".

En instans af "rootAttribute" holder styr paa visningen af et bestemt
objekt. Til saadan en sag kan man saa sige "scanVisibleAttributes", hvorved
der scannes over de oejeblikkeligt viste attributter i et objekt. For hver
attribut i objektet kaldes en passende qualificeret virtual i en
"attributeVisitor", som gives som parameter til scanVisibleAttributes.
En god attributeVisitor at stikke til "scanVisibleAttributes" er den
saakaldte "dumpVisitor" erklaeret i "dumpvisitor.bet". (Visitor er
faktisk et design pattern. Se "Design Patterns -- Elements of Reusable
Object-Oriented Software", side 331.)

Man kan saa vise objektets tilstand i fx et guienv vindue (i oejeblikket et 
"objectView" fra ~beta/objectbrowser/v2.0/UI/objectview.bet), eller
blot skrive det ud paa console, eller hvad man nu maatte oenske sig.

Foer "attribute" kan klare generelle repetitions skal "objectdumper"
kunne. Dette kraever en udvidelse af implementationen af
"objectdumper.scanPattern", samt ekstra interface metoder i det
abstrakte "betaObject" pattern. Ingen af disse ting er naeppe svaere.
I oejeblikket vil objectdumper.scanPattern skrive:

    FATAL:getRepetitionDeclInfo: Reptype was StaticItem

eller

    FATAL:getRepetitionDeclInfo: Reptype was StaticComponent

(og falde doed om) i fald den stoeder ind i een af disse nymodens repetitions.
Man vil saa vide hvor den er gal... :-)

Rulletekster: Denne historie havde foelgende hovedpersoner:

  Fragmentgruppe: ~beta/objectbrowser/v2.0/objectdumper.bet
  Patterns: objectdumper, betaObject
  Afhaenger af: Hele mps gymnastikken.
  Specialiseres i: ~beta/objectbrowser/v2.0/localdumper.bet
                   ~beta/objectbrowser/v2.0/psbrowser/psobjdumper.bet
                   ~beta/debugger/v2.0/remotedumper.bet

  Fragmentgruppe: ~beta/objectbrowser/v2.0/attribute.bet
  Patterns: attribute, attributeVisitor.
  Afhaenger af: objectdumper.

  Fragmentgruppe: ~beta/objectbrowser/v2.0/dumpvisitor.bet
  Pattern: dumpvisitor
  Afhaenger af: attribute

  Fragmentgruppe: ~beta/objectbrowser/v2.0/UI/objectview.bet
  Patterns: objectview
  Afhaenger af: objectdumper, attribute, dumpvisitor, guienv
