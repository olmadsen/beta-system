ORIGIN '../environment';
INCLUDE '~beta/sysutils/v1.4.2/cstring';
(*
 * COPYRIGHT
 *   Copyright Mjolner Informatics, 1995-96
 *   All rights reserved.
 *)

--- lib:attributes ---
foreachEnv: external
  (# name,value: @Integer; (* char* *)
  enter (name,value)
  do CexternalEntry; INNER;
  #);

extScanEnv: external (* Defined in external/processComm.c *)
  (# foreach: ##foreachEnv;
  enter foreach##
  #);

--- environDBinit:descriptor ---
(# forEach: forEachEnv
     (# cstr: @CString; envname,envvalue: ^Text;
     do name->cstr; cstr.get->envname[];
        value->cstr; cstr.get->envvalue[];
        (if not ('BETART'->envname.equal) then
            (envname[],envvalue[])->add;
        if);
     #);
do forEach##->extScanEnv; INNER init;
#)
