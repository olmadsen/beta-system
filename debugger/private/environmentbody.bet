ORIGIN '../environment';
INCLUDE '~beta/sysutils/v1.4/cstring';

--- lib:attributes ---
foreachEnv: external
  (# name,value: @Integer; (* char* *)
  enter (name,value)
  do CexternalEntry; INNER;
  #);

extScanEnv: external (* Defined in external/processComm.c *)
  (# foreach: ##foreachEnv;
  enter foreach##
  #);

--- environDBinit:descriptor ---
(# forEach: forEachEnv
     (# cstr: @CString; envname,envvalue: ^Text;
     do name->cstr; cstr.get->envname[];
        value->cstr; cstr.get->envvalue[];
        (envname[],envvalue[])->add;
     #);
do forEach##->extScanEnv; INNER init;
#)
