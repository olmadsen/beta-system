ORIGIN 'objinterfacebody';

-- PrototypeLabId: descriptor --
(* OLM: 5/7/96: attempt to handle new compact endian representation *)
(# sc: @scanRefs;
   namePos,m,skip: @integer;
do sc;
   sc.thisAddr+2 -> namePos; (* first byte after GC tables *);
   
   (if ((%getByteAt(namePos+0) -> m) %band 0x80) <> 0 then 1 -> skip if);
   (* Above line tos_converted from: (if (((namePos->tos'%adrGetByte[0]') -> m) %band 0x80) <> 0 then 1 -> skip if); *)
   (if  (m %band 0x40) <> 0 then skip + 1 -> skip if);
   
   namePos+(((Size+15) %srl 4) %sll 1) -> namePos;
   (* Above line tos_converted from: namePos+(Size+15->tos'%shiftright[4]'->tos'%shiftleft[1]') -> namePos; *)
   
   (for skip repeat (* Skip 'short' and 'real' information *)
        loop: 
          (# do (if (%getShortAt(namePos+2*0)) = 0 then 
                    (* Above line tos_converted from: (# do (if namePos->tos'%adrGetShort[0]' // 0 then *)
                    namePos + 2 -> namePos;
                 else 
                    namePos + 2 -> namePos; restart loop 
                if) 
          #)
   for);
   namePos -> beta.getCString -> id[];
   (*'\nPrototypeLabId: skip='-> screen.puttext; skip->screen.putint; ' ' ->screen.put; id[]->screen.putline;*)
#)
