ORIGIN '~beta/basiclib/v1.5/betaenv';
BODY 'private/envstringbody';
(*
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1992-94
 *       All rights reserved.
 *)
(* idx=1 *)
--- LIB: attributes ---
expandEnvVar: 
  (* Expands text containing substrings of the form $(VAR) to the value
   * of the corresponding unix-environment variable.
   * 
   * E.g., if the unix-command printenv says
   * HOME=/users/cn
   * SHELL=/bin/csh
   * USER=cn
   * 
   * then                  is expanded to
   * 
   *  $(SHELL)               /bin/csh
   *  $(HOME)!$(USER)        /users/cn!cn
   * 
   * (if an environment variable is specified, which is not set, then the
   * virtual pattern defaultvalue is called. This allows the programmer to
   * specify default-values for not-set environment variables.
   *)
  (# t: ^text;
     
     defaultValue:< 
       (# envvar,envvarvalue: ^text
       enter envvar[]
       do INNER
       exit envvarvalue[]
       #);
     expand: @<<SLOT expandEnvVarBody: descriptor>>
  enter t[]
  do expand
  exit t[]
  #);
