ORIGIN '~beta/basiclib/betaenv'

--lib:attributes--

HeapInfoIOA:           (# exit 0 #);
HeapInfoIOALimit:      (# exit 1 #);
HeapInfoIOATop:        (# exit 2 #);
HeapInfoIOASize:       (# exit 3 #);
HeapInfoIOAActive:     (# exit 4 #);
HeapInfoIOAspace:      (# exit 5 #);
HeapInfoCBFA:          (# exit 10 #);
HeapInfoCBFALimit:     (# exit 11 #);
HeapInfoCBFATop:       (# exit 12 #);
HeapInfoCBFABlockSize: (# exit 13 #);
HeapInfoCBFAsize:      (# exit 15 #);
HeapInfoAOABaseBlock:  (# exit 30 #);
HeapInfoAOATopBlock:   (# exit 31 #);
HeapInfoAOABlockSize:  (# exit 33 #);
HeapInfoAOATotalSize:  (# exit 35 #);
HeapInfoAOATotalFree:  (# exit 36 #);
(* get information from runtimesystem about heap usage.
 * use constants from above.
 *)

getHeapInfo: external
  (# infoId: @integer;
     heapAmount: @integer
  enter infoId
  do callC
  exit heapAmount
  #);

(* print heap information on stdout. 
 * Text marked with prompt.
 *)
PrintHeapUsage: external
  (# prompt:[1]@char;
  enter prompt
  do CallC;
  #);
