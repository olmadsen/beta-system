ORIGIN '~beta/basiclib/v1.5/betaenv';
INCLUDE '~beta/persistentstore/v1.5/persistentstore';
INCLUDE 'textHash';

--- program : descriptor ---
(# PS: @persistentstore;
   H: ^textHashTable;
   t: @Text;
   count: @Integer;
do
   'largeStore' -> PS.create (# exists::< (# do true -> continue #)#);
   'created' -> putLine;
   
   'Number of elements in table: ' -> putText;
   getInt -> count;
   
   'Creating...' -> screen.putText;
   &textHashTable[] -> H[]; H.init;
   (for i: count repeat
        t.clear;
        i -> t.putInt;
        t.copy -> H.insert;
   for);
   screen.newline; screen.newline;
   
   'Checkpointing and closing...' -> screen.putText;
   
   (H[],'TextTable') -> PS.put;
   PS.close;
   screen.newline; screen.newline;
#)
