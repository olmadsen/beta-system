ORIGIN '~beta/distribution/shell';
INCLUDE '~beta/persistentstore/serverinterface'
        '~beta/persistentstore/notificationmanager';
(* File NPSManager.bet
 * ===================
 * This file contains an example implemenation of the PersistentStoreManager.
 * It provides not only a lockmanager, but also a notification-manager serving
 * notfication control.
 *  
 * INCLUDE 'serverinterface' -> the interface to the server
 * INCLUDE 'notificationmanager' -> to provide a notificationmanager
 *)
-- program: Descriptor --
shellEnv
  (#
     shellType:: PersistentStoreManager
       (# thenotificationmanager: ^notificationmanager; 
       do
          registernotificationmanager:
            (# 
            do
               &notificationmanager[]->thenotificationmanager[];
               thenotificationmanager.init;
               (thenotificationmanager[],'Notificationmanager')
                 ->myEnsemble.ns.put
                   (# overWrite::  (#  do true->value #) #)
            #)
       #)
  #)  

