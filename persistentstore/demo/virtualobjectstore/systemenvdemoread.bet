ORIGIN '~beta/basiclib/systemenv';
INCLUDE '~beta/persistentstore/virtualobjectstore';
INCLUDE 'systemenvdemolib';

--PROGRAM: descriptor--
systemenv
(# PS: @persistentstore
     (# rebindSpecialReference::
          (# toSpecialObject::
               (# 
               do
                  (if objectTag = systemEnvTag then
                      this(systemEnv)[] -> target[];
                  if)
               #)
          #)
     #);
   myr: ^myRecord;
do PS.init;
   'sysenvStore' -> PS.openread;
   'opened' -> putLine;
   
   (* (this(systemEnv)[], systemEnvTag) -> PS.registerSpecialInstance; *)
   
   ('myr', myRecord##)->PS.get->myr[];
   myr->screen.putLine;
   
   PS.close;   
#)
