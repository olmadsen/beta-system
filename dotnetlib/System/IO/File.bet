ORIGIN '_File';
ON 19 (* Disable warnings about runtime qualification tests *);
INCLUDE '~beta/dotnetlib/System/IO/_StreamReader';
INCLUDE '~beta/dotnetlib/System/_String';
INCLUDE '~beta/dotnetlib/System/IO/_StreamWriter';
INCLUDE '~beta/dotnetlib/System/IO/_FileStream';
INCLUDE '~beta/dotnetlib/System/IO/_FileMode';
INCLUDE '~beta/dotnetlib/System/IO/_FileAccess';
INCLUDE '~beta/dotnetlib/System/IO/_FileShare';
INCLUDE '~beta/dotnetlib/System/_DateTime';
INCLUDE '~beta/dotnetlib/System/IO/_FileAttributes';
--LIB: attributes--

(* .NET File class. *)
DotnetFile: _File
  (#
     (* Public/family CLS compliant methods *)

     OpenText: static_proc
       (# result: ^_StreamReader;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     CreateText: static_proc
       (# result: ^_StreamWriter;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     AppendText: static_proc
       (# result: ^_StreamWriter;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     Copy_String_String: static_proc (* Copy *)
       (# 
          arg1: ^_String;
          arg2: ^_String;
       enter (arg1[], arg2[])
       do 'Copy' -> procname;
       #);
     Copy_String_String_boolean: static_proc (* Copy *)
       (# 
          arg1: ^_String;
          arg2: ^_String;
          arg3: @boolean;
       enter (arg1[], arg2[], arg3)
       do 'Copy' -> procname;
       #);
     Create_String: static_proc (* Create *)
       (# result: ^_FileStream;
          arg1: ^_String;
       enter (arg1[])
       do 'Create' -> procname;
       exit result[]
       #);
     Create_String_int32: static_proc (* Create *)
       (# result: ^_FileStream;
          arg1: ^_String;
          arg2: @int32;
       enter (arg1[], arg2)
       do 'Create' -> procname;
       exit result[]
       #);
     Delete: static_proc
       (# 
          arg1: ^_String;
       enter (arg1[])
       #);
     Exists: static_proc
       (# result: @boolean;
          arg1: ^_String;
       enter (arg1[])
       exit result
       #);
     Open_String_FileMode: static_proc (* Open *)
       (# result: ^_FileStream;
          arg1: ^_String;
          arg2: ^_FileMode;
       enter (arg1[], arg2[])
       do 'Open' -> procname;
       exit result[]
       #);
     Open_String_FileMode_FileAccess: static_proc (* Open *)
       (# result: ^_FileStream;
          arg1: ^_String;
          arg2: ^_FileMode;
          arg3: ^_FileAccess;
       enter (arg1[], arg2[], arg3[])
       do 'Open' -> procname;
       exit result[]
       #);
     Open_String_FileMode_FileAccess_FileShare: static_proc (* Open *)
       (# result: ^_FileStream;
          arg1: ^_String;
          arg2: ^_FileMode;
          arg3: ^_FileAccess;
          arg4: ^_FileShare;
       enter (arg1[], arg2[], arg3[], arg4[])
       do 'Open' -> procname;
       exit result[]
       #);
     SetCreationTime: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     SetCreationTimeUtc: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     GetCreationTime: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     GetCreationTimeUtc: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     SetLastAccessTime: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     SetLastAccessTimeUtc: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     GetLastAccessTime: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     GetLastAccessTimeUtc: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     SetLastWriteTime: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     SetLastWriteTimeUtc: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_DateTime;
       enter (arg1[], arg2[])
       #);
     GetLastWriteTime: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     GetLastWriteTimeUtc: static_proc
       (# result: ^_DateTime;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     GetAttributes: static_proc
       (# result: ^_FileAttributes;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     SetAttributes: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_FileAttributes;
       enter (arg1[], arg2[])
       #);
     OpenRead: static_proc
       (# result: ^_FileStream;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     OpenWrite: static_proc
       (# result: ^_FileStream;
          arg1: ^_String;
       enter (arg1[])
       exit result[]
       #);
     Move: static_proc
       (# 
          arg1: ^_String;
          arg2: ^_String;
       enter (arg1[], arg2[])
       #);
  do '[mscorlib]System.IO.File' -> className;
  INNER;
  #);

(* Utility function to ease casting to fully specified class. *)
asFile:
  (# _F: ^_File;
     F: ^DotnetFile;
  enter _F[]
  do _F[]->F[];
  exit F[]
  #);
