ORIGIN '../astlevel';
INCLUDE '../betacfl';
INCLUDE '../grammarinit';

-- program: descriptor --
(#
   mps: @astInterface;
   beta: @mps.beta;
   
   group: ^astInterface.fragmentGroup;
   name: ^text;
do mps.astLevelInit;
   ('~beta/grammars/beta/beta','beta',screen[])
     ->beta.betagrammarInit
		   (#
			  MPSerror::
				(# do (failure,msg[])->stop #);
			  noParserAvailable:: 
				(# do (failure,msg[])->stop #)
		   #); 
   (if NoOfArguments = 2 then
       2 -> arguments -> name[];
       (name[], screen[]) -> mps.top.open -> group[];
		 (if group[] <> NONE then
		    group.scan
			   (# frag: ^astInterface.fragmentForm;
				do current[] -> frag[];
					'-- ' -> screen.puttext;
					frag.name -> screen.puttext;
					' --' -> screen.putline;
					(1, screen[], beta[])  -> frag.root.dump;
					screen.newline;
				#);
		 if);
   if);
#)

