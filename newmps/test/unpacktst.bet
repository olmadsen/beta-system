ORIGIN '../astlevel';
INCLUDE '../betacfl';
INCLUDE '../grammarinit';

-- program: descriptor --
(#
   mps: @astInterface;
   beta: @mps.beta;
   
   group: ^astInterface.fragmentGroup;
   name: ^text;
do mps.astLevelInit;
   ('~beta/grammars/beta/beta','beta',screen[])
     ->beta.betagrammarInit
   (#
      MPSerror::
        (# do (failure,msg[])->stop #);
      noParserAvailable:: 
        (# do (failure,msg[])->stop #)
   #); 
   (if NoOfArguments = 2 then
       2 -> arguments -> name[];
       (name[], screen[]) -> mps.top.open -> group[];
       group.scan
	  (# frag: ^astInterface.fragmentForm;
	     root: ^astInterface.beta.descriptorForm;
	  do '--- ' -> puttext;
	      current.name -> putline;
	      current[] -> frag[];
	      (3, screen[], mps.grammarTable.beta[]) -> frag.root.dump;
	      newline;
	      
	      frag.importtop -> putint;
	      
	      newline;
	      frag.root[] -> root[];
	      
	      root.Xorigin[] -> getPatternName -> putline;
	  #);
       group.setupOrigin;
       (group.origin).fullname -> putline;
   if);
#)

