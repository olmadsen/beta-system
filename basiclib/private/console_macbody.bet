ORIGIN 'betaenv_macbody';
INCLUDE '~beta/basiclib/external';
INCLUDE '~beta/maclib/console';
INCLUDE '~beta/maclib/resources';

(* COPYRIGHT Mj¿lner Informatics, 1991-2000 All rights reserved.
 *
 *)

-- betaenvGetGui: doPart --
do
(# GUI: (# exit 0x47554920 #);
   res: @integer;	
do (GUI, 128) -> Get1Resource -> res;
   (if res <> 0 then
      1 -> value;
   else
      0 -> value;
   if);
#) 


---- StartConsole: descriptor ----
(# 
   console: ^ConsoleStream;
   
do &ConsoleStream[] -> console[];
   console.init;
   console[] -> screen[] -> keyboard[];


#)

---- DoTerminateConsole: descriptor ----
(# x: @COM
	(# event: @EventRecord;
	#);
   result: @boolean;
   console: ^ConsoleStream;
   
do (if screen## <= ConsoleStream## then
		screen[] -> console[];
		loop:
		(if NOT console.quitting then
			(# done: @boolean;
			do (everyEvent, x.event[], 2, 0) -> WaitNextEvent -> result;
				x.event[] -> console.handleEvent -> done;
				restart loop;
			#);
		if);
	if);
#)
