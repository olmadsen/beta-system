ORIGIN  'directorybody';
LIB_ITEM 'directory';
INCLUDE 'file_clrbody';
(*
 * This fragment group is the .NET dependent implementation of directories.
 *)


-- DirPrivate: descriptor --
(# 
#)

-- DirException: descriptor --
(# 
do msg.newline;
   'Directory exception for \'' -> msg.putText; 
   name->msg.putText; '\''->msg.put;
   msg.newline;
#)

-- DirTouch: descriptor--
(# 
do 'directory_clrbody: DirTouch' -> NYI; 
#)


-- DirNoOfEntries: dopart --
do 'directory_clrbody: DirNoOfEntries' -> NYI; 

-- DirEmpty: dopart --
do 'directory_clrbody: DirEmpty' -> NYI; 

-- DirDelete: descriptor --
(# do 'directory_clrbody: DirDelete' -> NYI; #)

-- DirCreateFile: dopart -- 
do (if name[]=NONE then &text[]->name[] else name.copy->name[]  if);
   (if entry.private.path.t[entry.private.path.lgth]<>'\\' then '\\' -> name.prepend if);
   entry.path -> name.prepend;
   (if true
    // name[]->DotnetDirectory.Exists
    // name[]->DotnetFile.Exists then
       name[] -> exists
    else
       (name[]->&FileInfo[]).Create;
       &EntryDesc[] -> newEntry[];
       name[] -> newEntry.path;
   if);

-- DirCreateDir: dopart --
do (if name[]=NONE then &text[]->name[] else name.copy->name[]  if);
   (if entry.private.path.t[entry.private.path.lgth]<>'\\' then '\\' -> name.prepend if);
   entry.path -> name.prepend;
   (if true
    // name[]->DotnetDirectory.Exists
    // name[]->DotnetFile.Exists then
       name[] -> exists
    else
       (name[]->&DirectoryInfo[]).Create;
       &EntryDesc[] -> newEntry[];
       name[] -> newEntry.path;
   if);
   
-- DirDeleteFile: dopart --
do (if name[]=NONE then &text[]->name[] else name.copy->name[]  if);
   (if entry.private.path.t[entry.private.path.lgth]<>'\\' then '\\' -> name.prepend if);
   entry.path -> name.prepend;
   (if name[]->DotnetFile.Exists then
       (name[]->&FileInfo[]).Delete       
    else
       name[] -> nosuch;
   if);

-- DirDeleteDir: dopart --
do (if name[]=NONE then &text[]->name[] else name.copy->name[]  if);
   (if entry.private.path.t[entry.private.path.lgth]<>'\\' then '\\' -> name.prepend if);
   entry.path -> name.prepend;
   (if name[]->DotnetDirectory.Exists then
       true -> (name[]->&DirectoryInfo[]).Delete_boolean
    else
       name[] -> nosuch;
   if);

-- DirFindSelect: descriptor --
(# 
do 'directory_clrbody: DirFindSelect' -> NYI; 
#)

-- DirFindDispatch: descriptor --
(# 
do 'directory_clrbody: DirFindDispatch' -> NYI; 
#)

-- DirFindFullPath: descriptor -- 
(# 
do 'directory_clrbody: DirFindFullPath' -> NYI; 
#)

-- DirFindGetFile: descriptor --
(# 
do 'directory_clrbody: DirFindGetFile' -> NYI; 
#)

-- DirFindGetDir: descriptor --
(# 
do 'directory_clrbody: DirFindGetDir' -> NYI; 
#)

-- DirFindEntry: descriptor --
(# 
do 'directory_clrbody: DirFindEntry' -> NYI; 
#)

-- DirScanFullPath: descriptor --
(# 
do 'directory_clrbody: DirScanFullPath' -> NYI; 
#)

-- DirScanSelect: descriptor --
(# 
do 'directory_clrbody: DirScanSelect' -> NYI; 
#)

-- DirScanDispatch: descriptor --
(# 
do 'directory_clrbody: DirScanDispatch' -> NYI; 
#)

-- DirScanGetFile: descriptor -- 
(# 
do 'directory_clrbody: DirScanGetFile' -> NYI; 
#)

-- DirScanGetDir: descriptor --
(# 
do 'directory_clrbody: DirScanGetDir' -> NYI; 
#)

-- DirScanEntries: descriptor -- 
(# 
do 'directory_clrbody: DirScanEntries' -> NYI; 
#)
