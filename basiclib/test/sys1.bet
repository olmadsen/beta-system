ORIGIN '../betaenv'
[[--INCLUDE  '../systemenv'
---program:descriptor--      
SystemEnv 
(# S: @ | System
     (# P1: @ ObjectPort;
        f1: P1.entry(#do 'f1 called' ->putline #);
	P2: @  Port;
        f2: P2.entry(#do 'f2 called' ->putline #);
	P3: @ Port;
        f3: P3.entry(#do 'f3 called' ->putline #);
     do R.R1[]->P1.accept; 
        P2.accept; 
        P3.accept; 
        R.R3[]->P1.accept
     #);

   R: @ | System
     (# R1: @ | System(#do S.f1; S.f3 #);
        R2: @ | System(#do S.f2; #);
        R3: @ | System(#do S.f1 #);
     do 'Start R'->putLine;
        conc(#do R1[]->start;  R2[]->start; R3[]->start #);
        'End R'->putLine
     #);
do (*true->trace;  *)
   'Start'->putLine;
    conc(#do R[]->start; S[]->start #);
   'End'->putLine
#)
---]]
