ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/private/systemExceptionHandler';

-- program: descriptor --
(# a: (# do a #); (* StackErr: Stack Overflow *)
do runtimeExceptionHandler##->InstallSystemExceptionHandler;
   try
   (#
      name:: (# do 'stackTry'->n[] #);
      handler::
        (# 
        do when (# type:: stackOflowException
                do 'stackTry handler...aborting'->putline;
                   abort;
                #);
        #);
   do try (#
             name:: (# do 'inner'->n[] #);
             handler::
               (# 
               do when (# type:: stackOflowException
                       do 'inner handler...propagating'->putline;
                          propagate;
                       #);
               #);
          do a #);     
   #);
#)
