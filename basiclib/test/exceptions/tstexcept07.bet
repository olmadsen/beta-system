ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/private/systemExceptionHandler';

-- program: descriptor --
(# 
   a: @|(# p: (# do inner #);
           pp: @p(# r: [1]@integer 
                 do 1->r[2] (* RepRangeErr: Index error *) #);
        do pp
        #);
   b: @|(# q: (# do inner #);
           qq: @q(# do a; a #);
        do qq
        #);
do runtimeExceptionHandler##->InstallSystemExceptionHandler;
   try
   (#
      name:: (# do 'repRangeTry'->n[] #);
      handler::
        (# 
        do when (# type:: repRangeException
                do 'repRangeTry handler...aborting'->putline;
                   abort;
                #);
        #);
   do b
   #);
#)
