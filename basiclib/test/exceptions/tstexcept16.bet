ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/private/systemExceptionHandler';

-- program: descriptor --
(# 
   a: @|(# p: (# do inner #);
           pp: @p(# x, y: @integer;
                 do 2 -> x;
                    0 -> y;
                    suspend;
                    x div y -> x;
                    (* ZeroDivErr: Integer division by zero, OR
                     * ArithExceptErr: Arithmetic Exception
                     *)
                    x -> putint; newline;
                 #);
        do pp
        #);
   b: @|(# q: (# do inner #);
           qq: @q(# do a; a #);
        do qq
        #);
do runtimeExceptionHandler##->InstallSystemExceptionHandler;
   try
   (#
      name:: (# do 'zeroDivTry'->n[] #);
      handler::
        (# 
        do when (# type:: zeroDivException
                do 'zeroDivTry handler...aborting'->putline;
                   abort;
                #);
        #);
   do b 
   #);
#)

