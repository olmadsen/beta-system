ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/private/systemExceptionHandler';

-- program: descriptor --
(# 
   a:  (# t: (# z: (# do 1 -> put #) #);
       do INNER
       #);
   
   b: a(# x: (# q: ^t; #);
          y: @x(# qq: @q.z; 
                  (* RefNoneErr: Reference is none (allocating y) *) #);
       #);
   c: (# do b #);
do runtimeExceptionHandler##->InstallSystemExceptionHandler;
   try
   (#
      name:: (# do 'refNoneTry'->n[] #);
      handler::
        (# 
        do when (# type:: refNoneException
                do 'refNoneTry handler...aborting'->putline;
                   abort;
                #);
        #);
   do c 
   #);
#)
