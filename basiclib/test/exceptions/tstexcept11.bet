ORIGIN '~beta/basiclib/betaenv';
INCLUDE '~beta/basiclib/private/systemExceptionHandler';

--- program: descriptor ---
(# 
   fac1: @|
     (#
     do 1 -> putint; 
        suspend; 2 -> putint; 
        fac2; 3->putint; 
        fac2; 4 -> putint;
     #);
   fac2: @|
     (#
     do 5 -> putint; 
        suspend; 6 -> putint; 
        fac1 (*!*); 7->putint; 
        (* RecursiveAttachErr: 
         *   Attempt to attach component that is already attached
         *)
     #);
do runtimeExceptionHandler##->InstallSystemExceptionHandler;
   
   try
   (#
      name:: (# do 'recursiveAttTry'->n[] #);
      handler::
        (# 
        do when (# type:: recursiveAttException
                do 'recursiveAttTry handler...aborting'->putline;
                   abort;
                #);
        #);
   do fac1; fac1;
   #);
#)
