ORIGIN '~beta/basiclib/systemenv';
INCLUDE '~beta/basiclib/file';
INCLUDE '~beta/basiclib/private/basicsystemenv_unix';
INCLUDE '~beta/basiclib/numberio';
--program:descriptor--

systemenv
(# 
   f1:@file(# EntryDesc::<(# cached::(# do true->value; #);#);#);
   f2:@file;
   exist:@boolean;
   time:@integer;
   size:@integer;
   read:@boolean;
   write:@boolean;
   isfile:@boolean;
   isDir:@boolean;
   r:@real;
   count:(# exit 100000 #);
do
   'tstascii.bet'->f1.name;
   
   
   'Time for cached file:'->putline;
   gettimeasdouble->r;
   (for i:count repeat
        f1.entry.exists->exist;
        f1.entry.modtime->time;
        f1.entry.size->size;
        f1.entry.readable->read;
        f1.entry.writeable->write;
        f1.entry.isfile->isfile;
        f1.entry.isDirectory->isDir;
   for);
   (gettimeasdouble-r)->putreal;newline;
   
   'Time for UNcached file:'->putline;
   'tstascii.bet'->f2.name;
   gettimeasdouble->r;
   (for i:count repeat
        f2.entry.exists->exist;
        f2.entry.modtime->time;
        f2.entry.size->size;
        f2.entry.readable->read;
        f2.entry.writeable->write;
        f2.entry.isfile->isfile;
        f2.entry.isDirectory->isDir;
   for);
   (gettimeasdouble-r)->putreal;newline;
   
#)
   
