ORIGIN '~beta/basiclib/v1.6/betaenv';
INCLUDE '~beta/basiclib/v1.6/numberio';
  
--- program: descriptor ---
(# r,r2: @real; i2: @integer;
   t: @text;
   getNum:
     (# T: @text
     enter T
     do T[]->puttext; ' is:'->puttext; 0->T.setPos; 
	T.GetNumber
        (# IntegerValue::<
             (# do '\n\tInt='->puttext; value->i2->putInt #);
           basedValue::<
             (#
             do '\n\tbase='->puttext; base->putint;
                '\n\tintValue='->puttext; value->i2->putint;
                '\n\tbasedValue='->puttext; (base,value)->putBased(# do true->upcase->uppercase #)
             #);
           realValue::<
             (#
             do '\n\tReal='->puttext; 
                value->r2->putreal(# do exp->style; 16->precision #);
                '\n\tr=   '->puttext; r->putreal(# do exp->style; 16->precision #);
             #);
           syntaxError::< (# do ' '->put; msg[]->putLine; true->continue #);
           baseError::< (# do ' '->put; msg[]->putLine; true->continue #)
        #)
     #);
   i, j: @integer;
   putI:
     (# 
     do ' DEC: '->puttext; i->putint; newline;
        '\tHEX: '->puttext; i->putHex; newline;
        (for j:4 repeat
             '\t\tbyte('->puttext; j->putint; '): '->puttext;
             (i,j)->putByteHex; newline
        for);
        '\tBIN: '->puttext; i->putBinary; newline;
        (for j:4 repeat
             '\t\tbyte('->puttext; j->putint; '): '->puttext;
             (i,j)->putByteBinary; newline
        for);
     #);
   getJ:
     (# t: @text
     do t.clear; i->t.putHex; t.reset; t.getHex->j;
        (if j=i then ' getHex OK'->putline
         else '>>>>>>getHex ERROR'->putline
        if);
        t.clear; i->t.putBinary; t.reset; t.getBinary->j;
        (if j=i then ' getBinary OK'->putline
         else '>>>>>>getBinary ERROR'->putline
        if);
     #)
   
do -2->r;
   (for i: 10 repeat
        t.clear; r -> t.putreal(# do exp->style; 16->precision #); t -> getNum;
        (if r = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
        r + 0.00005 -> r;
   for);
   -2->r; newline;
   (for i: 10 repeat
        t.clear; r -> t.putreal(# do exp->style; 16->precision #); t -> getNum;
        (if r = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
        r + 0.5 -> r;
   for);
   newline;
   '1'->getNum;
   (if 1 = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   '314'->getNum;
   (if 314 = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   newline;
   
   '2x0101'->getNum;
   (if 2x0101 = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   '8x101'->getNum;
   (if 8x101 = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   '16xA0B'->getNum;
   (if 16xA0B = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   '0X5A'->getNum;
   (if 0X5A = i2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   
   'The next thing that will happen is a syntax-error exception:'->putline;
   '1200x80'->getNum;
   newline;
   
   3.14->r; '3.14'->getNum;
   (if 3.14 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.014->r; '3.014'->getNum;
   (if 3.014 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E8->r; '3.14E8'->getNum;
   (if 3.14E8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E+8->r; '3.14E+8'->getNum;
   (if 3.14E+8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E-8->r; '3.14E-8'->getNum;
   (if 3.14E-8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E+08->r; '3.14E+08'->getNum;
   (if 3.14E+08 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E-08->r; '3.14E-08'->getNum;
   (if 3.14E-08 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3e8->r; '3e8'->getNum;
   (if 3e8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3e+8->r; '3e+8'->getNum;
   (if 3e+8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3e-8->r; '3e-8'->getNum;
   (if 3e-8 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E+80->r; '3.14E+80'->getNum;
   (if 3.14E+80 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.14E-80->r; '3.14E-80'->getNum;
   (if 3.14E-80 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   3.0010140E12->r; '3.0010140E12'->getNum;
   (if 3.0010140E12 = r2 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   
   minReal->r; '2.2250738585072014E-308'->getNum;
   (if r2 = minReal then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   2.2250738585072015E-408->r;   '2.2250738585072015E-408'->getNum;
   (if r2 = 0.0 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   2.2250738585072015E-308->r; r->putreal(# do exp->style; 16->precision #);
   (if r = 0.0 then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   
   maxReal->r; '1.7976931348623157E+308'->getNum;
   (if r2 = maxReal then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   1.7976931348623158E+408->r;   '1.7976931348623158E+408'->getNum;
   (if r2 = infReal then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   -1.7976931348623158E+408->r;   '-1.7976931348623158E+408'->getNum;
   (if r2 = -infReal then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   1.7976931348623158E+308->r; r->putreal(# do exp->style; 16->precision #);
   (if r = maxReal then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   
   
   'The next thing that will happen is a syntax-error exception:'->putline;
   '1.E+12'->getNum; (* gives rise to a syntax-error exception *)
   
   t.clear; (0,minint)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '-0x80000000'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,-1)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '-0x0000001'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,0)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x00000000'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,1)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x00000001'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,33554431)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x01FFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,67108863)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x03FFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,134217727)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x07FFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,268435455)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x0FFFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,536870911)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x1FFFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,1073741823)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x3FFFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,2147483647)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x7FFFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,-1)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '-0x0000001'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   t.clear; (0,maxint)->t.putBased(# do 10->width; true->zeropadding->uppercase #); (if '0x7FFFFFFF'->t.equalNCS then '\n\t\t\t\t\tOK'->putline else '\n\t\t\t\t\tpossibly ERROR'->putline if);
   
   minint->i; putI; getJ;
   newline;
   maxint->i; putI; getJ;
   newline;
   
   127->i; putI; getJ;
   newline;
   -127->i; putI; getJ;
   newline;
   
   128->i; putI; getJ;
   newline;
   -128->i; putI; getJ;
   newline;
   
#)
