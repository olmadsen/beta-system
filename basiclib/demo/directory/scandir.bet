ORIGIN '~beta/basiclib/v1.6/directory';

--- program: descriptor ---

(* Program showing a simple use of directory: The directory with the path 
 * given as argument is scanned, and the names of all the entries are printed
 * in two columns.
 * If the path given is not a directory, an exception will be raised.
 *)

(# d: @directory; nl: @boolean;
do (if noOfArguments <> 2 then
       'Usage: ' -> puttext; 1->arguments->puttext; ' path' -> putline;
       stop;
   if);
   2 -> arguments -> d.name;
   newline;
   d.name -> puttext;
   (if d.empty then ' is empty.' -> putline;
    else ' is not empty.' -> putline;
   if);
   'It contains the following '-> puttext;
   d.noOfEntries -> putint;
   ' entries:' -> putline;
   d.scanEntries
   (# name: ^text;
   do found.path -> name[] -> puttext;
      (if nl then newline
       else
          (for longest-name.length+1 repeat ' ' -> put for)
      if);
      not nl -> nl;
   #);
   (if nl then newline if);
   newline;
#)
