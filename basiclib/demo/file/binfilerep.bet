ORIGIN '~beta/basiclib/binfile';
--PROGRAM: descriptor--
(# F: ^binfile;
   R1: [10]@int32;
   R2: [0]@int32;
   R3: [10]@int8;
   R4: [0]@int8;
do &binfile[] -> f[];
   'rep' -> f.name;
   f.openwrite;
   'Hello World' -> f.putline;
   (for i:10 repeat i->R1[i] for);
   (R1[],10) -> f.putInt32rep;
   (for i:10 repeat i+245->R3[i] for);
   (R3[],10) -> f.putInt8rep;
   'Goodbye, World' -> f.putline;
   f.close;
   
   &binfile[] -> f[];
   'rep' -> f.name;
   f.openRead;
   f.getline -> putline;
   (10,0) -> f.getInt32rep -> R2[];
   (for i:R2.range repeat
        R2[i] -> putint; newline;
   for);
   (10,0) -> f.getInt8rep -> R4[];
   (for i:R4.range repeat
        R4[i] -> putint; newline;
   for);
   f.getline -> putline;
   f.close;
#)
