ORIGIN '~beta/guienv/guienvsystemenv';
INCLUDE '~beta/guienv/guienv';
INCLUDE '../miniCompiler/directoryComponents';
INCLUDE 'xlexer';
INCLUDE 'xparser';
INCLUDE 'xchecker';
INCLUDE 'xgenerator';
INCLUDE '../miniCompiler/betaVM'
---program:descriptor---
SystemEnv
(# compile: @generator;
   VM: @ betaVM
     (# putCH:: (# do ch -> put #);
        getCh:: (# do get -> ch #);
        errorEvent:: (# do msg[] -> putline; done #);
        done:: (# do stop #)
     #);
   setWindowEnv:: (# do myWindowEnv[] -> theWindowEnv[]#);
   myWIndowEnv: @ guienv;
   runC,isXbeta: @boolean;
   FN: ^text;
   F: @file
do 'xbeta compiler: ' -> puttext;
   2 -> arguments -> FN[];
   (if ('-x' -> FN.equalNCS) then
       true -> isXbeta;
       ' ' -> put;
       3 -> arguments -> FN[]
   if);
   FN[] -> fixExtension_xbeta -> FN[] -> putline;
   (if true then
       FN[] -> F.name
    else
       'Accounts.xbeta' -> F.name;
       'test.xbeta' -> F.name;
   if);
   F.openRead;
   compile.lex.init;
   F[] -> compile; 
   runC -> VM.init;
    (if false then
        stop
     else
        (compile.descs[],compile.mainDescNo,screen[],runC) -> VM.execute.init;
    if);
   VM.execute[] -> fork; 
#)
