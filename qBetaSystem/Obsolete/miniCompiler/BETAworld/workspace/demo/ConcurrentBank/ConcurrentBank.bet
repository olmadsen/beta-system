ConcurrentBank: @UniCoreMonitorSystem.System
  (# Account: Monitor
       (# deposit: entry
            (# amount: @ integer
            enter amount
            do balance + amount -> balance
            exit balance
            #);
          withdraw: entry
            (# amount: @ integer
            enter amount
            do balance - amount -> balance
            exit balance
            #);
          balance: @ integer
       #);
     A: @ Account;
     Joe: @ Process
       (# 
       do 300 -> A.deposit; 500 -> A.deposit; 800 -> A.deposit
       #);
     Lisa: @ Process
       (# 
       do 150 -> A.deposit; 200 -> A.deposit; 123 -> A.deposit
       #);
     Sue: @ Process
       (# V: @integer
       do (for i: 5 repeat
               (* problem i V is not used, value stack underflow *)
               A.withdraw -> putint; newline
          for)
       #)
  do A.init; 
     A[] -> theM[];
     101 -> Joe.start; 
     103 -> Sue.start
     102 -> Lisa.start; 
  #)
