ORIGIN '~beta/basiclib/betaenv'
---LIB:attributes---
(* Example form w3schools.com

interface StringFunction { String run(String str); }

public class Main {
  public static void main(String[] args) {
    StringFunction exclaim = (s) -> s + "!";
    StringFunction ask = (s) -> s + "?";
    printFormatted("Hello", exclaim);
    printFormatted("Hello", ask);
  }

  public static void printFormatted(String str, StringFunction format) {
    String result = format.run(str);
    System.out.println(result);
  }
}
*)
StringFunction: (# str,S: ^Text enter str[] do inner exit S[] #);
exClaim: StringFunction(#do '!' -> str.append -> S[] #);
ask: StringFunction(#do '?' -> str.append -> S[]#);
printFormatted:
   (# str: ^text; format: ##Stringfunction;
   enter(str[],format##) 
   do str[] -> format -> putline
   #);
List:
   (# elm:< Object;
      add: (# e: ^elm enter e[] do top +1 -> top; E[]  -> R[top][] #);
      get: (# inx: @integer enter inx exit R[inx][] #);
      R: [10] ^elm; top: @integer
   #);
StructureX:
   (# V:< Object;
      apply: (#do V #)
   exit this(StructureX)[]
  #);
SomePTN: (#do 'Well done'-> putline;#)
---program:descriptor---
(# L1: @List(# #);
   F: ^StructureX
do ('Hello',exClaim##) -> printFormatted;
   ('Hello',ask##) -> printFormatted;
   (*('Hello',StringFunction(#do ';'->str.append -> S[]#)## ) -> printFormatted;*);
   'Merry Christmas'->StringFunction(#do str[]->S[] #) -> L1.add;
   1 -> L1.get -> putline;
   (* exClaim## -> L1.add -- not allowed *)
   StructureX(# V:: SomePTN #) -> F[];
   F.apply
#)