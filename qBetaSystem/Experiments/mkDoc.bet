ORIGIN '~beta/basiclib/betaenv'
---lib:attributes---
chdir: external
  (# dir: [0] @char; res: @integer
  enter dir
  do callC
  exit res
  #);
system: external
  (# cmd: [0] @char; res: @integer
  enter cmd
  do callC
  exit res
  #);
_popen: external
  (# cmd,mode: [0]@char; res: @integer
  enter(cmd,mode)
  do callC
  exit res
  #);
fgetc: external
  (# F: @integer; ch: @char
  enter F
  do callC
  exit ch
  #);
--- program:descriptor ---
(# WS,S,T: ^text;
do 'c:/beta/r5.5/qBetaSystem/qbeta/' -> WS[];
   WS -> chdir;
   'pwd' -> system;
   'tar -cf qbetadoc.tar ' -> T[];
   '--exclude=\'*~\' ' -> T.append;
   '--exclude=\'*.run\' --exclude=\'*.s\' ' -> T.append;
   '--exclude=\'*.xbeta\' ' -> T.append;
   '--exclude=\'*.qbeta\' ' -> T.append;
   '--exclude=\'*dump\' ' -> T.append;
   '--exclude=\'*.back\' ' -> T.append;
   '--exclude=\'*.txt\' ' -> T.append;
   '--exclude=\'*.ll\' ' -> T.append;
   '--exclude=\'*.bc\' ' -> T.append;
   '--exclude=\'*.c\' ' -> T.append;
   '--exclude=\'*.db\' ' -> T.append;
   '--exclude=\'*.exe\' ' -> T.append;   
   '--exclude=\'*.obj\' ' -> T.append;  
   '--exclude=\'*.pdb\' ' -> T.append;
   '--exclude=\'*.elf\' ' -> T.append;
   '--exclude=\'*.log\' ' -> T.append;
   '--exclude=\'*.sx\' ' -> T.append;   
   '--exclude=\'*.x\' ' -> T.append; 
   '--exclude=\'lst*\' ' -> T.append;   
   '--exclude=\'*lst\' ' -> T.append;
   '--exclude=\'output\' ' -> T.append;
   'BETAworld' -> T.append;
   T[] -> putline;
   T -> system;

   'tar -tvf  qbetadoc.tar' -> S[];
   S[] -> putline;
   S -> system;
   'gzip qbetadoc.tar' -> system;
   'ls -lt qbetadoc*' -> system
#)
