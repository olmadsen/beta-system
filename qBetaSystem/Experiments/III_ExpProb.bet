ORIGIN '~beta/basiclib/betaenv';
---lib:attributes---
IEvalExp:
  (# eval:< (# V: @integer do inner exit V #)
  #);
ExpAlgebra:
  (# T:< Object;
     Lit: <
       (# n: @integer; x: ^T
       enter n
       do inner
       exit x[]
       #);
     add:<
       (# left,right: ^T;  x: ^T
       enter(left[],right[])
       do inner
       exit x[]
       #);
  #);
ExpFactory: ExpAlgebra
  (# T:: IEvalExp;
     lit:: 
       (# 
       do  n -> Lit -> x[]; 
       #);
     add::
       (#
       do (left[],right[]) -> Add -> x[]
       #)
  #);
ExampleTwo:
  (# T:< Object;
     AddOneToTwo:
       (# ae: ^ExpAlgebra; V: ^ExpAlgebra;
       enter ae[]
       do (1 -> ae.Lit, 2 -> ae.Lit) -> ae.Add -> V[]
       exit V[]
       #)     
  #)
(*
static class ExampleTwo<T>
{
    public static T AddOneToTwo(ExpAlgebra<T> ae) => ae.Add(ae.Lit(1), ae.Lit(2));
}
*)
