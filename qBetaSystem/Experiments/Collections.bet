(*
class List:             -- interface
   class E:< Object
   add(e: ref E):<
      inner(add)
 
class AbstractList: 
   class ELM:< Object
 
class ArrayList: AbstractList
   -- impl list as array
   asList: obj List
      E:: ELM
      add::
         -- add e to the end of the list
*)
ORIGIN '~beta/basiclib/betaenv'
---lib:attributes---
List:
   (# E:< Object;
      add:<
         (# x: ^E
         enter x[]
         do inner add
         #)
   #);
AbstractList:
   (# ELM:< Object;
      scan:<
         (# current: ^ELM
         do inner
         #)
   #);
ArrayList: AbstractList
   (# asList: @List
         (# E:: ELM;
            add:: (#do top+1 -> top; x[] -> R[top][] #)
         #);
      scan::(# do (for i: top repeat R[i][] -> current[]; inner scan for)#);
      R: [10] ^Elm; top: @integer
   #)
---program:descriptor---
(# A: @ArrayList(# ELM:: Text #)
do 'Birger'->A.asList.add;
   'Kirsten'->A.asList.add;
   'Janne'->A.asList.add;
   A.scan(#do current[] -> putline #)
#)