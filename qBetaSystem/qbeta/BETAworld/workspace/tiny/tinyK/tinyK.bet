ORIGIN '~beta/basiclib/betaenv';
---Lib:attributes---
Sortable_range:
   (# Elm:< Object;
      Scan:< (# current: ^Elm; do inner scan #)
   #);
sort:
  (# r: ^Sortable_range; 
  do 
  #);

MyType:
  (# ElmA:< Object;
     asSortable: @ Sortable_range
       (# Elm::< Text; 
          scan::
            (# 
            do this(MyType).scan
               (#       
               do current[] -> this(scan).current[];
                  inner scan
               #)
            #);
       #);
     add:
       (# T: ^Text;
       enter T[]
       do (if (top + 1 -> top) > S.range then
              S.range -> S.extend
          if);
          T[] -> S[top][]
       #);
     scan:
       (# current: ^Text
       do (for i: top repeat
               S[i][] -> current[];
               inner scan
          for)
       #);
     S: [5] ^Text; top: @integer
  #)
---program:descriptor--
(# X: @MyType
do 'Hello ' -> X.add;
   'world. ' -> X.add;
   'How ' -> X.add;
   'are ' -> X.add;
   'you?' -> X.add;
   X.scan(#do current[] -> puttext #);
   newline;
   X.asSortable.scan(#do current[] -> puttext #);
#)

