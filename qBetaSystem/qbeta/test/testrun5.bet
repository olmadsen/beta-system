ORIGIN '~beta/basiclib/betaenv';
INCLUDE 'testlib'
--- program:descriptor ---
Tester
(# (*sys: @SysEnv; *)
   checkValueBench:
     (#
     do 
        'C:/beta/r5.5/qBetaSystem/qbeta/BETAworld/DK/AarhusUniversity/' -> sys.WS[];
        ('SimpleValueBench','',true,false,false) -> sys.run;
        (*'C:/beta/r5.5/qBetaSystem/qbeta/BETAworld/workspace/SimpleValueBench' -> chdir;
        'xbeta -P SimpleValueBench' -> system;*)
        ('RoadMap','',true,false,false) -> sys.run;
     #);
   arg: ^Text; resetLog: @boolean;
   testDir,log: ^text
do 'qBeta test run: Compiler_test: ' -> puttext;
   (if false then
       (if noOfArguments > 1 then
           2 -> arguments -> arg[];
           (if '-r' -> arg.equalNCS then
               true -> resetLog;
               'Log file is reset' -> puttext
           if)
        else
           'test against masterlog.txt: ' -> puttext           
   if)if);
   newline;
   'pwd' -> system;
   'C:/beta/r5.5/qBetaSystem/qbeta/test/' -> testDir[];
   (if resetLog then
       'E_mastertrace.txt' -> (testDir.copy).append -> log[]
    else
       'E_trace.txt' -> (testDir.copy).append -> log[]
   if);
   ('C:/beta/r5.5/qBetaSystem/qbeta/BETAworld/workspace/',log[]) 
     -> sys.init;   
   sys.WS -> chdir;
   checkValueBench;
   '-P'-> sys.addArg;
   checkValueBench;
   'Done:testrun5'->putline;
   (if not resetLog then
       testDir -> chdir;
       'diff -a E_mastertrace.txt E_trace.txt' -> putline;
       'diff -a E_mastertrace.txt E_trace.txt' -> System
   if);
#)

   
