ORIGIN '~beta/guienv/openGL/glenv';
INCLUDE '~beta/guienv/openGL/openGLBlib';

-- program:descriptor--
guienv
(# myWindow: @window
     (# myGlCanvas: @glCanvas
          (# spintimer: @timer
               (# action::<
                    (# 
                    do spin + 2.0 -> spin;
                       true -> update;
                    #);
               #);
             spin: @real;
             onResized::
               (#
               do GL_PROJECTION->glMatrixMode;
                  glLoadIdentity;
                  (-50,50,-50,50,-50,50)->glOrtho;
               #);
             onDisplay::
               (# draw: @glBWireCube;
               do (0, 0, 0, 0) -> glClearColor;
                  GL_COLOR_BUFFER_BIT -> glClear; 
                  GL_MODELVIEW->glMatrixMode;
                  glPushMatrix;
                  (spin,1,1,0)->glRotated;
                  (-10,-10,10)->glTranslated;
                  (1, 0.5, 0)->glColor3d;
                  GL_LINE_SMOOTH -> glEnable;
                  GL_BLEND -> glEnable;
                  (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA) -> glBlendFunc;
                  20->draw;
                  glPopMatrix;
               #);
             open::
               (# 
               do (200,200)->size;
                  true->bindright;
                  true->bindbottom;
                  GL_FLAT->glShadeModel;
                  50->spintimer.start;
               #);
          #);
        open::
          (#
          do (200, 200) -> size;
             myGlCanvas.open;
          #);
     #);
do myWindow.open;
#)
