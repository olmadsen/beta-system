ORIGIN '~beta/guienv/guienv';
LIB_DEF 'frigg_behaviour' '../../lib';

-- windowItemLib: attributes --

buttonBehavior:
  (# drawPressed:<
       (# do INNER #);
     drawNormal:<
       (# do INNER #);
     action:<
       (# do INNER #);
     cancel:<
       (# do INNER #);
  do trackMouse
     (# box: @rectangle;
        pressedFlag: @boolean;
        pressed:
          (# new: @boolean;
          enter new
          do (if new <> pressedFlag then
                 new -> pressedFlag;
                 (if pressedFlag then
                     drawPressed;
                  else
                     drawNormal;
                 if);
             if);
          #);
        mousePress::
          (#
          do ((0, 0), size) -> box;
             true -> pressed;
          #);
        mouseMove::
          (#
          do curPt -> box.containsPoint -> pressed;
          #);
        mouseRelease::
          (#
          do (if pressedFlag then
                 action;
              else
                 cancel;
             if);
          #);
     #);
  #);
