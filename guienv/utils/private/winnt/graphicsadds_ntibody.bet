ORIGIN '../graphicsaddsbody';
INCLUDE '../../../private/winnt/graphics_ntibody';
INCLUDE '~beta/win32lib/v1.2/mousecursorsupport';

-- lib: attributes --
(* WINGDIAPI int  WINAPI ExtSelectClipRgn(HDC, HRGN, int); *)
ExtSelectClipRgn: external
  (# hdc, hrgn, mode: @integer;
     complexity: @integer;
  enter (hdc, hrgn, mode)
  do 'ExtSelectClipRgn' -> callStd;
  exit complexity
  #);
RGN_COPY: (# do exit 5 #);

-- graphicsIsInClip: doPart --
do
   
-- graphicsSetClipChildren: doPart --
do (# 
   do (if doClipByChildren then
       else
           
          (this(windowItem).interfaceObjectID,getGraphicsHdc) -> ReleaseDC;
          this(windowItem).interfaceObjectID -> GetDC -> setGraphicsHdc; 
          (if getGraphicsHdc=0 then
              'GetDCEx failed. Error: ' -> puttext;
              GetLastError -> putint; newline;
          if);
          (if private.penBrush<>0 then
              (getGraphicsHdc, private.penBrush) -> SelectObject;
          if);
          (if private.currentHPen<>0 then
              (getGraphicsHdc, private.currentHPen) -> SelectObject;
           if); 
          (if private.graphicsPenMode<>0 then
              (getGraphicsHdc, private.graphicsPenMode) -> SetROP2;
          if);
      if);
   #)
   
-- graphicsSetClipRectangle: doPart --
do (# hRgn: @integer;
   do (r.left,r.top,r.right,r.bottom) -> CreateRectRgn -> hRgn;
      (if hRgn=0 then
          '**WARNING: CreateRectRgn failed in SetClipRectangl.' -> putline;
       else
          (if ((private.hdc,hRgn) -> SelectClipRgn)=0 then 
              '**WARNING: SelectClipRgn failed in SetClipRectangle.' 
                -> putline;
          if);
          hRgn -> DeleteObject;
      if);
   #);
   
-- GUIENVGraphicsdrawRectangle: doPart --
do r -> drawRect;   

-- graphicsDrawIcon: doPart --
do (getGraphicsHdc,h,v,r.handleToIcon) -> DrawIcon;
   
