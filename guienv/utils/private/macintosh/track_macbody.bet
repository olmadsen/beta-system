ORIGIN '../../track';
INCLUDE '~beta/guienv/v1.4.1/private/macintosh/guienv_macbody';

-- GUIENVwindowItemTrack: doPart --
do (if StillDown then
		focus
			(#
				macPt: @macPoint;
				dh,dv: @integer;
			do 
				this(guienv).private.event.where -> macPt;
				macPt[] -> MACGlobalToLocal;
				macPt.getPoint -> curPt -> prevPt;
				mousePress;
				loop:
					(if StillDown//true then
						macPt[] -> GetMouse;
						macPt.getPoint -> curPt;
						curPt.h - prevPt.h -> dh;
						curPt.v - prevPt.v -> dv;
						(if ((dh<>0) or (dv<>0))//true then
							(dh,dv) -> mouseMove;
						if);
						curPt -> prevPt;
						restart loop;
					if);
				mouseRelease;
			#);
	if);
