ORIGIN '../../textfieldadds';
INCLUDE '../../../private/macintosh/guienv_macprivate';
INCLUDE '../../../private/macintosh/fields_macbody';

-- GUIENVTextFieldPositionToRowCol: DescriptorForm --
(# inx: @integer;
do 0 -> inx;
	1 -> row;
	1 -> col;
	l: all -> scanText
		(#
		do (if inx = pos then
				leave l;
			if);
			(if ch = 13 then
				row + 1 -> row;
				1 -> col;
			else
				col + 1 -> col;
			if);
			inx + 1 -> inx;
		#);
#)

-- GUIENVTextFieldRowColToPosition: DescriptorForm --
(# currentRow: @integer;
do	0 -> pos;
	1 -> currentRow;
	l: all -> scanText
		(#
		do (if currentRow = row then
				pos + col - 1 -> pos;
				leave l;
			if);
			(if ch = 13 then
				currentRow + 1 -> currentRow;
			if);
			pos + 1 -> pos;
		#);
#)


-- GUIENVtextFieldAutomaticScrolling: doPart --
do (* Not Implemented, but not necessary on the mac platform. *)
   
-- GUIENVtextFieldDisableUpdate: doPart --
do false -> privateAutomaticUpdate; 

-- GUIENVtextFieldEnableUpdate: doPart --
do true -> privateAutomaticUpdate;
   theEventHandler.onRefresh;