ORIGIN 'cursorTableBody';
INCLUDE
'~beta/guienv/private/winnt/guienv_ntiprivate'
'~beta/guienv/private/winnt/guienv_ntibody'
'~beta/win32lib/mousecursorsupport'
'~beta/win32lib/winuserconsts';

--- cursorlib: attributes ---
loadCursorResource:
  (# name: ^text;     
     id: @integer;
     error:< exception
       (# what: ^text;
       enter what[]
       do what[] -> msg.putText;
          INNER;
       #);
    errMsg: ^text;
  enter (name[],id)
  do 
      (if id<>0 then
          (if id
           //IDC_ARROW
           //IDC_IBEAM
           //IDC_WAIT
           //IDC_CROSS
           //IDC_UPARROW
           //IDC_SIZE
           //IDC_ICON
           //IDC_SIZENWSE
           //IDC_SIZENESW
           //IDC_SIZEWE
           //IDC_SIZENS
           //IDC_SIZEALL
           //IDC_NO
              then
              (0,id) 
                -> LoadCursorInteger -> private.cursorHandle; 
           else
              (uienvHInstance,id) 
                -> LoadCursorInteger -> private.cursorHandle; 
          if);
       else
          (if name[]<>NONE then
              (uienvHInstance,name) 
                -> LoadCursor -> private.cursorHandle; 
          if);
      if);
      (if private.cursorHandle=0 then
          (* Failed to load cursor resource. *)
          &text[] -> errMsg[];
          'Failed to load cursor resource.' -> errMsg.putLine;
          (if id<>0 then
              'id: ' -> errMsg.append; id -> errMsg.putInt;
errMsg.newline;
           else
              (if name[]<>NONE then
                  'name: ' -> errMsg.append;
                  name[] -> errMsg.putLine;
              if);
          if);
          'Error No.: ' -> errMsg.append;
          GetLastError -> id -> errMsg.putInt; errMsg.append;
          errMsg[] -> error;
       else
          
      if);
   #);
--- cursorTableCreate: dopart ---
do &cursor[]->c[];
   (ntiNAME,ntiID)->c.loadCursorResource;
   (cursorName[],c[])->define;

--- cursorLoad: dopart ---
do (if ntiID<>-1 then (ntiNAME,ntiID)->loadCursorResource if);
