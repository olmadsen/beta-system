ORIGIN 'guienv';
BODY 'private/controlsbody';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1991-96
 *       All rights reserved.
 *)
-- windowLib: attributes --
(* idx=2 *)
control: windowitem
  (* a control is a graphical object in the window that the user can
   * use to perform actions. All user interaction with the control
   * that can result in an action should give some kind of visual
   * feedback.
   *)
  (# <<SLOT controlLib: attributes>>;
     open::< 
       (# create::< (# do <<SLOT GUIENVcontrolCreate: descriptor>> #);
       do <<SLOT GUIENVcontrolOpen: descriptor>> 
       #);
     eventHandler::<
       (# onEnabledChanged::< (# <<SLOT GUIENVcontrolOnEnabledChanged: doPart>> #);   
       #);
     close::< (# do <<SLOT GUIENVcontrolClose: descriptor>> #);
     private: @<<SLOT GUIENVcontrolPrivate: descriptor>>;
  #) (* control *);
scrollbar: control
  (* A scrollbar controls the scrolling of a textfield or picture
   * etc.
   *)
  (# <<SLOT scrollbarLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# thumbMoved: event
            (* is called whenever a user has moved the thumb of
             * THIS(scrollbar)
             *)
            (# amount: @integer;
            enter amount
            do <<SLOT GUIENVthumbMoved: descriptor>>;
            #);
          onThumbMoved:< thumbMoved;
          pageDown: event
            (* called when the user clicks in the page down area *)
            (# do <<SLOT GUIENVscrollbarPageDown: descriptor>>; #);
          onPageDown:< pageDown;
          pageUp: event
            (* called when the user clicks in the page up area *)
            (# do <<SLOT GUIENVscrollbarPageUp: descriptor>> #);
          onPageUp:< pageUp;
          buttonDown: event
            (* called when the user clicks at the down button *)
            (# do <<SLOT GUIENVscrollbarButtonDown: descriptor>> #);
          onButtonDown:< buttonDown;
          buttonUp: event
            (* called when the user clicks at the up button *)
            (# do <<SLOT GUIENVscrollbarButtonUp: descriptor>> #);
          onButtonUp:< buttonUp;
          pageScrollAmountChanged: event
            (* called when the scrollamount is changed *)
            (# do inner; #);
          onPageScrollAmountChanged:< pageScrollAmountChanged;
          scrollAmountChanged: event
            (* called when the scrollamount is changed *)
            (# do inner; #);
          onScrollAmountChanged:< scrollAmountChanged;
          maxValueChanged: event
            (* called when the max value is changed *)
            (# do inner; #);
          onMaxValueChanged:< maxValueChanged;
          valueChanged: event
            (* called when the value is changed *)
            (# do inner; #);
          onValueChanged:< valueChanged;
          onFrameChanged::<
            (# do <<SLOT GUIENVScrollbarOnFrameChanged: descriptor>> #);
          onRefresh::<
            (# do <<SLOT GUIENVScrollbarOnRefresh: descriptor>> #);
          onMouseDown::<
            (# do <<SLOT GUIENVScrollbarOnMouseDown: descriptor>> #);
          onActivate::<
            (# do <<SLOT GUIENVScrollbarOnActivate: descriptor>> #);
          onDeactivate::<
            (# do <<SLOT GUIENVScrollbarOnDeactivate: descriptor>> #);
       #);
     (* idx- *)
     vertical:<
       (* Specifies if THIS(scrollbar) is vertical, false is the
        * default value
        *)
       booleanValue;
     scrollAmount:
       (* scrollAmount is the amount the scrollbars thumb will move,
        * when the user clicks in the up button or in the down button
        *)
       (# value: @integer
       enter (# enter value do <<SLOT GUIENVscrollbarSetScrollAmount: descriptor>> #)
       exit (# do <<SLOT GUIENVscrollbarGetScrollAmount: descriptor>> exit value #)
       #);
     pageScrollAmount:
       (* pageScrollAmount is the amount the scrollbars thumb will
        * move, when the user clicks in the page down or page up area
        *)
       (# value: @integer;
       enter (# enter value do <<SLOT GUIENVscrollbarSetPageScrollAmount: descriptor>> #)
       exit (# do <<SLOT GUIENVscrollbarGetPageScrollAmount: descriptor>> exit value #)
       #);
     maxValue: 
       (* this combines setMaxValue and getMaxValue.  Evaluate the
        * enter part to set the maximum value and evaluate the exit
        * part to get the maximum value
        *)
       (# value: @integer
       enter (# enter value do <<SLOT GUIENVscrollbarSetMaxValue: descriptor>> #)
       exit  (# do <<SLOT GUIENVscrollbarGetMaxValue: descriptor>> exit value #)
       #);
     value: 
       (* evaluate the enter part to set the value and evaluate the
        * exit part to the maximum value.  The thumb of the scrollbar
        * is drawn acording to maxValue and the current value. That
        * is, if maxValue is 100 and value is 50, the thumb will be
        * drawn in the middle of the scrollbar
        *)
       (#  pos: @integer;
       enter (# enter  pos do <<SLOT GUIENVscrollbarSetValue: descriptor>> #)
       exit  (# do <<SLOT GUIENVscrollbarGetValue: descriptor>> exit pos #)
       #);
     length: 
       (* the length is either the height or the width of the frame
        * depending of the orientation
        *)
       (# theLength: @integer;
       enter (# enter theLength do <<SLOT GUIENVscrollbarSetLength: descriptor>> #)
       exit (# do <<SLOT GUIENVscrollbarGetLength: descriptor>> exit theLength #)
       #);
     open::< 
       (# create::< (# do <<SLOT GUIENVscrollbarCreate: descriptor>> #)
       do <<SLOT GUIENVscrollbarOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVscrollbarClose: descriptor>>; #);
     private: @<<SLOT GUIENVscrollbarPrivate: descriptor>>;
  #) (* scrollbar *);

button: control
  (* this is the abstract superpattern for all button-like controls *)
  (# <<SLOT buttonLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# labelChanged: event
            (* is called whenever the label is changed *)
            (# do inner; #);
          onLabelChanged:< labelChanged;
          styleChanged: event
            (* is called whenever the style is changed *)
            (# do inner #);
          onStyleChanged:< styleChanged;
          onFrameChanged::<
            (# do <<SLOT GUIENVButtonOnFrameChanged: descriptor>> #);
          onRefresh::<
            (# do <<SLOT GUIENVButtonOnRefresh: descriptor>> #);
          onMouseDown::<
            (# do <<SLOT GUIENVButtonOnMouseDown: descriptor>> #);
       #);
     (* idx- *)
     label:
       (* the label is the text displayed in THIS(button).  The event
        * labelChanged is called, when the label is changed
        *)
       (# theLabel: ^text;
       enter (# enter theLabel[] do <<SLOT GUIENVbuttonSetLabel: descriptor>> #)
       exit (# do <<SLOT GUIENVbuttonGetLabel: descriptor>> exit theLabel[]  #)
       #);
     style: 
       (* the text style used for drawing the label  *)
       (# theStyle: ^textStyle
       enter (# enter theStyle[] do <<SLOT GUIENVbuttonSetStyle: descriptor>> #)
       exit  (# do <<SLOT GUIENVbuttonGetStyle: descriptor>> exit theStyle[] #)
       #);
     open::< 
       (# create::< (# do <<SLOT GUIENVbuttonCreate: descriptor>> #)
       do <<SLOT GUIENVbuttonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVbuttonClose: descriptor>> #);
     private: @<<SLOT GUIENVbuttonPrivate: descriptor>>;
  #) (* button *);
pushButton: button
  (* this is a button like the OK and Cancel buttons in dialogs *)
  (# <<SLOT pushButtonLib: attributes>>;
     open::< 
       (# create::< (# do <<SLOT GUIENVpushButtonCreate: descriptor>> #)
       do <<SLOT GUIENVpushButtonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVpushButtonClose: descriptor>> #);
     eventHandler::<
       (# onMouseDown::<
            (# <<SLOT GUIENVpushButtonOnMouseDown: doPart>> #);
          onRefresh::<
            (# <<SLOT GUIENVpushButtonOnRefresh: doPart>> #);
          onHiliteChanged::<
            (# <<SLOT GUIENVpushButtonHiliteChanged: doPart>> #);
       #);
     
     private: @<<SLOT GUIENVpushButtonPrivate: descriptor>>;
  #) (* pushButton *);
staticText: button
  (* normally a staticText is used to label editText fields *) 
  (# <<SLOT staticTextLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# onRefresh::<
            (# do <<SLOT GUIENVstaticTextOnRefresh: descriptor>>#);
       #);
     (* idx- *)
     open::< 
       (# create::< (# do <<SLOT GUIENVstaticTextCreate: descriptor>> #)
       do <<SLOT GUIENVstaticTextOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVstaticTextClose: descriptor>> #);
     private: @<<SLOT GUIENVstaticTextPrivate: descriptor>>;
  #) (* staticText *);
iconButton: button
  (* an icon has a label, which is drawn centered just below the
   * image of the icon
   *) 
  (# <<SLOT iconButtonLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# showLabelChanged: event
            (* called when showLabel is changed *)
            (# do inner #);
          onShowLabelChanged:< showLabelChanged;
          iconChanged: event
            (* Called when the icon is changed *)
            (# do inner #);
          onIconChanged:< iconChanged;
          onRefresh::< (# do <<SLOT GUIENViconButtonOnRefresh: descriptor>> #);
          onHiliteChanged::< (# do <<SLOT GUIENViconbuttonOnHiliteChanged: descriptor>> #);
       #);
     (* idx- *)
     showLabel: 
       (* if true, the label is shown centered under the image of the
        * Icon
        *)
       (# doShow: @boolean
       enter (# enter doShow do <<SLOT GUIENViconButtonSetShowLabel: descriptor>> #)
       exit (# do <<SLOT GUIENViconButtonGetShowLabel: descriptor>> exit doShow #)
       #);
     icon:
       (# theIcon: ^raster;
       enter (# enter theIcon[] do <<SLOT GUIENViconButtonSetIcon: descriptor>> #)
       exit (# do <<SLOT GUIENViconButtonGetIcon: descriptor>>; exit theIcon[] #)
       #);
     open::< 
       (# create::< (# do <<SLOT GUIENViconButtonCreate: descriptor>> #)
       do <<SLOT GUIENViconButtonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENViconButtonClose: descriptor>> #);
     private: @<<SLOT GUIENViconButtonPrivate: descriptor>>;
  #) (* iconButton *);
optionButton: button
  (* a optionButton has a menu, which pops up, when the user clicks
   * at the button. A normal way to use a optionButton is to set the
   * label of the button to the current selected item in the menu
   *)
  (# <<SLOT optionButtonLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# currentItemChanged: event
            (* called when currentItem is changed *)
            (# do inner #);
          onCurrentItemChanged:< currentItemChanged;
          popUpMenuChanged: event
            (* called when popUpMenu is changed *)
            (# do inner #);
          onPopUpMenuChanged:< popUpMenuChanged;
          onLabelChanged::< (# do <<SLOT GUIENVoptionButtonOnLabelChanged: descriptor>> #);
          onStyleChanged::< (# do <<SLOT GUIENVoptionButtonOnStyleChanged: descriptor>> #);
          onRefresh:: (# <<SLOT GUIENVoptionButtonOnRefresh: doPart>> #);
       #);
     (* idx- *)
     currentItem: 
       (* the current item is the number of the item, which name is
        * currently shown in the popup box.  You can get a reference
        * to that item by calling: currentItem ->
        * theMenu.getItemByNumber -> theItem[];
        *)
       (# itemNo: @integer
       enter (# enter itemNo do <<SLOT GUIENVoptionButtonSetCurItem: descriptor>> #)
       exit (# do <<SLOT GUIENVoptionButtonGetCurItem: descriptor>> exit itemNo #)
       #);
     popupMenu: 
       (* evaluate the enter part to set the menu that pops up in
        * THIS(optionButton). And evaluate the exit part to get the
        * menu
        *)
       (# popupMenu: ^menu;
       enter (# enter popupMenu[] do <<SLOT GUIENVoptionButtonSetPopupMenu: descriptor>> #)
       exit (# do <<SLOT GUIENVoptionButtonGetPopupMenu: descriptor>> exit PopupMenu[] #)
       #);
     open::< 
       (# create::< (# do <<SLOT GUIENVoptionButtonCreate: descriptor>> #)
       do <<SLOT GUIENVoptionButtonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVoptionButtonClose: descriptor>> #);
     private: @<<SLOT GUIENVoptionButtonprivate: descriptor>>;
  #) (* optionButton *);
toggleButton: button
  (* this is the abstract superpattern for all buttons that toggle
   * between two states (on/off buttons)
   *)
  (# <<SLOT toggleButtonLib: attributes>>;
     (* idx+ *)
     eventhandler::<
       (# stateChanged: event
            (* this event is called whenever the state of
             * THIS(toggleButton) is changed
             *)
            (# do inner #);
          onStateChanged:< stateChanged;
          onMouseUp::<
            (# <<SLOT GUIENVtoggleButtonOnMouseUp: doPart>> #);
       #);
     (* idx- *)
     state:
       (# theState: @boolean;
       enter (# enter theState do <<SLOT GUIENVtoggleButtonSetState: descriptor>> #)
       exit (# do <<SLOT GUIENVtoggleButtonGetState: descriptor>> exit theState #)
       #);
     open::<
       (# create::< (# do <<SLOT GUIENVtoggleButtonCreate: descriptor>> #)
       do <<SLOT GUIENVtoggleButtonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVtoggleButtonClose: descriptor>> #);
     private: @<<SLOT GUIENVtoggleButtonPrivate: descriptor>>;
  #) (* toggleButton *);
radioButton: toggleButton
  (* a radioButton is mostly used in a radiobutton cluster, where
   * only one radioButton is set at a time. A radioButton is thus
   * useful to let the user choose among different alternatives
   *)
  (# <<SLOT radioButtonLib: attributes>>;
     open::< 
       (# create::< (# do <<SLOT GUIENVradioButtonCreate: descriptor>> #)
       do <<SLOT GUIENVRadioButtonOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVRadioButtonClose: descriptor>> #);
     private: @<<SLOT GUIENVradioButtonPrivate: descriptor>>;
  #) (* radioButton *);
checkBox: toggleButton
  (* this is useful for setting options in dialogs *)
  (# <<SLOT checkBoxLib: attributes>>;
     open::< 
       (# create::< (# do <<SLOT GUIENVcheckBoxCreate: descriptor>> #);
       do <<SLOT GUIENVcheckBoxOpen: descriptor>>
       #);
     close::< (# do <<SLOT GUIENVcheckBoxClose: descriptor>> #);
     private: @<<SLOT GUIENVcheckBoxPrivate: descriptor>>;
  #) (* checkBox *);
editText: control
  (* this is a simple version of textField. Only one textStyle is
   * allowed.  The purpose of this control is to build dialogs
   *)
  (# <<SLOT editTextLib: attributes>>;
     style: 
       (* an editText can only have one textStyle.  Evaluate the
        * enter part to set the textStyle.  Evaluate the exit part to
        * get the textStyle
        *)
       (# txStyle: ^textStyle
       enter (# enter txStyle[] do <<SLOT GUIENVeditTextSetStyle: descriptor>> #)
       exit (# do <<SLOT GUIENVeditTextGetStyle: descriptor>> exit txStyle[] #)
       #);
     contents: 
       (* the contents of an editText is text.  Evaluate the enter
        * part to set the contents, and evaluate the exit part to get
        * the contents
        *)
       (# str: ^text 
       enter (# enter str[] do <<SLOT GUIENVeditTextSetContents: descriptor>> #)
       exit (# do <<SLOT GUIENVeditTextGetContents: descriptor>> exit str[] #)
       #);
     (* idx+ *)
     eventhandler::<
       (# onFrameChanged::<
            (# do <<SLOT GUIENVeditTextonFrameChanged: descriptor>> #);
          onKeyDown::<
            (# do <<SLOT GUIENVeditTextonKeyDown: descriptor>> #);
          onMouseDown::<
            (# do <<SLOT GUIENVeditTextonMouseDown: descriptor>> #);
          onRefresh::<
            (# do <<SLOT GUIENVeditTextonRefresh: descriptor>> #);
          onEnableTarget::<
            (# do <<SLOT GUIENVeditTextonEnableTarget: descriptor>> #);
          onDisableTarget::<
            (# do <<SLOT GUIENVeditTextonDisableTarget: descriptor>> #);
       #);
     (* idx- *)
     open::< 
       (* the textStyle of THIS(editText) is initially set to the
        * system's textStyle
        *)
       (# create::< (# do <<SLOT GUIENVeditTextCreate: descriptor>> #);
       do <<SLOT GUIENVeditTextOpen: descriptor>> 
       #);
     close::< (# do <<SLOT GUIENVeditTextClose: descriptor>> #);
     private: @<<SLOT GUIENVeditTextPrivate: descriptor>>;
  #) (* editText *);
defaultButton: 
  (* the defaultButton in the window recieves a mouseUp event when
   * the user presses the return-key
   *)
  (# theButton: ^button
  enter (# enter theButton[] do <<SLOT GUIENVsetDefaultButton: descriptor>> #)
  exit (# do <<SLOT GUIENVgetDefaultButton: descriptor>> exit theButton[] #)
  #) (* defaultButton *);
