ORIGIN '~beta/basiclib/v1.5/betaenv';
INCLUDE 'graphmath';
BODY 'private/rasterbody';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1991-96
 *       All rights reserved.
 *)
-- lib: attributes --
(* idx=2 *)



	
raster:
  (* generalization of bitmap and pixmap *)
  (# <<SLOT rasterLib: attributes>>;
     pixel:< Object;
     init:<
       (* Intializes the raster to have the specified width and
        * height. Allocates any data needed - you have to call dispose
        * to free that data.
        *)
       (# width, height: @integer;
       enter (width, height)
       do <<SLOT GUIENVrasterInit: descriptor>>;
       #);
     dispose:<
       (* call this to dispose the memory occupied by THIS(raster)
        * when completely done with THIS(raster)
        *)
       (# do <<SLOT GUIENVrasterDispose: descriptor>>; #);
     width: integerValue
       (* returns the width set by init or by read operations *)
       (# do <<SLOT GUIENVrasterWidth: descriptor>>;#);
     height: integerValue
       (* returns the height set by init or by read operations *)
       (# do <<SLOT GUIENVrasterHeight: descriptor>>;#);
     hotspot:
       (* When used in a filling operation hotspot is placed in
        * hotspot of the shape being filled. Defaults to (0,0).
        *)
       (# p: @point;
       enter (# enter p do <<SLOT GUIENVrasterSetHotspot: descriptor>> #)
       exit  (# do <<SLOT GUIENVrasterGetHotspot: descriptor>> exit p #)
       #);
     putPixel:<
       (* Sets the pixel at location (i,j) in the raster. *)
       (# i, j: @integer; p: ^pixel;
       enter (i, j, p[])
       do <<SLOT GUIENVrasterPutPixel: descriptor>>;
       #);
     getPixel:<
       (* Returns the pixel at location (i,j) in the raster. *)
       (# i, j: @integer; p: ^pixel;
       enter (i,j)
       do <<SLOT GUIENVrasterGetPixel: descriptor>>;
       exit p[]
       #);
     copy:<
       (* Return a deep copy of THIS(raster) *)
       (# aCopy: ^raster;
       do <<SLOT GUIENVrasterCopy: descriptor>>;
       exit aCopy[]
       #);
     (* Private *)
     rasterprivatePart: @<<SLOT GUIENVrasterPrivatePart: descriptor>>;
  #);
bitmap: raster
  (* Raster in which the pixels are booleans *)
  (# <<SLOT bitmapLib: attributes>>;
     pixel::<
       (# b: @boolean enter b exit b #);
     init::<
       (# do <<SLOT GUIENVbitmapInit: descriptor>>; #);
     dispose::<
       (# do <<SLOT GUIENVbitmapDispose: descriptor>> #);
     putPixel::<
       (# do <<SLOT GUIENVbitmapPutPixel: descriptor>>; #);
     getPixel::<
       (# do <<SLOT GUIENVbitmapGetPixel: descriptor>>; #);
     copy::<
       (# do  <<SLOT GUIENVbitMapCopy: descriptor>> #);
     writeToPBMfile:
       (* Not Yet Implemented *)
       (# pbmfilename: ^text;
          rawbits: @boolean; (* If true, the RAWBITS format is used *)
       enter (pbmfilename[], rawbits)
       do <<SLOT GUIENVbitmapWriteToPBMfile: descriptor>>;
       #);
     readFromPBMfile:
       (* Reads the contents of the PBMfile into THIS(bitmap) *)
       (# pbmfilename: ^text;
       enter pbmfilename[]
       do <<SLOT GUIENVbitmapReadFromPBMfile: descriptor>>;
       #);
     writeToX11file:
       (# fileName: ^text;
       enter fileName[]
       do <<SLOT GUIENVbitmapWriteToX11file: descriptor>>
       #);
     readFromX11file:
       (# fileName: ^text; 
       enter fileName[]
       do <<SLOT GUIENVbitmapReadFromX11file: descriptor>>
       #);
     (* Private *)
     bitmapPrivatePart: @ <<SLOT GUIENVbitmapPrivatePart: descriptor>>;
  #) (* bitmap *);
graymap: raster
  (* Not Yet Implemented *)
  (# <<SLOT graymapLib: attributes>>;
     pixel::<
       (# g: @integer enter g exit g #);
     init::<
       (# do <<SLOT GUIENVgraymapInitBody: descriptor>>;#);
     dispose::<
       (# do <<SLOT GUIENVgrayMapDispose: descriptor>> #);
     putPixel::<
       (# do <<SLOT GUIENVgraymapPutPixel: descriptor>>; #);
     getPixel::<
       (# do <<SLOT GUIENVgraymapGetPixel: descriptor>>; #);
     copy::<
       (# do <<SLOT GUIENVgraymapCopy: descriptor>> #);
     writeToPGMfile:
       (* Writes THIS(graymap) to the specified PGMfile *)
       (# pgmfilename: ^text;
          rawbits: @boolean; (* If true, the RAWBITS format is used *)
       enter (pgmfilename[],rawbits)
       do <<SLOT GUIENVgraymapWriteToPGMfile: descriptor>>;
       #);
     readFromPGMfile:
       (* Reads the specified PGMfile into THIS(graymap) *)
       (# pgmfilename: ^text;
       enter pgmfilename[]
       do <<SLOT GUIENVgraymapReadFromPGMfile: descriptor>>;
       #);
     (* Private *)
     graymapPrivatePart: @ <<SLOT GUIENVgraymapPrivatePart: descriptor>>;
  #) (* graymap *);
pixmap: raster
  (* Raster in which the pixels are RGB values *)
  (# <<SLOT pixmapLib: attributes>>;
     pixel::<
       (# r,g,b: @integer enter (r,g,b) exit (r,g,b) #);
     init::<
       (# maxVal: @integer; (* Maximum RGB value *)
       enter maxVal
       do <<SLOT GUIENVinitPixmap: descriptor>>;
       #);
     dispose::<
       (# do <<SLOT GUIENVpixmapDispose: descriptor>> #);
     putPixel::<
       (# do <<SLOT GUIENVpixmapPutPixel: descriptor>>; #);
     getPixel::<
       (# do <<SLOT GUIENVpixmapGetPixel: descriptor>>; #);
     copy::< (# do  <<SLOT GUIENVpixmapCopy: descriptor>> #);
     writeToPPMfile:
       (* Not Yet Implemented *)
       (# ppmfilename: ^text;
          rawbits: @boolean; (* If true, the RAWBITS format is used *)
       enter (ppmfilename[],rawbits)
       do <<SLOT GUIENVpixmapWriteToPPMfile: descriptor>>;
       #);
     readFromPPMfile:
       (* Not Yet Implemented *)
       (# ppmfilename: ^text;
       enter ppmfilename[]
       do <<SLOT GUIENVpixmapReadFromPPMfile: descriptor>>;
       #);
     writeToX11file:
       (* Writes THIS(pixmap) to the specified file *)
       (# X11Filename: ^text;
       enter X11Filename[]
       do <<SLOT GUIENVpixmapWriteToX11file: descriptor>>;
       #);
     readFromX11file:
       (* Reads the file into THIS(pixmap) *)
       (# X11Filename: ^text;
       enter X11Filename[]
       do <<SLOT GUIENVpixmapReadFromX11file: descriptor>>;
       #);
     (* Private *)
     pixmapPrivatePart: @ <<SLOT GUIENVpixmapPrivatePart: descriptor>>;
  #) (* pixmap *);
compressedPixmap: pixmap
  (* Not Yet Implemented *)
  (# <<SLOT CPixmapLib: attributes>>;
     init::<
       (# do <<SLOT GUIENVcPixmapInitBody: descriptor>>; #);
     dispose::<
       (# do <<SLOT GUIENVcPixmapDispose: descriptor>> #);
     putPixel::<
       (# do <<SLOT GUIENVcPixmapPutPixel: descriptor>>; #);
     getPixel::<
       (# do <<SLOT GUIENVcPixmapGetPixel: descriptor>>; #);
     copy::<
       (# do <<SLOT GUIENVcPixmapCopy: descriptor>> #);
     writeToPPMfile:
       (# ppmfilename: ^text;
          rawbits: @boolean; (* If true, the RAWBITS format is used *)
       enter (ppmfilename[], rawbits)
       do <<SLOT GUIENVcPixmapWriteToPPMfile: descriptor>>;
       #);
     readFromPPMfile:
       (# ppmfilename: ^text;
       enter ppmfilename[]
       do <<SLOT GUIENVcPixmapReadFromPPMfile: descriptor>>;
       #);
     (* Private *)
     cPixmapPrivatePart: @ <<SLOT GUIENVcPixmapPrivatePart: descriptor>>;
  #) (* compressedPixmap *);
