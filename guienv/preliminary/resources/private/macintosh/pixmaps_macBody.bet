ORIGIN '../pixmapsBody';
INCLUDE '../../../../private/macintosh/pixmapbody';
INCLUDE '~beta/maclib/icons';

-- loadIconResourceImpl: doPart --
do (# iconSuiteHandle: @longInt;
		err: @integer;
	do (if ID <> 0 then
			(iconSuiteHandle[], ID, kSelectorAllAvailableData)
				-> GetIconSuite
				-> err;
			(if err = 0 then
				(if iconSuiteHandle <> NIL then
					iconSuiteHandle -> THIS(pixmap).iconSuite;
				else
				   (# msg: ^text;
				   do &text[] -> msg[];
				      'The icon resouce with ID ' -> msg.putText;
				      ID -> msg.putInt;
				      ' is missing.' -> msg.putText;
				      msg[] -> error;
				   #);
				if);
			else
		     (# msg: ^text;
			  do &text[] -> msg[];
			     'The icon resouce with ID ' -> msg.putText;
		         ID -> msg.putInt;
			      ' could not be fetched because of error ' -> msg.putText;
			      err -> msg.putInt;
			      '.' -> msg.putText;
			      msg[] -> error;
			   #);
			if);
		else
			(if name[] <> NONE then
			   name[] -> read
			     (# error::
			          (#
			          do what[] -> this(loadIconResource).error;
			          #);
			     #);
			 if);
	   if);
   #);
   
-- loadBitmapResourceImpl: doPart --
do 
   
