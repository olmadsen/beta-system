============================
 Mangler ved implementation
============================

De følgende patterns er ikke implementeret:

  WindowItem.print
  ClipBoard
  DefaultButton

Der er følgende kendte fejl i implementationen:

---------------------------------------------------------------------------
Fra Michael Lassen: 

OnEnbleTarget bliver nogen gange kald på et objekt, som ikke burde
være target. Gerne i fobindelse med activate/ deactivate.

---------------------------------------------------------------------------
Fra Michael Lassen:

Man kan ikke instantiere ScrollList (man skal bruge textScrollList)

Bør textScrollList ikke omdøbes til scrollList? - man har jo aligevel
ikke mulighed for andre slags lister!

---------------------------------------------------------------------------
Fra Søren Brandt:
      Keyboard acceleratorer virker tilsyneladende lidt efter lyst. I 
      nedenstaaende kode eksempel (fra '~beta/debugger/v2.0/test/veu.bet')
      sker det ofte at keyboard shortcut'et fejler (Ctrl-W) selvom det
      virker fint at vaelge menu-indgangen med musen.

Michael:
Dette problem kan jeg ikke umiddelbart gennemskue grunden til.

----------------------------------------------------------------------

Fra Søren Brandt:

1. En textscrolllist gaar til tider i "auto-scroll-mode" uden at jeg har bedt
   den om det. Det sker tilsyneladende naar nye elementer tilfoejes eller 
   fjernes fra listen.

--------------------------------------------------------------------------
Fra Elmer Sandvad:

clear i textfield virker ikke som beskrevet i manualen, 
den sletter vist kun et tegn, og ikke hele selektion

---------------------------------------------------------------------------
Fra Søren Brandt:

Bugs:

  1. I visse situationer skal man huske at appende et menuitem til menuen 
     *inden* man forsoeger at saette navnet paa dette menuitem. Dvs:

          foo: menuitem
             (# open:: 
                  (#
                  do 'foo'->name;
                     THIS(foo)[]->themenu.append
                  #)
             #)

     gaar somme tider galt (reference is none), mens

          foo: menuitem
             (# open:: 
                  (#
                  do THIS(foo)[]->themenu.append;
	             'foo'->name;
                  #)
             #)

     er ok.
    
     Problemet opstaar vistnok hvis menuen har vaeret clearet, og man 
     derefter appender nye menuitems til den. Ellers gaar begge ovenstaaende
     godt.

---------------------------------------------------------------------------
Fra Elmer Sandvad:

naar man doubleclicker i en texteditor (guienv/v1.2), 
udvides selectionen typisk automatisk.

Hvis man f.eks. klikker paa i'et i "fisk:" saa vil hele "fisk:" blive
valgt. Kan man slaa det fra?


----------------------------------------------------------------------------
Fra Michael Lassen:

Ticks bør være millisekunder i stedet for 1/60 sekunder i GUIenv.

----------------------------------------------------------------------------
Fra Michael Lassen:

OnTextChanged/ OnBeforeChange i TextField bør ikke kaldes i
forbindelse med sættelse af contents.

----------------------------------------------------------------------------
Fra Michael Lassen:

EditText bør have forskellige attributter til styring af
indholdet. Evt. OnBeforeChange ligesom textField.

----------------------------------------------------------------------------
Fra Henry Michael:

Nyt ord for guienv.canvas: "pane". (bruges allerede til S|rens gruppevindue)
Peter: Eller "manager".

----------------------------------------------------------------------------
Fra Peter Andersen:

Konverter avancerede demoer fra motifenv til guienv.

----------------------------------------------------------------------------
Fra Peter Andersen:

Errorhandler (fra bifrost).

----------------------------------------------------------------------------
Fra Lennert Slot:

fields.bet:
I kommentaren til textField.insert staar der at operationen ikke paavirker
selektionen. Det er saavidt jeg kan se ikke rigtigt.

----------------------------------------------------------------------------
Fra Niels Jacobsen:

|nske om at kunne lave multipel selektion i lister.

----------------------------------------------------------------------------
Fra Lennert Sloth:

3)) optionButton.
   Flg. program viser problem med stoerelsen af den label som viser
   current item.
   Hvis "theMenu1[] -> theoptionButton.popupMenu;" flyttes til "open" i
   theOptionButton virker det som forventet.
   Problemet er - som for currentitem (se koden for denne) - at popupmenu
   skal v{re specificeret f|r man kan lave noget fornuftigt med optionknappen.

ORIGIN '~beta/guienv/v1.2/guienv';
INCLUDE '~beta/guienv/v1.2/controls';

-- program: descriptor --
guienv
(# 
   theWindow: @window
     (# theMenu1: @menu
          (# item1: @menuItem
               (# eventHandler::
                    (# onSelect::
                         (# do 'item1 selected!' -> putline; #);
                    #);
                  open::
                    (# do 'A very long item name.' -> name; #);
               #);
             open::
               (# 
               do 'Menu1' -> name;
                  item1.open; item1[] -> append;
               #);
          #); (* theMenu1 *)
        
        menuBarType:: standardMenubar
          (# fileMenu::
               (# quitItem: @menuitem
                    (# open::
                         (# do 'Quit' -> name; #);
                       eventHandler::
                         (# onSelect::
                              (# do Terminate #);
                         #);
                    #);
                  open::
                    (# 
                    do 'File' -> name;
                       quitItem.open; quitItem[] -> append;
                    #);
               #);
          #); (* menuBarType *)
        
        theOptionButton: @optionButton
          (# open::
               (# 
               do 'Tools:' -> label;
                  
                  (50,24) -> size; 
                  (10,10) -> position;
               #);
          #);
        open::
          (# 
          do (400,200) -> size;
             theMenu1.open;
             theOptionButton.open;
             theMenu1[] -> theoptionButton.popupMenu;
          #);
     #); (* theWindow *)
do theWindow.open;
#)

---------------------------------------------------------------------------
From numerous people:

menuitem.{enable,disable} (a la menu)
Some of it is implemented in utils/simplemenu.

---------------------------------------------------------------------------

Why not use gadgets instead of widgets?

---------------------------------------------------------------------------

Attempt to use ToggleButton in menuitems with checkmark.

---------------------------------------------------------------------------

Add menuBar.insert:
Will insert a menu at a specified position in the menubar.

Impl.:

In private define:

insertPosFunc: XmOrderFunc
  (# do insertpos -> value #);
insertPos: @integer;

and give this to the resource XmNinsertPosition.

MenuBar.append should then set private.insertpos to 0.
MenuBar.insert should then set private.insertpos to the requested index.

---------------------------------------------------------------------------

Search for all '@@' and check they are correct.

---------------------------------------------------------------------------

From henryml:

Jeg har følgende ændrings-forslag til GUIenv:

1) Window's contents:

Window har en attribut "contents", som er en instans af Canvas hvori
alle vinduets grafiske objekter befinder sig:

Den gamle uelegante måde:

    window: interfaceObject
      (# ...
         contents:
           (# theContents: ^canvas;
           ...
           exit theContents[]
           #);
      #);

Det nye smarte forslag:

    window: interfaceObject
      (# ...
         contentsType:< windowItem;
         contents: @windowItem;
      #);

A) Dette vil give mulighed for at viderbinde events i contents.

B) Det give mulighed for at skrive følgende:

   textEditorWindow: @window
     (# contentsType:: TextEditor
     #);
   staticTextWindow: @window
     (# contentsType:: staticText
     #)

Det ser da smart ud ikke :-)

C) Det skal selvfølgelig følges op af en lille oprydning i window's
eventHandler: fx vil onMouseUp være redundant, da det man lige så godt
kan bruge:

   theWindow: @window
     (# contentsType::
          (# eventHandler::
               (# onMouseUp::
                    (#
                    do (* Gør hvad der skal gøres, når man klikker 
                          i "contents" af vinduet. *)
                     #)
                #)
           #)
     #)

Og det er oven i købet mere logisk!

---------------------------------------------------------------------------

From jlk:

Hvis det er, mener jeg, at vi i v1.4 skal have indf|re en initialFrame
virtual i interfaceObject:

        interfaceObject:
          (# initialFrame:<
                (# f: @rectangle
                do INNER
                exit f
                #);
             ...
          #)

s}ledes at disse overfl|dige ((0,0),(100,100)) assignments afskaffes.

---------------------------------------------------------------------------

from jlk:

Vi skal have indf|rt en m}de at kontrollere hvilke scrollbar-strategi
der kan anvendes (ingen horiz./vert., kun scrollbars vist, n}r behov,
etc.)

---------------------------------------------------------------------------

from ess:

jeg vil gerne kunne lave shortcuts med store bogstaver, 
men det viker tilsyneladende ikke

---------------------------------------------------------------------------

From Anders Jacob Truelsen:

jeg har lavet et par guienv utilities til layout-hjælp når man ikke
gider starte interfacebuilderen.

Jeg synes selv det er smart... (kommentarer ønskes !)

buttonLib:
fitToLabel - sætter en buttons 'size' så den passer til labelen.

windowitemLib:
positionRight - giver en position til højre for objektet. Objektet er
rettet ind efter øverste kant. Afstanden er object egen kant-afstand
(myBorder) plus evt. et extra mellemrum (spacing). 

positionUnder - som positionRight med ventre kant på linje.

Måske er det nemmere bare at læse koden :}
guienvLayoutHelp.bet:


ORIGIN '~beta/guienv/v1.3.1/controls';
--- buttonLIB: attributes ---
(* set the size of a button to match the text in the label *)
fitToLabel:
  (# ts: ^textStyle;
  do style->ts[];
     ((label->ts.widthOfText)+5,ts.lineHeight+3) -> size;
  #);

--- windowitemLib: attributes ---
positionGenerator:
  (# mySize,myPos,res: @Point;
     spacing: @integer;
     myBorder:< integerValue(# do 1 -> value; INNER #);
  enter spacing
  do this(windowItem).size -> mySize;
     this(windowItem).position -> myPos;
     INNER;
  exit res
  #);
positionRight: positionGenerator
(* return the position of a windowitem to be 3+ points to the right of *)
(* this windowitem but alligned horizontally by the top egde *)
(# myBorder:: (# do 3 -> value #);
do (myPos.h + mySize.h + myBorder + spacing,myPos.v) -> res; 
#);

positionUnder: positionGenerator
(* return the position of a windowitem to be 3+ points under *)
(* this windowitem but alligned vertically by the left egde *)
(# do (myPos.h, myPos.v + mySize.v + myBorder + spacing) -> res; #);


---------------------------------------------------------------------------

from jlk:

Jeg har netop haft en situation, hvor jeg ville scanne en menu, hvor
jeg havde meniItems, som var en specialisering af menuItem:

        myMenuItem: menuItem
          (# x: ...
          #),

og jeg ville s} naturligvis skrive:

        myMenu.scan(# do current.x ... #);

Men det kan jeg ikke, for current er kvalificeret med menuItem.

Jeg vil foresl}, at menu defineres ved:

        menu:
          (# menuItemType:< menuItem;
             ...
             scan:
                (# current: ^menuItemType ... #)
             ... (* resten af ref. til menuItem skal naturligvis
                  * ogs} {ndres til menuItemType *)
          #);

---------------------------------------------------------------------------

from ess:

Jeg vil gerne kunne detektere naar en curtor-tast bliver aktiveret
i guienv, det kan man vist ikke nu?

---------------------------------------------------------------------------
Subject: Et par ting til guienv design listen

1) mulighed for at fjerne horizontal (og vertical) scriollbar i
scroller (incl. texteditor), samt scrolllist's.  Forslag 

e.g. te: @texteditor
        (# hScroll:: falseObject;
        #);

2) mulighed for at scrolle en texteditor/scrolllist explicit -
bla. til brug for at scrolle to scrolllist's synkront.
        te1, te2: @scrolllist;

        te1.hScrollPos->te2.hScrollTo;

   (hScrollPos returnerer 'current scroll position', evt. er det en %angivelse).

3) mulighed for at s{tte size af en optionButton (virker pt. ikke
p}n{r hvis new size=preferredSize :-)

4) mulighed for at undlade label p} en optionButton - skal blot lave
pr{cist som ved iconbutton - jeh kan ikke lige nu huske hvordan det er
ved iconButton, men muligheder er der :-)

That's all for this time...

--- jlk

---------------------------------------------------------------------

Hej, jeg vil gerne have tilføjet nedenstående til ~beta/guienv/v1.3.1/utils.

-- Lennert

1) Et nyt fragment der hedder rasteradds.bet. 
rasteradds.bet ser ud som følger:
(* rasteradds.bet begin *)
ORIGIN '../guienv';
BODY 'private/rasteraddsbody';
INCLUDE '../raster';

-- guienvlib: attributes --
iconResource: bitmap
  (# <<SLOT bitmapLib: attributes>>;
     loadById:
       (# id: @integer;
       enter id
       do <<SLOT iconLoadById: descriptor>>
       #);
  #);

bitmapResource: bitmap
  (# <<SLOT bitmapLib2: attributes>>;
     loadById:
       (# id: @integer;
       enter id
       <<SLOT bitmapResLoadById: doPart>>
       #);
  #);
(* end of rasteradds.bet *)

2) En tilføjelse til graphicsadds.bet 

INCLUDE 'rasteradds';

drawIconResource:
  (# r: ^iconResource;
     h,v: @integer;
  enter (r[],h,v)
  <<SLOT graphicsDrawIcon: doPart>>

  #);

3) Flg. tilføjelser til guienvadds.bet

-- windowItemLib: attributes --
bringBack:
  (#
  <<SLOT windowItemBringToBack: doPart>>
  #);

-- windowLib: attributes --

 launchFile:
   (# fileName: ^text;
   enter fileName[]
   do <<SLOT windowLaunchFile: descriptor>>
   #);

 setWindowIcon:
   (# id: @integer;
   enter id
   <<SLOT GUIENVsetWindowIcon: doPart>>
   #);

 setApplIcon:
  (# id: @integer;
   enter id
   <<SLOT GUIENVsetApplIcon: doPart>>
  #)
--
Lennert Sloth
-------------------------------------------------------------------------------

Hej.

Jeg foreslår, at drawRaster i graphics får en ekstra enter parameter, som
angiver en "transparent" farve. De dele af raster'en som har den pågældende
farve skal så tegnes således, at bagrunden ikke overtegnes.

Er det til at lave på X11 hhv. Mac?

-- Lennert

-------------------------------------------------------------------------------
