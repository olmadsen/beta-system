ORIGIN 'raster_ntiprivate';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1994-96
 *       All rights reserved.
 *)
MAKE default 'external/loadBitmapFile.make';
OBJFILE default '$/loadBitmapFile.obj';
INCLUDE 'guienv_ntiprivate';
INCLUDE '~beta/win32lib/v1.2/errorhandling';
INCLUDE '~beta/win32lib/v1.2/windowmanagement';
INCLUDE '~beta/win32lib/v1.2/windowsmisc';
INCLUDE '~beta/win32lib/v1.2/wingdi';
INCLUDE '~beta/sysutils/v1.6/cstring';

-- GUIENVrasterInit: descriptor --
(#
do inner init;
#)

-- GUIENVrasterDispose: descriptor --
(# result: @integer;
do inner dispose;
   (if isIcon then
    else
       handleToBitmap -> DeleteObject -> result;
       (if result=0 then
           'rasterDispose failed: Errorcode: ' -> puttext;
           GetLastError -> putint; newline;
       if);
   if);
#)

-- GUIENVrasterWidth: descriptor --
(#
do rasterWidth -> value;
#)

-- GUIENVrasterHeight: descriptor --
(#
do rasterHeight -> value;
#)

-- GUIENVrasterSetHotspot: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVrasterGetHotspot: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVrasterPutPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVrasterGetPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVrasterCopy: descriptor --
(#
do (* not implemented *)
#)

-- bitmapLib: attributes --
loadDIBitmapFile: external
  (# hdc: @integer;
     filename: @integer;
     hbitmap: @integer;
  enter filename
  do 'LoadDIBitmapFile'->callC
  exit hbitmap
  #);

bitMapGetWidth: external
  (# hBitmap: @integer;
     width: @integer;
  enter hBitmap
  do 'bitMapGetWidth' -> callC
  exit width
  #);
bitMapGetHeight: external
  (# hBitmap: @integer;
     height: @integer;
  enter hBitmap
  do 'bitMapGetHeight' -> callC
  exit height
  #);

-- GUIENVbitmapInit: descriptor --
(#
do (* not implemented *)
   inner init;
#)

-- GUIENVbitmapDispose: descriptor --
(#
do (* not implemented *)
   inner dispose;
#)

-- GUIENVbitmapPutPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitmapGetPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitMapCopy: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitmapWriteToPBMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitmapReadFromPBMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitmapWriteToX11file: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVbitmapReadFromX11file: descriptor --
(# cstr: @cstring; hBitmap,hWnd: @integer; hdc: @integer;
   didRelease: @integer;
do GetDesktopWindow -> hWnd;
   hWnd -> GetDC -> hdc;
   (if hdc=0 then
       'bitmapReadFromX11file failed. Errorcode: ' -> puttext;
       GetLastError -> putint; newline;
    else
       fileName[] -> cstr.set;
       cstr.charPtr -> loadDIBitmapFile-> hBitmap -> handleToBitmap;
       (if handleToBitmap=0 then
           'LoadBitmapFile failed for: ' ->puttext;
           fileName[] -> putline;
       if);
       
       hBitmap -> bitMapGetWidth -> rasterWidth;
       hBitmap -> bitMapGetHeight -> rasterHeight;
       
       (hWnd, hdc) -> ReleaseDC -> didRelease;
       (if didRelease=0 then
           'readfromX11. Did not release DC!!!' -> putline;
       if);
       cstr.free;
   if); 
#)

-- GUIENVbitmapPrivatePart: descriptor --
(#
#)

-- GUIENVgraymapInitBody: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgrayMapDispose: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapPutPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapGetPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapCopy: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapWriteToPGMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapReadFromPGMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVgraymapPrivatePart: descriptor --
(#
#)

-- GUIENVinitPixmap: descriptor --
(#
do (* not implemented *)
   inner init;
#)

-- GUIENVpixmapDispose: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapPutPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapGetPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapCopy: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapWriteToPPMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapReadFromPPMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapWriteToX11file: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapReadFromX11file: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVpixmapPrivatePart: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapInitBody: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapDispose: descriptor --
(#
do (* not implemented *)
   inner dispose;
#)

-- GUIENVcPixmapPutPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapGetPixel: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapCopy: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapWriteToPPMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapReadFromPPMfile: descriptor --
(#
do (* not implemented *)
#)

-- GUIENVcPixmapPrivatePart: descriptor --
(#
do (* not implemented *)
#)
