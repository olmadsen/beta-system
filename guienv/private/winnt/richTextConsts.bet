ORIGIN '~beta/guienv/v1.5/fields';
INCLUDE '~beta/win32lib/v1.2/winuserconsts';
BUILD nti '$$/richEditFontStuff.obj' 'external/richEditFontStuff.c' 'betacc $0 $1';

-- lib: attributes --
memset: external
  (# dest,c,count: @integer;
     result: @integer;
  enter (dest,c,count)
  do callC;
  exit result
  #);

CommDlgExtendedError: external
  (# errorCode: @integer;
  do callStd;
  exit errorCode
  #);

sizeof_TCHAR: external
  (# size: @integer;
  do callC;
  exit size
  #);

calFormat: external
  (# hf: @integer;
     format: @integer;
  enter hf
  do callC
  exit format
  #);

-- textFieldLib: attributes --
(* COMMDLG.H  *)
CF_EFFECTS: (# exit 0x00000100 #);

SIMULATED_FONTTYPE: (# exit    0x8000 #);
PRINTER_FONTTYPE: (# exit      0x4000 #);
SCREEN_FONTTYPE: (# exit       0x2000 #);
BOLD_FONTTYPE: (# exit         0x0100 #);
ITALIC_FONTTYPE: (# exit       0x0200 #);
REGULAR_FONTTYPE: (# exit      0x0400 #);

CF_SCREENFONTS: (# exit              0x00000001 #);
CF_INITTOLOGFONTSTRUCT: (# exit      0x00000040 #);
CF_LIMITSIZE: (# exit                0x00002000 #);

(* WINGDI.H *)
DRAFT_QUALITY: (# exit 1 #);

(* RICHEDIT.H *)
EM_CANPASTE: (# exit (WM_USER + 50) #);               
EM_EXGETSEL: (# exit WM_USER + 52 #);
EM_EXLINEFROMCHAR: (# exit (WM_USER + 54) #);
EM_EXSETSEL: (# exit (WM_USER + 55) #);
EM_FORMATRANGE: (# exit (WM_USER + 57) #);
EM_GETCHARFORMAT: (# exit (WM_USER + 58) #);
EM_SETCHARFORMAT: (# exit (WM_USER + 68) #);
EM_STREAMIN: (# exit WM_USER + 73 #);
EM_STREAMOUT: (# exit WM_USER + 74 #);

EM_POSFROMCHAR: (# exit 16x00D6 #);

SFF_SELECTION: (# exit 0x8000 #);

SF_TEXT: (# exit 0x0001 #);
SF_RTF: (#  exit 0x0002 #);

SCF_SELECTION: (# exit 0x0001 #);
SCF_WORD: (# exit 0x0002 #);

(* CHARFORMAT masks *)
CFM_BOLD: (# exit 		0x00000001 #);
CFM_ITALIC: (# exit 		0x00000002 #);
CFM_UNDERLINE: (# exit 	0x00000004 #);
CFM_STRIKEOUT: (# exit 	0x00000008 #);
CFM_PROTECTED: (# exit 	0x00000010 #);
CFM_SIZE: (# exit 		0x80000000 #);
CFM_COLOR: (# exit 		0x40000000 #);
CFM_FACE: (# exit 		0x20000000 #);
CFM_OFFSET: (# exit 		0x10000000 #);
CFM_CHARSET: (# exit 		0x08000000 #);

(* CHARFORMAT effects *)
CFE_BOLD: (# exit 0x0001 #);
CFE_ITALIC: (# exit 0x0002 #);
CFE_UNDERLINE: (# exit 0x0004 #);
CFE_STRIKEOUT: (# exit 0x0008 #);
CFE_PROTECTED: (# exit 0x0010 #);
(* NOTE: CFE_AUTOCOLOR corresponds to CFM_COLOR, which controls it *)
CFE_AUTOCOLOR: (# exit 0x40000000 #);

CFM_EFFECTS: (# exit (CFM_BOLD+CFM_ITALIC+CFM_UNDERLINE+CFM_STRIKEOUT) #);

yHeightCharPtsMost: (# exit 1638 #);

E_NOTIMPL: (# exit 16x80004001 #);
E_FAIL: (# exit 0x80000008 #);
NOERROR: (# exit S_OK #);
S_OK: (# exit 16x00000000 #);
S_FALSE: (# exit 16x00000001 #);
HFILE_ERROR: (# exit -1  #);

ntPOINT2: ExternalRecord
  (# 
     x: @long (# pos::< (# do 0 -> value; #); #); (* int x *)
     y: @long (# pos::< (# do 4 -> value; #); #); (* int y *)
  enter(x,y)
  exit(x,y)
  #);

ntRECT2: ExternalRecord
  (# 
     left: @long (# pos::< (# do 0 -> value; #); #); (* int left *)
     top: @long (# pos::< (# do 4 -> value; #); #); (* int top *)
     right: @long (# pos::< (# do 8 -> value; #); #); (* int right *)
     bottom: @long (# pos::< (# do 12 -> value; #); #); (* int bottom *)
  #);

CHARRANGE: ExternalRecord
  (# cpMin: @long (# pos::< (# do 0 -> value; #); #); 
     cpMax: @long (# pos::< (# do 4 -> value; #); #); 
  #);

sizeOfCharRange: (# exit 8 #);

CHARFORMAT: ExternalRecord
  (# cbSize: @long (# pos::< (# do 0 -> value; #); #); 
     dwMask: @long (# pos::< (# do 4 -> value; #); #); 
     dwEffects: @long (# pos::< (# do 8 -> value; #); #); 
     yHeight: @long (# pos::< (# do 12 -> value; #); #); 
     yOffset: @long (# pos::< (# do 16 -> value; #); #); 
     crTextColor: @long (# pos::< (# do 20 -> value; #); #); 
     bCharSet: @byte (# pos::< (# do 24 -> value; #); #);
     bPitchAndFamily: @byte (# pos::< (# do 25 -> value; #); #); 
     szFaceName: @byte (# pos::< (# do 26 -> value; #); #); 
  #);

sizeOfCharFormat: external
  (# size: @integer;
  do callC;
  exit size
  #);

CHOOSEFONT: ExternalRecord
  (# lStructSize: @long (# pos::< (# do 0 -> value; #); #); 
     hwndOwner: @long (# pos::< (# do 4 -> value; #); #); 
     hDC: @long (# pos::< (# do 8 -> value; #); #); 
     lpLogFont: @long (# pos::< (# do 12 -> value; #); #); 
     iPointSize: @long (# pos::< (# do 16 -> value; #); #); 
     Flags: @long (# pos::< (# do 20 -> value; #); #); 
     rgbColors: @long (# pos::< (# do 24 -> value; #); #); 
     lCustData: @long (# pos::< (# do 28 -> value; #); #); 
     lpfnHook: @long (# pos::< (# do 32 -> value; #); #); 
     lpTemplateName: @long (# pos::< (# do 36 -> value; #); #); 
     hInstance: @long (# pos::< (# do 40 -> value; #); #); 
     lpszStyle: @long (# pos::< (# do 44 -> value; #); #); 
     nFontType: @short (# pos::< (# do 48 -> value; #); #); 
     ___MISSING_ALIGNMENT__: @short (# pos::< (# do 50 -> value; #); #); 
     nSizeMin: @long (# pos::< (# do 52 -> value; #); #); 
     nSizeMax: @long (# pos::< (# do 56 -> value; #); #); 
  #);

sizeOfChooseFont: external
  (# size: @integer;
  do callC;
  exit size
  #);

LOGFONT2: ExternalRecord
  (# lfHeight: @long (# pos::< (# do 0 -> value; #); #);  
     lfWidth: @long (# pos::< (# do 4 -> value; #); #);  
     lfEscapement: @long (# pos::< (# do 8 -> value; #); #);  
     lfOrientation: @long (# pos::< (# do 12 -> value; #); #);  
     lfWeight: @long (# pos::< (# do 16 -> value; #); #);  
     lfItalic: @byte (# pos::< (# do 20 -> value; #); #);  
     lfUnderline: @byte (# pos::< (# do 21 -> value; #); #);  
     lfStrikeOut: @byte (# pos::< (# do 22 -> value; #); #);  
     lfCharSet: @byte (# pos::< (# do 23 -> value; #); #);  
     lfOutPrecision: @byte (# pos::< (# do 24 -> value; #); #);  
     lfClipPrecision: @byte (# pos::< (# do 25 -> value; #); #);  
     lfQuality: @byte (# pos::< (# do 26 -> value; #); #);  
     lfPitchAndFamily: @byte (# pos::< (# do 27 -> value; #); #);  
     lfFaceName: @byte (# pos::< (# do 28 -> value; #); #);
  #);
sizeOfLogFont: external
  (# size: @integer;
  do callC;
  exit size
  #);
