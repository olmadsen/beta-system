ORIGIN 'guienv_ntibody';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1994-95
 *       All rights reserved.
 *)

-- drawborderbody: descriptor --
(# lColor,dColor: @integer;
   lightRed,lightGreen,lightBlue: @integer;
   darkRed,darkGreen,darkBlue: @integer;
   darkColor:  
     (# 
     enter (darkRed,darkGreen,darkBlue)
     exit (darkRed,darkGreen,darkBlue)
     #);
   lightColor: 
     (# 
     enter (lightRed, lightGreen, lightBlue) 
     exit (lightRed, lightGreen, lightBlue) 
     #);
   
   (* These constants must be moved to win32api winuserconsts.bet when a new
    * version is made. *)
   COLOR_3DLIGHT: (# exit 22 #);
   COLOR_3DSHADOW: (# exit  COLOR_BTNSHADOW #);
do (if getOsVersionId=VER_PLATFORM_WIN32_NT then
       COLOR_WINDOW -> GetSysColor -> lColor;
       lColor -> tos'%getByte[0]' -> lightRed;
       lColor -> tos'%getByte[1]' -> lightGreen;
       lColor -> tos'%getByte[2]' -> lightBlue;
       
       (if lightRed > 249 then
           (* 16xC8 -> lightRed; 16xC8 -> lightGreen; 16xC8 -> lightBlue; *)
           16xC0 -> lightRed; 16xC0 -> lightGreen; 16xC0 -> lightBlue;
        else
           (if lightRed + 48 > 255 then 
               255 -> lightRed 
            else 
               lightRed + 48 -> lightRed; 
           if);
           (if lightGreen + 48 > 255 then 
               255 -> lightGreen 
            else 
               lightGreen + 48 -> lightGreen; 
           if);
           (if lightBlue + 48 > 255 then 
               255 -> lightBlue 
            else 
               lightBlue + 48 -> lightBlue; 
           if);
       if);
       
       (* (16x80, 16x80, 16x80) -> darkColor; *)
       COLOR_BTNSHADOW -> GetSysColor -> dColor;
       dColor -> tos'%getByte[0]' -> darkRed;
       dColor -> tos'%getByte[1]' -> darkGreen;
       dColor -> tos'%getByte[2]' -> darkBlue;
    else
       COLOR_3DLIGHT -> GetSysColor -> lColor;
       lColor -> tos'%getByte[0]' -> lightRed;
       lColor -> tos'%getByte[1]' -> lightGreen;
       lColor -> tos'%getByte[2]' -> lightBlue;
       
       COLOR_3DSHADOW -> GetSysColor -> dColor;
       dColor -> tos'%getByte[0]' -> darkRed;
       dColor -> tos'%getByte[1]' -> darkGreen;
       dColor -> tos'%getByte[2]' -> darkBlue;
   if);
   
   theWindowItem.graphics
   (# 
   do (if theStyle
       //1 then
          darkColor -> pen.foregroundColor;
          (x+width,y) -> MoveTo;
          (x,y) -> drawTo;
          (x,y+height-1) -> drawTo;
          (x+width-1,y+height-1) -> drawTo;
          (x+width-1,y) -> drawTo;
          
       //4 then
          darkColor -> pen.foregroundColor;
          (x+width,y) -> MoveTo;
          (x,y) -> drawTo;
          (x,y+height) -> drawTo;
          
          (x+width-2,y+1) -> MoveTo;
          (x+1,y+1) -> drawTo;
          (x+1,y+height-1) -> drawTo; 
          
          lightColor -> pen.foregroundColor;
          (x+1,y+height-1) -> moveTo;
          (x+width-1,y+height-1) -> drawTo;
          (x+width-1,y) -> drawTo; 
          
          (x+2,y+height-2) -> moveTo;
          (x+width-2,y+height-2) -> drawTo;
          (x+width-2,y+1) -> drawTo; 
       //5 then
          lightColor -> pen.foregroundColor;
          (x+width,y) -> moveTo;
          (x,y) -> drawTo;
          (x,y+height) -> drawTo;
          
          (x+width-2,y+1) -> moveTo;
          (x+1,y+1) -> drawTo;
          (x+1,y+height-1) -> drawTo;
          
          darkColor -> pen.foregroundColor;
          (x+1,y+height-1) -> moveTo;
          (x+width-1,y+height-1) -> drawTo;
          (x+width-1,y) -> drawTo; 
          
          (x+2,y+height-2) -> moveTo;
          (x+width-2,y+height-2) -> drawTo;
          (x+width-2,y+1) -> drawTo; 
       //3 then
          (* topHdc - black *)
          darkColor -> pen.foregroundColor;
          (x+width,y) -> moveTo;
          (x,y) -> drawTo;
          (x,y+height) -> drawTo;
          
          (x+2,y+height-2) -> moveTo;
          (x+width-2,y+height-2) -> drawTo;
          (x+width-2,y+1) -> drawTo; 
          
          lightColor -> pen.foregroundColor;
          (x+width-1,y+1) -> moveTo;
          (x+1,y+1) -> drawTo;
          (x+1,y+height-1) -> drawTo;
          
          (x+1,y+height-1) -> moveTo;
          (x+width-1,y+height-1) -> drawTo;
          (x+width-1,y) -> drawTo;
          
       //2 then
          (* bottomHdc - black *)
          lightColor -> pen.foregroundColor;
          (x+width-2,y) -> moveTo;
          (x,y) -> drawTo;
          (x,y+height) -> drawTo;
          
          (x+1,y+height-2) -> moveTo;
          (x+width-2,y+height-2) -> drawTo;
          (x+width-2,y) -> drawTo;        
          
          darkColor -> pen.foregroundColor;
          (x+width-3,y+1) -> moveTo;
          (x+1,y+1) -> drawTo;
          (x+1,y+height-1) -> drawTo;
          
          
          (x,y+height-1) -> moveTo;
          (x+width-1,y+height-1) -> drawTo;
          (x+width-1,y-1) -> drawTo;                    
      if);
   #)
#)
