ORIGIN '../graphicsbody'
[[
-- Include 'uienv_macprivate'
-- Include 'raster_macprivate'
-- Include 'quickdrawstuff'
-- graphicsLib: attributes --


-- UIENVgraphicsPenSize: descriptor --
(#
do (width,height) -> PenSize;
#)

-- UIENVgraphicsPenForegroundColor: descriptor --
(#
do (* Not Implemented !!! *)
#)

-- UIENVgraphicsPenBackgroundColor: descriptor --
(#
do (* Not Implemented !!! *)
#)

-- UIENVgraphicsPenStipple: descriptor --
(# data: [2] @integer;
do	(if b.isPixPat//true then
		(* Not Implemented !!! *)
	else
		b.patternData -> data;
		@@data[1] -> PenPat;
	if);
#)

-- UIENVgraphicsPenMode: descriptor --
(# qdMode: @integer;
do (if m[]
		//transferModes.copy[] then srcCopy -> qdMode;
      //transferModes.invertCopy[] then notSrcCopy -> qdMode;
		//transferModes.erase[] then srcBic -> qdMode;
		//transferModes.andBlend[] then 0 -> qdMode;
		//transferModes.orBlend[] then srcOr -> qdMode;
		//transferModes.xorBlend[] then srcXor -> qdMode;
		//transferModes.notAndBlend[] then 0 -> qdMode;
		//transferModes.notOrBlend[] then notSrcOr -> qdMode;
	if);
	qdMode -> PenMode;
#)

-- UIENVgraphicsStyle: descriptor --
(#
do	theTextStyle.familyID -> TextFont;
	theTextStyle.size -> TextSize;
	theTextStyle.face -> TextFace;
#)

-- UIENVgraphicsMove: descriptor --
(#
do	(p.h,p.v) -> Move;
#)

-- UIENVgraphicsMoveTo: descriptor --
(#
do (p.h,p.v) -> MoveTo;
#)

-- UIENVgraphicsDraw: descriptor --
(#
do	(p.h,p.v) -> Line;
#)

-- UIENVgraphicsDrawTo: descriptor --
(#
do (p.h,p.v) -> LineTo;
#)

-- UIENVgraphicsDrawSpot: descriptor --
(#
do	savePenState
		(#
		do (1,1) -> PenSize;
			(p.h,p.v) -> MoveTo;
			(p.h,p.v) -> LineTo;
		#);
#)

-- UIENVgraphicsDrawLine: descriptor --
(#
do	savePenState
		(#
		do (p1.h,p1.v) -> MoveTo;
			(p2.h,p2.v) -> LineTo;
		#);
#)

-- UIENVgraphicsDrawText: descriptor --
(# DrawText: External 
		(# ptr: @Integer;
			firstByte,byteCount: @ShortInt; 
		enter (ptr,firstByte,byteCount)
		do '$A885' -> PascalTrap;
		#);
do	(@@t.T[1],0,t.lgth) -> DrawText;
#)

-- UIENVgraphicsDrawPolygon: descriptor --
(# macPoly: @integer;
do	points[] -> makeMacPoly -> macPoly;
	macPoly -> FramePoly;
	macPoly -> KillPoly;
#)

-- UIENVgraphicsDrawRect: descriptor --
(#
do	r[] -> makeMacRect -> FrameRect;
#)

-- UIENVgraphicsDrawRoundRect: descriptor --
(#	mr: ^macRect;
	width,height: @integer;
do r[] -> makeMacRect -> mr[];
	roundNess.size -> (width,height);
	(mr[],width,height) -> FrameRoundRect;
#)

-- UIENVgraphicsDrawOval: descriptor --
(#	mr: ^macRect;
do r[] -> makeMacRect -> FrameOval;
#)

-- UIENVgraphicsDrawSlice: descriptor --
(# mr: ^macRect;
do r[] -> makeMacRect -> mr[];
	(mr[],fromAngle,toAngle) -> FrameArc;
#)

-- UIENVgraphicsFillPolygon: descriptor --
(# macPoly: @integer;
do	points[] -> makeMacPoly -> macPoly;
	macPoly -> PaintPoly;
	macPoly -> KillPoly;
#)

-- UIENVgraphicsFillRect: descriptor --
(#
do	r[] -> makeMacRect -> PaintRect;
#)

-- UIENVgraphicsFillRoundRect: descriptor --
(#	mr: ^macRect;
	width,height: @integer;
do r[] -> makeMacRect -> mr[];
	roundNess.size -> (width,height);
	(mr[],width,height) -> PaintRoundRect;
#)

-- UIENVgraphicsFillOval: descriptor --
(#	mr: ^macRect;
do r[] -> makeMacRect -> PaintOval;
#)

-- UIENVgraphicsFillSlice: descriptor --
(# mr: ^macRect;
do r[] -> makeMacRect -> mr[];
	(mr[],toAngle,toAngle) -> PaintArc;
#)

-- UIENVgraphicsDrawRaster: descriptor --
(# DrawBitMapInPort: external
		(# bitmapHandle: @integer;
			port: @integer;
			from,to,width,height: @integer;
		enter (bitmapHandle,port,from,to,width,height)
		#);
	fromP,toP: @macPoint;
	address: @integer;
	wp: @integer;
do	from -> fromP.setPoint;
	to -> toP.setPoint;
	r.lock;
	r.rasterAddress -> address;
	windowPointer -> wp;
	(address,wp,fromP,toP,width,height) -> DrawBitMapInPort;
	r.unlock;
#)

-- UIENVgraphicsPrivate: descriptor --
(#
#)

-- UIENVgraphicsBody: descriptor --
(#
do	focus
		(#
		do PenNormal;
			inner graphics;
		#);
#)

--]]
