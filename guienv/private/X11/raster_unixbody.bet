ORIGIN '../rasterbody';
[[
-- Include '~beta/Xt/v1.8/xlib'
-- Include '~beta/basiclib/v1.4/file'
-- Include 'deviceinfo'

-- rasterLib: attributes --
initDeviceInfo:
  (# 
  do (if rasterprivatePart.theDeviceInfo[]//none then
         deviceInfo## -> objectPool.strucGet -> rasterPrivatePart.theDeviceInfo[];
     if);
  #);

-- GUIENVrasterInit: descriptor --
(# 
do width -> rasterprivatePart.width;
   height -> rasterprivatePart.height;
   initDeviceInfo;
   inner init;
#)

-- GUIENVrasterDispose: descriptor --
(#
do inner dispose;
#)

-- GUIENVrasterWidth: descriptor --
(#
do rasterprivatepart.width -> value;
#)

-- GUIENVrasterHeight: descriptor --
(#
do rasterprivatepart.height -> value;
#)

-- GUIENVrasterSetHotspot: descriptor --
(#
do p -> rasterprivatepart.hotspot;
#)

-- GUIENVrasterGetHotspot: descriptor --
(#
do rasterprivatepart.hotspot -> p;
#)

-- GUIENVrasterPutPixel: descriptor --
(#
do 
   inner putPixel;
#)

-- GUIENVrasterGetPixel: descriptor --
(#
do inner getPixel;
#)

-- GUIENVrasterCopy: descriptor --
(#
do inner copy;
#)

-- GUIENVrasterPrivatePart: descriptor --
(# width, height: @integer;
   hotspot: @point;
   theDeviceInfo: ^deviceInfo;
   xpixmap: @integer;
#)


-- GUIENVbitmapReadFromPBMFile: descriptor --
(#
   
   
#)

-- GUIENVbitmapWriteToX11file: descriptor --
(# 
do 
#)

-- GUIENVbitmapReadFromX11file: descriptor --
(# dpy, root: @integer;
   width, height, bmap: @integer;
   status: @integer;
do initDeviceInfo;
   (if filename[]//NONE then (failuretrace, 'FileToBitmap: filename is NONE')->stop; if);
   rasterprivatepart.theDeviceInfo.display -> dpy;
   dpy -> XDefaultRootWindow -> root;
   (dpy,root,filename,@@width,@@height,@@bmap,0,0)
   -> XReadBitmapFile -> status;
   (if status
    // XBitmapOpenFailed then
       'Cannot open bitmap file '->puttext; filename[]->putline; 
    // XBitmapFileInvalid then
       filename[]->puttext;
       ' is not a valid bitmap file' -> putline;
    // XBitmapNoMemory then
       'Not enough memory to hold bitmap file '->puttext;
       filename[] -> putline;
    // XBitmapSuccess then
       bmap -> rasterprivatepart.xpixmap;
       width -> rasterprivatepart.width;
       height -> rasterprivatepart.height;
   if);
#)

-- GUIENVbitmapInit: descriptor --
(#
do (* Dispose old data if needed if needed *)
   (if rasterprivatePart.xpixmap<>0//True
       then dispose;
   if);
   
#)

-- GUIENVbitmapDispose: descriptor --
(#
do inner dispose;
   (rasterPrivatePart.theDeviceInfo.display, rasterprivatePart.xpixmap)
     -> XFreePixmap;
   0 -> rasterprivatePart.xpixmap;
#)

-- GUIENVbitmapPutPixel: descriptor --
(# 
do inner putPixel;
#)

-- GUIENVbitmapGetPixel: descriptor --
(#
do (* ... *)
   inner getPixel;
#)

-- GUIENVbitMapCopy: descriptor --
(# b: ^BitMap;
do inner copy;
#)

-- GUIENVbitmapWriteToPBMFile: descriptor --
(#
do (* ... *)
#)



-- GUIENVbitmapPrivatePart: descriptor --
(#
   
#)

-- GUIENVgraymapInitBody: descriptor --
(#
do (* ... *) inner init;
#)

-- GUIENVgrayMapDispose: descriptor --
(#
do (* ... *)inner dispose;
#)

-- GUIENVgraymapPutPixel: descriptor --
(#
do (* ... *) inner putPixel;
#)

-- GUIENVgraymapGetPixel: descriptor --
(#
do (* ... *) inner getPixel;
#)

-- GUIENVgraymapCopy: descriptor --
(#
do (* ... *) inner Copy;
#)

-- GUIENVgraymapWriteToPGMfile: descriptor --
(#
do (* ... *) 
#)

-- GUIENVgraymapReadFromPGMfile: descriptor --
(#
do (* ... *)
#)

-- GUIENVgraymapPrivatePart: descriptor --
(#
#)

-- GUIENVinitPixmap: descriptor --
(#
do inner init;
#)

-- GUIENVpixmapDispose: descriptor --
(#
do inner dispose;
#)

-- GUIENVpixmapPutPixel: descriptor --
(# 
do inner putPixel;
#)

-- GUIENVpixmapGetPixel: descriptor --
(#
do inner getPixel;
#)

-- GUIENVpixmapCopy: descriptor --
(# 
do inner copy;
#)

-- GUIENVpixmapWriteToPPMfile: descriptor --
(#
do
#)

-- GUIENVpixmapReadFromPPMfile: descriptor --
(#
   
#)



-- GUIENVpixmapWriteToX11file: descriptor --
(# 
do (* ... *)
#)

-- GUIENVpixmapReadFromX11file: descriptor --
(#  dpy, root: @integer;
   width, height, bmap: @integer;
   status: @integer;
do initDeviceInfo;
   (if X11filename[]//NONE then (failuretrace, 'FileToBitmap: X11filename is NONE')->stop; if);
   rasterprivatepart.theDeviceInfo.display -> dpy;
   dpy -> XDefaultRootWindow -> root;
   (dpy,root,X11filename,@@width,@@height,@@bmap,0,0)
   -> XReadBitmapFile -> status;
   (if status
    // XBitmapOpenFailed then
       'Cannot open bitmap file '->puttext; X11filename[]->putline; 
    // XBitmapFileInvalid then
       X11filename[]->puttext;
       ' is not a valid bitmap file' -> putline;
    // XBitmapNoMemory then
       'Not enough memory to hold bitmap file '->puttext;
       X11filename[] -> putline;
    // XBitmapSuccess then
       bmap -> rasterprivatepart.xpixmap;
       width -> rasterprivatepart.width;
       height -> rasterprivatepart.height;
   if);
#)

-- GUIENVpixmapPrivatePart: descriptor --
(# 
#)

-- GUIENVcPixmapInitBody: descriptor --
(#
do (* ... *) inner init;
#)

-- GUIENVcPixmapDispose: descriptor --
(#
do (* ... *) inner dispose;
#)

-- GUIENVcPixmapPutPixel: descriptor --
(#
do (* ... *) inner putPixel;
#)

-- GUIENVcPixmapGetPixel: descriptor --
(#
do (* ... *) inner getPixel;
#)

-- GUIENVcPixmapCopy: descriptor --
(#
do (* ... *) inner copy;
#)

-- GUIENVcPixmapWriteToPPMfile: descriptor --
(#
do (* ... *);
#)

-- GUIENVcPixmapReadFromPPMfile: descriptor --
(#
do (* ... *);
#)

-- GUIENVcPixmapPrivatePart: descriptor --
(#
#)

--]]
