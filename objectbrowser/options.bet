ORIGIN '~beta/basiclib/v1.5/betaenv';

(* OPTIONS
 * =======
 * 
 * This fragment defines the optionDB pattern used to communicate options
 * to the viewers in an objectbrowser. The global optionDB is fetched from
 * the objectPool, and an application wanting control of the default contents
 * of the global optionDB should thus insert an instance of optionDB into
 * objectPool before using objectviews that may access the global optionDB
 * using "getOptionDB". *)

BODY 'private/optionsbody';

--- lib: attributes ---

getOptionDB: objectPool.get
  (# type::< optionDB; init::< (# do obj.init; INNER #)#);

optionDB:
  (# setoption: (# name: ^Text enter name[] do INNER #);
     getoption: 
       (# found:< Object;
          notfound:< Object;
          name: ^Text;
       enter name[]
       do INNER
       #);
                   
     setBooleanOption: setoption
       (# value: @Boolean
       enter value
       <<SLOT optionDBsetBooleanOption:dopart>>
       #);
     getBooleanOption: getoption
       (# found::< (# value: @Boolean enter value do INNER #);
       <<SLOT optionDBgetBooleanOption:dopart>>
       #);
     
     setTextOption: setoption
       (# value: ^Text
       enter value[]
       <<SLOT optionDBsetTextOption:dopart>>
       #);
     getTextOption: getoption
       (# found::< (# value: ^Text enter value[] do INNER #);
       <<SLOT optionDBgetTextOption:dopart>>
       #);
     
     setIntegerOption: setoption
       (# value: @Integer
       enter value
       <<SLOT optionDBsetIntegerOption:dopart>>
       #);
     getIntegerOption: getoption
       (# found::< (# value: @Integer enter value do INNER #);
       <<SLOT optionDBgetIntegerOption:dopart>>
       #);
     
     init: (# <<SLOT optionDBinit:dopart>> #);
     
     optionDBprivate: @<<SLOT optionDBprivate: descriptor>>
  #);
