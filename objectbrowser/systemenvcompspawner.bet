ORIGIN '~beta/basiclib/v1.6/basicsystemenv';
INCLUDE 'coroutinespawner';


--- systemlib:attributes ---

systemenvspawner: coroutinespawner
  (# spawnimpl::
       (# s: @|system (# do thespawn #);
       do s[]->fork;
       #);
     pause:: (# do systemenvpause #);
     sleep:: (# do ticks/1000->systemenvsleep #);
     kill:: (# do systemenvkill #);
     semaphore::
       (# sem: @systemenvsemaphore;
          V:: (# do sem.V #);
          P:: (# do sem.P #);
       #);
     init:
       (# #);
  #);

systemenvpause: (# do pause #);
systemenvsleep: (# enter sleep #);
systemenvkill: (# do theActive[]->kill #);
systemenvsemaphore: semaphore (# #);


   
