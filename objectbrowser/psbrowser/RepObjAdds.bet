ORIGIN '~beta/objectserver/v2.4/RepetitionObject';

--- RepetitionObjectAttributes:attributes ---
memmove: external
  (# adrTarget: @Integer;
     adrSource: @Integer;
     byteCount: @Integer;
     out: @Integer;
  enter (adrTarget, adrSource, byteCount)
  exit out
  #);


insertSpace:
  (# frominx,nlongs: @Integer;
  enter (frominx,nlongs)
  do 
     (if r.range-size-1 < nlongs then (* -1 added  Jun 26 1995 by Anders *)
	     (nlongs,r.range)->max->r.extend;
     if);     
     (@@r[frominx+nlongs],@@r[frominx],(size-frominx+1)*4)->memmove;
     nlongs+size->size;
     (for i:nlongs repeat 0->r[frominx+i-1] for);
  #);

removeSpace:
  (# frominx,nlongs: @Integer;
  enter (frominx,nlongs)
  do 
     (@@r[frominx],@@r[frominx+nlongs],(size-(frominx+nlongs)+1)*4)->memmove;
     size-nlongs->size;
     (pos,size+1)->min->pos;
  #);
