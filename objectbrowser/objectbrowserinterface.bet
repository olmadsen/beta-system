ORIGIN '~beta/guienv/guienv';
INCLUDE 'windowedbrowser'
        '~beta/basiclib/formatio'
        '~beta/toollibs/utils/optionlist'
        '~beta/toollibs/UI/icons'
        '~beta/toollibs/UI/iconlist';
BODY 'private/objectbrowserinterfacebody';
-- lib: Attributes --
initialBrowserSize: (#  exit (600,400) #)  

(* When making an instance of the objectBrowserInterface pattern, the
 * user can furtherbind the following virtuals to customise the behaviour
 * of the objectbrowser
 * 
 * objworld 
 *    is the canvas wherein the graphical representaion of objects are 
 *    displayed
 * info 
 *    is an info field at the bottom of the window
 * browser 
 *    contains the main functionality such as mps interface and
 *    a virtual for determining which type of objectview should be used
 * icons
 *    defines which icons are used in the objworld
 * 
 * For examples of usage see:
 * 
 * demo/browser.bet
 * demo/dynamicCompilation.bet
 *)
-- guienvLib: Attributes --
objectBrowserInterface: window
  (#
     clr: @rectangle;
     clearInProgress: @Boolean;
     objworld:< Canvas
       (#
          open::< 
            (# sz: @Point; tmp: @Point;  <<SLOT objworldOpen:DoPart>> #);
          eventHandler::< 
            (#
               onMouseDown::< 
                 (# 
                 <<SLOT objWorldOnMouseDown:DoPart>>
                 #);
               
            #);
          
       #);
     theObjworld: @objworld;
     info:< staticText
       (#
          open::< 
            (# sz: @Point; ts: ^TextStyle; pos: @Point; 
            <<SLOT infoOpen:DoPart>>
            #);
          
       #);
     theInfo: @info;
     browser:< windowedbrowser
       (#
          init::< 
            (# options: ^optionDB; 
            <<SLOT browserInit:DoPart>>
            #);
          mpsinterfaceType::<
           
            (#
               onOpenGroup::< 
                 (# t: ^Text;  <<SLOT browserOnOpenGroup:DoPart>> #);
               onOpenGroupDone::< 
                 (# 
                 <<SLOT browserOnOpenGroupDone:DoPart>>
                 #);
               onOldGroup::<  (#  <<SLOT browserOnOldGroup:DoPart>> #);
               onGroupNotFound::< 
                 (# 
                 <<SLOT browserOnGroupNotFound:DoPart>>
                 #);
               
            #);
          
       #);
     theBrowser: @browser;
     myIcons: @icons;
     icons:< iconDB
       (#
          movIcon: ^pixmap;
          getIcon::<  (#  <<SLOT iconsGetIcon:DoPart>> #);
       #);
     menuBarType::< 
       (#
          theFileMenu: @fileMenu;
          fileMenu:< Menu
            (#
               closeItem: @<<SLOT OBIcloseItem:Descriptor>>;
               quitItem:
                 @<<SLOT OBIquitItem:Descriptor>>;
               open::<  (#  <<SLOT OBIfileMenuOpen:DoPart>> #);
               
            #);
          open::< 
            (# 
            <<SLOT OBImenubarOpen:DoPart>>
            #)
       #);
     open::< 
       (# 
       <<SLOT OBIopen:DoPart>>
       #)
  #)  

