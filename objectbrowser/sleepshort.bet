ORIGIN '~beta/basiclib/v1.5/basicsystemenv';
MDBODY mac 'private/sleepshort_macbody'
       ppc 'private/sleepshort_macbody'
       ppcmac 'private/sleepshort_macbody'
       nti 'private/sleepshort_ntibody'
       default 'private/sleepshort_x11body';
INCLUDE '~beta/containers/v1.5/list';
-- systemlib: Attributes --
shortsleeper:
  (#
  (* Using basicsystemenv's sleep cababillity it is only possible to 
   * sleep in a period divideble by seconds. Thus the shortest period
   * supported is 1 second. This is not enough and this pattern try'es
   * to remidy this shortcomming.  
   *     The UNIX-implementation is not directly portable to NTI. As a quick
   * solution to this problem the NTI-sleeper implementation simply calls
   * the slep-facillity of basicsystemenv. Regardless of any arguments
   * the process will allways sleep 1 second. *)
     sleepers: @List
       (# element:: (# id: @Integer; sem: @semaphore;  #) #);
     sleep:
       (# ticks: @Integer; new: ^sleepers.element; 
       enter ticks
       <<SLOT sleepshortsleep:DoPart>>
       #);
     init:
       (#  <<SLOT sleepshortinit:DoPart>> #);
     ssprivate:
       @<<SLOT sleepshortprivate:Descriptor>>;
     
  #)  

