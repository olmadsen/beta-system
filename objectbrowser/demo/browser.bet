ORIGIN '~beta/guienv/guienv';
INCLUDE '~beta/guienv/fields'
        '~beta/sysutils/envstring'
        '~beta/objectbrowser/objectbrowserinterface';
-- lib: Attributes --
initialMAINsize: (#  exit (600,400) #);
breakpoint: external (# objAdr: @Integer enter objAdr #);
  

-- program: Descriptor --
guienv
  (#
     theBrowser: @standaloneBrowser
       (#
          menubarType:: 
            (#
               browserMenu: @Menu
                 (#
                    newItem: @menuitem
                      (#
                         open::  (#  do 'New Object'->name; 'N'->key #);
                         eventHandler:: 
                           (#
                              onSelect::< 
                                (# h: ^humle; 
                                do
                                   &humle[]->h[];
                                   (10,'a',5,TRUE,4.5,theBrowser[])->h;
                                   h[]->theBrowser.showObject;
                                   
                                #)
                           #)
                      #);
                    open:: 
                      (# 
                      do 'Browse'->name; newItem.open; newItem[]->append
                      #)
                 #);
               open::  (#  do browserMenu.open; browserMenu[]->append #)
            #)
       #);
     mycomp: (# index: @Integer;  do SUSPEND;  #);
     myvirt:< IntegerObject;
     myslot: <<SLOT myslot:Descriptor>>;
     humle: IntegerObject
       (#
          c: @Char;
          s: @ShortInt;
          obj: @IntegerObject;
          b: @Boolean;
          i8:@int8;
          i16:@int16;
          i32:@int32;
          i64:@int64;
          r: @Real;
          ref: ^Object;
          t: @Text;
          p: ##Object;
          pNone: ##Object;
          orep: [10] ^Object;
          prep: [10] ##Object;
          stat: [10] @Text;
          cstat: [10] @|mycomp;
          slotobj: @<<SLOT myslot4:Descriptor>>;
          slotstat: [10]
          @myslot;
          virtstat: [10] @myvirt;
          slot2stat: [10] @<<SLOT myslot2:Descriptor>>;
          cslotstat: [10] @|myslot;
          csirtstat: [10] @|myvirt;
          cslot2stat: [10] @|<<SLOT myslot3:Descriptor>>;
          rr: [50] @Real;
          ir: [50] @Integer;
          dims: ^Object;
          
       enter (c,s,b,r,ref[])
       do
          'dette er en humle '->t;
          (for i: 50 repeat i->ir[i] for);
          (for i: 50 repeat i->rr[i] for);
          (for i: 10 repeat
            THIS(humle)[]->orep[i][]
          for);
          (for i: 5 repeat
            theBrowser##->prep[i]##
          for);
          humle##->p##;
          & (#  #)[]->dims[];
          127->i8;(* test localdumper on new types /gram *)
          32->i16;
          3242->i32;
          64->i64;
       #);
     
  do theBrowser.open
  #)  

-- myslot: Descriptor --
(# dyt: @integer;  do 'myslot'->putline;  #)  

-- myslot2: Descriptor --
(# dyt2: @integer;  do 'myslot 2'->putline;  #)  

-- myslot3: Descriptor --
(# baat: @integer;  do 'myslot 3'->putline;  #)  

-- myslot4: Descriptor --
(# honk: @integer;  do 'myslot 4'->putline;  #)  

