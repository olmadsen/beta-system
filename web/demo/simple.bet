ORIGIN '../webservice';
-- program: descriptor --
SystemEnv
  (# theWebService: @BasicWebService
       (# dispatch::
            (#
            do '-- REQUEST -- ' -> putLine;
               request.method[] -> putText;
               ': ' -> putText;
               request.path[] -> putLine;
               '-- HEADERS --' -> putLine;
               request.headers.scanAssociations
                 (#
                 do k[] -> putText;
                    ': ' -> putText;
                    e[] -> putLine; 
                 #);

               (if request.query[] <> NONE then
                  '-- QUERY --' -> putLine;
                  request.query.scanAssociations
                    (#
                    do k[] -> putText;
                       ': ' -> putText;
                       e.scan
                         (#
                         do current[] -> putText;
                            ' ' -> putText;
                         #);
                       newLine;
                    #);
               if);
               newline;

               &HttpResponse[] -> response[];
               200 -> response.status;
               'OK' -> response.message[];
               'Hello, World!' -> response.body[];
               'text/plain' -> response.contentType[];
            #);
       #);
  do 7913 -> theWebService.init;
     cycle 
       (#
       do theWebService.accept;
       #);
  #)
