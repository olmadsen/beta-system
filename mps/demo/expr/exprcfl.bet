ORIGIN '~beta/mps/v5.0.1/astlevel'
--- astInterfaceLib: attributes---

expr:  TreeLevel
(#
stat: cons(#   <<SLOT statAttributes:attributes>>
#);

expression: cons(#   <<SLOT expressionAttributes:attributes>>
#);

term: expression(# #);

factor: term(# #);

MultOperator: cons(# #);

AddOperator: cons(# #);

assignment: stat
(#
  getname: getson1(##);
  putname: putson1(##);
  getexpression: getson2(##);
  putexpression: putson2(##);
exit 2 #);

evalStatement: stat
(#
  getexpression: getson1(##);
  putexpression: putson1(##);
exit 3 #);

quit: stat
(#
exit 4 #);

bracketExpression: factor
(#
  getexpression: getson1(##);
  putexpression: putson1(##);
exit 8 #);

MultExpression: term
(#
  getOperand1: getson1(##);
  putOperand1: putson1(##);
  getMultOperator: getson2(##);
  putMultOperator: putson2(##);
  getOperand2: getson3(##);
  putOperand2: putson3(##);
exit 9 #);

AddExpression: expression
(#
  getOperand1: getson1(##);
  putOperand1: putson1(##);
  getAddOperator: getson2(##);
  putAddOperator: putson2(##);
  getOperand2: getson3(##);
  putOperand2: putson3(##);
exit 10 #);

Number: factor
(#
  getConst: getson1(##);
  putConst: putson1(##);
exit 13 #);

Variable: factor
(#
  getNameAppl: getson1(##);
  putNameAppl: putson1(##);
exit 14 #);

TimesOp: MultOperator
(#
exit 15 #);

DivOp: MultOperator
(#
exit 16 #);

ModOp: MultOperator
(#
exit 17 #);

plusOp: AddOperator
(#
exit 18 #);

minusOp: AddOperator
(#
exit 19 #);

  grammarIdentification::< (# do 'expr' -> theGrammarName #);

  version::< (# do -1 -> value #);

  suffix::< (# do '.text' -> theSuffix #);

  maxproductions::< (# do 19 -> value #);
 
dcAtt: @<<SLOT dcAtt: descriptor>>;

  init::<
(#
do
  &(# do 
    2 -> kindArray[1]; 2 -> roomArray[1]; 0 -> sonArray[1]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[1][];
    1 -> kindArray[2]; 0 -> roomArray[2]; 2 -> sonArray[2]; 
    &referenceGenerator(# do &assignment[] -> as[] #)[] -> genRefArray[2][];
    1 -> kindArray[3]; 0 -> roomArray[3]; 1 -> sonArray[3]; 
    &referenceGenerator(# do &evalStatement[] -> as[] #)[] -> genRefArray[3][];
    1 -> kindArray[4]; 0 -> roomArray[4]; 0 -> sonArray[4]; 
    &referenceGenerator(# do &quit[] -> as[] #)[] -> genRefArray[4][];
    2 -> kindArray[5]; 2 -> roomArray[5]; 0 -> sonArray[5]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[5][];
    2 -> kindArray[6]; 2 -> roomArray[6]; 0 -> sonArray[6]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[6][];
    2 -> kindArray[7]; 2 -> roomArray[7]; 0 -> sonArray[7]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[7][];
    1 -> kindArray[8]; 0 -> roomArray[8]; 1 -> sonArray[8]; 
    &referenceGenerator(# do &bracketExpression[] -> as[] #)[] -> genRefArray[8][];
    1 -> kindArray[9]; 0 -> roomArray[9]; 3 -> sonArray[9]; 
    &referenceGenerator(# do &MultExpression[] -> as[] #)[] -> genRefArray[9][];
    1 -> kindArray[10]; 0 -> roomArray[10]; 3 -> sonArray[10]; 
    &referenceGenerator(# do &AddExpression[] -> as[] #)[] -> genRefArray[10][];
    2 -> kindArray[11]; 2 -> roomArray[11]; 0 -> sonArray[11]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[11][];
    2 -> kindArray[12]; 2 -> roomArray[12]; 0 -> sonArray[12]; 
    &referenceGenerator(# do &unExpanded[] -> as[] #)[] -> genRefArray[12][];
    1 -> kindArray[13]; 0 -> roomArray[13]; 1 -> sonArray[13]; 
    &referenceGenerator(# do &Number[] -> as[] #)[] -> genRefArray[13][];
    1 -> kindArray[14]; 0 -> roomArray[14]; 1 -> sonArray[14]; 
    &referenceGenerator(# do &Variable[] -> as[] #)[] -> genRefArray[14][];
    1 -> kindArray[15]; 0 -> roomArray[15]; 0 -> sonArray[15]; 
    &referenceGenerator(# do &TimesOp[] -> as[] #)[] -> genRefArray[15][];
    1 -> kindArray[16]; 0 -> roomArray[16]; 0 -> sonArray[16]; 
    &referenceGenerator(# do &DivOp[] -> as[] #)[] -> genRefArray[16][];
    1 -> kindArray[17]; 0 -> roomArray[17]; 0 -> sonArray[17]; 
    &referenceGenerator(# do &ModOp[] -> as[] #)[] -> genRefArray[17][];
    1 -> kindArray[18]; 0 -> roomArray[18]; 0 -> sonArray[18]; 
    &referenceGenerator(# do &plusOp[] -> as[] #)[] -> genRefArray[18][];
    1 -> kindArray[19]; 0 -> roomArray[19]; 0 -> sonArray[19]; 
    &referenceGenerator(# do &minusOp[] -> as[] #)[] -> genRefArray[19][];
  #)
#);
#); 
