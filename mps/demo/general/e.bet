ORIGIN '~beta/mps/v5.1/astlevel'
--- program: descriptor ---
(# (* this program demonstrates how to open a fragmentfile.  If the text
    * representation of the file is the newest, the file will be parsed up
    *)
   ast: @astInterface;
   fg: ^ast.fragmentGroup;
   fragmentName: ^text;
do (ast.trace.fragmentOpen,true) -> ast.trace.set;
   ast.astLevelInit; (* initialize astlevel *)
   &ast.findGrammar[] -> ast.grammarMissing[];  
   (* so we can find the grammars mentioned in
    * ~beta/grammars/v2.2/grammars.text
    *)
   (if NoOfArguments (* the commandline arguments *
    //2 then
       2 -> arguments -> fragmentName[]
    else
       'Parse what file ?'  -> screen.putText;
       keyBoard.getLine -> fragmentName[]
   if);
   fragmentName[] -> ast.top.open
   (# parseErrors::< (# do 'parse errors!' -> screen.putLine #);
      startingParsing::< (# do 'starting parsing!' -> screen.putLine #)
   #) -> fg[];
   fragmentName[] -> putText; 
   (if fg[]//NONE then
        'not found!' -> putLine
    else  'opened!' -> putLine
   if);
#)
