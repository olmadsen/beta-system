ORIGIN '~beta/mps/astlevel';
(* Program with errors used as argument for parser.bet *)
--- program: descriptor ---
(# ast: @astInterface;
   fg: ^ast.fragmentGroup;
   fragmentName: ^text;
do (ast.trace.fragmentOpen,true) -> ast.trace.set;
   ast.astLevelInit; (* initialize astlevel *)
   (* so we can find the grammars mentioned in
    * ~beta/grammars/v2.2/grammars.text
    *)
   (if NoOfArguments (* the commandline arguments *)
    //2 then
       2 -> arguments -> fragmentName[]
    else
       'Parse what file ?'  -> screen.putText;
       keyBoard.getLine -> fragmentName[]
   if);
   fragmentName[] -> ast.top.open
   (# parseErrors::< (# do 'parse errors!' -> screen.putLine #);
      startingParsing::< (# do 'starting parsing!' -> screen.putLine #)
   #) -> fg[];
   fragmentName[] -> putText;
   (if fg[]//NONE then
	'not found!' -> putLine
    else  'opened!' -> putLine
   if);
   <<SLOT xx:descriptor>>
#)
