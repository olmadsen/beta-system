ORIGIN 'astlevel';
(*
 * COPYRIGHT
 *       Copyright (C) Mjolner Informatics, 1986-93
 *       All rights reserved.
 *)
INCLUDE 'metagrammarcfl'; 
INCLUDE 'metagramsematt'; (* OLM: 2.4.93*)
BODY 'private/applGramBody'
--- astInterfaceLib:attributes ---
(* idx: 2 *)
applgram: treeLevel
  (# meta: ^metagrammar;
     pl: ^meta.productionList;
     grammarName,applGramSuffix: ^text;
     grammarIdentification::<
       (# do
          (if grammarName[]=NONE then NONE -> theGrammarName[]
           else grammarName -> theGrammarName
       if) #);
     suffix::< (# do applGramSuffix -> theSuffix; INNER #);
     (* impossible to define maxproductions to anything better before init
      * have been called
      *)
     version::<
       (# grammar: ^meta.Agrammar;
       do grammarAst.root[]->grammar[];
          ('version',undefinedversion)->grammar.getOptionValue->value;
          INNER
       #);
     init::< 
       (# do
          &text[]->applGramSuffix[];
          '.text' -> applGramSuffix;
          INNER; (* to be able to define grammarAst *)
          <<SLOT applGramInitBody:descriptor>>
       #);
  #); (* of applgram *)
