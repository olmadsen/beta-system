ORIGIN '../handle';
INCLUDE 'astPrivate';

-- handleGetHandle: dopart --
do &handleType[]->h[];
   h[]->private.handles.append

-- handleIgnoreHandle: dopart --
do h[]->private.handles.at->private.handles.delete

-- handleActivateHandle: dopart --
do (if not (h[]->private.handles.has) then h[]->private.handles.append if)

-- handleSignal: dopart --
do start;
   private.handles.scan (* abstract superpattern *)
     (# where::
	  (#
	  do this(signal).where and
	       not ((fg[],ff[],node[])->current.ignore)->value
	  #);
     do current[]->this(signal).current[]; INNER signal
     #)
