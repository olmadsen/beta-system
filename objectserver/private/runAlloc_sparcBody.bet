ORIGIN '../runAlloc';
(* 
 * $RCSfile: runAlloc_sparcBody.bet,v $
 * $Revision: 1.3 $ 
 * $Date: 1998-04-23 12:51:39 $
 *
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1992-94
 *       All rights reserved.
 *)
INCLUDE '~beta/sysutils/objinterface';

--- lib:attributes ---

CAlloRR: External
  (# theObj: @Integer;
     offset: @Integer;
     range: @Integer;
     theRep: @Integer;
     i1,i3,i4: @Integer;
  enter (theObj, i1, offset, i3, i4, range)
  exit theRep
  #);

CAlloVR1: External 
  (# theObj: @Integer;
     offset: @Integer;
     range: @Integer;
     theRep: @Integer;
     i1,i3,i4: @Integer;
  enter (theObj, i1, offset, i3, i4, range)
  exit theRep
  #);

CAlloVR2: External 
  (# theObj: @Integer;
     offset: @Integer;
     range: @Integer;
     theRep: @Integer;
     i1,i3,i4: @Integer;
  enter (theObj, i1, offset, i3, i4, range)
  exit theRep
  #);

CAlloVR4: External 
  (# theObj: @Integer;
     offset: @Integer;
     range: @Integer;
     theRep: @Integer;
     i1,i3,i4: @Integer;
  enter (theObj, i1, offset, i3, i4, range)
  exit theRep
  #);

CAlloVR8: External 
  (# theObj: @Integer;
     offset: @Integer;
     range: @Integer;
     theRep: @Integer;
     i1,i3,i4: @Integer;
  enter (theObj, i1, offset, i3, i4, range)
  exit theRep
  #);

CAlloS: External
  (# origin: @Integer;
     i1: @Integer;
     protoAdr: @Integer;
     i3, i4: @Integer;
     objAdr: @Integer;
  enter (origin, i1, protoAdr, i3, i4)
  exit objAdr
  #);

CAlloH: External
  (# origin: @Integer;
     i1: @Integer;
     protoAdr: @Integer;
     i3, i4: @Integer;
     objAdr: @Integer;
  enter (origin, i1, protoAdr, i3, i4)
  exit objAdr
  #);

--- allocByteRepBody:dopart ---
do (@@ori -> tos'%adrGetLong', 0, offset, 0, 0, high) -> CAlloVR1;
--- allocWordRepBody:dopart ---
do (@@ori -> tos'%adrGetLong', 0, offset, 0, 0, high) -> CAlloVR2;
--- allocValRepBody:dopart ---
do (@@ori -> tos'%adrGetLong', 0, offset, 0, 0, high) -> CAlloVR4;
--- allocDoubleRepBody:dopart ---
do (@@ori -> tos'%adrGetLong', 0, offset, 0, 0, high) -> CAlloVR8;
--- allocRefRepBody:dopart ---
do (@@ori -> tos'%adrGetLong', 0, offset, 0, 0, high) -> CAlloRR;

--- allocStructureBody:dopart ---
do (@@iOrigin -> tos'%adrGetLong', 0, iProto, 0, 0) -> CAlloS -> structAdr;
   ((@@obj -> tos'%adrGetLong') + offset, structAdr) -> AssignRef;

--- allocHeapBody:dopart ---
do 
   (0, 0, proto, 0, 0) -> CAlloH -> objAdr;
   (@@o, objAdr) -> assignRef;
