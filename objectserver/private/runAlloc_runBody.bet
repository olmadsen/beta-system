ORIGIN '../runAlloc';
(* 
 * $RCSfile: runAlloc_runBody.bet,v $ $Revision: 1.10 $ $Date: 2003-07-01 09:47:39 $
 *
 * COPYRIGHT
 *       Copyright Mjolner Informatics, 1992-94
 *       All rights reserved.
 *)

INCLUDE '~beta/sysutils/objinterface';
--- lib:attributes ---

DoAlloVR1: external
  (# obj,offset,range: @Integer;
  enter (obj,offset,range)
  #);
DoAlloVR2: external
  (# obj,offset,range: @Integer;
  enter (obj,offset,range)
  #);
DoAlloVR4: external
  (# obj,offset,range: @Integer;
  enter (obj,offset,range)
  #);
DoAlloVR8: external
  (# obj,offset,range: @Integer;
  enter (obj,offset,range)
  #);
DoAlloRR: external
  (# obj,offset,range: @Integer;
  enter (obj,offset,range)
  #);
DoAlloS: external
  (# origin, proto: @Integer;
     structAdr: @Integer;
  enter (origin,proto)
  exit structAdr
  #);
DoAlloH: external
  (# proto: @Integer;
     objAdr: @Integer;
  enter proto
  exit objAdr
  #);

--- allocByteRepBody:dopart ---
do ((%getLongAt(@@ori)), offset, high) -> DoAlloVR1;
(* Above line tos_converted from: do (@@ori -> tos'%adrGetLong', offset, high) -> DoAlloVR1; *)
--- allocWordRepBody:dopart ---
do ((%getLongAt(@@ori)), offset, high) -> DoAlloVR2;
(* Above line tos_converted from: do (@@ori -> tos'%adrGetLong', offset, high) -> DoAlloVR2; *)
--- allocValRepBody:dopart ---
do ((%getLongAt(@@ori)), offset, high) -> DoAlloVR4;
(* Above line tos_converted from: do (@@ori -> tos'%adrGetLong', offset, high) -> DoAlloVR4; *)
--- allocDoubleRepBody:dopart ---
do ((%getLongAt(@@ori)), offset, high) -> DoAlloVR8;
(* Above line tos_converted from: do (@@ori -> tos'%adrGetLong', offset, high) -> DoAlloVR8; *)
--- allocRefRepBody:dopart ---
do ((%getLongAt(@@ori)), offset, high) -> DoAlloRR;
(* Above line tos_converted from: do (@@ori -> tos'%adrGetLong', offset, high) -> DoAlloRR; *)
   
--- allocStructureBody:dopart ---
do 
   ((%getLongAt(@@iOrigin)), iProto) -> DoAlloS -> structAdr;
   (* Above line tos_converted from: (@@iOrigin -> tos'%adrGetLong', iProto) -> DoAlloS -> structAdr; *)
   ((%getLongAt(@@obj))) + offset -> fieldAdr;
   (* Above line tos_converted from: (@@obj -> tos'%adrGetLong') + offset -> fieldAdr; *)
   (fieldAdr, structAdr) -> assignRef;
   
--- allocHeapBody:dopart ---
do proto -> DoAlloH -> objAdr;
   (@@o, objAdr) -> assignRef;
